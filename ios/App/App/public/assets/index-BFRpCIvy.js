(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();function Ww(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var D1={exports:{}},zc={},M1={exports:{}},fe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var La=Symbol.for("react.element"),Vw=Symbol.for("react.portal"),Hw=Symbol.for("react.fragment"),Gw=Symbol.for("react.strict_mode"),Kw=Symbol.for("react.profiler"),qw=Symbol.for("react.provider"),Yw=Symbol.for("react.context"),Jw=Symbol.for("react.forward_ref"),Qw=Symbol.for("react.suspense"),Xw=Symbol.for("react.memo"),Zw=Symbol.for("react.lazy"),hm=Symbol.iterator;function eb(e){return e===null||typeof e!="object"?null:(e=hm&&e[hm]||e["@@iterator"],typeof e=="function"?e:null)}var F1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},U1=Object.assign,z1={};function qi(e,t,r){this.props=e,this.context=t,this.refs=z1,this.updater=r||F1}qi.prototype.isReactComponent={};qi.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};qi.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function B1(){}B1.prototype=qi.prototype;function gf(e,t,r){this.props=e,this.context=t,this.refs=z1,this.updater=r||F1}var yf=gf.prototype=new B1;yf.constructor=gf;U1(yf,qi.prototype);yf.isPureReactComponent=!0;var fm=Array.isArray,W1=Object.prototype.hasOwnProperty,xf={current:null},V1={key:!0,ref:!0,__self:!0,__source:!0};function H1(e,t,r){var n,s={},i=null,a=null;if(t!=null)for(n in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(i=""+t.key),t)W1.call(t,n)&&!V1.hasOwnProperty(n)&&(s[n]=t[n]);var l=arguments.length-2;if(l===1)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)s[n]===void 0&&(s[n]=l[n]);return{$$typeof:La,type:e,key:i,ref:a,props:s,_owner:xf.current}}function tb(e,t){return{$$typeof:La,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function vf(e){return typeof e=="object"&&e!==null&&e.$$typeof===La}function rb(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var pm=/\/+/g;function Wu(e,t){return typeof e=="object"&&e!==null&&e.key!=null?rb(""+e.key):t.toString(36)}function Vl(e,t,r,n,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case La:case Vw:a=!0}}if(a)return a=e,s=s(a),e=n===""?"."+Wu(a,0):n,fm(s)?(r="",e!=null&&(r=e.replace(pm,"$&/")+"/"),Vl(s,t,r,"",function(u){return u})):s!=null&&(vf(s)&&(s=tb(s,r+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(pm,"$&/")+"/")+e)),t.push(s)),1;if(a=0,n=n===""?".":n+":",fm(e))for(var l=0;l<e.length;l++){i=e[l];var c=n+Wu(i,l);a+=Vl(i,t,r,c,s)}else if(c=eb(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=n+Wu(i,l++),a+=Vl(i,t,r,c,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function fl(e,t,r){if(e==null)return e;var n=[],s=0;return Vl(e,n,"","",function(i){return t.call(r,i,s++)}),n}function nb(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var At={current:null},Hl={transition:null},sb={ReactCurrentDispatcher:At,ReactCurrentBatchConfig:Hl,ReactCurrentOwner:xf};function G1(){throw Error("act(...) is not supported in production builds of React.")}fe.Children={map:fl,forEach:function(e,t,r){fl(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return fl(e,function(){t++}),t},toArray:function(e){return fl(e,function(t){return t})||[]},only:function(e){if(!vf(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};fe.Component=qi;fe.Fragment=Hw;fe.Profiler=Kw;fe.PureComponent=gf;fe.StrictMode=Gw;fe.Suspense=Qw;fe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sb;fe.act=G1;fe.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=U1({},e.props),s=e.key,i=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,a=xf.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)W1.call(t,c)&&!V1.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:La,type:e.type,key:s,ref:i,props:n,_owner:a}};fe.createContext=function(e){return e={$$typeof:Yw,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:qw,_context:e},e.Consumer=e};fe.createElement=H1;fe.createFactory=function(e){var t=H1.bind(null,e);return t.type=e,t};fe.createRef=function(){return{current:null}};fe.forwardRef=function(e){return{$$typeof:Jw,render:e}};fe.isValidElement=vf;fe.lazy=function(e){return{$$typeof:Zw,_payload:{_status:-1,_result:e},_init:nb}};fe.memo=function(e,t){return{$$typeof:Xw,type:e,compare:t===void 0?null:t}};fe.startTransition=function(e){var t=Hl.transition;Hl.transition={};try{e()}finally{Hl.transition=t}};fe.unstable_act=G1;fe.useCallback=function(e,t){return At.current.useCallback(e,t)};fe.useContext=function(e){return At.current.useContext(e)};fe.useDebugValue=function(){};fe.useDeferredValue=function(e){return At.current.useDeferredValue(e)};fe.useEffect=function(e,t){return At.current.useEffect(e,t)};fe.useId=function(){return At.current.useId()};fe.useImperativeHandle=function(e,t,r){return At.current.useImperativeHandle(e,t,r)};fe.useInsertionEffect=function(e,t){return At.current.useInsertionEffect(e,t)};fe.useLayoutEffect=function(e,t){return At.current.useLayoutEffect(e,t)};fe.useMemo=function(e,t){return At.current.useMemo(e,t)};fe.useReducer=function(e,t,r){return At.current.useReducer(e,t,r)};fe.useRef=function(e){return At.current.useRef(e)};fe.useState=function(e){return At.current.useState(e)};fe.useSyncExternalStore=function(e,t,r){return At.current.useSyncExternalStore(e,t,r)};fe.useTransition=function(){return At.current.useTransition()};fe.version="18.3.1";M1.exports=fe;var b=M1.exports;const Gl=Ww(b);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ib=b,ob=Symbol.for("react.element"),ab=Symbol.for("react.fragment"),lb=Object.prototype.hasOwnProperty,cb=ib.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ub={key:!0,ref:!0,__self:!0,__source:!0};function K1(e,t,r){var n,s={},i=null,a=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(a=t.ref);for(n in t)lb.call(t,n)&&!ub.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)s[n]===void 0&&(s[n]=t[n]);return{$$typeof:ob,type:e,key:i,ref:a,props:s,_owner:cb.current}}zc.Fragment=ab;zc.jsx=K1;zc.jsxs=K1;D1.exports=zc;var o=D1.exports,Dd={},q1={exports:{}},nr={},Y1={exports:{}},J1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(R,B){var H=R.length;R.push(B);e:for(;0<H;){var U=H-1>>>1,F=R[U];if(0<s(F,B))R[U]=B,R[H]=F,H=U;else break e}}function r(R){return R.length===0?null:R[0]}function n(R){if(R.length===0)return null;var B=R[0],H=R.pop();if(H!==B){R[0]=H;e:for(var U=0,F=R.length,de=F>>>1;U<de;){var pe=2*(U+1)-1,Ne=R[pe],T=pe+1,_=R[T];if(0>s(Ne,H))T<F&&0>s(_,Ne)?(R[U]=_,R[T]=H,U=T):(R[U]=Ne,R[pe]=H,U=pe);else if(T<F&&0>s(_,H))R[U]=_,R[T]=H,U=T;else break e}}return B}function s(R,B){var H=R.sortIndex-B.sortIndex;return H!==0?H:R.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var a=Date,l=a.now();e.unstable_now=function(){return a.now()-l}}var c=[],u=[],d=1,f=null,h=3,m=!1,x=!1,w=!1,k=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(R){for(var B=r(u);B!==null;){if(B.callback===null)n(u);else if(B.startTime<=R)n(u),B.sortIndex=B.expirationTime,t(c,B);else break;B=r(u)}}function v(R){if(w=!1,y(R),!x)if(r(c)!==null)x=!0,D(N);else{var B=r(u);B!==null&&we(v,B.startTime-R)}}function N(R,B){x=!1,w&&(w=!1,g(C),C=-1),m=!0;var H=h;try{for(y(B),f=r(c);f!==null&&(!(f.expirationTime>B)||R&&!$());){var U=f.callback;if(typeof U=="function"){f.callback=null,h=f.priorityLevel;var F=U(f.expirationTime<=B);B=e.unstable_now(),typeof F=="function"?f.callback=F:f===r(c)&&n(c),y(B)}else n(c);f=r(c)}if(f!==null)var de=!0;else{var pe=r(u);pe!==null&&we(v,pe.startTime-B),de=!1}return de}finally{f=null,h=H,m=!1}}var E=!1,A=null,C=-1,P=5,L=-1;function $(){return!(e.unstable_now()-L<P)}function Q(){if(A!==null){var R=e.unstable_now();L=R;var B=!0;try{B=A(!0,R)}finally{B?ee():(E=!1,A=null)}}else E=!1}var ee;if(typeof p=="function")ee=function(){p(Q)};else if(typeof MessageChannel<"u"){var ue=new MessageChannel,he=ue.port2;ue.port1.onmessage=Q,ee=function(){he.postMessage(null)}}else ee=function(){k(Q,0)};function D(R){A=R,E||(E=!0,ee())}function we(R,B){C=k(function(){R(e.unstable_now())},B)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(R){R.callback=null},e.unstable_continueExecution=function(){x||m||(x=!0,D(N))},e.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<R?Math.floor(1e3/R):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(R){switch(h){case 1:case 2:case 3:var B=3;break;default:B=h}var H=h;h=B;try{return R()}finally{h=H}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(R,B){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var H=h;h=R;try{return B()}finally{h=H}},e.unstable_scheduleCallback=function(R,B,H){var U=e.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?U+H:U):H=U,R){case 1:var F=-1;break;case 2:F=250;break;case 5:F=1073741823;break;case 4:F=1e4;break;default:F=5e3}return F=H+F,R={id:d++,callback:B,priorityLevel:R,startTime:H,expirationTime:F,sortIndex:-1},H>U?(R.sortIndex=H,t(u,R),r(c)===null&&R===r(u)&&(w?(g(C),C=-1):w=!0,we(v,H-U))):(R.sortIndex=F,t(c,R),x||m||(x=!0,D(N))),R},e.unstable_shouldYield=$,e.unstable_wrapCallback=function(R){var B=h;return function(){var H=h;h=B;try{return R.apply(this,arguments)}finally{h=H}}}})(J1);Y1.exports=J1;var db=Y1.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hb=b,Xt=db;function O(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Q1=new Set,ra={};function Rs(e,t){Ti(e,t),Ti(e+"Capture",t)}function Ti(e,t){for(ra[e]=t,e=0;e<t.length;e++)Q1.add(t[e])}var un=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Md=Object.prototype.hasOwnProperty,fb=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,mm={},gm={};function pb(e){return Md.call(gm,e)?!0:Md.call(mm,e)?!1:fb.test(e)?gm[e]=!0:(mm[e]=!0,!1)}function mb(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function gb(e,t,r,n){if(t===null||typeof t>"u"||mb(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ct(e,t,r,n,s,i,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=a}var bt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){bt[e]=new Ct(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];bt[t]=new Ct(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){bt[e]=new Ct(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){bt[e]=new Ct(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){bt[e]=new Ct(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){bt[e]=new Ct(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){bt[e]=new Ct(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){bt[e]=new Ct(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){bt[e]=new Ct(e,5,!1,e.toLowerCase(),null,!1,!1)});var wf=/[\-:]([a-z])/g;function bf(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(wf,bf);bt[t]=new Ct(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(wf,bf);bt[t]=new Ct(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(wf,bf);bt[t]=new Ct(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){bt[e]=new Ct(e,1,!1,e.toLowerCase(),null,!1,!1)});bt.xlinkHref=new Ct("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){bt[e]=new Ct(e,1,!1,e.toLowerCase(),null,!0,!0)});function _f(e,t,r,n){var s=bt.hasOwnProperty(t)?bt[t]:null;(s!==null?s.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(gb(t,r,s,n)&&(r=null),n||s===null?pb(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):s.mustUseProperty?e[s.propertyName]=r===null?s.type===3?!1:"":r:(t=s.attributeName,n=s.attributeNamespace,r===null?e.removeAttribute(t):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var vn=hb.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,pl=Symbol.for("react.element"),ri=Symbol.for("react.portal"),ni=Symbol.for("react.fragment"),kf=Symbol.for("react.strict_mode"),Fd=Symbol.for("react.profiler"),X1=Symbol.for("react.provider"),Z1=Symbol.for("react.context"),jf=Symbol.for("react.forward_ref"),Ud=Symbol.for("react.suspense"),zd=Symbol.for("react.suspense_list"),Sf=Symbol.for("react.memo"),En=Symbol.for("react.lazy"),ey=Symbol.for("react.offscreen"),ym=Symbol.iterator;function xo(e){return e===null||typeof e!="object"?null:(e=ym&&e[ym]||e["@@iterator"],typeof e=="function"?e:null)}var ze=Object.assign,Vu;function Io(e){if(Vu===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Vu=t&&t[1]||""}return`
`+Vu+e}var Hu=!1;function Gu(e,t){if(!e||Hu)return"";Hu=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=n.stack.split(`
`),a=s.length-1,l=i.length-1;1<=a&&0<=l&&s[a]!==i[l];)l--;for(;1<=a&&0<=l;a--,l--)if(s[a]!==i[l]){if(a!==1||l!==1)do if(a--,l--,0>l||s[a]!==i[l]){var c=`
`+s[a].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=a&&0<=l);break}}}finally{Hu=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Io(e):""}function yb(e){switch(e.tag){case 5:return Io(e.type);case 16:return Io("Lazy");case 13:return Io("Suspense");case 19:return Io("SuspenseList");case 0:case 2:case 15:return e=Gu(e.type,!1),e;case 11:return e=Gu(e.type.render,!1),e;case 1:return e=Gu(e.type,!0),e;default:return""}}function Bd(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ni:return"Fragment";case ri:return"Portal";case Fd:return"Profiler";case kf:return"StrictMode";case Ud:return"Suspense";case zd:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Z1:return(e.displayName||"Context")+".Consumer";case X1:return(e._context.displayName||"Context")+".Provider";case jf:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Sf:return t=e.displayName||null,t!==null?t:Bd(e.type)||"Memo";case En:t=e._payload,e=e._init;try{return Bd(e(t))}catch{}}return null}function xb(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Bd(t);case 8:return t===kf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Gn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ty(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function vb(e){var t=ty(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(a){n=""+a,i.call(this,a)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ml(e){e._valueTracker||(e._valueTracker=vb(e))}function ry(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=ty(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function ac(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Wd(e,t){var r=t.checked;return ze({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function xm(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=Gn(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function ny(e,t){t=t.checked,t!=null&&_f(e,"checked",t,!1)}function Vd(e,t){ny(e,t);var r=Gn(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Hd(e,t.type,r):t.hasOwnProperty("defaultValue")&&Hd(e,t.type,Gn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function vm(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Hd(e,t,r){(t!=="number"||ac(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Po=Array.isArray;function yi(e,t,r,n){if(e=e.options,t){t={};for(var s=0;s<r.length;s++)t["$"+r[s]]=!0;for(r=0;r<e.length;r++)s=t.hasOwnProperty("$"+e[r].value),e[r].selected!==s&&(e[r].selected=s),s&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Gn(r),t=null,s=0;s<e.length;s++){if(e[s].value===r){e[s].selected=!0,n&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Gd(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(O(91));return ze({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function wm(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(O(92));if(Po(r)){if(1<r.length)throw Error(O(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Gn(r)}}function sy(e,t){var r=Gn(t.value),n=Gn(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function bm(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function iy(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Kd(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?iy(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var gl,oy=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,s){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(gl=gl||document.createElement("div"),gl.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=gl.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function na(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Uo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},wb=["Webkit","ms","Moz","O"];Object.keys(Uo).forEach(function(e){wb.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Uo[t]=Uo[e]})});function ay(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Uo.hasOwnProperty(e)&&Uo[e]?(""+t).trim():t+"px"}function ly(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=ay(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,s):e[r]=s}}var bb=ze({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function qd(e,t){if(t){if(bb[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(O(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(O(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(O(61))}if(t.style!=null&&typeof t.style!="object")throw Error(O(62))}}function Yd(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Jd=null;function Nf(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Qd=null,xi=null,vi=null;function _m(e){if(e=Ma(e)){if(typeof Qd!="function")throw Error(O(280));var t=e.stateNode;t&&(t=Gc(t),Qd(e.stateNode,e.type,t))}}function cy(e){xi?vi?vi.push(e):vi=[e]:xi=e}function uy(){if(xi){var e=xi,t=vi;if(vi=xi=null,_m(e),t)for(e=0;e<t.length;e++)_m(t[e])}}function dy(e,t){return e(t)}function hy(){}var Ku=!1;function fy(e,t,r){if(Ku)return e(t,r);Ku=!0;try{return dy(e,t,r)}finally{Ku=!1,(xi!==null||vi!==null)&&(hy(),uy())}}function sa(e,t){var r=e.stateNode;if(r===null)return null;var n=Gc(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(O(231,t,typeof r));return r}var Xd=!1;if(un)try{var vo={};Object.defineProperty(vo,"passive",{get:function(){Xd=!0}}),window.addEventListener("test",vo,vo),window.removeEventListener("test",vo,vo)}catch{Xd=!1}function _b(e,t,r,n,s,i,a,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(d){this.onError(d)}}var zo=!1,lc=null,cc=!1,Zd=null,kb={onError:function(e){zo=!0,lc=e}};function jb(e,t,r,n,s,i,a,l,c){zo=!1,lc=null,_b.apply(kb,arguments)}function Sb(e,t,r,n,s,i,a,l,c){if(jb.apply(this,arguments),zo){if(zo){var u=lc;zo=!1,lc=null}else throw Error(O(198));cc||(cc=!0,Zd=u)}}function Ls(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function py(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function km(e){if(Ls(e)!==e)throw Error(O(188))}function Nb(e){var t=e.alternate;if(!t){if(t=Ls(e),t===null)throw Error(O(188));return t!==e?null:e}for(var r=e,n=t;;){var s=r.return;if(s===null)break;var i=s.alternate;if(i===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===r)return km(s),e;if(i===n)return km(s),t;i=i.sibling}throw Error(O(188))}if(r.return!==n.return)r=s,n=i;else{for(var a=!1,l=s.child;l;){if(l===r){a=!0,r=s,n=i;break}if(l===n){a=!0,n=s,r=i;break}l=l.sibling}if(!a){for(l=i.child;l;){if(l===r){a=!0,r=i,n=s;break}if(l===n){a=!0,n=i,r=s;break}l=l.sibling}if(!a)throw Error(O(189))}}if(r.alternate!==n)throw Error(O(190))}if(r.tag!==3)throw Error(O(188));return r.stateNode.current===r?e:t}function my(e){return e=Nb(e),e!==null?gy(e):null}function gy(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=gy(e);if(t!==null)return t;e=e.sibling}return null}var yy=Xt.unstable_scheduleCallback,jm=Xt.unstable_cancelCallback,Eb=Xt.unstable_shouldYield,Tb=Xt.unstable_requestPaint,qe=Xt.unstable_now,Ab=Xt.unstable_getCurrentPriorityLevel,Ef=Xt.unstable_ImmediatePriority,xy=Xt.unstable_UserBlockingPriority,uc=Xt.unstable_NormalPriority,Cb=Xt.unstable_LowPriority,vy=Xt.unstable_IdlePriority,Bc=null,Vr=null;function Ib(e){if(Vr&&typeof Vr.onCommitFiberRoot=="function")try{Vr.onCommitFiberRoot(Bc,e,void 0,(e.current.flags&128)===128)}catch{}}var Ar=Math.clz32?Math.clz32:Rb,Pb=Math.log,Ob=Math.LN2;function Rb(e){return e>>>=0,e===0?32:31-(Pb(e)/Ob|0)|0}var yl=64,xl=4194304;function Oo(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dc(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,s=e.suspendedLanes,i=e.pingedLanes,a=r&268435455;if(a!==0){var l=a&~s;l!==0?n=Oo(l):(i&=a,i!==0&&(n=Oo(i)))}else a=r&~s,a!==0?n=Oo(a):i!==0&&(n=Oo(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&s)&&(s=n&-n,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-Ar(t),s=1<<r,n|=e[r],t&=~s;return n}function Lb(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function $b(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var a=31-Ar(i),l=1<<a,c=s[a];c===-1?(!(l&r)||l&n)&&(s[a]=Lb(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function eh(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function wy(){var e=yl;return yl<<=1,!(yl&4194240)&&(yl=64),e}function qu(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function $a(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ar(t),e[t]=r}function Db(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var s=31-Ar(r),i=1<<s;t[s]=0,n[s]=-1,e[s]=-1,r&=~i}}function Tf(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-Ar(r),s=1<<n;s&t|e[n]&t&&(e[n]|=t),r&=~s}}var Se=0;function by(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var _y,Af,ky,jy,Sy,th=!1,vl=[],Dn=null,Mn=null,Fn=null,ia=new Map,oa=new Map,In=[],Mb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sm(e,t){switch(e){case"focusin":case"focusout":Dn=null;break;case"dragenter":case"dragleave":Mn=null;break;case"mouseover":case"mouseout":Fn=null;break;case"pointerover":case"pointerout":ia.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":oa.delete(t.pointerId)}}function wo(e,t,r,n,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[s]},t!==null&&(t=Ma(t),t!==null&&Af(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function Fb(e,t,r,n,s){switch(t){case"focusin":return Dn=wo(Dn,e,t,r,n,s),!0;case"dragenter":return Mn=wo(Mn,e,t,r,n,s),!0;case"mouseover":return Fn=wo(Fn,e,t,r,n,s),!0;case"pointerover":var i=s.pointerId;return ia.set(i,wo(ia.get(i)||null,e,t,r,n,s)),!0;case"gotpointercapture":return i=s.pointerId,oa.set(i,wo(oa.get(i)||null,e,t,r,n,s)),!0}return!1}function Ny(e){var t=hs(e.target);if(t!==null){var r=Ls(t);if(r!==null){if(t=r.tag,t===13){if(t=py(r),t!==null){e.blockedOn=t,Sy(e.priority,function(){ky(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Kl(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=rh(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);Jd=n,r.target.dispatchEvent(n),Jd=null}else return t=Ma(r),t!==null&&Af(t),e.blockedOn=r,!1;t.shift()}return!0}function Nm(e,t,r){Kl(e)&&r.delete(t)}function Ub(){th=!1,Dn!==null&&Kl(Dn)&&(Dn=null),Mn!==null&&Kl(Mn)&&(Mn=null),Fn!==null&&Kl(Fn)&&(Fn=null),ia.forEach(Nm),oa.forEach(Nm)}function bo(e,t){e.blockedOn===t&&(e.blockedOn=null,th||(th=!0,Xt.unstable_scheduleCallback(Xt.unstable_NormalPriority,Ub)))}function aa(e){function t(s){return bo(s,e)}if(0<vl.length){bo(vl[0],e);for(var r=1;r<vl.length;r++){var n=vl[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Dn!==null&&bo(Dn,e),Mn!==null&&bo(Mn,e),Fn!==null&&bo(Fn,e),ia.forEach(t),oa.forEach(t),r=0;r<In.length;r++)n=In[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<In.length&&(r=In[0],r.blockedOn===null);)Ny(r),r.blockedOn===null&&In.shift()}var wi=vn.ReactCurrentBatchConfig,hc=!0;function zb(e,t,r,n){var s=Se,i=wi.transition;wi.transition=null;try{Se=1,Cf(e,t,r,n)}finally{Se=s,wi.transition=i}}function Bb(e,t,r,n){var s=Se,i=wi.transition;wi.transition=null;try{Se=4,Cf(e,t,r,n)}finally{Se=s,wi.transition=i}}function Cf(e,t,r,n){if(hc){var s=rh(e,t,r,n);if(s===null)sd(e,t,n,fc,r),Sm(e,n);else if(Fb(s,e,t,r,n))n.stopPropagation();else if(Sm(e,n),t&4&&-1<Mb.indexOf(e)){for(;s!==null;){var i=Ma(s);if(i!==null&&_y(i),i=rh(e,t,r,n),i===null&&sd(e,t,n,fc,r),i===s)break;s=i}s!==null&&n.stopPropagation()}else sd(e,t,n,null,r)}}var fc=null;function rh(e,t,r,n){if(fc=null,e=Nf(n),e=hs(e),e!==null)if(t=Ls(e),t===null)e=null;else if(r=t.tag,r===13){if(e=py(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return fc=e,null}function Ey(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ab()){case Ef:return 1;case xy:return 4;case uc:case Cb:return 16;case vy:return 536870912;default:return 16}default:return 16}}var Ln=null,If=null,ql=null;function Ty(){if(ql)return ql;var e,t=If,r=t.length,n,s="value"in Ln?Ln.value:Ln.textContent,i=s.length;for(e=0;e<r&&t[e]===s[e];e++);var a=r-e;for(n=1;n<=a&&t[r-n]===s[i-n];n++);return ql=s.slice(e,1<n?1-n:void 0)}function Yl(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function wl(){return!0}function Em(){return!1}function sr(e){function t(r,n,s,i,a){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?wl:Em,this.isPropagationStopped=Em,this}return ze(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=wl)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=wl)},persist:function(){},isPersistent:wl}),t}var Yi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Pf=sr(Yi),Da=ze({},Yi,{view:0,detail:0}),Wb=sr(Da),Yu,Ju,_o,Wc=ze({},Da,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Of,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==_o&&(_o&&e.type==="mousemove"?(Yu=e.screenX-_o.screenX,Ju=e.screenY-_o.screenY):Ju=Yu=0,_o=e),Yu)},movementY:function(e){return"movementY"in e?e.movementY:Ju}}),Tm=sr(Wc),Vb=ze({},Wc,{dataTransfer:0}),Hb=sr(Vb),Gb=ze({},Da,{relatedTarget:0}),Qu=sr(Gb),Kb=ze({},Yi,{animationName:0,elapsedTime:0,pseudoElement:0}),qb=sr(Kb),Yb=ze({},Yi,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Jb=sr(Yb),Qb=ze({},Yi,{data:0}),Am=sr(Qb),Xb={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Zb={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},e3={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function t3(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=e3[e])?!!t[e]:!1}function Of(){return t3}var r3=ze({},Da,{key:function(e){if(e.key){var t=Xb[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Yl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Zb[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Of,charCode:function(e){return e.type==="keypress"?Yl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Yl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),n3=sr(r3),s3=ze({},Wc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Cm=sr(s3),i3=ze({},Da,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Of}),o3=sr(i3),a3=ze({},Yi,{propertyName:0,elapsedTime:0,pseudoElement:0}),l3=sr(a3),c3=ze({},Wc,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),u3=sr(c3),d3=[9,13,27,32],Rf=un&&"CompositionEvent"in window,Bo=null;un&&"documentMode"in document&&(Bo=document.documentMode);var h3=un&&"TextEvent"in window&&!Bo,Ay=un&&(!Rf||Bo&&8<Bo&&11>=Bo),Im=" ",Pm=!1;function Cy(e,t){switch(e){case"keyup":return d3.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Iy(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var si=!1;function f3(e,t){switch(e){case"compositionend":return Iy(t);case"keypress":return t.which!==32?null:(Pm=!0,Im);case"textInput":return e=t.data,e===Im&&Pm?null:e;default:return null}}function p3(e,t){if(si)return e==="compositionend"||!Rf&&Cy(e,t)?(e=Ty(),ql=If=Ln=null,si=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ay&&t.locale!=="ko"?null:t.data;default:return null}}var m3={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Om(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!m3[e.type]:t==="textarea"}function Py(e,t,r,n){cy(n),t=pc(t,"onChange"),0<t.length&&(r=new Pf("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Wo=null,la=null;function g3(e){Wy(e,0)}function Vc(e){var t=ai(e);if(ry(t))return e}function y3(e,t){if(e==="change")return t}var Oy=!1;if(un){var Xu;if(un){var Zu="oninput"in document;if(!Zu){var Rm=document.createElement("div");Rm.setAttribute("oninput","return;"),Zu=typeof Rm.oninput=="function"}Xu=Zu}else Xu=!1;Oy=Xu&&(!document.documentMode||9<document.documentMode)}function Lm(){Wo&&(Wo.detachEvent("onpropertychange",Ry),la=Wo=null)}function Ry(e){if(e.propertyName==="value"&&Vc(la)){var t=[];Py(t,la,e,Nf(e)),fy(g3,t)}}function x3(e,t,r){e==="focusin"?(Lm(),Wo=t,la=r,Wo.attachEvent("onpropertychange",Ry)):e==="focusout"&&Lm()}function v3(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Vc(la)}function w3(e,t){if(e==="click")return Vc(t)}function b3(e,t){if(e==="input"||e==="change")return Vc(t)}function _3(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Pr=typeof Object.is=="function"?Object.is:_3;function ca(e,t){if(Pr(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!Md.call(t,s)||!Pr(e[s],t[s]))return!1}return!0}function $m(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Dm(e,t){var r=$m(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=$m(r)}}function Ly(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Ly(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function $y(){for(var e=window,t=ac();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=ac(e.document)}return t}function Lf(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function k3(e){var t=$y(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&Ly(r.ownerDocument.documentElement,r)){if(n!==null&&Lf(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=r.textContent.length,i=Math.min(n.start,s);n=n.end===void 0?i:Math.min(n.end,s),!e.extend&&i>n&&(s=n,n=i,i=s),s=Dm(r,i);var a=Dm(r,n);s&&a&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var j3=un&&"documentMode"in document&&11>=document.documentMode,ii=null,nh=null,Vo=null,sh=!1;function Mm(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;sh||ii==null||ii!==ac(n)||(n=ii,"selectionStart"in n&&Lf(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Vo&&ca(Vo,n)||(Vo=n,n=pc(nh,"onSelect"),0<n.length&&(t=new Pf("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=ii)))}function bl(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var oi={animationend:bl("Animation","AnimationEnd"),animationiteration:bl("Animation","AnimationIteration"),animationstart:bl("Animation","AnimationStart"),transitionend:bl("Transition","TransitionEnd")},ed={},Dy={};un&&(Dy=document.createElement("div").style,"AnimationEvent"in window||(delete oi.animationend.animation,delete oi.animationiteration.animation,delete oi.animationstart.animation),"TransitionEvent"in window||delete oi.transitionend.transition);function Hc(e){if(ed[e])return ed[e];if(!oi[e])return e;var t=oi[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in Dy)return ed[e]=t[r];return e}var My=Hc("animationend"),Fy=Hc("animationiteration"),Uy=Hc("animationstart"),zy=Hc("transitionend"),By=new Map,Fm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Qn(e,t){By.set(e,t),Rs(t,[e])}for(var td=0;td<Fm.length;td++){var rd=Fm[td],S3=rd.toLowerCase(),N3=rd[0].toUpperCase()+rd.slice(1);Qn(S3,"on"+N3)}Qn(My,"onAnimationEnd");Qn(Fy,"onAnimationIteration");Qn(Uy,"onAnimationStart");Qn("dblclick","onDoubleClick");Qn("focusin","onFocus");Qn("focusout","onBlur");Qn(zy,"onTransitionEnd");Ti("onMouseEnter",["mouseout","mouseover"]);Ti("onMouseLeave",["mouseout","mouseover"]);Ti("onPointerEnter",["pointerout","pointerover"]);Ti("onPointerLeave",["pointerout","pointerover"]);Rs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Rs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Rs("onBeforeInput",["compositionend","keypress","textInput","paste"]);Rs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Rs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Rs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ro="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),E3=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ro));function Um(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,Sb(n,t,void 0,e),e.currentTarget=null}function Wy(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],s=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var a=n.length-1;0<=a;a--){var l=n[a],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;Um(s,l,u),i=c}else for(a=0;a<n.length;a++){if(l=n[a],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;Um(s,l,u),i=c}}}if(cc)throw e=Zd,cc=!1,Zd=null,e}function Ie(e,t){var r=t[ch];r===void 0&&(r=t[ch]=new Set);var n=e+"__bubble";r.has(n)||(Vy(t,e,2,!1),r.add(n))}function nd(e,t,r){var n=0;t&&(n|=4),Vy(r,e,n,t)}var _l="_reactListening"+Math.random().toString(36).slice(2);function ua(e){if(!e[_l]){e[_l]=!0,Q1.forEach(function(r){r!=="selectionchange"&&(E3.has(r)||nd(r,!1,e),nd(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[_l]||(t[_l]=!0,nd("selectionchange",!1,t))}}function Vy(e,t,r,n){switch(Ey(t)){case 1:var s=zb;break;case 4:s=Bb;break;default:s=Cf}r=s.bind(null,t,r,e),s=void 0,!Xd||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),n?s!==void 0?e.addEventListener(t,r,{capture:!0,passive:s}):e.addEventListener(t,r,!0):s!==void 0?e.addEventListener(t,r,{passive:s}):e.addEventListener(t,r,!1)}function sd(e,t,r,n,s){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var l=n.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(a===4)for(a=n.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;a=a.return}for(;l!==null;){if(a=hs(l),a===null)return;if(c=a.tag,c===5||c===6){n=i=a;continue e}l=l.parentNode}}n=n.return}fy(function(){var u=i,d=Nf(r),f=[];e:{var h=By.get(e);if(h!==void 0){var m=Pf,x=e;switch(e){case"keypress":if(Yl(r)===0)break e;case"keydown":case"keyup":m=n3;break;case"focusin":x="focus",m=Qu;break;case"focusout":x="blur",m=Qu;break;case"beforeblur":case"afterblur":m=Qu;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=Tm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=Hb;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=o3;break;case My:case Fy:case Uy:m=qb;break;case zy:m=l3;break;case"scroll":m=Wb;break;case"wheel":m=u3;break;case"copy":case"cut":case"paste":m=Jb;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=Cm}var w=(t&4)!==0,k=!w&&e==="scroll",g=w?h!==null?h+"Capture":null:h;w=[];for(var p=u,y;p!==null;){y=p;var v=y.stateNode;if(y.tag===5&&v!==null&&(y=v,g!==null&&(v=sa(p,g),v!=null&&w.push(da(p,v,y)))),k)break;p=p.return}0<w.length&&(h=new m(h,x,null,r,d),f.push({event:h,listeners:w}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",h&&r!==Jd&&(x=r.relatedTarget||r.fromElement)&&(hs(x)||x[dn]))break e;if((m||h)&&(h=d.window===d?d:(h=d.ownerDocument)?h.defaultView||h.parentWindow:window,m?(x=r.relatedTarget||r.toElement,m=u,x=x?hs(x):null,x!==null&&(k=Ls(x),x!==k||x.tag!==5&&x.tag!==6)&&(x=null)):(m=null,x=u),m!==x)){if(w=Tm,v="onMouseLeave",g="onMouseEnter",p="mouse",(e==="pointerout"||e==="pointerover")&&(w=Cm,v="onPointerLeave",g="onPointerEnter",p="pointer"),k=m==null?h:ai(m),y=x==null?h:ai(x),h=new w(v,p+"leave",m,r,d),h.target=k,h.relatedTarget=y,v=null,hs(d)===u&&(w=new w(g,p+"enter",x,r,d),w.target=y,w.relatedTarget=k,v=w),k=v,m&&x)t:{for(w=m,g=x,p=0,y=w;y;y=Ws(y))p++;for(y=0,v=g;v;v=Ws(v))y++;for(;0<p-y;)w=Ws(w),p--;for(;0<y-p;)g=Ws(g),y--;for(;p--;){if(w===g||g!==null&&w===g.alternate)break t;w=Ws(w),g=Ws(g)}w=null}else w=null;m!==null&&zm(f,h,m,w,!1),x!==null&&k!==null&&zm(f,k,x,w,!0)}}e:{if(h=u?ai(u):window,m=h.nodeName&&h.nodeName.toLowerCase(),m==="select"||m==="input"&&h.type==="file")var N=y3;else if(Om(h))if(Oy)N=b3;else{N=v3;var E=x3}else(m=h.nodeName)&&m.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(N=w3);if(N&&(N=N(e,u))){Py(f,N,r,d);break e}E&&E(e,h,u),e==="focusout"&&(E=h._wrapperState)&&E.controlled&&h.type==="number"&&Hd(h,"number",h.value)}switch(E=u?ai(u):window,e){case"focusin":(Om(E)||E.contentEditable==="true")&&(ii=E,nh=u,Vo=null);break;case"focusout":Vo=nh=ii=null;break;case"mousedown":sh=!0;break;case"contextmenu":case"mouseup":case"dragend":sh=!1,Mm(f,r,d);break;case"selectionchange":if(j3)break;case"keydown":case"keyup":Mm(f,r,d)}var A;if(Rf)e:{switch(e){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else si?Cy(e,r)&&(C="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(C="onCompositionStart");C&&(Ay&&r.locale!=="ko"&&(si||C!=="onCompositionStart"?C==="onCompositionEnd"&&si&&(A=Ty()):(Ln=d,If="value"in Ln?Ln.value:Ln.textContent,si=!0)),E=pc(u,C),0<E.length&&(C=new Am(C,e,null,r,d),f.push({event:C,listeners:E}),A?C.data=A:(A=Iy(r),A!==null&&(C.data=A)))),(A=h3?f3(e,r):p3(e,r))&&(u=pc(u,"onBeforeInput"),0<u.length&&(d=new Am("onBeforeInput","beforeinput",null,r,d),f.push({event:d,listeners:u}),d.data=A))}Wy(f,t)})}function da(e,t,r){return{instance:e,listener:t,currentTarget:r}}function pc(e,t){for(var r=t+"Capture",n=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=sa(e,r),i!=null&&n.unshift(da(e,i,s)),i=sa(e,t),i!=null&&n.push(da(e,i,s))),e=e.return}return n}function Ws(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function zm(e,t,r,n,s){for(var i=t._reactName,a=[];r!==null&&r!==n;){var l=r,c=l.alternate,u=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&u!==null&&(l=u,s?(c=sa(r,i),c!=null&&a.unshift(da(r,c,l))):s||(c=sa(r,i),c!=null&&a.push(da(r,c,l)))),r=r.return}a.length!==0&&e.push({event:t,listeners:a})}var T3=/\r\n?/g,A3=/\u0000|\uFFFD/g;function Bm(e){return(typeof e=="string"?e:""+e).replace(T3,`
`).replace(A3,"")}function kl(e,t,r){if(t=Bm(t),Bm(e)!==t&&r)throw Error(O(425))}function mc(){}var ih=null,oh=null;function ah(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var lh=typeof setTimeout=="function"?setTimeout:void 0,C3=typeof clearTimeout=="function"?clearTimeout:void 0,Wm=typeof Promise=="function"?Promise:void 0,I3=typeof queueMicrotask=="function"?queueMicrotask:typeof Wm<"u"?function(e){return Wm.resolve(null).then(e).catch(P3)}:lh;function P3(e){setTimeout(function(){throw e})}function id(e,t){var r=t,n=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){e.removeChild(s),aa(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);aa(t)}function Un(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Vm(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Ji=Math.random().toString(36).slice(2),Br="__reactFiber$"+Ji,ha="__reactProps$"+Ji,dn="__reactContainer$"+Ji,ch="__reactEvents$"+Ji,O3="__reactListeners$"+Ji,R3="__reactHandles$"+Ji;function hs(e){var t=e[Br];if(t)return t;for(var r=e.parentNode;r;){if(t=r[dn]||r[Br]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Vm(e);e!==null;){if(r=e[Br])return r;e=Vm(e)}return t}e=r,r=e.parentNode}return null}function Ma(e){return e=e[Br]||e[dn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function ai(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(O(33))}function Gc(e){return e[ha]||null}var uh=[],li=-1;function Xn(e){return{current:e}}function Pe(e){0>li||(e.current=uh[li],uh[li]=null,li--)}function Ce(e,t){li++,uh[li]=e.current,e.current=t}var Kn={},Nt=Xn(Kn),Mt=Xn(!1),Ns=Kn;function Ai(e,t){var r=e.type.contextTypes;if(!r)return Kn;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in r)s[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Ft(e){return e=e.childContextTypes,e!=null}function gc(){Pe(Mt),Pe(Nt)}function Hm(e,t,r){if(Nt.current!==Kn)throw Error(O(168));Ce(Nt,t),Ce(Mt,r)}function Hy(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in t))throw Error(O(108,xb(e)||"Unknown",s));return ze({},r,n)}function yc(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Kn,Ns=Nt.current,Ce(Nt,e),Ce(Mt,Mt.current),!0}function Gm(e,t,r){var n=e.stateNode;if(!n)throw Error(O(169));r?(e=Hy(e,t,Ns),n.__reactInternalMemoizedMergedChildContext=e,Pe(Mt),Pe(Nt),Ce(Nt,e)):Pe(Mt),Ce(Mt,r)}var nn=null,Kc=!1,od=!1;function Gy(e){nn===null?nn=[e]:nn.push(e)}function L3(e){Kc=!0,Gy(e)}function Zn(){if(!od&&nn!==null){od=!0;var e=0,t=Se;try{var r=nn;for(Se=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}nn=null,Kc=!1}catch(s){throw nn!==null&&(nn=nn.slice(e+1)),yy(Ef,Zn),s}finally{Se=t,od=!1}}return null}var ci=[],ui=0,xc=null,vc=0,ur=[],dr=0,Es=null,an=1,ln="";function is(e,t){ci[ui++]=vc,ci[ui++]=xc,xc=e,vc=t}function Ky(e,t,r){ur[dr++]=an,ur[dr++]=ln,ur[dr++]=Es,Es=e;var n=an;e=ln;var s=32-Ar(n)-1;n&=~(1<<s),r+=1;var i=32-Ar(t)+s;if(30<i){var a=s-s%5;i=(n&(1<<a)-1).toString(32),n>>=a,s-=a,an=1<<32-Ar(t)+s|r<<s|n,ln=i+e}else an=1<<i|r<<s|n,ln=e}function $f(e){e.return!==null&&(is(e,1),Ky(e,1,0))}function Df(e){for(;e===xc;)xc=ci[--ui],ci[ui]=null,vc=ci[--ui],ci[ui]=null;for(;e===Es;)Es=ur[--dr],ur[dr]=null,ln=ur[--dr],ur[dr]=null,an=ur[--dr],ur[dr]=null}var Yt=null,qt=null,Re=!1,Er=null;function qy(e,t){var r=hr(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Km(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Yt=e,qt=Un(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Yt=e,qt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Es!==null?{id:an,overflow:ln}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=hr(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Yt=e,qt=null,!0):!1;default:return!1}}function dh(e){return(e.mode&1)!==0&&(e.flags&128)===0}function hh(e){if(Re){var t=qt;if(t){var r=t;if(!Km(e,t)){if(dh(e))throw Error(O(418));t=Un(r.nextSibling);var n=Yt;t&&Km(e,t)?qy(n,r):(e.flags=e.flags&-4097|2,Re=!1,Yt=e)}}else{if(dh(e))throw Error(O(418));e.flags=e.flags&-4097|2,Re=!1,Yt=e}}}function qm(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Yt=e}function jl(e){if(e!==Yt)return!1;if(!Re)return qm(e),Re=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!ah(e.type,e.memoizedProps)),t&&(t=qt)){if(dh(e))throw Yy(),Error(O(418));for(;t;)qy(e,t),t=Un(t.nextSibling)}if(qm(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(O(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){qt=Un(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}qt=null}}else qt=Yt?Un(e.stateNode.nextSibling):null;return!0}function Yy(){for(var e=qt;e;)e=Un(e.nextSibling)}function Ci(){qt=Yt=null,Re=!1}function Mf(e){Er===null?Er=[e]:Er.push(e)}var $3=vn.ReactCurrentBatchConfig;function ko(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(O(309));var n=r.stateNode}if(!n)throw Error(O(147,e));var s=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(a){var l=s.refs;a===null?delete l[i]:l[i]=a},t._stringRef=i,t)}if(typeof e!="string")throw Error(O(284));if(!r._owner)throw Error(O(290,e))}return e}function Sl(e,t){throw e=Object.prototype.toString.call(t),Error(O(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ym(e){var t=e._init;return t(e._payload)}function Jy(e){function t(g,p){if(e){var y=g.deletions;y===null?(g.deletions=[p],g.flags|=16):y.push(p)}}function r(g,p){if(!e)return null;for(;p!==null;)t(g,p),p=p.sibling;return null}function n(g,p){for(g=new Map;p!==null;)p.key!==null?g.set(p.key,p):g.set(p.index,p),p=p.sibling;return g}function s(g,p){return g=Vn(g,p),g.index=0,g.sibling=null,g}function i(g,p,y){return g.index=y,e?(y=g.alternate,y!==null?(y=y.index,y<p?(g.flags|=2,p):y):(g.flags|=2,p)):(g.flags|=1048576,p)}function a(g){return e&&g.alternate===null&&(g.flags|=2),g}function l(g,p,y,v){return p===null||p.tag!==6?(p=fd(y,g.mode,v),p.return=g,p):(p=s(p,y),p.return=g,p)}function c(g,p,y,v){var N=y.type;return N===ni?d(g,p,y.props.children,v,y.key):p!==null&&(p.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===En&&Ym(N)===p.type)?(v=s(p,y.props),v.ref=ko(g,p,y),v.return=g,v):(v=rc(y.type,y.key,y.props,null,g.mode,v),v.ref=ko(g,p,y),v.return=g,v)}function u(g,p,y,v){return p===null||p.tag!==4||p.stateNode.containerInfo!==y.containerInfo||p.stateNode.implementation!==y.implementation?(p=pd(y,g.mode,v),p.return=g,p):(p=s(p,y.children||[]),p.return=g,p)}function d(g,p,y,v,N){return p===null||p.tag!==7?(p=ws(y,g.mode,v,N),p.return=g,p):(p=s(p,y),p.return=g,p)}function f(g,p,y){if(typeof p=="string"&&p!==""||typeof p=="number")return p=fd(""+p,g.mode,y),p.return=g,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case pl:return y=rc(p.type,p.key,p.props,null,g.mode,y),y.ref=ko(g,null,p),y.return=g,y;case ri:return p=pd(p,g.mode,y),p.return=g,p;case En:var v=p._init;return f(g,v(p._payload),y)}if(Po(p)||xo(p))return p=ws(p,g.mode,y,null),p.return=g,p;Sl(g,p)}return null}function h(g,p,y,v){var N=p!==null?p.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return N!==null?null:l(g,p,""+y,v);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case pl:return y.key===N?c(g,p,y,v):null;case ri:return y.key===N?u(g,p,y,v):null;case En:return N=y._init,h(g,p,N(y._payload),v)}if(Po(y)||xo(y))return N!==null?null:d(g,p,y,v,null);Sl(g,y)}return null}function m(g,p,y,v,N){if(typeof v=="string"&&v!==""||typeof v=="number")return g=g.get(y)||null,l(p,g,""+v,N);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case pl:return g=g.get(v.key===null?y:v.key)||null,c(p,g,v,N);case ri:return g=g.get(v.key===null?y:v.key)||null,u(p,g,v,N);case En:var E=v._init;return m(g,p,y,E(v._payload),N)}if(Po(v)||xo(v))return g=g.get(y)||null,d(p,g,v,N,null);Sl(p,v)}return null}function x(g,p,y,v){for(var N=null,E=null,A=p,C=p=0,P=null;A!==null&&C<y.length;C++){A.index>C?(P=A,A=null):P=A.sibling;var L=h(g,A,y[C],v);if(L===null){A===null&&(A=P);break}e&&A&&L.alternate===null&&t(g,A),p=i(L,p,C),E===null?N=L:E.sibling=L,E=L,A=P}if(C===y.length)return r(g,A),Re&&is(g,C),N;if(A===null){for(;C<y.length;C++)A=f(g,y[C],v),A!==null&&(p=i(A,p,C),E===null?N=A:E.sibling=A,E=A);return Re&&is(g,C),N}for(A=n(g,A);C<y.length;C++)P=m(A,g,C,y[C],v),P!==null&&(e&&P.alternate!==null&&A.delete(P.key===null?C:P.key),p=i(P,p,C),E===null?N=P:E.sibling=P,E=P);return e&&A.forEach(function($){return t(g,$)}),Re&&is(g,C),N}function w(g,p,y,v){var N=xo(y);if(typeof N!="function")throw Error(O(150));if(y=N.call(y),y==null)throw Error(O(151));for(var E=N=null,A=p,C=p=0,P=null,L=y.next();A!==null&&!L.done;C++,L=y.next()){A.index>C?(P=A,A=null):P=A.sibling;var $=h(g,A,L.value,v);if($===null){A===null&&(A=P);break}e&&A&&$.alternate===null&&t(g,A),p=i($,p,C),E===null?N=$:E.sibling=$,E=$,A=P}if(L.done)return r(g,A),Re&&is(g,C),N;if(A===null){for(;!L.done;C++,L=y.next())L=f(g,L.value,v),L!==null&&(p=i(L,p,C),E===null?N=L:E.sibling=L,E=L);return Re&&is(g,C),N}for(A=n(g,A);!L.done;C++,L=y.next())L=m(A,g,C,L.value,v),L!==null&&(e&&L.alternate!==null&&A.delete(L.key===null?C:L.key),p=i(L,p,C),E===null?N=L:E.sibling=L,E=L);return e&&A.forEach(function(Q){return t(g,Q)}),Re&&is(g,C),N}function k(g,p,y,v){if(typeof y=="object"&&y!==null&&y.type===ni&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case pl:e:{for(var N=y.key,E=p;E!==null;){if(E.key===N){if(N=y.type,N===ni){if(E.tag===7){r(g,E.sibling),p=s(E,y.props.children),p.return=g,g=p;break e}}else if(E.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===En&&Ym(N)===E.type){r(g,E.sibling),p=s(E,y.props),p.ref=ko(g,E,y),p.return=g,g=p;break e}r(g,E);break}else t(g,E);E=E.sibling}y.type===ni?(p=ws(y.props.children,g.mode,v,y.key),p.return=g,g=p):(v=rc(y.type,y.key,y.props,null,g.mode,v),v.ref=ko(g,p,y),v.return=g,g=v)}return a(g);case ri:e:{for(E=y.key;p!==null;){if(p.key===E)if(p.tag===4&&p.stateNode.containerInfo===y.containerInfo&&p.stateNode.implementation===y.implementation){r(g,p.sibling),p=s(p,y.children||[]),p.return=g,g=p;break e}else{r(g,p);break}else t(g,p);p=p.sibling}p=pd(y,g.mode,v),p.return=g,g=p}return a(g);case En:return E=y._init,k(g,p,E(y._payload),v)}if(Po(y))return x(g,p,y,v);if(xo(y))return w(g,p,y,v);Sl(g,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,p!==null&&p.tag===6?(r(g,p.sibling),p=s(p,y),p.return=g,g=p):(r(g,p),p=fd(y,g.mode,v),p.return=g,g=p),a(g)):r(g,p)}return k}var Ii=Jy(!0),Qy=Jy(!1),wc=Xn(null),bc=null,di=null,Ff=null;function Uf(){Ff=di=bc=null}function zf(e){var t=wc.current;Pe(wc),e._currentValue=t}function fh(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function bi(e,t){bc=e,Ff=di=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Dt=!0),e.firstContext=null)}function mr(e){var t=e._currentValue;if(Ff!==e)if(e={context:e,memoizedValue:t,next:null},di===null){if(bc===null)throw Error(O(308));di=e,bc.dependencies={lanes:0,firstContext:e}}else di=di.next=e;return t}var fs=null;function Bf(e){fs===null?fs=[e]:fs.push(e)}function Xy(e,t,r,n){var s=t.interleaved;return s===null?(r.next=r,Bf(t)):(r.next=s.next,s.next=r),t.interleaved=r,hn(e,n)}function hn(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Tn=!1;function Wf(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Zy(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function cn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function zn(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,xe&2){var s=n.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),n.pending=t,hn(e,r)}return s=n.interleaved,s===null?(t.next=t,Bf(n)):(t.next=s.next,s.next=t),n.interleaved=t,hn(e,r)}function Jl(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Tf(e,r)}}function Jm(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?s=i=a:i=i.next=a,r=r.next}while(r!==null);i===null?s=i=t:i=i.next=t}else s=i=t;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function _c(e,t,r,n){var s=e.updateQueue;Tn=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,a===null?i=u:a.next=u,a=c;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==a&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(i!==null){var f=s.baseState;a=0,d=u=c=null,l=i;do{var h=l.lane,m=l.eventTime;if((n&h)===h){d!==null&&(d=d.next={eventTime:m,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var x=e,w=l;switch(h=t,m=r,w.tag){case 1:if(x=w.payload,typeof x=="function"){f=x.call(m,f,h);break e}f=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=w.payload,h=typeof x=="function"?x.call(m,f,h):x,h==null)break e;f=ze({},f,h);break e;case 2:Tn=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,h=s.effects,h===null?s.effects=[l]:h.push(l))}else m={eventTime:m,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=m,c=f):d=d.next=m,a|=h;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;h=l,l=h.next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}while(!0);if(d===null&&(c=f),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=d,t=s.shared.interleaved,t!==null){s=t;do a|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);As|=a,e.lanes=a,e.memoizedState=f}}function Qm(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(O(191,s));s.call(n)}}}var Fa={},Hr=Xn(Fa),fa=Xn(Fa),pa=Xn(Fa);function ps(e){if(e===Fa)throw Error(O(174));return e}function Vf(e,t){switch(Ce(pa,t),Ce(fa,e),Ce(Hr,Fa),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Kd(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Kd(t,e)}Pe(Hr),Ce(Hr,t)}function Pi(){Pe(Hr),Pe(fa),Pe(pa)}function e2(e){ps(pa.current);var t=ps(Hr.current),r=Kd(t,e.type);t!==r&&(Ce(fa,e),Ce(Hr,r))}function Hf(e){fa.current===e&&(Pe(Hr),Pe(fa))}var Me=Xn(0);function kc(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ad=[];function Gf(){for(var e=0;e<ad.length;e++)ad[e]._workInProgressVersionPrimary=null;ad.length=0}var Ql=vn.ReactCurrentDispatcher,ld=vn.ReactCurrentBatchConfig,Ts=0,Fe=null,it=null,dt=null,jc=!1,Ho=!1,ma=0,D3=0;function _t(){throw Error(O(321))}function Kf(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Pr(e[r],t[r]))return!1;return!0}function qf(e,t,r,n,s,i){if(Ts=i,Fe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ql.current=e===null||e.memoizedState===null?z3:B3,e=r(n,s),Ho){i=0;do{if(Ho=!1,ma=0,25<=i)throw Error(O(301));i+=1,dt=it=null,t.updateQueue=null,Ql.current=W3,e=r(n,s)}while(Ho)}if(Ql.current=Sc,t=it!==null&&it.next!==null,Ts=0,dt=it=Fe=null,jc=!1,t)throw Error(O(300));return e}function Yf(){var e=ma!==0;return ma=0,e}function zr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return dt===null?Fe.memoizedState=dt=e:dt=dt.next=e,dt}function gr(){if(it===null){var e=Fe.alternate;e=e!==null?e.memoizedState:null}else e=it.next;var t=dt===null?Fe.memoizedState:dt.next;if(t!==null)dt=t,it=e;else{if(e===null)throw Error(O(310));it=e,e={memoizedState:it.memoizedState,baseState:it.baseState,baseQueue:it.baseQueue,queue:it.queue,next:null},dt===null?Fe.memoizedState=dt=e:dt=dt.next=e}return dt}function ga(e,t){return typeof t=="function"?t(e):t}function cd(e){var t=gr(),r=t.queue;if(r===null)throw Error(O(311));r.lastRenderedReducer=e;var n=it,s=n.baseQueue,i=r.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}n.baseQueue=s=i,r.pending=null}if(s!==null){i=s.next,n=n.baseState;var l=a=null,c=null,u=i;do{var d=u.lane;if((Ts&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=f,a=n):c=c.next=f,Fe.lanes|=d,As|=d}u=u.next}while(u!==null&&u!==i);c===null?a=n:c.next=l,Pr(n,t.memoizedState)||(Dt=!0),t.memoizedState=n,t.baseState=a,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){s=e;do i=s.lane,Fe.lanes|=i,As|=i,s=s.next;while(s!==e)}else s===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function ud(e){var t=gr(),r=t.queue;if(r===null)throw Error(O(311));r.lastRenderedReducer=e;var n=r.dispatch,s=r.pending,i=t.memoizedState;if(s!==null){r.pending=null;var a=s=s.next;do i=e(i,a.action),a=a.next;while(a!==s);Pr(i,t.memoizedState)||(Dt=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function t2(){}function r2(e,t){var r=Fe,n=gr(),s=t(),i=!Pr(n.memoizedState,s);if(i&&(n.memoizedState=s,Dt=!0),n=n.queue,Jf(i2.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||dt!==null&&dt.memoizedState.tag&1){if(r.flags|=2048,ya(9,s2.bind(null,r,n,s,t),void 0,null),pt===null)throw Error(O(349));Ts&30||n2(r,t,s)}return s}function n2(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Fe.updateQueue,t===null?(t={lastEffect:null,stores:null},Fe.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function s2(e,t,r,n){t.value=r,t.getSnapshot=n,o2(t)&&a2(e)}function i2(e,t,r){return r(function(){o2(t)&&a2(e)})}function o2(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Pr(e,r)}catch{return!0}}function a2(e){var t=hn(e,1);t!==null&&Cr(t,e,1,-1)}function Xm(e){var t=zr();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ga,lastRenderedState:e},t.queue=e,e=e.dispatch=U3.bind(null,Fe,e),[t.memoizedState,e]}function ya(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=Fe.updateQueue,t===null?(t={lastEffect:null,stores:null},Fe.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function l2(){return gr().memoizedState}function Xl(e,t,r,n){var s=zr();Fe.flags|=e,s.memoizedState=ya(1|t,r,void 0,n===void 0?null:n)}function qc(e,t,r,n){var s=gr();n=n===void 0?null:n;var i=void 0;if(it!==null){var a=it.memoizedState;if(i=a.destroy,n!==null&&Kf(n,a.deps)){s.memoizedState=ya(t,r,i,n);return}}Fe.flags|=e,s.memoizedState=ya(1|t,r,i,n)}function Zm(e,t){return Xl(8390656,8,e,t)}function Jf(e,t){return qc(2048,8,e,t)}function c2(e,t){return qc(4,2,e,t)}function u2(e,t){return qc(4,4,e,t)}function d2(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function h2(e,t,r){return r=r!=null?r.concat([e]):null,qc(4,4,d2.bind(null,t,e),r)}function Qf(){}function f2(e,t){var r=gr();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Kf(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function p2(e,t){var r=gr();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Kf(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function m2(e,t,r){return Ts&21?(Pr(r,t)||(r=wy(),Fe.lanes|=r,As|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Dt=!0),e.memoizedState=r)}function M3(e,t){var r=Se;Se=r!==0&&4>r?r:4,e(!0);var n=ld.transition;ld.transition={};try{e(!1),t()}finally{Se=r,ld.transition=n}}function g2(){return gr().memoizedState}function F3(e,t,r){var n=Wn(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},y2(e))x2(t,r);else if(r=Xy(e,t,r,n),r!==null){var s=Tt();Cr(r,e,n,s),v2(r,t,n)}}function U3(e,t,r){var n=Wn(e),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(y2(e))x2(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var a=t.lastRenderedState,l=i(a,r);if(s.hasEagerState=!0,s.eagerState=l,Pr(l,a)){var c=t.interleaved;c===null?(s.next=s,Bf(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}r=Xy(e,t,s,n),r!==null&&(s=Tt(),Cr(r,e,n,s),v2(r,t,n))}}function y2(e){var t=e.alternate;return e===Fe||t!==null&&t===Fe}function x2(e,t){Ho=jc=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function v2(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Tf(e,r)}}var Sc={readContext:mr,useCallback:_t,useContext:_t,useEffect:_t,useImperativeHandle:_t,useInsertionEffect:_t,useLayoutEffect:_t,useMemo:_t,useReducer:_t,useRef:_t,useState:_t,useDebugValue:_t,useDeferredValue:_t,useTransition:_t,useMutableSource:_t,useSyncExternalStore:_t,useId:_t,unstable_isNewReconciler:!1},z3={readContext:mr,useCallback:function(e,t){return zr().memoizedState=[e,t===void 0?null:t],e},useContext:mr,useEffect:Zm,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Xl(4194308,4,d2.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Xl(4194308,4,e,t)},useInsertionEffect:function(e,t){return Xl(4,2,e,t)},useMemo:function(e,t){var r=zr();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=zr();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=F3.bind(null,Fe,e),[n.memoizedState,e]},useRef:function(e){var t=zr();return e={current:e},t.memoizedState=e},useState:Xm,useDebugValue:Qf,useDeferredValue:function(e){return zr().memoizedState=e},useTransition:function(){var e=Xm(!1),t=e[0];return e=M3.bind(null,e[1]),zr().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=Fe,s=zr();if(Re){if(r===void 0)throw Error(O(407));r=r()}else{if(r=t(),pt===null)throw Error(O(349));Ts&30||n2(n,t,r)}s.memoizedState=r;var i={value:r,getSnapshot:t};return s.queue=i,Zm(i2.bind(null,n,i,e),[e]),n.flags|=2048,ya(9,s2.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=zr(),t=pt.identifierPrefix;if(Re){var r=ln,n=an;r=(n&~(1<<32-Ar(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=ma++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=D3++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},B3={readContext:mr,useCallback:f2,useContext:mr,useEffect:Jf,useImperativeHandle:h2,useInsertionEffect:c2,useLayoutEffect:u2,useMemo:p2,useReducer:cd,useRef:l2,useState:function(){return cd(ga)},useDebugValue:Qf,useDeferredValue:function(e){var t=gr();return m2(t,it.memoizedState,e)},useTransition:function(){var e=cd(ga)[0],t=gr().memoizedState;return[e,t]},useMutableSource:t2,useSyncExternalStore:r2,useId:g2,unstable_isNewReconciler:!1},W3={readContext:mr,useCallback:f2,useContext:mr,useEffect:Jf,useImperativeHandle:h2,useInsertionEffect:c2,useLayoutEffect:u2,useMemo:p2,useReducer:ud,useRef:l2,useState:function(){return ud(ga)},useDebugValue:Qf,useDeferredValue:function(e){var t=gr();return it===null?t.memoizedState=e:m2(t,it.memoizedState,e)},useTransition:function(){var e=ud(ga)[0],t=gr().memoizedState;return[e,t]},useMutableSource:t2,useSyncExternalStore:r2,useId:g2,unstable_isNewReconciler:!1};function kr(e,t){if(e&&e.defaultProps){t=ze({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function ph(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:ze({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Yc={isMounted:function(e){return(e=e._reactInternals)?Ls(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Tt(),s=Wn(e),i=cn(n,s);i.payload=t,r!=null&&(i.callback=r),t=zn(e,i,s),t!==null&&(Cr(t,e,s,n),Jl(t,e,s))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Tt(),s=Wn(e),i=cn(n,s);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=zn(e,i,s),t!==null&&(Cr(t,e,s,n),Jl(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Tt(),n=Wn(e),s=cn(r,n);s.tag=2,t!=null&&(s.callback=t),t=zn(e,s,n),t!==null&&(Cr(t,e,n,r),Jl(t,e,n))}};function e0(e,t,r,n,s,i,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,a):t.prototype&&t.prototype.isPureReactComponent?!ca(r,n)||!ca(s,i):!0}function w2(e,t,r){var n=!1,s=Kn,i=t.contextType;return typeof i=="object"&&i!==null?i=mr(i):(s=Ft(t)?Ns:Nt.current,n=t.contextTypes,i=(n=n!=null)?Ai(e,s):Kn),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Yc,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function t0(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&Yc.enqueueReplaceState(t,t.state,null)}function mh(e,t,r,n){var s=e.stateNode;s.props=r,s.state=e.memoizedState,s.refs={},Wf(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=mr(i):(i=Ft(t)?Ns:Nt.current,s.context=Ai(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(ph(e,t,i,r),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Yc.enqueueReplaceState(s,s.state,null),_c(e,r,s,n),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Oi(e,t){try{var r="",n=t;do r+=yb(n),n=n.return;while(n);var s=r}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function dd(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function gh(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var V3=typeof WeakMap=="function"?WeakMap:Map;function b2(e,t,r){r=cn(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Ec||(Ec=!0,Nh=n),gh(e,t)},r}function _2(e,t,r){r=cn(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var s=t.value;r.payload=function(){return n(s)},r.callback=function(){gh(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){gh(e,t),typeof n!="function"&&(Bn===null?Bn=new Set([this]):Bn.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),r}function r0(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new V3;var s=new Set;n.set(t,s)}else s=n.get(t),s===void 0&&(s=new Set,n.set(t,s));s.has(r)||(s.add(r),e=s4.bind(null,e,t,r),t.then(e,e))}function n0(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function s0(e,t,r,n,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=cn(-1,1),t.tag=2,zn(r,t,1))),r.lanes|=1),e)}var H3=vn.ReactCurrentOwner,Dt=!1;function Et(e,t,r,n){t.child=e===null?Qy(t,null,r,n):Ii(t,e.child,r,n)}function i0(e,t,r,n,s){r=r.render;var i=t.ref;return bi(t,s),n=qf(e,t,r,n,i,s),r=Yf(),e!==null&&!Dt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,fn(e,t,s)):(Re&&r&&$f(t),t.flags|=1,Et(e,t,n,s),t.child)}function o0(e,t,r,n,s){if(e===null){var i=r.type;return typeof i=="function"&&!ip(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,k2(e,t,i,n,s)):(e=rc(r.type,null,n,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var a=i.memoizedProps;if(r=r.compare,r=r!==null?r:ca,r(a,n)&&e.ref===t.ref)return fn(e,t,s)}return t.flags|=1,e=Vn(i,n),e.ref=t.ref,e.return=t,t.child=e}function k2(e,t,r,n,s){if(e!==null){var i=e.memoizedProps;if(ca(i,n)&&e.ref===t.ref)if(Dt=!1,t.pendingProps=n=i,(e.lanes&s)!==0)e.flags&131072&&(Dt=!0);else return t.lanes=e.lanes,fn(e,t,s)}return yh(e,t,r,n,s)}function j2(e,t,r){var n=t.pendingProps,s=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ce(fi,Gt),Gt|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ce(fi,Gt),Gt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,Ce(fi,Gt),Gt|=n}else i!==null?(n=i.baseLanes|r,t.memoizedState=null):n=r,Ce(fi,Gt),Gt|=n;return Et(e,t,s,r),t.child}function S2(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function yh(e,t,r,n,s){var i=Ft(r)?Ns:Nt.current;return i=Ai(t,i),bi(t,s),r=qf(e,t,r,n,i,s),n=Yf(),e!==null&&!Dt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,fn(e,t,s)):(Re&&n&&$f(t),t.flags|=1,Et(e,t,r,s),t.child)}function a0(e,t,r,n,s){if(Ft(r)){var i=!0;yc(t)}else i=!1;if(bi(t,s),t.stateNode===null)Zl(e,t),w2(t,r,n),mh(t,r,n,s),n=!0;else if(e===null){var a=t.stateNode,l=t.memoizedProps;a.props=l;var c=a.context,u=r.contextType;typeof u=="object"&&u!==null?u=mr(u):(u=Ft(r)?Ns:Nt.current,u=Ai(t,u));var d=r.getDerivedStateFromProps,f=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function";f||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==n||c!==u)&&t0(t,a,n,u),Tn=!1;var h=t.memoizedState;a.state=h,_c(t,n,a,s),c=t.memoizedState,l!==n||h!==c||Mt.current||Tn?(typeof d=="function"&&(ph(t,r,d,n),c=t.memoizedState),(l=Tn||e0(t,r,l,n,h,c,u))?(f||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),a.props=n,a.state=c,a.context=u,n=l):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{a=t.stateNode,Zy(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:kr(t.type,l),a.props=u,f=t.pendingProps,h=a.context,c=r.contextType,typeof c=="object"&&c!==null?c=mr(c):(c=Ft(r)?Ns:Nt.current,c=Ai(t,c));var m=r.getDerivedStateFromProps;(d=typeof m=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==f||h!==c)&&t0(t,a,n,c),Tn=!1,h=t.memoizedState,a.state=h,_c(t,n,a,s);var x=t.memoizedState;l!==f||h!==x||Mt.current||Tn?(typeof m=="function"&&(ph(t,r,m,n),x=t.memoizedState),(u=Tn||e0(t,r,u,n,h,x,c)||!1)?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,x,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,x,c)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=x),a.props=n,a.state=x,a.context=c,n=u):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),n=!1)}return xh(e,t,r,n,i,s)}function xh(e,t,r,n,s,i){S2(e,t);var a=(t.flags&128)!==0;if(!n&&!a)return s&&Gm(t,r,!1),fn(e,t,i);n=t.stateNode,H3.current=t;var l=a&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&a?(t.child=Ii(t,e.child,null,i),t.child=Ii(t,null,l,i)):Et(e,t,l,i),t.memoizedState=n.state,s&&Gm(t,r,!0),t.child}function N2(e){var t=e.stateNode;t.pendingContext?Hm(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Hm(e,t.context,!1),Vf(e,t.containerInfo)}function l0(e,t,r,n,s){return Ci(),Mf(s),t.flags|=256,Et(e,t,r,n),t.child}var vh={dehydrated:null,treeContext:null,retryLane:0};function wh(e){return{baseLanes:e,cachePool:null,transitions:null}}function E2(e,t,r){var n=t.pendingProps,s=Me.current,i=!1,a=(t.flags&128)!==0,l;if((l=a)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),Ce(Me,s&1),e===null)return hh(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=n.children,e=n.fallback,i?(n=t.mode,i=t.child,a={mode:"hidden",children:a},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=Xc(a,n,0,null),e=ws(e,n,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=wh(r),t.memoizedState=vh,e):Xf(t,a));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return G3(e,t,a,n,l,s,r);if(i){i=n.fallback,a=t.mode,s=e.child,l=s.sibling;var c={mode:"hidden",children:n.children};return!(a&1)&&t.child!==s?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=Vn(s,c),n.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Vn(l,i):(i=ws(i,a,r,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,a=e.child.memoizedState,a=a===null?wh(r):{baseLanes:a.baseLanes|r,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=e.childLanes&~r,t.memoizedState=vh,n}return i=e.child,e=i.sibling,n=Vn(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function Xf(e,t){return t=Xc({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Nl(e,t,r,n){return n!==null&&Mf(n),Ii(t,e.child,null,r),e=Xf(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function G3(e,t,r,n,s,i,a){if(r)return t.flags&256?(t.flags&=-257,n=dd(Error(O(422))),Nl(e,t,a,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,s=t.mode,n=Xc({mode:"visible",children:n.children},s,0,null),i=ws(i,s,a,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&Ii(t,e.child,null,a),t.child.memoizedState=wh(a),t.memoizedState=vh,i);if(!(t.mode&1))return Nl(e,t,a,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var l=n.dgst;return n=l,i=Error(O(419)),n=dd(i,n,void 0),Nl(e,t,a,n)}if(l=(a&e.childLanes)!==0,Dt||l){if(n=pt,n!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,hn(e,s),Cr(n,e,s,-1))}return sp(),n=dd(Error(O(421))),Nl(e,t,a,n)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=i4.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,qt=Un(s.nextSibling),Yt=t,Re=!0,Er=null,e!==null&&(ur[dr++]=an,ur[dr++]=ln,ur[dr++]=Es,an=e.id,ln=e.overflow,Es=t),t=Xf(t,n.children),t.flags|=4096,t)}function c0(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),fh(e.return,t,r)}function hd(e,t,r,n,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=s)}function T2(e,t,r){var n=t.pendingProps,s=n.revealOrder,i=n.tail;if(Et(e,t,n.children,r),n=Me.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&c0(e,r,t);else if(e.tag===19)c0(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Ce(Me,n),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(r=t.child,s=null;r!==null;)e=r.alternate,e!==null&&kc(e)===null&&(s=r),r=r.sibling;r=s,r===null?(s=t.child,t.child=null):(s=r.sibling,r.sibling=null),hd(t,!1,s,r,i);break;case"backwards":for(r=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&kc(e)===null){t.child=s;break}e=s.sibling,s.sibling=r,r=s,s=e}hd(t,!0,r,null,i);break;case"together":hd(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Zl(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function fn(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),As|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(O(153));if(t.child!==null){for(e=t.child,r=Vn(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Vn(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function K3(e,t,r){switch(t.tag){case 3:N2(t),Ci();break;case 5:e2(t);break;case 1:Ft(t.type)&&yc(t);break;case 4:Vf(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,s=t.memoizedProps.value;Ce(wc,n._currentValue),n._currentValue=s;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(Ce(Me,Me.current&1),t.flags|=128,null):r&t.child.childLanes?E2(e,t,r):(Ce(Me,Me.current&1),e=fn(e,t,r),e!==null?e.sibling:null);Ce(Me,Me.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return T2(e,t,r);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ce(Me,Me.current),n)break;return null;case 22:case 23:return t.lanes=0,j2(e,t,r)}return fn(e,t,r)}var A2,bh,C2,I2;A2=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};bh=function(){};C2=function(e,t,r,n){var s=e.memoizedProps;if(s!==n){e=t.stateNode,ps(Hr.current);var i=null;switch(r){case"input":s=Wd(e,s),n=Wd(e,n),i=[];break;case"select":s=ze({},s,{value:void 0}),n=ze({},n,{value:void 0}),i=[];break;case"textarea":s=Gd(e,s),n=Gd(e,n),i=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=mc)}qd(r,n);var a;r=null;for(u in s)if(!n.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(a in l)l.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(ra.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in n){var c=n[u];if(l=s!=null?s[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(r||(r={}),r[a]=c[a])}else r||(i||(i=[]),i.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(ra.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Ie("scroll",e),i||l===c||(i=[])):(i=i||[]).push(u,c))}r&&(i=i||[]).push("style",r);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};I2=function(e,t,r,n){r!==n&&(t.flags|=4)};function jo(e,t){if(!Re)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function kt(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function q3(e,t,r){var n=t.pendingProps;switch(Df(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return kt(t),null;case 1:return Ft(t.type)&&gc(),kt(t),null;case 3:return n=t.stateNode,Pi(),Pe(Mt),Pe(Nt),Gf(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(jl(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Er!==null&&(Ah(Er),Er=null))),bh(e,t),kt(t),null;case 5:Hf(t);var s=ps(pa.current);if(r=t.type,e!==null&&t.stateNode!=null)C2(e,t,r,n,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(O(166));return kt(t),null}if(e=ps(Hr.current),jl(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[Br]=t,n[ha]=i,e=(t.mode&1)!==0,r){case"dialog":Ie("cancel",n),Ie("close",n);break;case"iframe":case"object":case"embed":Ie("load",n);break;case"video":case"audio":for(s=0;s<Ro.length;s++)Ie(Ro[s],n);break;case"source":Ie("error",n);break;case"img":case"image":case"link":Ie("error",n),Ie("load",n);break;case"details":Ie("toggle",n);break;case"input":xm(n,i),Ie("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},Ie("invalid",n);break;case"textarea":wm(n,i),Ie("invalid",n)}qd(r,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var l=i[a];a==="children"?typeof l=="string"?n.textContent!==l&&(i.suppressHydrationWarning!==!0&&kl(n.textContent,l,e),s=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&kl(n.textContent,l,e),s=["children",""+l]):ra.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&Ie("scroll",n)}switch(r){case"input":ml(n),vm(n,i,!0);break;case"textarea":ml(n),bm(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=mc)}n=s,t.updateQueue=n,n!==null&&(t.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=iy(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=a.createElement(r,{is:n.is}):(e=a.createElement(r),r==="select"&&(a=e,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):e=a.createElementNS(e,r),e[Br]=t,e[ha]=n,A2(e,t,!1,!1),t.stateNode=e;e:{switch(a=Yd(r,n),r){case"dialog":Ie("cancel",e),Ie("close",e),s=n;break;case"iframe":case"object":case"embed":Ie("load",e),s=n;break;case"video":case"audio":for(s=0;s<Ro.length;s++)Ie(Ro[s],e);s=n;break;case"source":Ie("error",e),s=n;break;case"img":case"image":case"link":Ie("error",e),Ie("load",e),s=n;break;case"details":Ie("toggle",e),s=n;break;case"input":xm(e,n),s=Wd(e,n),Ie("invalid",e);break;case"option":s=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},s=ze({},n,{value:void 0}),Ie("invalid",e);break;case"textarea":wm(e,n),s=Gd(e,n),Ie("invalid",e);break;default:s=n}qd(r,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?ly(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&oy(e,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&na(e,c):typeof c=="number"&&na(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(ra.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Ie("scroll",e):c!=null&&_f(e,i,c,a))}switch(r){case"input":ml(e),vm(e,n,!1);break;case"textarea":ml(e),bm(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Gn(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?yi(e,!!n.multiple,i,!1):n.defaultValue!=null&&yi(e,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=mc)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return kt(t),null;case 6:if(e&&t.stateNode!=null)I2(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(O(166));if(r=ps(pa.current),ps(Hr.current),jl(t)){if(n=t.stateNode,r=t.memoizedProps,n[Br]=t,(i=n.nodeValue!==r)&&(e=Yt,e!==null))switch(e.tag){case 3:kl(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&kl(n.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Br]=t,t.stateNode=n}return kt(t),null;case 13:if(Pe(Me),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Re&&qt!==null&&t.mode&1&&!(t.flags&128))Yy(),Ci(),t.flags|=98560,i=!1;else if(i=jl(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(O(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(O(317));i[Br]=t}else Ci(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;kt(t),i=!1}else Er!==null&&(Ah(Er),Er=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||Me.current&1?ot===0&&(ot=3):sp())),t.updateQueue!==null&&(t.flags|=4),kt(t),null);case 4:return Pi(),bh(e,t),e===null&&ua(t.stateNode.containerInfo),kt(t),null;case 10:return zf(t.type._context),kt(t),null;case 17:return Ft(t.type)&&gc(),kt(t),null;case 19:if(Pe(Me),i=t.memoizedState,i===null)return kt(t),null;if(n=(t.flags&128)!==0,a=i.rendering,a===null)if(n)jo(i,!1);else{if(ot!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=kc(e),a!==null){for(t.flags|=128,jo(i,!1),n=a.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)i=r,e=n,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,e=a.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Ce(Me,Me.current&1|2),t.child}e=e.sibling}i.tail!==null&&qe()>Ri&&(t.flags|=128,n=!0,jo(i,!1),t.lanes=4194304)}else{if(!n)if(e=kc(a),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),jo(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!Re)return kt(t),null}else 2*qe()-i.renderingStartTime>Ri&&r!==1073741824&&(t.flags|=128,n=!0,jo(i,!1),t.lanes=4194304);i.isBackwards?(a.sibling=t.child,t.child=a):(r=i.last,r!==null?r.sibling=a:t.child=a,i.last=a)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=qe(),t.sibling=null,r=Me.current,Ce(Me,n?r&1|2:r&1),t):(kt(t),null);case 22:case 23:return np(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Gt&1073741824&&(kt(t),t.subtreeFlags&6&&(t.flags|=8192)):kt(t),null;case 24:return null;case 25:return null}throw Error(O(156,t.tag))}function Y3(e,t){switch(Df(t),t.tag){case 1:return Ft(t.type)&&gc(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Pi(),Pe(Mt),Pe(Nt),Gf(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Hf(t),null;case 13:if(Pe(Me),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(O(340));Ci()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Pe(Me),null;case 4:return Pi(),null;case 10:return zf(t.type._context),null;case 22:case 23:return np(),null;case 24:return null;default:return null}}var El=!1,St=!1,J3=typeof WeakSet=="function"?WeakSet:Set,W=null;function hi(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Ve(e,t,n)}else r.current=null}function _h(e,t,r){try{r()}catch(n){Ve(e,t,n)}}var u0=!1;function Q3(e,t){if(ih=hc,e=$y(),Lf(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var a=0,l=-1,c=-1,u=0,d=0,f=e,h=null;t:for(;;){for(var m;f!==r||s!==0&&f.nodeType!==3||(l=a+s),f!==i||n!==0&&f.nodeType!==3||(c=a+n),f.nodeType===3&&(a+=f.nodeValue.length),(m=f.firstChild)!==null;)h=f,f=m;for(;;){if(f===e)break t;if(h===r&&++u===s&&(l=a),h===i&&++d===n&&(c=a),(m=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=m}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(oh={focusedElem:e,selectionRange:r},hc=!1,W=t;W!==null;)if(t=W,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,W=e;else for(;W!==null;){t=W;try{var x=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var w=x.memoizedProps,k=x.memoizedState,g=t.stateNode,p=g.getSnapshotBeforeUpdate(t.elementType===t.type?w:kr(t.type,w),k);g.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var y=t.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(O(163))}}catch(v){Ve(t,t.return,v)}if(e=t.sibling,e!==null){e.return=t.return,W=e;break}W=t.return}return x=u0,u0=!1,x}function Go(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&_h(t,r,i)}s=s.next}while(s!==n)}}function Jc(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function kh(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function P2(e){var t=e.alternate;t!==null&&(e.alternate=null,P2(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Br],delete t[ha],delete t[ch],delete t[O3],delete t[R3])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function O2(e){return e.tag===5||e.tag===3||e.tag===4}function d0(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||O2(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function jh(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=mc));else if(n!==4&&(e=e.child,e!==null))for(jh(e,t,r),e=e.sibling;e!==null;)jh(e,t,r),e=e.sibling}function Sh(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(Sh(e,t,r),e=e.sibling;e!==null;)Sh(e,t,r),e=e.sibling}var xt=null,Sr=!1;function _n(e,t,r){for(r=r.child;r!==null;)R2(e,t,r),r=r.sibling}function R2(e,t,r){if(Vr&&typeof Vr.onCommitFiberUnmount=="function")try{Vr.onCommitFiberUnmount(Bc,r)}catch{}switch(r.tag){case 5:St||hi(r,t);case 6:var n=xt,s=Sr;xt=null,_n(e,t,r),xt=n,Sr=s,xt!==null&&(Sr?(e=xt,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):xt.removeChild(r.stateNode));break;case 18:xt!==null&&(Sr?(e=xt,r=r.stateNode,e.nodeType===8?id(e.parentNode,r):e.nodeType===1&&id(e,r),aa(e)):id(xt,r.stateNode));break;case 4:n=xt,s=Sr,xt=r.stateNode.containerInfo,Sr=!0,_n(e,t,r),xt=n,Sr=s;break;case 0:case 11:case 14:case 15:if(!St&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&_h(r,t,a),s=s.next}while(s!==n)}_n(e,t,r);break;case 1:if(!St&&(hi(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){Ve(r,t,l)}_n(e,t,r);break;case 21:_n(e,t,r);break;case 22:r.mode&1?(St=(n=St)||r.memoizedState!==null,_n(e,t,r),St=n):_n(e,t,r);break;default:_n(e,t,r)}}function h0(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new J3),t.forEach(function(n){var s=o4.bind(null,e,n);r.has(n)||(r.add(n),n.then(s,s))})}}function br(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var i=e,a=t,l=a;e:for(;l!==null;){switch(l.tag){case 5:xt=l.stateNode,Sr=!1;break e;case 3:xt=l.stateNode.containerInfo,Sr=!0;break e;case 4:xt=l.stateNode.containerInfo,Sr=!0;break e}l=l.return}if(xt===null)throw Error(O(160));R2(i,a,s),xt=null,Sr=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){Ve(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)L2(t,e),t=t.sibling}function L2(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(br(t,e),Dr(e),n&4){try{Go(3,e,e.return),Jc(3,e)}catch(w){Ve(e,e.return,w)}try{Go(5,e,e.return)}catch(w){Ve(e,e.return,w)}}break;case 1:br(t,e),Dr(e),n&512&&r!==null&&hi(r,r.return);break;case 5:if(br(t,e),Dr(e),n&512&&r!==null&&hi(r,r.return),e.flags&32){var s=e.stateNode;try{na(s,"")}catch(w){Ve(e,e.return,w)}}if(n&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,a=r!==null?r.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&ny(s,i),Yd(l,a);var u=Yd(l,i);for(a=0;a<c.length;a+=2){var d=c[a],f=c[a+1];d==="style"?ly(s,f):d==="dangerouslySetInnerHTML"?oy(s,f):d==="children"?na(s,f):_f(s,d,f,u)}switch(l){case"input":Vd(s,i);break;case"textarea":sy(s,i);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?yi(s,!!i.multiple,m,!1):h!==!!i.multiple&&(i.defaultValue!=null?yi(s,!!i.multiple,i.defaultValue,!0):yi(s,!!i.multiple,i.multiple?[]:"",!1))}s[ha]=i}catch(w){Ve(e,e.return,w)}}break;case 6:if(br(t,e),Dr(e),n&4){if(e.stateNode===null)throw Error(O(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(w){Ve(e,e.return,w)}}break;case 3:if(br(t,e),Dr(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{aa(t.containerInfo)}catch(w){Ve(e,e.return,w)}break;case 4:br(t,e),Dr(e);break;case 13:br(t,e),Dr(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(tp=qe())),n&4&&h0(e);break;case 22:if(d=r!==null&&r.memoizedState!==null,e.mode&1?(St=(u=St)||d,br(t,e),St=u):br(t,e),Dr(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(W=e,d=e.child;d!==null;){for(f=W=d;W!==null;){switch(h=W,m=h.child,h.tag){case 0:case 11:case 14:case 15:Go(4,h,h.return);break;case 1:hi(h,h.return);var x=h.stateNode;if(typeof x.componentWillUnmount=="function"){n=h,r=h.return;try{t=n,x.props=t.memoizedProps,x.state=t.memoizedState,x.componentWillUnmount()}catch(w){Ve(n,r,w)}}break;case 5:hi(h,h.return);break;case 22:if(h.memoizedState!==null){p0(f);continue}}m!==null?(m.return=h,W=m):p0(f)}d=d.sibling}e:for(d=null,f=e;;){if(f.tag===5){if(d===null){d=f;try{s=f.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=f.stateNode,c=f.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=ay("display",a))}catch(w){Ve(e,e.return,w)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(w){Ve(e,e.return,w)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:br(t,e),Dr(e),n&4&&h0(e);break;case 21:break;default:br(t,e),Dr(e)}}function Dr(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(O2(r)){var n=r;break e}r=r.return}throw Error(O(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(na(s,""),n.flags&=-33);var i=d0(e);Sh(e,i,s);break;case 3:case 4:var a=n.stateNode.containerInfo,l=d0(e);jh(e,l,a);break;default:throw Error(O(161))}}catch(c){Ve(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function X3(e,t,r){W=e,$2(e)}function $2(e,t,r){for(var n=(e.mode&1)!==0;W!==null;){var s=W,i=s.child;if(s.tag===22&&n){var a=s.memoizedState!==null||El;if(!a){var l=s.alternate,c=l!==null&&l.memoizedState!==null||St;l=El;var u=St;if(El=a,(St=c)&&!u)for(W=s;W!==null;)a=W,c=a.child,a.tag===22&&a.memoizedState!==null?m0(s):c!==null?(c.return=a,W=c):m0(s);for(;i!==null;)W=i,$2(i),i=i.sibling;W=s,El=l,St=u}f0(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,W=i):f0(e)}}function f0(e){for(;W!==null;){var t=W;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:St||Jc(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!St)if(r===null)n.componentDidMount();else{var s=t.elementType===t.type?r.memoizedProps:kr(t.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&Qm(t,i,n);break;case 3:var a=t.updateQueue;if(a!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Qm(t,a,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&aa(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(O(163))}St||t.flags&512&&kh(t)}catch(h){Ve(t,t.return,h)}}if(t===e){W=null;break}if(r=t.sibling,r!==null){r.return=t.return,W=r;break}W=t.return}}function p0(e){for(;W!==null;){var t=W;if(t===e){W=null;break}var r=t.sibling;if(r!==null){r.return=t.return,W=r;break}W=t.return}}function m0(e){for(;W!==null;){var t=W;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Jc(4,t)}catch(c){Ve(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var s=t.return;try{n.componentDidMount()}catch(c){Ve(t,s,c)}}var i=t.return;try{kh(t)}catch(c){Ve(t,i,c)}break;case 5:var a=t.return;try{kh(t)}catch(c){Ve(t,a,c)}}}catch(c){Ve(t,t.return,c)}if(t===e){W=null;break}var l=t.sibling;if(l!==null){l.return=t.return,W=l;break}W=t.return}}var Z3=Math.ceil,Nc=vn.ReactCurrentDispatcher,Zf=vn.ReactCurrentOwner,pr=vn.ReactCurrentBatchConfig,xe=0,pt=null,Xe=null,vt=0,Gt=0,fi=Xn(0),ot=0,xa=null,As=0,Qc=0,ep=0,Ko=null,Lt=null,tp=0,Ri=1/0,en=null,Ec=!1,Nh=null,Bn=null,Tl=!1,$n=null,Tc=0,qo=0,Eh=null,ec=-1,tc=0;function Tt(){return xe&6?qe():ec!==-1?ec:ec=qe()}function Wn(e){return e.mode&1?xe&2&&vt!==0?vt&-vt:$3.transition!==null?(tc===0&&(tc=wy()),tc):(e=Se,e!==0||(e=window.event,e=e===void 0?16:Ey(e.type)),e):1}function Cr(e,t,r,n){if(50<qo)throw qo=0,Eh=null,Error(O(185));$a(e,r,n),(!(xe&2)||e!==pt)&&(e===pt&&(!(xe&2)&&(Qc|=r),ot===4&&Pn(e,vt)),Ut(e,n),r===1&&xe===0&&!(t.mode&1)&&(Ri=qe()+500,Kc&&Zn()))}function Ut(e,t){var r=e.callbackNode;$b(e,t);var n=dc(e,e===pt?vt:0);if(n===0)r!==null&&jm(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&jm(r),t===1)e.tag===0?L3(g0.bind(null,e)):Gy(g0.bind(null,e)),I3(function(){!(xe&6)&&Zn()}),r=null;else{switch(by(n)){case 1:r=Ef;break;case 4:r=xy;break;case 16:r=uc;break;case 536870912:r=vy;break;default:r=uc}r=V2(r,D2.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function D2(e,t){if(ec=-1,tc=0,xe&6)throw Error(O(327));var r=e.callbackNode;if(_i()&&e.callbackNode!==r)return null;var n=dc(e,e===pt?vt:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=Ac(e,n);else{t=n;var s=xe;xe|=2;var i=F2();(pt!==e||vt!==t)&&(en=null,Ri=qe()+500,vs(e,t));do try{r4();break}catch(l){M2(e,l)}while(!0);Uf(),Nc.current=i,xe=s,Xe!==null?t=0:(pt=null,vt=0,t=ot)}if(t!==0){if(t===2&&(s=eh(e),s!==0&&(n=s,t=Th(e,s))),t===1)throw r=xa,vs(e,0),Pn(e,n),Ut(e,qe()),r;if(t===6)Pn(e,n);else{if(s=e.current.alternate,!(n&30)&&!e4(s)&&(t=Ac(e,n),t===2&&(i=eh(e),i!==0&&(n=i,t=Th(e,i))),t===1))throw r=xa,vs(e,0),Pn(e,n),Ut(e,qe()),r;switch(e.finishedWork=s,e.finishedLanes=n,t){case 0:case 1:throw Error(O(345));case 2:os(e,Lt,en);break;case 3:if(Pn(e,n),(n&130023424)===n&&(t=tp+500-qe(),10<t)){if(dc(e,0)!==0)break;if(s=e.suspendedLanes,(s&n)!==n){Tt(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=lh(os.bind(null,e,Lt,en),t);break}os(e,Lt,en);break;case 4:if(Pn(e,n),(n&4194240)===n)break;for(t=e.eventTimes,s=-1;0<n;){var a=31-Ar(n);i=1<<a,a=t[a],a>s&&(s=a),n&=~i}if(n=s,n=qe()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Z3(n/1960))-n,10<n){e.timeoutHandle=lh(os.bind(null,e,Lt,en),n);break}os(e,Lt,en);break;case 5:os(e,Lt,en);break;default:throw Error(O(329))}}}return Ut(e,qe()),e.callbackNode===r?D2.bind(null,e):null}function Th(e,t){var r=Ko;return e.current.memoizedState.isDehydrated&&(vs(e,t).flags|=256),e=Ac(e,t),e!==2&&(t=Lt,Lt=r,t!==null&&Ah(t)),e}function Ah(e){Lt===null?Lt=e:Lt.push.apply(Lt,e)}function e4(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],i=s.getSnapshot;s=s.value;try{if(!Pr(i(),s))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Pn(e,t){for(t&=~ep,t&=~Qc,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Ar(t),n=1<<r;e[r]=-1,t&=~n}}function g0(e){if(xe&6)throw Error(O(327));_i();var t=dc(e,0);if(!(t&1))return Ut(e,qe()),null;var r=Ac(e,t);if(e.tag!==0&&r===2){var n=eh(e);n!==0&&(t=n,r=Th(e,n))}if(r===1)throw r=xa,vs(e,0),Pn(e,t),Ut(e,qe()),r;if(r===6)throw Error(O(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,os(e,Lt,en),Ut(e,qe()),null}function rp(e,t){var r=xe;xe|=1;try{return e(t)}finally{xe=r,xe===0&&(Ri=qe()+500,Kc&&Zn())}}function Cs(e){$n!==null&&$n.tag===0&&!(xe&6)&&_i();var t=xe;xe|=1;var r=pr.transition,n=Se;try{if(pr.transition=null,Se=1,e)return e()}finally{Se=n,pr.transition=r,xe=t,!(xe&6)&&Zn()}}function np(){Gt=fi.current,Pe(fi)}function vs(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,C3(r)),Xe!==null)for(r=Xe.return;r!==null;){var n=r;switch(Df(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&gc();break;case 3:Pi(),Pe(Mt),Pe(Nt),Gf();break;case 5:Hf(n);break;case 4:Pi();break;case 13:Pe(Me);break;case 19:Pe(Me);break;case 10:zf(n.type._context);break;case 22:case 23:np()}r=r.return}if(pt=e,Xe=e=Vn(e.current,null),vt=Gt=t,ot=0,xa=null,ep=Qc=As=0,Lt=Ko=null,fs!==null){for(t=0;t<fs.length;t++)if(r=fs[t],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,i=r.pending;if(i!==null){var a=i.next;i.next=s,n.next=a}r.pending=n}fs=null}return e}function M2(e,t){do{var r=Xe;try{if(Uf(),Ql.current=Sc,jc){for(var n=Fe.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}jc=!1}if(Ts=0,dt=it=Fe=null,Ho=!1,ma=0,Zf.current=null,r===null||r.return===null){ot=1,xa=t,Xe=null;break}e:{var i=e,a=r.return,l=r,c=t;if(t=vt,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=n0(a);if(m!==null){m.flags&=-257,s0(m,a,l,i,t),m.mode&1&&r0(i,u,t),t=m,c=u;var x=t.updateQueue;if(x===null){var w=new Set;w.add(c),t.updateQueue=w}else x.add(c);break e}else{if(!(t&1)){r0(i,u,t),sp();break e}c=Error(O(426))}}else if(Re&&l.mode&1){var k=n0(a);if(k!==null){!(k.flags&65536)&&(k.flags|=256),s0(k,a,l,i,t),Mf(Oi(c,l));break e}}i=c=Oi(c,l),ot!==4&&(ot=2),Ko===null?Ko=[i]:Ko.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var g=b2(i,c,t);Jm(i,g);break e;case 1:l=c;var p=i.type,y=i.stateNode;if(!(i.flags&128)&&(typeof p.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Bn===null||!Bn.has(y)))){i.flags|=65536,t&=-t,i.lanes|=t;var v=_2(i,l,t);Jm(i,v);break e}}i=i.return}while(i!==null)}z2(r)}catch(N){t=N,Xe===r&&r!==null&&(Xe=r=r.return);continue}break}while(!0)}function F2(){var e=Nc.current;return Nc.current=Sc,e===null?Sc:e}function sp(){(ot===0||ot===3||ot===2)&&(ot=4),pt===null||!(As&268435455)&&!(Qc&268435455)||Pn(pt,vt)}function Ac(e,t){var r=xe;xe|=2;var n=F2();(pt!==e||vt!==t)&&(en=null,vs(e,t));do try{t4();break}catch(s){M2(e,s)}while(!0);if(Uf(),xe=r,Nc.current=n,Xe!==null)throw Error(O(261));return pt=null,vt=0,ot}function t4(){for(;Xe!==null;)U2(Xe)}function r4(){for(;Xe!==null&&!Eb();)U2(Xe)}function U2(e){var t=W2(e.alternate,e,Gt);e.memoizedProps=e.pendingProps,t===null?z2(e):Xe=t,Zf.current=null}function z2(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=Y3(r,t),r!==null){r.flags&=32767,Xe=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ot=6,Xe=null;return}}else if(r=q3(r,t,Gt),r!==null){Xe=r;return}if(t=t.sibling,t!==null){Xe=t;return}Xe=t=e}while(t!==null);ot===0&&(ot=5)}function os(e,t,r){var n=Se,s=pr.transition;try{pr.transition=null,Se=1,n4(e,t,r,n)}finally{pr.transition=s,Se=n}return null}function n4(e,t,r,n){do _i();while($n!==null);if(xe&6)throw Error(O(327));r=e.finishedWork;var s=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(O(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(Db(e,i),e===pt&&(Xe=pt=null,vt=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Tl||(Tl=!0,V2(uc,function(){return _i(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=pr.transition,pr.transition=null;var a=Se;Se=1;var l=xe;xe|=4,Zf.current=null,Q3(e,r),L2(r,e),k3(oh),hc=!!ih,oh=ih=null,e.current=r,X3(r),Tb(),xe=l,Se=a,pr.transition=i}else e.current=r;if(Tl&&(Tl=!1,$n=e,Tc=s),i=e.pendingLanes,i===0&&(Bn=null),Ib(r.stateNode),Ut(e,qe()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)s=t[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(Ec)throw Ec=!1,e=Nh,Nh=null,e;return Tc&1&&e.tag!==0&&_i(),i=e.pendingLanes,i&1?e===Eh?qo++:(qo=0,Eh=e):qo=0,Zn(),null}function _i(){if($n!==null){var e=by(Tc),t=pr.transition,r=Se;try{if(pr.transition=null,Se=16>e?16:e,$n===null)var n=!1;else{if(e=$n,$n=null,Tc=0,xe&6)throw Error(O(331));var s=xe;for(xe|=4,W=e.current;W!==null;){var i=W,a=i.child;if(W.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(W=u;W!==null;){var d=W;switch(d.tag){case 0:case 11:case 15:Go(8,d,i)}var f=d.child;if(f!==null)f.return=d,W=f;else for(;W!==null;){d=W;var h=d.sibling,m=d.return;if(P2(d),d===u){W=null;break}if(h!==null){h.return=m,W=h;break}W=m}}}var x=i.alternate;if(x!==null){var w=x.child;if(w!==null){x.child=null;do{var k=w.sibling;w.sibling=null,w=k}while(w!==null)}}W=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,W=a;else e:for(;W!==null;){if(i=W,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Go(9,i,i.return)}var g=i.sibling;if(g!==null){g.return=i.return,W=g;break e}W=i.return}}var p=e.current;for(W=p;W!==null;){a=W;var y=a.child;if(a.subtreeFlags&2064&&y!==null)y.return=a,W=y;else e:for(a=p;W!==null;){if(l=W,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Jc(9,l)}}catch(N){Ve(l,l.return,N)}if(l===a){W=null;break e}var v=l.sibling;if(v!==null){v.return=l.return,W=v;break e}W=l.return}}if(xe=s,Zn(),Vr&&typeof Vr.onPostCommitFiberRoot=="function")try{Vr.onPostCommitFiberRoot(Bc,e)}catch{}n=!0}return n}finally{Se=r,pr.transition=t}}return!1}function y0(e,t,r){t=Oi(r,t),t=b2(e,t,1),e=zn(e,t,1),t=Tt(),e!==null&&($a(e,1,t),Ut(e,t))}function Ve(e,t,r){if(e.tag===3)y0(e,e,r);else for(;t!==null;){if(t.tag===3){y0(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Bn===null||!Bn.has(n))){e=Oi(r,e),e=_2(t,e,1),t=zn(t,e,1),e=Tt(),t!==null&&($a(t,1,e),Ut(t,e));break}}t=t.return}}function s4(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=Tt(),e.pingedLanes|=e.suspendedLanes&r,pt===e&&(vt&r)===r&&(ot===4||ot===3&&(vt&130023424)===vt&&500>qe()-tp?vs(e,0):ep|=r),Ut(e,t)}function B2(e,t){t===0&&(e.mode&1?(t=xl,xl<<=1,!(xl&130023424)&&(xl=4194304)):t=1);var r=Tt();e=hn(e,t),e!==null&&($a(e,t,r),Ut(e,r))}function i4(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),B2(e,r)}function o4(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,s=e.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(O(314))}n!==null&&n.delete(t),B2(e,r)}var W2;W2=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Mt.current)Dt=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Dt=!1,K3(e,t,r);Dt=!!(e.flags&131072)}else Dt=!1,Re&&t.flags&1048576&&Ky(t,vc,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Zl(e,t),e=t.pendingProps;var s=Ai(t,Nt.current);bi(t,r),s=qf(null,t,n,e,s,r);var i=Yf();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ft(n)?(i=!0,yc(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Wf(t),s.updater=Yc,t.stateNode=s,s._reactInternals=t,mh(t,n,e,r),t=xh(null,t,n,!0,i,r)):(t.tag=0,Re&&i&&$f(t),Et(null,t,s,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Zl(e,t),e=t.pendingProps,s=n._init,n=s(n._payload),t.type=n,s=t.tag=l4(n),e=kr(n,e),s){case 0:t=yh(null,t,n,e,r);break e;case 1:t=a0(null,t,n,e,r);break e;case 11:t=i0(null,t,n,e,r);break e;case 14:t=o0(null,t,n,kr(n.type,e),r);break e}throw Error(O(306,n,""))}return t;case 0:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:kr(n,s),yh(e,t,n,s,r);case 1:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:kr(n,s),a0(e,t,n,s,r);case 3:e:{if(N2(t),e===null)throw Error(O(387));n=t.pendingProps,i=t.memoizedState,s=i.element,Zy(e,t),_c(t,n,null,r);var a=t.memoizedState;if(n=a.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=Oi(Error(O(423)),t),t=l0(e,t,n,r,s);break e}else if(n!==s){s=Oi(Error(O(424)),t),t=l0(e,t,n,r,s);break e}else for(qt=Un(t.stateNode.containerInfo.firstChild),Yt=t,Re=!0,Er=null,r=Qy(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Ci(),n===s){t=fn(e,t,r);break e}Et(e,t,n,r)}t=t.child}return t;case 5:return e2(t),e===null&&hh(t),n=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,a=s.children,ah(n,s)?a=null:i!==null&&ah(n,i)&&(t.flags|=32),S2(e,t),Et(e,t,a,r),t.child;case 6:return e===null&&hh(t),null;case 13:return E2(e,t,r);case 4:return Vf(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Ii(t,null,n,r):Et(e,t,n,r),t.child;case 11:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:kr(n,s),i0(e,t,n,s,r);case 7:return Et(e,t,t.pendingProps,r),t.child;case 8:return Et(e,t,t.pendingProps.children,r),t.child;case 12:return Et(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,s=t.pendingProps,i=t.memoizedProps,a=s.value,Ce(wc,n._currentValue),n._currentValue=a,i!==null)if(Pr(i.value,a)){if(i.children===s.children&&!Mt.current){t=fn(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){a=i.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=cn(-1,r&-r),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),fh(i.return,r,t),l.lanes|=r;break}c=c.next}}else if(i.tag===10)a=i.type===t.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(O(341));a.lanes|=r,l=a.alternate,l!==null&&(l.lanes|=r),fh(a,r,t),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===t){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}Et(e,t,s.children,r),t=t.child}return t;case 9:return s=t.type,n=t.pendingProps.children,bi(t,r),s=mr(s),n=n(s),t.flags|=1,Et(e,t,n,r),t.child;case 14:return n=t.type,s=kr(n,t.pendingProps),s=kr(n.type,s),o0(e,t,n,s,r);case 15:return k2(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:kr(n,s),Zl(e,t),t.tag=1,Ft(n)?(e=!0,yc(t)):e=!1,bi(t,r),w2(t,n,s),mh(t,n,s,r),xh(null,t,n,!0,e,r);case 19:return T2(e,t,r);case 22:return j2(e,t,r)}throw Error(O(156,t.tag))};function V2(e,t){return yy(e,t)}function a4(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function hr(e,t,r,n){return new a4(e,t,r,n)}function ip(e){return e=e.prototype,!(!e||!e.isReactComponent)}function l4(e){if(typeof e=="function")return ip(e)?1:0;if(e!=null){if(e=e.$$typeof,e===jf)return 11;if(e===Sf)return 14}return 2}function Vn(e,t){var r=e.alternate;return r===null?(r=hr(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function rc(e,t,r,n,s,i){var a=2;if(n=e,typeof e=="function")ip(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case ni:return ws(r.children,s,i,t);case kf:a=8,s|=8;break;case Fd:return e=hr(12,r,t,s|2),e.elementType=Fd,e.lanes=i,e;case Ud:return e=hr(13,r,t,s),e.elementType=Ud,e.lanes=i,e;case zd:return e=hr(19,r,t,s),e.elementType=zd,e.lanes=i,e;case ey:return Xc(r,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case X1:a=10;break e;case Z1:a=9;break e;case jf:a=11;break e;case Sf:a=14;break e;case En:a=16,n=null;break e}throw Error(O(130,e==null?e:typeof e,""))}return t=hr(a,r,t,s),t.elementType=e,t.type=n,t.lanes=i,t}function ws(e,t,r,n){return e=hr(7,e,n,t),e.lanes=r,e}function Xc(e,t,r,n){return e=hr(22,e,n,t),e.elementType=ey,e.lanes=r,e.stateNode={isHidden:!1},e}function fd(e,t,r){return e=hr(6,e,null,t),e.lanes=r,e}function pd(e,t,r){return t=hr(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function c4(e,t,r,n,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=qu(0),this.expirationTimes=qu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=qu(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function op(e,t,r,n,s,i,a,l,c){return e=new c4(e,t,r,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=hr(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Wf(i),e}function u4(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ri,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function H2(e){if(!e)return Kn;e=e._reactInternals;e:{if(Ls(e)!==e||e.tag!==1)throw Error(O(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ft(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(O(171))}if(e.tag===1){var r=e.type;if(Ft(r))return Hy(e,r,t)}return t}function G2(e,t,r,n,s,i,a,l,c){return e=op(r,n,!0,e,s,i,a,l,c),e.context=H2(null),r=e.current,n=Tt(),s=Wn(r),i=cn(n,s),i.callback=t??null,zn(r,i,s),e.current.lanes=s,$a(e,s,n),Ut(e,n),e}function Zc(e,t,r,n){var s=t.current,i=Tt(),a=Wn(s);return r=H2(r),t.context===null?t.context=r:t.pendingContext=r,t=cn(i,a),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=zn(s,t,a),e!==null&&(Cr(e,s,a,i),Jl(e,s,a)),a}function Cc(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function x0(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function ap(e,t){x0(e,t),(e=e.alternate)&&x0(e,t)}function d4(){return null}var K2=typeof reportError=="function"?reportError:function(e){console.error(e)};function lp(e){this._internalRoot=e}eu.prototype.render=lp.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(O(409));Zc(e,t,null,null)};eu.prototype.unmount=lp.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Cs(function(){Zc(null,e,null,null)}),t[dn]=null}};function eu(e){this._internalRoot=e}eu.prototype.unstable_scheduleHydration=function(e){if(e){var t=jy();e={blockedOn:null,target:e,priority:t};for(var r=0;r<In.length&&t!==0&&t<In[r].priority;r++);In.splice(r,0,e),r===0&&Ny(e)}};function cp(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function tu(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function v0(){}function h4(e,t,r,n,s){if(s){if(typeof n=="function"){var i=n;n=function(){var u=Cc(a);i.call(u)}}var a=G2(t,n,e,0,null,!1,!1,"",v0);return e._reactRootContainer=a,e[dn]=a.current,ua(e.nodeType===8?e.parentNode:e),Cs(),a}for(;s=e.lastChild;)e.removeChild(s);if(typeof n=="function"){var l=n;n=function(){var u=Cc(c);l.call(u)}}var c=op(e,0,!1,null,null,!1,!1,"",v0);return e._reactRootContainer=c,e[dn]=c.current,ua(e.nodeType===8?e.parentNode:e),Cs(function(){Zc(t,c,r,n)}),c}function ru(e,t,r,n,s){var i=r._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var l=s;s=function(){var c=Cc(a);l.call(c)}}Zc(t,a,e,s)}else a=h4(r,t,e,s,n);return Cc(a)}_y=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Oo(t.pendingLanes);r!==0&&(Tf(t,r|1),Ut(t,qe()),!(xe&6)&&(Ri=qe()+500,Zn()))}break;case 13:Cs(function(){var n=hn(e,1);if(n!==null){var s=Tt();Cr(n,e,1,s)}}),ap(e,1)}};Af=function(e){if(e.tag===13){var t=hn(e,134217728);if(t!==null){var r=Tt();Cr(t,e,134217728,r)}ap(e,134217728)}};ky=function(e){if(e.tag===13){var t=Wn(e),r=hn(e,t);if(r!==null){var n=Tt();Cr(r,e,t,n)}ap(e,t)}};jy=function(){return Se};Sy=function(e,t){var r=Se;try{return Se=e,t()}finally{Se=r}};Qd=function(e,t,r){switch(t){case"input":if(Vd(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var s=Gc(n);if(!s)throw Error(O(90));ry(n),Vd(n,s)}}}break;case"textarea":sy(e,r);break;case"select":t=r.value,t!=null&&yi(e,!!r.multiple,t,!1)}};dy=rp;hy=Cs;var f4={usingClientEntryPoint:!1,Events:[Ma,ai,Gc,cy,uy,rp]},So={findFiberByHostInstance:hs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},p4={bundleType:So.bundleType,version:So.version,rendererPackageName:So.rendererPackageName,rendererConfig:So.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:vn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=my(e),e===null?null:e.stateNode},findFiberByHostInstance:So.findFiberByHostInstance||d4,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Al=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Al.isDisabled&&Al.supportsFiber)try{Bc=Al.inject(p4),Vr=Al}catch{}}nr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=f4;nr.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!cp(t))throw Error(O(200));return u4(e,t,null,r)};nr.createRoot=function(e,t){if(!cp(e))throw Error(O(299));var r=!1,n="",s=K2;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=op(e,1,!1,null,null,r,!1,n,s),e[dn]=t.current,ua(e.nodeType===8?e.parentNode:e),new lp(t)};nr.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(O(188)):(e=Object.keys(e).join(","),Error(O(268,e)));return e=my(t),e=e===null?null:e.stateNode,e};nr.flushSync=function(e){return Cs(e)};nr.hydrate=function(e,t,r){if(!tu(t))throw Error(O(200));return ru(null,e,t,!0,r)};nr.hydrateRoot=function(e,t,r){if(!cp(e))throw Error(O(405));var n=r!=null&&r.hydratedSources||null,s=!1,i="",a=K2;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(a=r.onRecoverableError)),t=G2(t,null,e,1,r??null,s,!1,i,a),e[dn]=t.current,ua(e),n)for(e=0;e<n.length;e++)r=n[e],s=r._getVersion,s=s(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s);return new eu(t)};nr.render=function(e,t,r){if(!tu(t))throw Error(O(200));return ru(null,e,t,!1,r)};nr.unmountComponentAtNode=function(e){if(!tu(e))throw Error(O(40));return e._reactRootContainer?(Cs(function(){ru(null,null,e,!1,function(){e._reactRootContainer=null,e[dn]=null})}),!0):!1};nr.unstable_batchedUpdates=rp;nr.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!tu(r))throw Error(O(200));if(e==null||e._reactInternals===void 0)throw Error(O(38));return ru(e,t,r,!1,n)};nr.version="18.3.1-next-f1338f8080-20240426";function q2(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(q2)}catch(e){console.error(e)}}q2(),q1.exports=nr;var m4=q1.exports,w0=m4;Dd.createRoot=w0.createRoot,Dd.hydrateRoot=w0.hydrateRoot;function nu(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r}function g4(e,t,r,n){function s(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function l(d){try{u(n.next(d))}catch(f){a(f)}}function c(d){try{u(n.throw(d))}catch(f){a(f)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})}const y4=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class up extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class x4 extends up{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class b0 extends up{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class _0 extends up{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Ch;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Ch||(Ch={}));class v4{constructor(t,{headers:r={},customFetch:n,region:s=Ch.Any}={}){this.url=t,this.headers=r,this.region=s,this.fetch=y4(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return g4(this,arguments,void 0,function*(r,n={}){var s;let i,a;try{const{headers:l,method:c,body:u,signal:d,timeout:f}=n;let h={},{region:m}=n;m||(m=this.region);const x=new URL(`${this.url}/${r}`);m&&m!=="any"&&(h["x-region"]=m,x.searchParams.set("forceFunctionRegion",m));let w;u&&(l&&!Object.prototype.hasOwnProperty.call(l,"Content-Type")||!l)?typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(h["Content-Type"]="application/octet-stream",w=u):typeof u=="string"?(h["Content-Type"]="text/plain",w=u):typeof FormData<"u"&&u instanceof FormData?w=u:(h["Content-Type"]="application/json",w=JSON.stringify(u)):u&&typeof u!="string"&&!(typeof Blob<"u"&&u instanceof Blob)&&!(u instanceof ArrayBuffer)&&!(typeof FormData<"u"&&u instanceof FormData)?w=JSON.stringify(u):w=u;let k=d;f&&(a=new AbortController,i=setTimeout(()=>a.abort(),f),d?(k=a.signal,d.addEventListener("abort",()=>a.abort())):k=a.signal);const g=yield this.fetch(x.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},h),this.headers),l),body:w,signal:k}).catch(N=>{throw new x4(N)}),p=g.headers.get("x-relay-error");if(p&&p==="true")throw new b0(g);if(!g.ok)throw new _0(g);let y=((s=g.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),v;return y==="application/json"?v=yield g.json():y==="application/octet-stream"||y==="application/pdf"?v=yield g.blob():y==="text/event-stream"?v=g:y==="multipart/form-data"?v=yield g.formData():v=yield g.text(),{data:v,error:null,response:g}}catch(l){return{data:null,error:l,response:l instanceof _0||l instanceof b0?l.context:void 0}}finally{i&&clearTimeout(i)}})}}var w4=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}},b4=class{constructor(e){var t,r,n;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(r=e.isMaybeSingle)!==null&&r!==void 0?r:!1,this.urlLengthLimit=(n=e.urlLengthLimit)!==null&&n!==void 0?n:8e3,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){var r=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let s=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{let a=null,l=null,c=null,u=i.status,d=i.statusText;if(i.ok){var f,h;if(r.method!=="HEAD"){var m;const g=await i.text();g===""||(r.headers.get("Accept")==="text/csv"||r.headers.get("Accept")&&(!((m=r.headers.get("Accept"))===null||m===void 0)&&m.includes("application/vnd.pgrst.plan+text"))?l=g:l=JSON.parse(g))}const w=(f=r.headers.get("Prefer"))===null||f===void 0?void 0:f.match(/count=(exact|planned|estimated)/),k=(h=i.headers.get("content-range"))===null||h===void 0?void 0:h.split("/");w&&k&&k.length>1&&(c=parseInt(k[1])),r.isMaybeSingle&&r.method==="GET"&&Array.isArray(l)&&(l.length>1?(a={code:"PGRST116",details:`Results contain ${l.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},l=null,c=null,u=406,d="Not Acceptable"):l.length===1?l=l[0]:l=null)}else{var x;const w=await i.text();try{a=JSON.parse(w),Array.isArray(a)&&i.status===404&&(l=[],a=null,u=200,d="OK")}catch{i.status===404&&w===""?(u=204,d="No Content"):a={message:w}}if(a&&r.isMaybeSingle&&(!(a==null||(x=a.details)===null||x===void 0)&&x.includes("0 rows"))&&(a=null,u=200,d="OK"),a&&r.shouldThrowOnError)throw new w4(a)}return{error:a,data:l,count:c,status:u,statusText:d}});return this.shouldThrowOnError||(s=s.catch(i=>{var a;let l="",c="",u="";const d=i==null?void 0:i.cause;if(d){var f,h,m,x;const g=(f=d==null?void 0:d.message)!==null&&f!==void 0?f:"",p=(h=d==null?void 0:d.code)!==null&&h!==void 0?h:"";l=`${(m=i==null?void 0:i.name)!==null&&m!==void 0?m:"FetchError"}: ${i==null?void 0:i.message}`,l+=`

Caused by: ${(x=d==null?void 0:d.name)!==null&&x!==void 0?x:"Error"}: ${g}`,p&&(l+=` (${p})`),d!=null&&d.stack&&(l+=`
${d.stack}`)}else{var w;l=(w=i==null?void 0:i.stack)!==null&&w!==void 0?w:""}const k=this.url.toString().length;return(i==null?void 0:i.name)==="AbortError"||(i==null?void 0:i.code)==="ABORT_ERR"?(u="",c="Request was aborted (timeout or manual cancellation)",k>this.urlLengthLimit&&(c+=`. Note: Your request URL is ${k} characters, which may exceed server limits. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [many IDs])), consider using an RPC function to pass values server-side.`)):((d==null?void 0:d.name)==="HeadersOverflowError"||(d==null?void 0:d.code)==="UND_ERR_HEADERS_OVERFLOW")&&(u="",c="HTTP headers exceeded server limits (typically 16KB)",k>this.urlLengthLimit&&(c+=`. Your request URL is ${k} characters. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [200+ IDs])), consider using an RPC function instead.`)),{error:{message:`${(a=i==null?void 0:i.name)!==null&&a!==void 0?a:"FetchError"}: ${i==null?void 0:i.message}`,details:l,hint:c,code:u},data:null,count:null,status:0,statusText:""}})),s.then(e,t)}returns(){return this}overrideTypes(){return this}},_4=class extends b4{select(e){let t=!1;const r=(e??"*").split("").map(n=>/\s/.test(n)&&!t?"":(n==='"'&&(t=!t),n)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:n,referencedTable:s=n}={}){const i=s?`${s}.order`:"order",a=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${a?`${a},`:""}${e}.${t?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:r=t}={}){const n=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,t,{foreignTable:r,referencedTable:n=r}={}){const s=typeof n>"u"?"offset":`${n}.offset`,i=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(i,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:n=!1,wal:s=!1,format:i="text"}={}){var a;const l=[e?"analyze":null,t?"verbose":null,r?"settings":null,n?"buffers":null,s?"wal":null].filter(Boolean).join("|"),c=(a=this.headers.get("Accept"))!==null&&a!==void 0?a:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${i}; for="${c}"; options=${l};`),i==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};const k0=new RegExp("[,()]");var Zs=class extends _4{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}regexMatch(e,t){return this.url.searchParams.append(e,`match.${t}`),this}regexIMatch(e,t){return this.url.searchParams.append(e,`imatch.${t}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}isDistinct(e,t){return this.url.searchParams.append(e,`isdistinct.${t}`),this}in(e,t){const r=Array.from(new Set(t)).map(n=>typeof n=="string"&&k0.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}notIn(e,t){const r=Array.from(new Set(t)).map(n=>typeof n=="string"&&k0.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`not.in.(${r})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:n}={}){let s="";n==="plain"?s="pl":n==="phrase"?s="ph":n==="websearch"&&(s="w");const i=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${s}fts${i}.${t}`),this}match(e){return Object.entries(e).forEach(([t,r])=>{this.url.searchParams.append(t,`eq.${r}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t,referencedTable:r=t}={}){const n=r?`${r}.or`:"or";return this.url.searchParams.append(n,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}},k4=class{constructor(e,{headers:t={},schema:r,fetch:n,urlLengthLimit:s=8e3}){this.url=e,this.headers=new Headers(t),this.schema=r,this.fetch=n,this.urlLengthLimit=s}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(e,t){const{head:r=!1,count:n}=t??{},s=r?"HEAD":"GET";let i=!1;const a=(e??"*").split("").map(u=>/\s/.test(u)&&!i?"":(u==='"'&&(i=!i),u)).join(""),{url:l,headers:c}=this.cloneRequestState();return l.searchParams.set("select",a),n&&c.append("Prefer",`count=${n}`),new Zs({method:s,url:l,headers:c,schema:this.schema,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}insert(e,{count:t,defaultToNull:r=!0}={}){var n;const s="POST",{url:i,headers:a}=this.cloneRequestState();if(t&&a.append("Prefer",`count=${t}`),r||a.append("Prefer","missing=default"),Array.isArray(e)){const l=e.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(l.length>0){const c=[...new Set(l)].map(u=>`"${u}"`);i.searchParams.set("columns",c.join(","))}}return new Zs({method:s,url:i,headers:a,schema:this.schema,body:e,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch,urlLengthLimit:this.urlLengthLimit})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:n,defaultToNull:s=!0}={}){var i;const a="POST",{url:l,headers:c}=this.cloneRequestState();if(c.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),t!==void 0&&l.searchParams.set("on_conflict",t),n&&c.append("Prefer",`count=${n}`),s||c.append("Prefer","missing=default"),Array.isArray(e)){const u=e.reduce((d,f)=>d.concat(Object.keys(f)),[]);if(u.length>0){const d=[...new Set(u)].map(f=>`"${f}"`);l.searchParams.set("columns",d.join(","))}}return new Zs({method:a,url:l,headers:c,schema:this.schema,body:e,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch,urlLengthLimit:this.urlLengthLimit})}update(e,{count:t}={}){var r;const n="PATCH",{url:s,headers:i}=this.cloneRequestState();return t&&i.append("Prefer",`count=${t}`),new Zs({method:n,url:s,headers:i,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch,urlLengthLimit:this.urlLengthLimit})}delete({count:e}={}){var t;const r="DELETE",{url:n,headers:s}=this.cloneRequestState();return e&&s.append("Prefer",`count=${e}`),new Zs({method:r,url:n,headers:s,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch,urlLengthLimit:this.urlLengthLimit})}};function va(e){"@babel/helpers - typeof";return va=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},va(e)}function j4(e,t){if(va(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(va(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function S4(e){var t=j4(e,"string");return va(t)=="symbol"?t:t+""}function N4(e,t,r){return(t=S4(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function j0(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Cl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?j0(Object(r),!0).forEach(function(n){N4(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j0(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var E4=class Y2{constructor(t,{headers:r={},schema:n,fetch:s,timeout:i,urlLengthLimit:a=8e3}={}){this.url=t,this.headers=new Headers(r),this.schemaName=n,this.urlLengthLimit=a;const l=s??globalThis.fetch;i!==void 0&&i>0?this.fetch=(c,u)=>{const d=new AbortController,f=setTimeout(()=>d.abort(),i),h=u==null?void 0:u.signal;if(h){if(h.aborted)return clearTimeout(f),l(c,u);const m=()=>{clearTimeout(f),d.abort()};return h.addEventListener("abort",m,{once:!0}),l(c,Cl(Cl({},u),{},{signal:d.signal})).finally(()=>{clearTimeout(f),h.removeEventListener("abort",m)})}return l(c,Cl(Cl({},u),{},{signal:d.signal})).finally(()=>clearTimeout(f))}:this.fetch=l}from(t){if(!t||typeof t!="string"||t.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new k4(new URL(`${this.url}/${t}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}schema(t){return new Y2(this.url,{headers:this.headers,schema:t,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}rpc(t,r={},{head:n=!1,get:s=!1,count:i}={}){var a;let l;const c=new URL(`${this.url}/rpc/${t}`);let u;const d=m=>m!==null&&typeof m=="object"&&(!Array.isArray(m)||m.some(d)),f=n&&Object.values(r).some(d);f?(l="POST",u=r):n||s?(l=n?"HEAD":"GET",Object.entries(r).filter(([m,x])=>x!==void 0).map(([m,x])=>[m,Array.isArray(x)?`{${x.join(",")}}`:`${x}`]).forEach(([m,x])=>{c.searchParams.append(m,x)})):(l="POST",u=r);const h=new Headers(this.headers);return f?h.set("Prefer",i?`count=${i},return=minimal`:"return=minimal"):i&&h.set("Prefer",`count=${i}`),new Zs({method:l,url:c,headers:h,schema:this.schemaName,body:u,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch,urlLengthLimit:this.urlLengthLimit})}};class T4{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const r=globalThis.process;if(r){const n=r.versions;if(n&&n.node){const s=n.node,i=parseInt(s.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const A4="2.95.3",C4=`realtime-js/${A4}`,I4="1.0.0",J2="2.0.0",S0=J2,Ih=1e4,P4=1e3,O4=100;var An;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(An||(An={}));var st;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(st||(st={}));var Nr;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Nr||(Nr={}));var Ph;(function(e){e.websocket="websocket"})(Ph||(Ph={}));var cs;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(cs||(cs={}));class R4{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,r){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(t));let n=[t.join_ref,t.ref,t.topic,t.event,t.payload];return r(JSON.stringify(n))}_binaryEncodeUserBroadcastPush(t){var r;return this._isArrayBuffer((r=t.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var r,n;const s=(n=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,s)}_encodeJsonUserBroadcastPush(t){var r,n;const s=(n=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:{},a=new TextEncoder().encode(JSON.stringify(s)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,a)}_encodeUserBroadcastPush(t,r,n){var s,i;const a=t.topic,l=(s=t.ref)!==null&&s!==void 0?s:"",c=(i=t.join_ref)!==null&&i!==void 0?i:"",u=t.payload.event,d=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},f=Object.keys(d).length===0?"":JSON.stringify(d);if(c.length>255)throw new Error(`joinRef length ${c.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`ref length ${l.length} exceeds maximum of 255`);if(a.length>255)throw new Error(`topic length ${a.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`userEvent length ${u.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`metadata length ${f.length} exceeds maximum of 255`);const h=this.USER_BROADCAST_PUSH_META_LENGTH+c.length+l.length+a.length+u.length+f.length,m=new ArrayBuffer(this.HEADER_LENGTH+h);let x=new DataView(m),w=0;x.setUint8(w++,this.KINDS.userBroadcastPush),x.setUint8(w++,c.length),x.setUint8(w++,l.length),x.setUint8(w++,a.length),x.setUint8(w++,u.length),x.setUint8(w++,f.length),x.setUint8(w++,r),Array.from(c,g=>x.setUint8(w++,g.charCodeAt(0))),Array.from(l,g=>x.setUint8(w++,g.charCodeAt(0))),Array.from(a,g=>x.setUint8(w++,g.charCodeAt(0))),Array.from(u,g=>x.setUint8(w++,g.charCodeAt(0))),Array.from(f,g=>x.setUint8(w++,g.charCodeAt(0)));var k=new Uint8Array(m.byteLength+n.byteLength);return k.set(new Uint8Array(m),0),k.set(new Uint8Array(n),m.byteLength),k.buffer}decode(t,r){if(this._isArrayBuffer(t)){let n=this._binaryDecode(t);return r(n)}if(typeof t=="string"){const n=JSON.parse(t),[s,i,a,l,c]=n;return r({join_ref:s,ref:i,topic:a,event:l,payload:c})}return r({})}_binaryDecode(t){const r=new DataView(t),n=r.getUint8(0),s=new TextDecoder;switch(n){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,r,s)}}_decodeUserBroadcast(t,r,n){const s=r.getUint8(1),i=r.getUint8(2),a=r.getUint8(3),l=r.getUint8(4);let c=this.HEADER_LENGTH+4;const u=n.decode(t.slice(c,c+s));c=c+s;const d=n.decode(t.slice(c,c+i));c=c+i;const f=n.decode(t.slice(c,c+a));c=c+a;const h=t.slice(c,t.byteLength),m=l===this.JSON_ENCODING?JSON.parse(n.decode(h)):h,x={type:this.BROADCAST_EVENT,event:d,payload:m};return a>0&&(x.meta=JSON.parse(f)),{join_ref:null,ref:null,topic:u,event:this.BROADCAST_EVENT,payload:x}}_isArrayBuffer(t){var r;return t instanceof ArrayBuffer||((r=t==null?void 0:t.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(t,r){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([n])=>r.includes(n)))}}class Q2{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Te;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Te||(Te={}));const N0=(e,t,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return t?Object.keys(t).reduce((i,a)=>(i[a]=L4(a,e,t,s),i),{}):{}},L4=(e,t,r,n)=>{const s=t.find(l=>l.name===e),i=s==null?void 0:s.type,a=r[e];return i&&!n.includes(i)?X2(i,a):Oh(a)},X2=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return F4(t,r)}switch(e){case Te.bool:return $4(t);case Te.float4:case Te.float8:case Te.int2:case Te.int4:case Te.int8:case Te.numeric:case Te.oid:return D4(t);case Te.json:case Te.jsonb:return M4(t);case Te.timestamp:return U4(t);case Te.abstime:case Te.date:case Te.daterange:case Te.int4range:case Te.int8range:case Te.money:case Te.reltime:case Te.text:case Te.time:case Te.timestamptz:case Te.timetz:case Te.tsrange:case Te.tstzrange:return Oh(t);default:return Oh(t)}},Oh=e=>e,$4=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},D4=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},M4=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e},F4=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let i;const a=e.slice(1,r);try{i=JSON.parse("["+a+"]")}catch{i=a?a.split(","):[]}return i.map(l=>X2(t,l))}return e},U4=e=>typeof e=="string"?e.replace(" ","T"):e,Z2=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class md{constructor(t,r,n={},s=Ih){this.channel=t,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var E0;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(E0||(E0={}));class Yo{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:i,onLeave:a,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Yo.syncState(this.state,s,i,a),this.pendingDiffs.forEach(c=>{this.state=Yo.syncDiff(this.state,c,i,a)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},s=>{const{onJoin:i,onLeave:a,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Yo.syncDiff(this.state,s,i,a),l())}),this.onJoin((s,i,a)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:a})}),this.onLeave((s,i,a)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,s){const i=this.cloneDeep(t),a=this.transformState(r),l={},c={};return this.map(i,(u,d)=>{a[u]||(c[u]=d)}),this.map(a,(u,d)=>{const f=i[u];if(f){const h=d.map(k=>k.presence_ref),m=f.map(k=>k.presence_ref),x=d.filter(k=>m.indexOf(k.presence_ref)<0),w=f.filter(k=>h.indexOf(k.presence_ref)<0);x.length>0&&(l[u]=x),w.length>0&&(c[u]=w)}else l[u]=d}),this.syncDiff(i,{joins:l,leaves:c},n,s)}static syncDiff(t,r,n,s){const{joins:i,leaves:a}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(i,(l,c)=>{var u;const d=(u=t[l])!==null&&u!==void 0?u:[];if(t[l]=this.cloneDeep(c),d.length>0){const f=t[l].map(m=>m.presence_ref),h=d.filter(m=>f.indexOf(m.presence_ref)<0);t[l].unshift(...h)}n(l,d,c)}),this.map(a,(l,c)=>{let u=t[l];if(!u)return;const d=c.map(f=>f.presence_ref);u=u.filter(f=>d.indexOf(f.presence_ref)<0),t[l]=u,s(l,u,c),u.length===0&&delete t[l]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const s=t[n];return"metas"in s?r[n]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=s,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var T0;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(T0||(T0={}));var Jo;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Jo||(Jo={}));var tn;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(tn||(tn={}));class pi{constructor(t,r={config:{}},n){var s,i;if(this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=st.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new md(this,Nr.join,this.params,this.timeout),this.rejoinTimer=new Q2(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=st.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=st.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=st.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=st.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=st.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Nr.reply,{},(a,l)=>{this._trigger(this._replyEventName(l),a)}),this.presence=new Yo(this),this.broadcastEndpointURL=Z2(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,r=this.timeout){var n,s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==st.closed){const{config:{broadcast:a,presence:l,private:c}}=this.params,u=(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(m=>m.filter))!==null&&s!==void 0?s:[],d=!!this.bindings[Jo.PRESENCE]&&this.bindings[Jo.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,f={},h={broadcast:a,presence:Object.assign(Object.assign({},l),{enabled:d}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(f.access_token=this.socket.accessTokenValue),this._onError(m=>t==null?void 0:t(tn.CHANNEL_ERROR,m)),this._onClose(()=>t==null?void 0:t(tn.CLOSED)),this.updateJoinPayload(Object.assign({config:h},f)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:m})=>{var x;if(this.socket._isManualToken()||this.socket.setAuth(),m===void 0){t==null||t(tn.SUBSCRIBED);return}else{const w=this.bindings.postgres_changes,k=(x=w==null?void 0:w.length)!==null&&x!==void 0?x:0,g=[];for(let p=0;p<k;p++){const y=w[p],{filter:{event:v,schema:N,table:E,filter:A}}=y,C=m&&m[p];if(C&&C.event===v&&pi.isFilterValueEqual(C.schema,N)&&pi.isFilterValueEqual(C.table,E)&&pi.isFilterValueEqual(C.filter,A))g.push(Object.assign(Object.assign({},y),{id:C.id}));else{this.unsubscribe(),this.state=st.errored,t==null||t(tn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=g,t&&t(tn.SUBSCRIBED);return}}).receive("error",m=>{this.state=st.errored,t==null||t(tn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(m).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(tn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===st.joined&&t===Jo.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,r,n)}async httpSend(t,r,n={}){var s;if(r==null)return Promise.reject("Payload is required for httpSend()");const i={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(i.Authorization=`Bearer ${this.socket.accessTokenValue}`);const a={method:"POST",headers:i,body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:r,private:this.private}]})},l=await this._fetchWithTimeout(this.broadcastEndpointURL,a,(s=n.timeout)!==null&&s!==void 0?s:this.timeout);if(l.status===202)return{success:!0};let c=l.statusText;try{const u=await l.json();c=u.error||u.message||c}catch{}return Promise.reject(new Error(c))}async send(t,r={}){var n,s;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:a}=t,l={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(l.Authorization=`Bearer ${this.socket.accessTokenValue}`);const c={method:"POST",headers:l,body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:a,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var a,l,c;const u=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(a=this.params)===null||a===void 0?void 0:a.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=st.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Nr.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new md(this,Nr.leave,{},t),n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=st.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const s=new AbortController,i=setTimeout(()=>s.abort(),n),a=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(i),a}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new md(this,t,r,n);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>O4){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var s,i;const a=t.toLocaleLowerCase(),{close:l,error:c,leave:u,join:d}=Nr;if(n&&[l,c,u,d].indexOf(a)>=0&&n!==this._joinRef())return;let h=this._onMessage(a,r,n);if(r&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(m=>{var x,w,k;return((x=m.filter)===null||x===void 0?void 0:x.event)==="*"||((k=(w=m.filter)===null||w===void 0?void 0:w.event)===null||k===void 0?void 0:k.toLocaleLowerCase())===a}).map(m=>m.callback(h,n)):(i=this.bindings[a])===null||i===void 0||i.filter(m=>{var x,w,k,g,p,y;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in m){const v=m.id,N=(x=m.filter)===null||x===void 0?void 0:x.event;return v&&((w=r.ids)===null||w===void 0?void 0:w.includes(v))&&(N==="*"||(N==null?void 0:N.toLocaleLowerCase())===((k=r.data)===null||k===void 0?void 0:k.type.toLocaleLowerCase()))}else{const v=(p=(g=m==null?void 0:m.filter)===null||g===void 0?void 0:g.event)===null||p===void 0?void 0:p.toLocaleLowerCase();return v==="*"||v===((y=r==null?void 0:r.event)===null||y===void 0?void 0:y.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===a}).map(m=>{if(typeof h=="object"&&"ids"in h){const x=h.data,{schema:w,table:k,commit_timestamp:g,type:p,errors:y}=x;h=Object.assign(Object.assign({},{schema:w,table:k,commit_timestamp:g,eventType:p,new:{},old:{},errors:y}),this._getPayloadRecords(x))}m.callback(h,n)})}_isClosed(){return this.state===st.closed}_isJoined(){return this.state===st.joined}_isJoining(){return this.state===st.joining}_isLeaving(){return this.state===st.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const s=t.toLocaleLowerCase(),i={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&pi.isEqual(s.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}static isFilterValueEqual(t,r){return(t??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Nr.close,{},t)}_onError(t){this._on(Nr.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=st.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=N0(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=N0(t.columns,t.old_record)),r}}const gd=()=>{},Il={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},z4=[1e3,2e3,5e3,1e4],B4=1e4,W4=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class V4{constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Ih,this.transport=null,this.heartbeatIntervalMs=Il.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=gd,this.ref=0,this.reconnectTimer=null,this.vsn=S0,this.logger=gd,this.conn=null,this.sendBuffer=[],this.serializer=new R4,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=s=>s?(...i)=>s(...i):(...i)=>fetch(...i),!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${Ph.websocket}`,this.httpEndpoint=Z2(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=T4.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return r==="ok"&&this._remove(t),this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case An.connecting:return cs.Connecting;case An.open:return cs.Open;case An.closing:return cs.Closing;default:return cs.Closed}}isConnected(){return this.connectionState()===cs.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,s=this.getChannels().find(i=>i.topic===n);if(s)return s;{const i=new pi(`realtime:${t}`,r,this);return this.channels.push(i),i}}push(t){const{topic:r,event:n,payload:s,ref:i}=t,a=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${n} (${i})`,s),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(P4,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Il.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply"&&r.ref&&r.ref===this.pendingHeartbeatRef){const u=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error",u)}catch(d){this.log("error","error in heartbeat callback",d)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:n,event:s,payload:i,ref:a}=r,l=a?`(${a})`:"",c=i.status||"";this.log("receive",`${c} ${n} ${s} ${l}`.trim(),i),this.channels.filter(u=>u._isMember(n)).forEach(u=>u._trigger(s,i,a)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t),this.conn.readyState===An.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===An.open||this.conn.readyState===An.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this._terminateWorker()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t);try{this.heartbeatCallback("error")}catch(r){this.log("error","error in heartbeat callback",r)}}_triggerChanError(){this.channels.forEach(t=>t._trigger(Nr.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${t}${n}${s}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([W4],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r,n=!1;if(t)r=t,n=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(s){this.log("error","Error fetching access token from callback",s),r=this.accessTokenValue}else r=this.accessTokenValue;n?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(s=>{const i={access_token:r,version:C4};r&&s.updateJoinPayload(i),s.joinedOnce&&s._isJoined()&&s._push(Nr.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(s){this.log("error",`error in ${t} callback`,s)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new Q2(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Il.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,s,i,a,l,c,u,d,f,h,m;switch(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t==null?void 0:t.timeout)!==null&&n!==void 0?n:Ih,this.heartbeatIntervalMs=(s=t==null?void 0:t.heartbeatIntervalMs)!==null&&s!==void 0?s:Il.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(a=t==null?void 0:t.accessToken)!==null&&a!==void 0?a:null,this.heartbeatCallback=(l=t==null?void 0:t.heartbeatCallback)!==null&&l!==void 0?l:gd,this.vsn=(c=t==null?void 0:t.vsn)!==null&&c!==void 0?c:S0,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=t==null?void 0:t.reconnectAfterMs)!==null&&u!==void 0?u:x=>z4[x-1]||B4,this.vsn){case I4:this.encode=(d=t==null?void 0:t.encode)!==null&&d!==void 0?d:(x,w)=>w(JSON.stringify(x)),this.decode=(f=t==null?void 0:t.decode)!==null&&f!==void 0?f:(x,w)=>w(JSON.parse(x));break;case J2:this.encode=(h=t==null?void 0:t.encode)!==null&&h!==void 0?h:this.serializer.encode.bind(this.serializer),this.decode=(m=t==null?void 0:t.decode)!==null&&m!==void 0?m:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}var wa=class extends Error{constructor(e,t){var r;super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&((r=t.icebergType)==null?void 0:r.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function H4(e,t,r){const n=new URL(t,e);if(r)for(const[s,i]of Object.entries(r))i!==void 0&&n.searchParams.set(s,i);return n.toString()}async function G4(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function K4(e){const t=e.fetchImpl??globalThis.fetch;return{async request({method:r,path:n,query:s,body:i,headers:a}){const l=H4(e.baseUrl,n,s),c=await G4(e.auth),u=await t(l,{method:r,headers:{...i?{"Content-Type":"application/json"}:{},...c,...a},body:i?JSON.stringify(i):void 0}),d=await u.text(),f=(u.headers.get("content-type")||"").includes("application/json"),h=f&&d?JSON.parse(d):d;if(!u.ok){const m=f?h:void 0,x=m==null?void 0:m.error;throw new wa((x==null?void 0:x.message)??`Request failed with status ${u.status}`,{status:u.status,icebergType:x==null?void 0:x.type,icebergCode:x==null?void 0:x.code,details:m})}return{status:u.status,headers:u.headers,data:h}}}}function Pl(e){return e.join("")}var q4=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:Pl(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(n=>({namespace:n}))}async createNamespace(e,t){const r={namespace:e.namespace,properties:t==null?void 0:t.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Pl(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Pl(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Pl(e.namespace)}`}),!0}catch(t){if(t instanceof wa&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(r){if(r instanceof wa&&r.status===409)return;throw r}}};function Vs(e){return e.join("")}var Y4=class{constructor(e,t="",r){this.client=e,this.prefix=t,this.accessDelegation=r}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Vs(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Vs(e.namespace)}/tables`,body:t,headers:r})).data.metadata}async updateTable(e,t){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Vs(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Vs(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String((t==null?void 0:t.purge)??!1)}})}async loadTable(e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Vs(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Vs(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(r){if(r instanceof wa&&r.status===404)return!1;throw r}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(r){if(r instanceof wa&&r.status===409)return await this.loadTable({namespace:e.namespace,name:t.name});throw r}}},J4=class{constructor(e){var n;let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);const r=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=K4({baseUrl:r,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=(n=e.accessDelegation)==null?void 0:n.join(","),this.namespaceOps=new q4(this.client,t),this.tableOps=new Y4(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}},su=class extends Error{constructor(e,t="storage",r,n){super(e),this.__isStorageError=!0,this.namespace=t,this.name=t==="vectors"?"StorageVectorsError":"StorageError",this.status=r,this.statusCode=n}};function iu(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}var Ol=class extends su{constructor(e,t,r,n="storage"){super(e,n,t,r),this.name=n==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},ex=class extends su{constructor(e,t,r="storage"){super(e,r),this.name=r==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=t}};const Q4=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),X4=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Rh=e=>{if(Array.isArray(e))return e.map(r=>Rh(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[s]=Rh(n)}),t},Z4=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e);function ba(e){"@babel/helpers - typeof";return ba=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ba(e)}function e_(e,t){if(ba(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(ba(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function t_(e){var t=e_(e,"string");return ba(t)=="symbol"?t:t+""}function r_(e,t,r){return(t=t_(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function A0(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function le(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?A0(Object(r),!0).forEach(function(n){r_(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):A0(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}const C0=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},n_=async(e,t,r,n)=>{if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(r!=null&&r.noResolveJson)){const s=e,i=s.status||500;if(typeof s.json=="function")s.json().then(a=>{const l=(a==null?void 0:a.statusCode)||(a==null?void 0:a.code)||i+"";t(new Ol(C0(a),i,l,n))}).catch(()=>{if(n==="vectors"){const a=i+"";t(new Ol(s.statusText||`HTTP ${i} error`,i,a,n))}else{const a=i+"";t(new Ol(s.statusText||`HTTP ${i} error`,i,a,n))}});else{const a=i+"";t(new Ol(s.statusText||`HTTP ${i} error`,i,a,n))}}else t(new ex(C0(e),e,n))},s_=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||e==="HEAD"||!n?le(le({},s),r):(X4(n)?(s.headers=le({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(n)):s.body=n,t!=null&&t.duplex&&(s.duplex=t.duplex),le(le({},s),r))};async function No(e,t,r,n,s,i,a){return new Promise((l,c)=>{e(r,s_(t,n,s,i)).then(u=>{if(!u.ok)throw u;if(n!=null&&n.noResolveJson)return u;if(a==="vectors"){const d=u.headers.get("content-type");if(u.headers.get("content-length")==="0"||u.status===204)return{};if(!d||!d.includes("application/json"))return{}}return u.json()}).then(u=>l(u)).catch(u=>n_(u,c,n,a))})}function tx(e="storage"){return{get:async(t,r,n,s)=>No(t,"GET",r,n,s,void 0,e),post:async(t,r,n,s,i)=>No(t,"POST",r,s,i,n,e),put:async(t,r,n,s,i)=>No(t,"PUT",r,s,i,n,e),head:async(t,r,n,s)=>No(t,"HEAD",r,le(le({},n),{},{noResolveJson:!0}),s,void 0,e),remove:async(t,r,n,s,i)=>No(t,"DELETE",r,s,i,n,e)}}const i_=tx("storage"),{get:_a,post:jr,put:Lh,head:o_,remove:dp}=i_,Kt=tx("vectors");var Qi=class{constructor(e,t={},r,n="storage"){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.fetch=Q4(r),this.namespace=n}throwOnError(){return this.shouldThrowOnError=!0,this}async handleOperation(e){var t=this;try{return{data:await e(),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(iu(r))return{data:null,error:r};throw r}}},a_=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}async execute(){var e=this;try{return{data:(await e.downloadFn()).body,error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(iu(t))return{data:null,error:t};throw t}}};let rx;rx=Symbol.toStringTag;var l_=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[rx]="BlobDownloadBuilder",this.promise=null}asStream(){return new a_(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var e=this;try{return{data:await(await e.downloadFn()).blob(),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(iu(t))return{data:null,error:t};throw t}}};const c_={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},I0={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var u_=class extends Qi{constructor(e,t={},r,n){super(e,t,n,"storage"),this.bucketId=r}async uploadOrUpdate(e,t,r,n){var s=this;return s.handleOperation(async()=>{let i;const a=le(le({},I0),n);let l=le(le({},s.headers),e==="POST"&&{"x-upsert":String(a.upsert)});const c=a.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",a.cacheControl),c&&i.append("metadata",s.encodeMetadata(c)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.has("cacheControl")||i.append("cacheControl",a.cacheControl),c&&!i.has("metadata")&&i.append("metadata",s.encodeMetadata(c))):(i=r,l["cache-control"]=`max-age=${a.cacheControl}`,l["content-type"]=a.contentType,c&&(l["x-metadata"]=s.toBase64(s.encodeMetadata(c))),(typeof ReadableStream<"u"&&i instanceof ReadableStream||i&&typeof i=="object"&&"pipe"in i&&typeof i.pipe=="function")&&!a.duplex&&(a.duplex="half")),n!=null&&n.headers&&(l=le(le({},l),n.headers));const u=s._removeEmptyFolders(t),d=s._getFinalPath(u),f=await(e=="PUT"?Lh:jr)(s.fetch,`${s.url}/object/${d}`,i,le({headers:l},a!=null&&a.duplex?{duplex:a.duplex}:{}));return{path:u,id:f.Id,fullPath:f.Key}})}async upload(e,t,r){return this.uploadOrUpdate("POST",e,t,r)}async uploadToSignedUrl(e,t,r,n){var s=this;const i=s._removeEmptyFolders(e),a=s._getFinalPath(i),l=new URL(s.url+`/object/upload/sign/${a}`);return l.searchParams.set("token",t),s.handleOperation(async()=>{let c;const u=le({upsert:I0.upsert},n),d=le(le({},s.headers),{"x-upsert":String(u.upsert)});return typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",u.cacheControl)):(c=r,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType),{path:i,fullPath:(await Lh(s.fetch,l.toString(),c,{headers:d})).Key}})}async createSignedUploadUrl(e,t){var r=this;return r.handleOperation(async()=>{let n=r._getFinalPath(e);const s=le({},r.headers);t!=null&&t.upsert&&(s["x-upsert"]="true");const i=await jr(r.fetch,`${r.url}/object/upload/sign/${n}`,{},{headers:s}),a=new URL(r.url+i.url),l=a.searchParams.get("token");if(!l)throw new su("No token returned by API");return{signedUrl:a.toString(),path:e,token:l}})}async update(e,t,r){return this.uploadOrUpdate("PUT",e,t,r)}async move(e,t,r){var n=this;return n.handleOperation(async()=>await jr(n.fetch,`${n.url}/object/move`,{bucketId:n.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:n.headers}))}async copy(e,t,r){var n=this;return n.handleOperation(async()=>({path:(await jr(n.fetch,`${n.url}/object/copy`,{bucketId:n.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:n.headers})).Key}))}async createSignedUrl(e,t,r){var n=this;return n.handleOperation(async()=>{let s=n._getFinalPath(e),i=await jr(n.fetch,`${n.url}/object/sign/${s}`,le({expiresIn:t},r!=null&&r.transform?{transform:r.transform}:{}),{headers:n.headers});const a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{signedUrl:encodeURI(`${n.url}${i.signedURL}${a}`)}})}async createSignedUrls(e,t,r){var n=this;return n.handleOperation(async()=>{const s=await jr(n.fetch,`${n.url}/object/sign/${n.bucketId}`,{expiresIn:t,paths:e},{headers:n.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return s.map(a=>le(le({},a),{},{signedUrl:a.signedURL?encodeURI(`${n.url}${a.signedURL}${i}`):null}))})}download(e,t,r){const n=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),i=s?`?${s}`:"",a=this._getFinalPath(e),l=()=>_a(this.fetch,`${this.url}/${n}/${a}${i}`,{headers:this.headers,noResolveJson:!0},r);return new l_(l,this.shouldThrowOnError)}async info(e){var t=this;const r=t._getFinalPath(e);return t.handleOperation(async()=>Rh(await _a(t.fetch,`${t.url}/object/info/${r}`,{headers:t.headers})))}async exists(e){var t=this;const r=t._getFinalPath(e);try{return await o_(t.fetch,`${t.url}/object/${r}`,{headers:t.headers}),{data:!0,error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(iu(n)&&n instanceof ex){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}}getPublicUrl(e,t){const r=this._getFinalPath(e),n=[],s=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";s!==""&&n.push(s);const i=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",a=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});a!==""&&n.push(a);let l=n.join("&");return l!==""&&(l=`?${l}`),{data:{publicUrl:encodeURI(`${this.url}/${i}/public/${r}${l}`)}}}async remove(e){var t=this;return t.handleOperation(async()=>await dp(t.fetch,`${t.url}/object/${t.bucketId}`,{prefixes:e},{headers:t.headers}))}async list(e,t,r){var n=this;return n.handleOperation(async()=>{const s=le(le(le({},c_),t),{},{prefix:e||""});return await jr(n.fetch,`${n.url}/object/list/${n.bucketId}`,s,{headers:n.headers},r)})}async listV2(e,t){var r=this;return r.handleOperation(async()=>{const n=le({},e);return await jr(r.fetch,`${r.url}/object/list-v2/${r.bucketId}`,n,{headers:r.headers},t)})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}};const d_="2.95.3",Ua={"X-Client-Info":`storage-js/${d_}`};var h_=class extends Qi{constructor(e,t={},r,n){const s=new URL(e);n!=null&&n.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase."));const i=s.href.replace(/\/$/,""),a=le(le({},Ua),t);super(i,a,r,"storage")}async listBuckets(e){var t=this;return t.handleOperation(async()=>{const r=t.listBucketOptionsToQueryString(e);return await _a(t.fetch,`${t.url}/bucket${r}`,{headers:t.headers})})}async getBucket(e){var t=this;return t.handleOperation(async()=>await _a(t.fetch,`${t.url}/bucket/${e}`,{headers:t.headers}))}async createBucket(e,t={public:!1}){var r=this;return r.handleOperation(async()=>await jr(r.fetch,`${r.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:r.headers}))}async updateBucket(e,t){var r=this;return r.handleOperation(async()=>await Lh(r.fetch,`${r.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:r.headers}))}async emptyBucket(e){var t=this;return t.handleOperation(async()=>await jr(t.fetch,`${t.url}/bucket/${e}/empty`,{},{headers:t.headers}))}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await dp(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}))}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},f_=class extends Qi{constructor(e,t={},r){const n=e.replace(/\/$/,""),s=le(le({},Ua),t);super(n,s,r,"storage")}async createBucket(e){var t=this;return t.handleOperation(async()=>await jr(t.fetch,`${t.url}/bucket`,{name:e},{headers:t.headers}))}async listBuckets(e){var t=this;return t.handleOperation(async()=>{const r=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&r.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&r.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&r.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&r.set("sortOrder",e.sortOrder),e!=null&&e.search&&r.set("search",e.search);const n=r.toString(),s=n?`${t.url}/bucket?${n}`:`${t.url}/bucket`;return await _a(t.fetch,s,{headers:t.headers})})}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await dp(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}))}from(e){var t=this;if(!Z4(e))throw new su("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new J4({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:async()=>t.headers},fetch:this.fetch}),n=this.shouldThrowOnError;return new Proxy(r,{get(s,i){const a=s[i];return typeof a!="function"?a:async(...l)=>{try{return{data:await a.apply(s,l),error:null}}catch(c){if(n)throw c;return{data:null,error:c}}}}})}},p_=class extends Qi{constructor(e,t={},r){const n=e.replace(/\/$/,""),s=le(le({},Ua),{},{"Content-Type":"application/json"},t);super(n,s,r,"vectors")}async createIndex(e){var t=this;return t.handleOperation(async()=>await Kt.post(t.fetch,`${t.url}/CreateIndex`,e,{headers:t.headers})||{})}async getIndex(e,t){var r=this;return r.handleOperation(async()=>await Kt.post(r.fetch,`${r.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:r.headers}))}async listIndexes(e){var t=this;return t.handleOperation(async()=>await Kt.post(t.fetch,`${t.url}/ListIndexes`,e,{headers:t.headers}))}async deleteIndex(e,t){var r=this;return r.handleOperation(async()=>await Kt.post(r.fetch,`${r.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:r.headers})||{})}},m_=class extends Qi{constructor(e,t={},r){const n=e.replace(/\/$/,""),s=le(le({},Ua),{},{"Content-Type":"application/json"},t);super(n,s,r,"vectors")}async putVectors(e){var t=this;if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return t.handleOperation(async()=>await Kt.post(t.fetch,`${t.url}/PutVectors`,e,{headers:t.headers})||{})}async getVectors(e){var t=this;return t.handleOperation(async()=>await Kt.post(t.fetch,`${t.url}/GetVectors`,e,{headers:t.headers}))}async listVectors(e){var t=this;if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return t.handleOperation(async()=>await Kt.post(t.fetch,`${t.url}/ListVectors`,e,{headers:t.headers}))}async queryVectors(e){var t=this;return t.handleOperation(async()=>await Kt.post(t.fetch,`${t.url}/QueryVectors`,e,{headers:t.headers}))}async deleteVectors(e){var t=this;if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return t.handleOperation(async()=>await Kt.post(t.fetch,`${t.url}/DeleteVectors`,e,{headers:t.headers})||{})}},g_=class extends Qi{constructor(e,t={},r){const n=e.replace(/\/$/,""),s=le(le({},Ua),{},{"Content-Type":"application/json"},t);super(n,s,r,"vectors")}async createBucket(e){var t=this;return t.handleOperation(async()=>await Kt.post(t.fetch,`${t.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{})}async getBucket(e){var t=this;return t.handleOperation(async()=>await Kt.post(t.fetch,`${t.url}/GetVectorBucket`,{vectorBucketName:e},{headers:t.headers}))}async listBuckets(e={}){var t=this;return t.handleOperation(async()=>await Kt.post(t.fetch,`${t.url}/ListVectorBuckets`,e,{headers:t.headers}))}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await Kt.post(t.fetch,`${t.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{})}},y_=class extends g_{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new x_(this.url,this.headers,e,this.fetch)}async createBucket(e){var t=()=>super.createBucket,r=this;return t().call(r,e)}async getBucket(e){var t=()=>super.getBucket,r=this;return t().call(r,e)}async listBuckets(e={}){var t=()=>super.listBuckets,r=this;return t().call(r,e)}async deleteBucket(e){var t=()=>super.deleteBucket,r=this;return t().call(r,e)}},x_=class extends p_{constructor(e,t,r,n){super(e,t,n),this.vectorBucketName=r}async createIndex(e){var t=()=>super.createIndex,r=this;return t().call(r,le(le({},e),{},{vectorBucketName:r.vectorBucketName}))}async listIndexes(e={}){var t=()=>super.listIndexes,r=this;return t().call(r,le(le({},e),{},{vectorBucketName:r.vectorBucketName}))}async getIndex(e){var t=()=>super.getIndex,r=this;return t().call(r,r.vectorBucketName,e)}async deleteIndex(e){var t=()=>super.deleteIndex,r=this;return t().call(r,r.vectorBucketName,e)}index(e){return new v_(this.url,this.headers,this.vectorBucketName,e,this.fetch)}},v_=class extends m_{constructor(e,t,r,n,s){super(e,t,s),this.vectorBucketName=r,this.indexName=n}async putVectors(e){var t=()=>super.putVectors,r=this;return t().call(r,le(le({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async getVectors(e){var t=()=>super.getVectors,r=this;return t().call(r,le(le({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async listVectors(e={}){var t=()=>super.listVectors,r=this;return t().call(r,le(le({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async queryVectors(e){var t=()=>super.queryVectors,r=this;return t().call(r,le(le({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async deleteVectors(e){var t=()=>super.deleteVectors,r=this;return t().call(r,le(le({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}},w_=class extends h_{constructor(e,t={},r,n){super(e,t,r,n)}from(e){return new u_(this.url,this.headers,e,this.fetch)}get vectors(){return new y_(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new f_(this.url+"/iceberg",this.headers,this.fetch)}};const nx="2.95.3",ei=30*1e3,$h=3,yd=$h*ei,b_="http://localhost:9999",__="supabase.auth.token",k_={"X-Client-Info":`gotrue-js/${nx}`},Dh="X-Supabase-Api-Version",sx={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},j_=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,S_=10*60*1e3;class ka extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function G(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class N_ extends ka{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function E_(e){return G(e)&&e.name==="AuthApiError"}class us extends ka{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class wn extends ka{constructor(t,r,n,s){super(t,n,s),this.name=r,this.status=n}}class Ht extends wn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function xd(e){return G(e)&&e.name==="AuthSessionMissingError"}class Hs extends wn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Rl extends wn{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Ll extends wn{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function T_(e){return G(e)&&e.name==="AuthImplicitGrantRedirectError"}class P0 extends wn{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class A_ extends wn{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class Mh extends wn{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function vd(e){return G(e)&&e.name==="AuthRetryableFetchError"}class O0 extends wn{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class Fh extends wn{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Ic="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),R0=` 	
\r=`.split(""),C_=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<R0.length;t+=1)e[R0[t].charCodeAt(0)]=-2;for(let t=0;t<Ic.length;t+=1)e[Ic[t].charCodeAt(0)]=t;return e})();function L0(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Ic[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Ic[n]),t.queuedBits-=6}}function ix(e,t,r){const n=C_[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function $0(e){const t=[],r=a=>{t.push(String.fromCodePoint(a))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=a=>{O_(a,n,r)};for(let a=0;a<e.length;a+=1)ix(e.charCodeAt(a),s,i);return t.join("")}function I_(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function P_(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}I_(n,t)}}function O_(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function ki(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)ix(e.charCodeAt(s),r,n);return new Uint8Array(t)}function R_(e){const t=[];return P_(e,r=>t.push(r)),new Uint8Array(t)}function ms(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};return e.forEach(s=>L0(s,r,n)),L0(null,r,n),t.join("")}function L_(e){return Math.round(Date.now()/1e3)+e}function $_(){return Symbol("auth-callback")}const yt=()=>typeof window<"u"&&typeof document<"u",rs={tested:!1,writable:!1},ox=()=>{if(!yt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(rs.tested)return rs.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),rs.tested=!0,rs.writable=!0}catch{rs.tested=!0,rs.writable=!1}return rs.writable};function D_(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,i)=>{t[i]=s})}catch{}return r.searchParams.forEach((n,s)=>{t[s]=n}),t}const ax=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),M_=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",ti=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},ns=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},gt=async(e,t)=>{await e.removeItem(t)};class ou{constructor(){this.promise=new ou.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}ou.promiseConstructor=Promise;function $l(e){const t=e.split(".");if(t.length!==3)throw new Fh("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!j_.test(t[n]))throw new Fh("JWT not in base64url format");return{header:JSON.parse($0(t[0])),payload:JSON.parse($0(t[1])),signature:ki(t[2]),raw:{header:t[0],payload:t[1]}}}async function F_(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function U_(e,t){return new Promise((n,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const a=await e(i);if(!t(i,null,a)){n(a);return}}catch(a){if(!t(i,a)){s(a);return}}})()})}function z_(e){return("0"+e.toString(16)).substr(-2)}function B_(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let i=0;i<56;i++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(t),Array.from(t,z_).join("")}async function W_(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function V_(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await W_(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Gs(e,t,r=!1){const n=B_();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await ti(e,`${t}-code-verifier`,s);const i=await V_(n);return[i,n===i?"plain":"s256"]}const H_=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function G_(e){const t=e.headers.get(Dh);if(!t||!t.match(H_))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function K_(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function q_(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Y_=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ks(e){if(!Y_.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function wd(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function J_(e,t){return new Proxy(e,{get:(r,n,s)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const i=n.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,n,s)}return!t.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(r,n,s)}})}function D0(e){return JSON.parse(JSON.stringify(e))}const as=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Q_=[502,503,504];async function M0(e){var t;if(!M_(e))throw new Mh(as(e),0);if(Q_.includes(e.status))throw new Mh(as(e),e.status);let r;try{r=await e.json()}catch(i){throw new us(as(i),i)}let n;const s=G_(e);if(s&&s.getTime()>=sx["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new O0(as(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new Ht}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,a)=>i&&typeof a=="string",!0))throw new O0(as(r),e.status,r.weak_password.reasons);throw new N_(as(r),e.status||500,n)}const X_=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function ie(e,t,r,n){var s;const i=Object.assign({},n==null?void 0:n.headers);i[Dh]||(i[Dh]=sx["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const a=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(a.redirect_to=n.redirectTo);const l=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",c=await Z_(e,t,r+l,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function Z_(e,t,r,n,s,i){const a=X_(t,n,s,i);let l;try{l=await e(r,Object.assign({},a))}catch(c){throw console.error(c),new Mh(as(c),0)}if(l.ok||await M0(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(c){await M0(c)}}function _r(e){var t;let r=null;rk(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=L_(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function F0(e){const t=_r(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function On(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function ek(e){return{data:e,error:null}}function tk(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i}=e,a=nu(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i},c=Object.assign({},a);return{data:{properties:l,user:c},error:null}}function U0(e){return e}function rk(e){return e.access_token&&e.refresh_token&&e.expires_in}const bd=["global","local","others"];class nk{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=ax(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,r=bd[0]){if(bd.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${bd.join(", ")}`);try{return await ie(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(G(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await ie(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:On})}catch(n){if(G(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=nu(t,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await ie(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:tk,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(G(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await ie(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:On})}catch(r){if(G(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,s,i,a,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await ie(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:U0});if(d.error)throw d.error;const f=await d.json(),h=(a=d.headers.get("x-total-count"))!==null&&a!==void 0?a:0,m=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(x=>{const w=parseInt(x.split(";")[0].split("=")[1].substring(0,1)),k=JSON.parse(x.split(";")[1].split("=")[1]);u[`${k}Page`]=w}),u.total=parseInt(h)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(G(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){Ks(t);try{return await ie(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:On})}catch(r){if(G(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){Ks(t);try{return await ie(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:On})}catch(n){if(G(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){Ks(t);try{return await ie(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:On})}catch(n){if(G(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){Ks(t.userId);try{const{data:r,error:n}=await ie(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(G(r))return{data:null,error:r};throw r}}async _deleteFactor(t){Ks(t.userId),Ks(t.id);try{return{data:await ie(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(G(r))return{data:null,error:r};throw r}}async _listOAuthClients(t){var r,n,s,i,a,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await ie(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:U0});if(d.error)throw d.error;const f=await d.json(),h=(a=d.headers.get("x-total-count"))!==null&&a!==void 0?a:0,m=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(x=>{const w=parseInt(x.split(";")[0].split("=")[1].substring(0,1)),k=JSON.parse(x.split(";")[1].split("=")[1]);u[`${k}Page`]=w}),u.total=parseInt(h)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(G(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(t){try{return await ie(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(G(r))return{data:null,error:r};throw r}}async _getOAuthClient(t){try{return await ie(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(G(r))return{data:null,error:r};throw r}}async _updateOAuthClient(t,r){try{return await ie(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(G(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(t){try{return await ie(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(G(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(t){try{return await ie(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(G(r))return{data:null,error:r};throw r}}}function z0(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const qs={debug:!!(globalThis&&ox()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class lx extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class sk extends lx{}async function ik(e,t,r){qs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),qs.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){qs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await r()}finally{qs.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw qs.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new sk(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(qs.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function ok(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function cx(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function ak(e){return parseInt(e,16)}function lk(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,n=>n.toString(16).padStart(2,"0")).join("")}function ck(e){var t;const{chainId:r,domain:n,expirationTime:s,issuedAt:i=new Date,nonce:a,notBefore:l,requestId:c,resources:u,scheme:d,uri:f,version:h}=e;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(a&&a.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${a}`);if(!f)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(h!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${h}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const m=cx(e.address),x=d?`${d}://${n}`:n,w=e.statement?`${e.statement}
`:"",k=`${x} wants you to sign in with your Ethereum account:
${m}

${w}`;let g=`URI: ${f}
Version: ${h}
Chain ID: ${r}${a?`
Nonce: ${a}`:""}
Issued At: ${i.toISOString()}`;if(s&&(g+=`
Expiration Time: ${s.toISOString()}`),l&&(g+=`
Not Before: ${l.toISOString()}`),c&&(g+=`
Request ID: ${c}`),u){let p=`
Resources:`;for(const y of u){if(!y||typeof y!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${y}`);p+=`
- ${y}`}g+=p}return`${k}
${g}`}class Je extends Error{constructor({message:t,code:r,cause:n,name:s}){var i;super(t,{cause:n}),this.__isWebAuthnError=!0,this.name=(i=s??(n instanceof Error?n.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=r}}class Pc extends Je{constructor(t,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:t}),this.name="WebAuthnUnknownError",this.originalError=r}}function uk({error:e,options:t}){var r,n,s;const{publicKey:i}=t;if(!i)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Je({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((r=i.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new Je({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((n=i.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new Je({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((s=i.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new Je({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new Je({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new Je({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return i.pubKeyCredParams.filter(l=>l.type==="public-key").length===0?new Je({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new Je({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const a=window.location.hostname;if(ux(a)){if(i.rp.id!==a)return new Je({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Je({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new Je({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new Je({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Je({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function dk({error:e,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Je({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new Je({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const n=window.location.hostname;if(ux(n)){if(r.rpId!==n)return new Je({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Je({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new Je({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Je({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class hk{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const fk=new hk;function pk(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:r,excludeCredentials:n}=e,s=nu(e,["challenge","user","excludeCredentials"]),i=ki(t).buffer,a=Object.assign(Object.assign({},r),{id:ki(r.id).buffer}),l=Object.assign(Object.assign({},s),{challenge:i,user:a});if(n&&n.length>0){l.excludeCredentials=new Array(n.length);for(let c=0;c<n.length;c++){const u=n[c];l.excludeCredentials[c]=Object.assign(Object.assign({},u),{id:ki(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return l}function mk(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:r}=e,n=nu(e,["challenge","allowCredentials"]),s=ki(t).buffer,i=Object.assign(Object.assign({},n),{challenge:s});if(r&&r.length>0){i.allowCredentials=new Array(r.length);for(let a=0;a<r.length;a++){const l=r[a];i.allowCredentials[a]=Object.assign(Object.assign({},l),{id:ki(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return i}function gk(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:ms(new Uint8Array(e.response.attestationObject)),clientDataJSON:ms(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function yk(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e,n=e.getClientExtensionResults(),s=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:ms(new Uint8Array(s.authenticatorData)),clientDataJSON:ms(new Uint8Array(s.clientDataJSON)),signature:ms(new Uint8Array(s.signature)),userHandle:s.userHandle?ms(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function ux(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function B0(){var e,t;return!!(yt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function xk(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Pc("Browser returned unexpected credential type",t)}:{data:null,error:new Pc("Empty credential response",t)}}catch(t){return{data:null,error:uk({error:t,options:e})}}}async function vk(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Pc("Browser returned unexpected credential type",t)}:{data:null,error:new Pc("Empty credential response",t)}}catch(t){return{data:null,error:dk({error:t,options:e})}}}const wk={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},bk={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Oc(...e){const t=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),r=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),n={};for(const s of e)if(s)for(const i in s){const a=s[i];if(a!==void 0)if(Array.isArray(a))n[i]=a;else if(r(a))n[i]=a;else if(t(a)){const l=n[i];t(l)?n[i]=Oc(l,a):n[i]=Oc(a)}else n[i]=a}return n}function _k(e,t){return Oc(wk,e,t||{})}function kk(e,t){return Oc(bk,e,t||{})}class jk{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:r,friendlyName:n,signal:s},i){var a;try{const{data:l,error:c}=await this.client.mfa.challenge({factorId:t,webauthn:r});if(!l)return{data:null,error:c};const u=s??fk.createNewAbortSignal();if(l.webauthn.type==="create"){const{user:d}=l.webauthn.credential_options.publicKey;if(!d.name){const f=n;if(f)d.name=`${d.id}:${f}`;else{const m=(await this.client.getUser()).data.user,x=((a=m==null?void 0:m.user_metadata)===null||a===void 0?void 0:a.name)||(m==null?void 0:m.email)||(m==null?void 0:m.id)||"User";d.name=`${d.id}:${x}`}}d.displayName||(d.displayName=d.name)}switch(l.webauthn.type){case"create":{const d=_k(l.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:f,error:h}=await xk({publicKey:d,signal:u});return f?{data:{factorId:t,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:f}},error:null}:{data:null,error:h}}case"request":{const d=kk(l.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:f,error:h}=await vk(Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:d,signal:u}));return f?{data:{factorId:t,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:f}},error:null}:{data:null,error:h}}}}catch(l){return G(l)?{data:null,error:l}:{data:null,error:new us("Unexpected error in challenge",l)}}}async _verify({challengeId:t,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:n})}async _authenticate({factorId:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!r)return{data:null,error:new ka("rpId is required for WebAuthn authentication")};try{if(!B0())return{data:null,error:new us("Browser does not support WebAuthn",null)};const{data:a,error:l}=await this.challenge({factorId:t,webauthn:{rpId:r,rpOrigins:n},signal:s},{request:i});if(!a)return{data:null,error:l};const{webauthn:c}=a;return this._verify({factorId:t,challengeId:a.challengeId,webauthn:{type:c.type,rpId:r,rpOrigins:n,credential_response:c.credential_response}})}catch(a){return G(a)?{data:null,error:a}:{data:null,error:new us("Unexpected error in authenticate",a)}}}async _register({friendlyName:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!r)return{data:null,error:new ka("rpId is required for WebAuthn registration")};try{if(!B0())return{data:null,error:new us("Browser does not support WebAuthn",null)};const{data:a,error:l}=await this._enroll({friendlyName:t});if(!a)return await this.client.mfa.listFactors().then(d=>{var f;return(f=d.data)===null||f===void 0?void 0:f.all.find(h=>h.factor_type==="webauthn"&&h.friendly_name===t&&h.status!=="unverified")}).then(d=>d?this.client.mfa.unenroll({factorId:d==null?void 0:d.id}):void 0),{data:null,error:l};const{data:c,error:u}=await this._challenge({factorId:a.id,friendlyName:a.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:s},{create:i});return c?this._verify({factorId:a.id,challengeId:c.challengeId,webauthn:{rpId:r,rpOrigins:n,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:u}}catch(a){return G(a)?{data:null,error:a}:{data:null,error:new us("Unexpected error in register",a)}}}}ok();const Sk={url:b_,storageKey:__,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:k_,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function W0(e,t,r){return await r()}const Ys={};class ja{get jwks(){var t,r;return(r=(t=Ys[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){Ys[this.storageKey]=Object.assign(Object.assign({},Ys[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=Ys[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Ys[this.storageKey]=Object.assign(Object.assign({},Ys[this.storageKey]),{cachedAt:t})}constructor(t){var r,n,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},Sk),t);if(this.storageKey=i.storageKey,this.instanceID=(r=ja.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,ja.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.instanceID>0&&yt()){const a=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(a),this.logDebugMessages&&console.trace(a)}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new nk({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=ax(i.fetch),this.lock=i.lock||W0,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,this.lockAcquireTimeout=i.lockAcquireTimeout,i.lock?this.lock=i.lock:this.persistSession&&yt()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=ik:this.lock=W0,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new jk(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:ox()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=z0(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=z0(this.memoryStorage)),yt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a);try{await this._notifyAllSubscribers(a.data.event,a.data.session,!1)}catch(l){this._debug("#broadcastChannel","error",l)}})}this.initialize().catch(a=>{this._debug("#initialize()","error",a)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${nx}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let r={},n="none";if(yt()&&(r=D_(window.location.href),this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce")),yt()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),T_(i)){const c=(t=i.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return{error:i}}const{session:a,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",a,"redirect type",l),await this._saveSession(a),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return G(r)?this._returnResult({error:r}):this._returnResult({error:new us("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,s;try{const i=await ie(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:_r}),{data:a,error:l}=i;if(l||!a)return this._returnResult({data:{user:null,session:null},error:l});const c=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(i){if(G(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(t){var r,n,s;try{let i;if("email"in t){const{email:d,password:f,options:h}=t;let m=null,x=null;this.flowType==="pkce"&&([m,x]=await Gs(this.storage,this.storageKey)),i=await ie(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:d,password:f,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:m,code_challenge_method:x},xform:_r})}else if("phone"in t){const{phone:d,password:f,options:h}=t;i=await ie(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:f,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},channel:(s=h==null?void 0:h.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:_r})}else throw new Rl("You must provide either an email or phone number and a password");const{data:a,error:l}=i;if(l||!a)return await gt(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:l});const c=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(i){if(await gt(this.storage,`${this.storageKey}-code-verifier`),G(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:a,options:l}=t;r=await ie(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:F0})}else if("phone"in t){const{phone:i,password:a,options:l}=t;r=await ie(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:F0})}else throw new Rl("You must provide either an email or phone number and a password");const{data:n,error:s}=r;if(s)return this._returnResult({data:{user:null,session:null},error:s});if(!n||!n.session||!n.user){const i=new Hs;return this._returnResult({data:{user:null,session:null},error:i})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(G(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(t){var r,n,s,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,n,s,i,a,l,c,u,d,f,h;let m,x;if("message"in t)m=t.message,x=t.signature;else{const{chain:w,wallet:k,statement:g,options:p}=t;let y;if(yt())if(typeof k=="object")y=k;else{const P=window;if("ethereum"in P&&typeof P.ethereum=="object"&&"request"in P.ethereum&&typeof P.ethereum.request=="function")y=P.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof k!="object"||!(p!=null&&p.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");y=k}const v=new URL((r=p==null?void 0:p.url)!==null&&r!==void 0?r:window.location.href),N=await y.request({method:"eth_requestAccounts"}).then(P=>P).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!N||N.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const E=cx(N[0]);let A=(n=p==null?void 0:p.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!A){const P=await y.request({method:"eth_chainId"});A=ak(P)}const C={domain:v.host,address:E,statement:g,uri:v.href,version:"1",chainId:A,nonce:(s=p==null?void 0:p.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(a=(i=p==null?void 0:p.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&a!==void 0?a:new Date,expirationTime:(l=p==null?void 0:p.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(c=p==null?void 0:p.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(u=p==null?void 0:p.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(d=p==null?void 0:p.signInWithEthereum)===null||d===void 0?void 0:d.resources};m=ck(C),x=await y.request({method:"personal_sign",params:[lk(m),E]})}try{const{data:w,error:k}=await ie(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:m,signature:x},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(h=t.options)===null||h===void 0?void 0:h.captchaToken}}:null),xform:_r});if(k)throw k;if(!w||!w.session||!w.user){const g=new Hs;return this._returnResult({data:{user:null,session:null},error:g})}return w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),this._returnResult({data:Object.assign({},w),error:k})}catch(w){if(G(w))return this._returnResult({data:{user:null,session:null},error:w});throw w}}async signInWithSolana(t){var r,n,s,i,a,l,c,u,d,f,h,m;let x,w;if("message"in t)x=t.message,w=t.signature;else{const{chain:k,wallet:g,statement:p,options:y}=t;let v;if(yt())if(typeof g=="object")v=g;else{const E=window;if("solana"in E&&typeof E.solana=="object"&&("signIn"in E.solana&&typeof E.solana.signIn=="function"||"signMessage"in E.solana&&typeof E.solana.signMessage=="function"))v=E.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof g!="object"||!(y!=null&&y.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");v=g}const N=new URL((r=y==null?void 0:y.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in v&&v.signIn){const E=await v.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},y==null?void 0:y.signInWithSolana),{version:"1",domain:N.host,uri:N.href}),p?{statement:p}:null));let A;if(Array.isArray(E)&&E[0]&&typeof E[0]=="object")A=E[0];else if(E&&typeof E=="object"&&"signedMessage"in E&&"signature"in E)A=E;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in A&&"signature"in A&&(typeof A.signedMessage=="string"||A.signedMessage instanceof Uint8Array)&&A.signature instanceof Uint8Array)x=typeof A.signedMessage=="string"?A.signedMessage:new TextDecoder().decode(A.signedMessage),w=A.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in v)||typeof v.signMessage!="function"||!("publicKey"in v)||typeof v!="object"||!v.publicKey||!("toBase58"in v.publicKey)||typeof v.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");x=[`${N.host} wants you to sign in with your Solana account:`,v.publicKey.toBase58(),...p?["",p,""]:[""],"Version: 1",`URI: ${N.href}`,`Issued At: ${(s=(n=y==null?void 0:y.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=y==null?void 0:y.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${y.signInWithSolana.notBefore}`]:[],...!((a=y==null?void 0:y.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${y.signInWithSolana.expirationTime}`]:[],...!((l=y==null?void 0:y.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${y.signInWithSolana.chainId}`]:[],...!((c=y==null?void 0:y.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${y.signInWithSolana.nonce}`]:[],...!((u=y==null?void 0:y.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${y.signInWithSolana.requestId}`]:[],...!((f=(d=y==null?void 0:y.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||f===void 0)&&f.length?["Resources",...y.signInWithSolana.resources.map(A=>`- ${A}`)]:[]].join(`
`);const E=await v.signMessage(new TextEncoder().encode(x),"utf8");if(!E||!(E instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");w=E}}try{const{data:k,error:g}=await ie(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:x,signature:ms(w)},!((h=t.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(m=t.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:_r});if(g)throw g;if(!k||!k.session||!k.user){const p=new Hs;return this._returnResult({data:{user:null,session:null},error:p})}return k.session&&(await this._saveSession(k.session),await this._notifyAllSubscribers("SIGNED_IN",k.session)),this._returnResult({data:Object.assign({},k),error:g})}catch(k){if(G(k))return this._returnResult({data:{user:null,session:null},error:k});throw k}}async _exchangeCodeForSession(t){const r=await ns(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{if(!n&&this.flowType==="pkce")throw new A_;const{data:i,error:a}=await ie(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:_r});if(await gt(this.storage,`${this.storageKey}-code-verifier`),a)throw a;if(!i||!i.session||!i.user){const l=new Hs;return this._returnResult({data:{user:null,session:null,redirectType:null},error:l})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:a})}catch(i){if(await gt(this.storage,`${this.storageKey}-code-verifier`),G(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(t){try{const{options:r,provider:n,token:s,access_token:i,nonce:a}=t,l=await ie(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:i,nonce:a,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:_r}),{data:c,error:u}=l;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!c||!c.session||!c.user){const d=new Hs;return this._returnResult({data:{user:null,session:null},error:d})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:c,error:u})}catch(r){if(G(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(t){var r,n,s,i,a;try{if("email"in t){const{email:l,options:c}=t;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await Gs(this.storage,this.storageKey));const{error:f}=await ie(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:f})}if("phone"in t){const{phone:l,options:c}=t,{data:u,error:d}=await ie(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(a=c==null?void 0:c.channel)!==null&&a!==void 0?a:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d})}throw new Rl("You must provide either an email or phone number.")}catch(l){if(await gt(this.storage,`${this.storageKey}-code-verifier`),G(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async verifyOtp(t){var r,n;try{let s,i;"options"in t&&(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:a,error:l}=await ie(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:_r});if(l)throw l;if(!a)throw new Error("An error occurred on token verification.");const c=a.session,u=a.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(s){if(G(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithSSO(t){var r,n,s,i,a;try{let l=null,c=null;this.flowType==="pkce"&&([l,c]=await Gs(this.storage,this.storageKey));const u=await ie(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:l,code_challenge_method:c}),headers:this.headers,xform:ek});return!((i=u.data)===null||i===void 0)&&i.url&&yt()&&!(!((a=t.options)===null||a===void 0)&&a.skipBrowserRedirect)&&window.location.assign(u.data.url),this._returnResult(u)}catch(l){if(await gt(this.storage,`${this.storageKey}-code-verifier`),G(l))return this._returnResult({data:null,error:l});throw l}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new Ht;const{error:s}=await ie(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:s})})}catch(t){if(G(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:s,options:i}=t,{error:a}=await ie(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:a})}else if("phone"in t){const{phone:n,type:s,options:i}=t,{data:a,error:l}=await ie(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:l})}throw new Rl("You must provide either an email or phone number and a type")}catch(r){if(G(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await ns(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<yd:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const a=await ns(this.userStorage,this.storageKey+"-user");a!=null&&a.user?t.user=a.user:t.user=wd()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const a={value:this.suppressGetSessionWarning};t.user=J_(t.user,a),a.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:s},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const r=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(t){try{return t?await ie(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:On}):await this._useSession(async r=>{var n,s,i;const{data:a,error:l}=r;if(l)throw l;return!(!((n=a.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ht}:await ie(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=a.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:On})})}catch(r){if(G(r))return xd(r)&&(await this._removeSession(),await gt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:s,error:i}=n;if(i)throw i;if(!s.session)throw new Ht;const a=s.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await Gs(this.storage,this.storageKey));const{data:u,error:d}=await ie(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:a.access_token,xform:On});if(d)throw d;return a.user=u.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),this._returnResult({data:{user:a.user},error:null})})}catch(n){if(await gt(this.storage,`${this.storageKey}-code-verifier`),G(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Ht;const r=Date.now()/1e3;let n=r,s=!0,i=null;const{payload:a}=$l(t.access_token);if(a.exp&&(n=a.exp,s=n<=r),s){const{data:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});i={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(r){if(G(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:a,error:l}=r;if(l)throw l;t=(n=a.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new Ht;const{data:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):s?this._returnResult({data:{user:s.user,session:s},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(G(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(t,r){try{if(!yt())throw new Ll("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Ll(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new P0("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ll("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new P0("No code detected.");const{data:p,error:y}=await this._exchangeCodeForSession(t.code);if(y)throw y;const v=new URL(window.location.href);return v.searchParams.delete("code"),window.history.replaceState(window.history.state,"",v.toString()),{data:{session:p.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:i,refresh_token:a,expires_in:l,expires_at:c,token_type:u}=t;if(!i||!l||!a||!u)throw new Ll("No session defined in URL");const d=Math.round(Date.now()/1e3),f=parseInt(l);let h=d+f;c&&(h=parseInt(c));const m=h-d;m*1e3<=ei&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${f}s`);const x=h-f;d-x>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",x,h,d):d-x<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",x,h,d);const{data:w,error:k}=await this._getUser(i);if(k)throw k;const g={provider_token:n,provider_refresh_token:s,access_token:i,expires_in:f,expires_at:h,refresh_token:a,token_type:u,user:w.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:g,redirectType:t.type},error:null})}catch(n){if(G(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(t){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),t):!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await ns(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i&&!xd(i))return this._returnResult({error:i});const a=(n=s.session)===null||n===void 0?void 0:n.access_token;if(a){const{error:l}=await this.admin.signOut(a,t);if(l&&!(E_(l)&&(l.status===404||l.status===401||l.status===403)||xd(l)))return this._returnResult({error:l})}return t!=="others"&&(await this._removeSession(),await gt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const r=$_(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,s;try{const{data:{session:i},error:a}=r;if(a)throw a;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await Gs(this.storage,this.storageKey,!0));try{return await ie(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(await gt(this.storage,`${this.storageKey}-code-verifier`),G(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(r){if(G(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var r;try{const{data:n,error:s}=await this._useSession(async i=>{var a,l,c,u,d;const{data:f,error:h}=i;if(h)throw h;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(a=t.options)===null||a===void 0?void 0:a.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await ie(this.fetch,"GET",m,{headers:this.headers,jwt:(d=(u=f.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return yt()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),this._returnResult({data:{provider:t.provider,url:n==null?void 0:n.url},error:null})}catch(n){if(G(n))return this._returnResult({data:{provider:t.provider,url:null},error:n});throw n}}async linkIdentityIdToken(t){return await this._useSession(async r=>{var n;try{const{error:s,data:{session:i}}=r;if(s)throw s;const{options:a,provider:l,token:c,access_token:u,nonce:d}=t,f=await ie(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=i==null?void 0:i.access_token)!==null&&n!==void 0?n:void 0,body:{provider:l,id_token:c,access_token:u,nonce:d,link_identity:!0,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:_r}),{data:h,error:m}=f;return m?this._returnResult({data:{user:null,session:null},error:m}):!h||!h.session||!h.user?this._returnResult({data:{user:null,session:null},error:new Hs}):(h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("USER_UPDATED",h.session)),this._returnResult({data:h,error:m}))}catch(s){if(await gt(this.storage,`${this.storageKey}-code-verifier`),G(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}})}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:a}=r;if(a)throw a;return await ie(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(G(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await U_(async s=>(s>0&&await F_(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await ie(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:_r})),(s,i)=>{const a=200*Math.pow(2,s);return i&&vd(i)&&Date.now()+a-n<ei})}catch(n){if(this._debug(r,"error",n),G(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),yt()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await ns(this.storage,this.storageKey);if(s&&this.userStorage){let a=await ns(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:s.user},await ti(this.userStorage,this.storageKey+"-user",a)),s.user=(t=a==null?void 0:a.user)!==null&&t!==void 0?t:wd()}else if(s&&!s.user&&!s.user){const a=await ns(this.storage,this.storageKey+"-user");a&&(a!=null&&a.user)?(s.user=a.user,await gt(this.storage,this.storageKey+"-user"),await ti(this.storage,this.storageKey,s)):s.user=wd()}if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const i=((r=s.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<yd;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${yd}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:a}=await this._callRefreshToken(s.refresh_token);a&&(console.error(a),vd(a)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:a,error:l}=await this._getUser(s.access_token);!l&&(a!=null&&a.user)?(s.user=a.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(n,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new Ht;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new ou;const{data:i,error:a}=await this._refreshAccessToken(t);if(a)throw a;if(!i.session)throw new Ht;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={data:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(s,"error",i),G(i)){const a={data:null,error:i};return vd(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(a),a}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,r,n=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],a=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,r)}catch(c){i.push(c)}});if(await Promise.all(a),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await gt(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await ti(this.userStorage,this.storageKey+"-user",{user:r.user});const s=Object.assign({},r);delete s.user;const i=D0(s);await ti(this.storage,this.storageKey,i)}else{const s=D0(r);await ti(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await gt(this.storage,this.storageKey),await gt(this.storage,this.storageKey+"-code-verifier"),await gt(this.storage,this.storageKey+"-user"),this.userStorage&&await gt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&yt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),ei);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t);const r=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t);const r=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,r&&clearTimeout(r)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-t)/ei);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${ei}ms, refresh threshold is ${$h} ticks`),s<=$h&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof lx)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!yt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(t){this._debug("#visibilityChangedCallback","error",t)}},window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,a]=await Gs(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(a)}`});s.push(l.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);s.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?this._returnResult({data:null,error:i}):await ie(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(G(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:a}=r;if(a)return this._returnResult({data:null,error:a});const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:c,error:u}=await ie(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return u?this._returnResult({data:null,error:u}):(t.factorType==="totp"&&c.type==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),this._returnResult({data:c,error:null}))})}catch(r){if(G(r))return this._returnResult({data:null,error:r});throw r}}async _verify(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return this._returnResult({data:null,error:i});const a=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?gk(t.webauthn.credential_response):yk(t.webauthn.credential_response)})}:{code:t.code}),{data:l,error:c}=await ie(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:a,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return c?this._returnResult({data:null,error:c}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),this._returnResult({data:l,error:c}))})}catch(r){if(G(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return this._returnResult({data:null,error:i});const a=await ie(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});if(a.error)return a;const{data:l}=a;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:pk(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:mk(l.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(G(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){var t;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const s={all:[],phone:[],totp:[],webauthn:[]};for(const i of(t=r==null?void 0:r.factors)!==null&&t!==void 0?t:[])s.all.push(i),i.status==="verified"&&s[i.factor_type].push(i);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(t){var r,n,s,i;if(t)try{const{payload:m}=$l(t);let x=null;m.aal&&(x=m.aal);let w=x;const{data:{user:k},error:g}=await this.getUser(t);if(g)return this._returnResult({data:null,error:g});((n=(r=k==null?void 0:k.factors)===null||r===void 0?void 0:r.filter(v=>v.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(w="aal2");const y=m.amr||[];return{data:{currentLevel:x,nextLevel:w,currentAuthenticationMethods:y},error:null}}catch(m){if(G(m))return this._returnResult({data:null,error:m});throw m}const{data:{session:a},error:l}=await this.getSession();if(l)return this._returnResult({data:null,error:l});if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:c}=$l(a.access_token);let u=null;c.aal&&(u=c.aal);let d=u;((i=(s=a.user.factors)===null||s===void 0?void 0:s.filter(m=>m.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(d="aal2");const h=c.amr||[];return{data:{currentLevel:u,nextLevel:d,currentAuthenticationMethods:h},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async r=>{const{data:{session:n},error:s}=r;return s?this._returnResult({data:null,error:s}):n?await ie(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:n.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new Ht})})}catch(r){if(G(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:s},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new Ht});const a=await ie(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"approve"},xform:l=>({data:l,error:null})});return a.data&&a.data.redirect_url&&yt()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(a.data.redirect_url),a})}catch(n){if(G(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:s},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new Ht});const a=await ie(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"deny"},xform:l=>({data:l,error:null})});return a.data&&a.data.redirect_url&&yt()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(a.data.redirect_url),a})}catch(n){if(G(n))return this._returnResult({data:null,error:n});throw n}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;return n?this._returnResult({data:null,error:n}):r?await ie(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new Ht})})}catch(t){if(G(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async r=>{const{data:{session:n},error:s}=r;return s?this._returnResult({data:null,error:s}):n?(await ie(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Ht})})}catch(r){if(G(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(l=>l.kid===t);if(n)return n;const s=Date.now();if(n=this.jwks.keys.find(l=>l.kid===t),n&&this.jwks_cached_at+S_>s)return n;const{data:i,error:a}=await ie(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,n=i.keys.find(l=>l.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:m,error:x}=await this.getSession();if(x||!m.session)return this._returnResult({data:null,error:x});n=m.session.access_token}const{header:s,payload:i,signature:a,raw:{header:l,payload:c}}=$l(n);r!=null&&r.allowExpired||K_(i.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!u){const{error:m}=await this.getUser(n);if(m)throw m;return{data:{claims:i,header:s,signature:a},error:null}}const d=q_(s.alg),f=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,f,a,R_(`${l}.${c}`)))throw new Fh("Invalid JWT signature");return{data:{claims:i,header:s,signature:a},error:null}}catch(n){if(G(n))return this._returnResult({data:null,error:n});throw n}}}ja.nextInstanceID={};const Nk=ja,Ek="2.95.3";let Lo="";typeof Deno<"u"?Lo="deno":typeof document<"u"?Lo="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Lo="react-native":Lo="node";const Tk={"X-Client-Info":`supabase-js-${Lo}/${Ek}`},Ak={headers:Tk},Ck={schema:"public"},Ik={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Pk={};function Sa(e){"@babel/helpers - typeof";return Sa=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sa(e)}function Ok(e,t){if(Sa(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Sa(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Rk(e){var t=Ok(e,"string");return Sa(t)=="symbol"?t:t+""}function Lk(e,t,r){return(t=Rk(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function V0(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function We(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?V0(Object(r),!0).forEach(function(n){Lk(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):V0(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}const $k=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),Dk=()=>Headers,Mk=(e,t,r)=>{const n=$k(r),s=Dk();return async(i,a)=>{var l;const c=(l=await t())!==null&&l!==void 0?l:e;let u=new s(a==null?void 0:a.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),n(i,We(We({},a),{},{headers:u}))}};function Fk(e){return e.endsWith("/")?e:e+"/"}function Uk(e,t){var r,n;const{db:s,auth:i,realtime:a,global:l}=e,{db:c,auth:u,realtime:d,global:f}=t,h={db:We(We({},c),s),auth:We(We({},u),i),realtime:We(We({},d),a),storage:{},global:We(We(We({},f),l),{},{headers:We(We({},(r=f==null?void 0:f.headers)!==null&&r!==void 0?r:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}function zk(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Fk(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var Bk=class extends Nk{constructor(e){super(e)}},Wk=class{constructor(e,t,r){var n,s;this.supabaseUrl=e,this.supabaseKey=t;const i=zk(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",i),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",i),this.storageUrl=new URL("storage/v1",i),this.functionsUrl=new URL("functions/v1",i);const a=`sb-${i.hostname.split(".")[0]}-auth-token`,l={db:Ck,realtime:Pk,auth:We(We({},Ik),{},{storageKey:a}),global:Ak},c=Uk(r??{},l);if(this.storageKey=(n=c.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(s=c.global.headers)!==null&&s!==void 0?s:{},c.accessToken)this.accessToken=c.accessToken,this.auth=new Proxy({},{get:(d,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}});else{var u;this.auth=this._initSupabaseAuthClient((u=c.auth)!==null&&u!==void 0?u:{},this.headers,c.global.fetch)}this.fetch=Mk(t,this._getAccessToken.bind(this),c.global.fetch),this.realtime=this._initRealtimeClient(We({headers:this.headers,accessToken:this._getAccessToken.bind(this)},c.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(d=>this.realtime.setAuth(d)).catch(d=>console.warn("Failed to set initial Realtime auth token:",d)),this.rest=new E4(new URL("rest/v1",i).href,{headers:this.headers,schema:c.db.schema,fetch:this.fetch,timeout:c.db.timeout,urlLengthLimit:c.db.urlLengthLimit}),this.storage=new w_(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),c.accessToken||this._listenForAuthEvents()}get functions(){return new v4(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e=this,t,r;if(e.accessToken)return await e.accessToken();const{data:n}=await e.auth.getSession();return(t=(r=n.session)===null||r===void 0?void 0:r.access_token)!==null&&t!==void 0?t:e.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,userStorage:s,storageKey:i,flowType:a,lock:l,debug:c,throwOnError:u},d,f){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Bk({url:this.authUrl.href,headers:We(We({},h),d),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,userStorage:s,flowType:a,lock:l,debug:c,throwOnError:u,fetch:f,hasCustomAuthorizationHeader:Object.keys(this.headers).some(m=>m.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new V4(this.realtimeUrl.href,We(We({},e),{},{params:We(We({},{apikey:this.supabaseKey}),e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",t==null?void 0:t.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const Vk=(e,t,r)=>new Wk(e,t,r);function Hk(){if(typeof window<"u")return!1;const e=globalThis.process;if(!e)return!1;const t=e.version;if(t==null)return!1;const r=t.match(/^v(\d+)\./);return r?parseInt(r[1],10)<=18:!1}Hk()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Gk="https://iebvyrsftougslkalpyt.supabase.co",Kk="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImllYnZ5cnNmdG91Z3Nsa2FscHl0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzA4Mzg3NzMsImV4cCI6MjA4NjQxNDc3M30.ZmzD2q7nsWWNXyNgFxtSRtyTCUCZsBHjVDrkexHore0",_e=Vk(Gk,Kk),dx=20,hp=e=>`basketshot_analyses_${e}`;function hx(e){try{const t=localStorage.getItem(hp(e));if(!t)return[];const r=JSON.parse(t);return Array.isArray(r)?r:[]}catch(t){return console.warn("[CACHE] Failed to read cached analyses:",t),[]}}function fx(e,t){try{const r=t.slice(0,dx);localStorage.setItem(hp(e),JSON.stringify(r))}catch(r){console.warn("[CACHE] Failed to cache analyses:",r)}}function px(e,t){const n=hx(e).filter(i=>i.id!==t.id),s=[t,...n].slice(0,dx);return fx(e,s),s}function qk(e){try{localStorage.removeItem(hp(e))}catch(t){console.warn("[CACHE] Failed to clear cache:",t)}}const Yk=e=>`basketshot_diary_${e}`;function Jk(e){try{localStorage.removeItem(Yk(e))}catch(t){console.warn("Failed to clear diary cache",t)}}/*! Capacitor: https://capacitorjs.com/ - MIT License */var Li;(function(e){e.Unimplemented="UNIMPLEMENTED",e.Unavailable="UNAVAILABLE"})(Li||(Li={}));class ji extends Error{constructor(t,r,n){super(t),this.message=t,this.code=r,this.data=n}}const Qk=e=>{var t,r;return e!=null&&e.androidBridge?"android":!((r=(t=e==null?void 0:e.webkit)===null||t===void 0?void 0:t.messageHandlers)===null||r===void 0)&&r.bridge?"ios":"web"},Xk=e=>{const t=e.CapacitorCustomPlatform||null,r=e.Capacitor||{},n=r.Plugins=r.Plugins||{},s=()=>t!==null?t.name:Qk(e),i=()=>s()!=="web",a=f=>{const h=u.get(f);return!!(h!=null&&h.platforms.has(s())||l(f))},l=f=>{var h;return(h=r.PluginHeaders)===null||h===void 0?void 0:h.find(m=>m.name===f)},c=f=>e.console.error(f),u=new Map,d=(f,h={})=>{const m=u.get(f);if(m)return console.warn(`Capacitor plugin "${f}" already registered. Cannot register plugins twice.`),m.proxy;const x=s(),w=l(f);let k;const g=async()=>(!k&&x in h?k=typeof h[x]=="function"?k=await h[x]():k=h[x]:t!==null&&!k&&"web"in h&&(k=typeof h.web=="function"?k=await h.web():k=h.web),k),p=(C,P)=>{var L,$;if(w){const Q=w==null?void 0:w.methods.find(ee=>P===ee.name);if(Q)return Q.rtype==="promise"?ee=>r.nativePromise(f,P.toString(),ee):(ee,ue)=>r.nativeCallback(f,P.toString(),ee,ue);if(C)return(L=C[P])===null||L===void 0?void 0:L.bind(C)}else{if(C)return($=C[P])===null||$===void 0?void 0:$.bind(C);throw new ji(`"${f}" plugin is not implemented on ${x}`,Li.Unimplemented)}},y=C=>{let P;const L=(...$)=>{const Q=g().then(ee=>{const ue=p(ee,C);if(ue){const he=ue(...$);return P=he==null?void 0:he.remove,he}else throw new ji(`"${f}.${C}()" is not implemented on ${x}`,Li.Unimplemented)});return C==="addListener"&&(Q.remove=async()=>P()),Q};return L.toString=()=>`${C.toString()}() { [capacitor code] }`,Object.defineProperty(L,"name",{value:C,writable:!1,configurable:!1}),L},v=y("addListener"),N=y("removeListener"),E=(C,P)=>{const L=v({eventName:C},P),$=async()=>{const ee=await L;N({eventName:C,callbackId:ee},P)},Q=new Promise(ee=>L.then(()=>ee({remove:$})));return Q.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await $()},Q},A=new Proxy({},{get(C,P){switch(P){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return w?E:v;case"removeListener":return N;default:return y(P)}}});return n[f]=A,u.set(f,{name:f,proxy:A,platforms:new Set([...Object.keys(h),...w?[x]:[]])}),A};return r.convertFileSrc||(r.convertFileSrc=f=>f),r.getPlatform=s,r.handleError=c,r.isNativePlatform=i,r.isPluginAvailable=a,r.registerPlugin=d,r.Exception=ji,r.DEBUG=!!r.DEBUG,r.isLoggingEnabled=!!r.isLoggingEnabled,r},Zk=e=>e.Capacitor=Xk(e),yr=Zk(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),es=yr.registerPlugin;class za{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(t,r){let n=!1;this.listeners[t]||(this.listeners[t]=[],n=!0),this.listeners[t].push(r);const i=this.windowListeners[t];i&&!i.registered&&this.addWindowListener(i),n&&this.sendRetainedArgumentsForEvent(t);const a=async()=>this.removeListener(t,r);return Promise.resolve({remove:a})}async removeAllListeners(){this.listeners={};for(const t in this.windowListeners)this.removeWindowListener(this.windowListeners[t]);this.windowListeners={}}notifyListeners(t,r,n){const s=this.listeners[t];if(!s){if(n){let i=this.retainedEventArguments[t];i||(i=[]),i.push(r),this.retainedEventArguments[t]=i}return}s.forEach(i=>i(r))}hasListeners(t){var r;return!!(!((r=this.listeners[t])===null||r===void 0)&&r.length)}registerWindowListener(t,r){this.windowListeners[r]={registered:!1,windowEventName:t,pluginEventName:r,handler:n=>{this.notifyListeners(r,n)}}}unimplemented(t="not implemented"){return new yr.Exception(t,Li.Unimplemented)}unavailable(t="not available"){return new yr.Exception(t,Li.Unavailable)}async removeListener(t,r){const n=this.listeners[t];if(!n)return;const s=n.indexOf(r);this.listeners[t].splice(s,1),this.listeners[t].length||this.removeWindowListener(this.windowListeners[t])}addWindowListener(t){window.addEventListener(t.windowEventName,t.handler),t.registered=!0}removeWindowListener(t){t&&(window.removeEventListener(t.windowEventName,t.handler),t.registered=!1)}sendRetainedArgumentsForEvent(t){const r=this.retainedEventArguments[t];r&&(delete this.retainedEventArguments[t],r.forEach(n=>{this.notifyListeners(t,n)}))}}const H0=e=>encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),G0=e=>e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class e5 extends za{async getCookies(){const t=document.cookie,r={};return t.split(";").forEach(n=>{if(n.length<=0)return;let[s,i]=n.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");s=G0(s).trim(),i=G0(i).trim(),r[s]=i}),r}async setCookie(t){try{const r=H0(t.key),n=H0(t.value),s=t.expires?`; expires=${t.expires.replace("expires=","")}`:"",i=(t.path||"/").replace("path=",""),a=t.url!=null&&t.url.length>0?`domain=${t.url}`:"";document.cookie=`${r}=${n||""}${s}; path=${i}; ${a};`}catch(r){return Promise.reject(r)}}async deleteCookie(t){try{document.cookie=`${t.key}=; Max-Age=0`}catch(r){return Promise.reject(r)}}async clearCookies(){try{const t=document.cookie.split(";")||[];for(const r of t)document.cookie=r.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(t){return Promise.reject(t)}}async clearAllCookies(){try{await this.clearCookies()}catch(t){return Promise.reject(t)}}}es("CapacitorCookies",{web:()=>new e5});const t5=async e=>new Promise((t,r)=>{const n=new FileReader;n.onload=()=>{const s=n.result;t(s.indexOf(",")>=0?s.split(",")[1]:s)},n.onerror=s=>r(s),n.readAsDataURL(e)}),r5=(e={})=>{const t=Object.keys(e);return Object.keys(e).map(s=>s.toLocaleLowerCase()).reduce((s,i,a)=>(s[i]=e[t[a]],s),{})},n5=(e,t=!0)=>e?Object.entries(e).reduce((n,s)=>{const[i,a]=s;let l,c;return Array.isArray(a)?(c="",a.forEach(u=>{l=t?encodeURIComponent(u):u,c+=`${i}=${l}&`}),c.slice(0,-1)):(l=t?encodeURIComponent(a):a,c=`${i}=${l}`),`${n}&${c}`},"").substr(1):null,s5=(e,t={})=>{const r=Object.assign({method:e.method||"GET",headers:e.headers},t),s=r5(e.headers)["content-type"]||"";if(typeof e.data=="string")r.body=e.data;else if(s.includes("application/x-www-form-urlencoded")){const i=new URLSearchParams;for(const[a,l]of Object.entries(e.data||{}))i.set(a,l);r.body=i.toString()}else if(s.includes("multipart/form-data")||e.data instanceof FormData){const i=new FormData;if(e.data instanceof FormData)e.data.forEach((l,c)=>{i.append(c,l)});else for(const l of Object.keys(e.data))i.append(l,e.data[l]);r.body=i;const a=new Headers(r.headers);a.delete("content-type"),r.headers=a}else(s.includes("application/json")||typeof e.data=="object")&&(r.body=JSON.stringify(e.data));return r};class i5 extends za{async request(t){const r=s5(t,t.webFetchExtra),n=n5(t.params,t.shouldEncodeUrlParams),s=n?`${t.url}?${n}`:t.url,i=await fetch(s,r),a=i.headers.get("content-type")||"";let{responseType:l="text"}=i.ok?t:{};a.includes("application/json")&&(l="json");let c,u;switch(l){case"arraybuffer":case"blob":u=await i.blob(),c=await t5(u);break;case"json":c=await i.json();break;case"document":case"text":default:c=await i.text()}const d={};return i.headers.forEach((f,h)=>{d[h]=f}),{data:c,headers:d,status:i.status,url:i.url}}async get(t){return this.request(Object.assign(Object.assign({},t),{method:"GET"}))}async post(t){return this.request(Object.assign(Object.assign({},t),{method:"POST"}))}async put(t){return this.request(Object.assign(Object.assign({},t),{method:"PUT"}))}async patch(t){return this.request(Object.assign(Object.assign({},t),{method:"PATCH"}))}async delete(t){return this.request(Object.assign(Object.assign({},t),{method:"DELETE"}))}}es("CapacitorHttp",{web:()=>new i5});var K0;(function(e){e.Dark="DARK",e.Light="LIGHT",e.Default="DEFAULT"})(K0||(K0={}));var q0;(function(e){e.StatusBar="StatusBar",e.NavigationBar="NavigationBar"})(q0||(q0={}));class o5 extends za{async setStyle(){this.unavailable("not available for web")}async setAnimation(){this.unavailable("not available for web")}async show(){this.unavailable("not available for web")}async hide(){this.unavailable("not available for web")}}es("SystemBars",{web:()=>new o5});const a5="modulepreload",l5=function(e,t){return new URL(e,t).href},Y0={},fp=function(t,r,n){let s=Promise.resolve();if(r&&r.length>0){const a=document.getElementsByTagName("link"),l=document.querySelector("meta[property=csp-nonce]"),c=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));s=Promise.allSettled(r.map(u=>{if(u=l5(u,n),u in Y0)return;Y0[u]=!0;const d=u.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(!!n)for(let x=a.length-1;x>=0;x--){const w=a[x];if(w.href===u&&(!d||w.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${u}"]${f}`))return;const m=document.createElement("link");if(m.rel=d?"stylesheet":a5,d||(m.as="script"),m.crossOrigin="",m.href=u,c&&m.setAttribute("nonce",c),document.head.appendChild(m),d)return new Promise((x,w)=>{m.addEventListener("load",x),m.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return s.then(a=>{for(const l of a||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})},c5=es("SignInWithApple",{web:()=>fp(()=>import("./web-BS1WiTGF.js"),[],import.meta.url).then(e=>new e.SignInWithAppleWeb)}),mx=b.createContext(null),u5=e=>{let t="";return e.forEach(n=>t+=String.fromCharCode(n)),btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/g,"")},J0=(e=32)=>{const t=new Uint8Array(e);return crypto.getRandomValues(t),u5(t)},d5=async e=>{const t=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(r)).map(s=>s.toString(16).padStart(2,"0")).join("")};function h5({children:e}){const[t,r]=b.useState(null),[n,s]=b.useState(null),[i,a]=b.useState(null),[l,c]=b.useState(!0),u=async g=>{const{data:p,error:y}=await _e.from("profiles").select("*").eq("id",g).maybeSingle();if(y){console.warn("[AUTH] fetchProfile error:",y.message),a(null);return}if(!p){console.log("[AUTH] profile not found, creating...",{uid:g});const{data:v,error:N}=await _e.from("profiles").insert({id:g,onboarding_completed:!1,is_premium:!1}).select("*").single();if(N){console.warn("[AUTH] createProfile error:",N.message),a(null);return}a(v);return}a(p)},d=async()=>{n!=null&&n.id&&await u(n.id)};b.useEffect(()=>{let g=!0;(async()=>{var v,N;const{data:y}=await _e.auth.getSession();g&&(r(y.session),s(((v=y.session)==null?void 0:v.user)??null),(N=y.session)!=null&&N.user&&await u(y.session.user.id),c(!1))})();const{data:p}=_e.auth.onAuthStateChange((y,v)=>{(async()=>(r(v),s((v==null?void 0:v.user)??null),v!=null&&v.user?await u(v.user.id):a(null)))()});return()=>{g=!1,p==null||p.subscription.unsubscribe()}},[]);const f=async(g,p)=>{const{error:y}=await _e.auth.signUp({email:g,password:p});return y?{ok:!1,error:y.message}:{ok:!0}},h=async(g,p)=>{const{error:y}=await _e.auth.signInWithPassword({email:g,password:p});return y?{ok:!1,error:y.message}:{ok:!0}},m=async()=>{var g,p,y,v,N,E,A,C;if(yr.getPlatform()!=="ios")return{ok:!1,error:"Apple Sign-In solo disponible en iOS"};try{const P=J0(32),L=await d5(P),$=await c5.authorize({scopes:["email","name"],state:J0(16),nonce:L}),Q=((g=$==null?void 0:$.response)==null?void 0:g.identityToken)||($==null?void 0:$.identityToken)||((p=$==null?void 0:$.response)==null?void 0:p.id_token);if(!Q)return{ok:!1,error:"No se obtuvo identityToken de Apple"};const{error:ee}=await _e.auth.signInWithIdToken({provider:"apple",token:Q,nonce:P});if(ee)return{ok:!1,error:ee.message??"Error Supabase Apple"};const ue=((y=$==null?void 0:$.response)==null?void 0:y.givenName)||((N=(v=$==null?void 0:$.response)==null?void 0:v.fullName)==null?void 0:N.givenName),he=((E=$==null?void 0:$.response)==null?void 0:E.familyName)||((C=(A=$==null?void 0:$.response)==null?void 0:A.fullName)==null?void 0:C.familyName),D=[ue,he].filter(Boolean).join(" ").trim();return D&&await _e.auth.updateUser({data:{full_name:D}}),{ok:!0}}catch(P){return(P==null?void 0:P.code)==="1001"||(P==null?void 0:P.code)===1001||String((P==null?void 0:P.message)||"").includes("1001")?{ok:!1,error:"Inicio de sesin cancelado"}:{ok:!1,error:(P==null?void 0:P.message)||"Error al iniciar sesin con Apple"}}},x=async()=>{n!=null&&n.id&&(qk(n.id),Jk(n.id)),await _e.auth.signOut()},w=async g=>{if(!(n!=null&&n.id))return{ok:!1,error:"No user logged in"};const{error:p}=await _e.from("profiles").update(g).eq("id",n.id);return p?{ok:!1,error:p.message}:(await d(),{ok:!0})},k=b.useMemo(()=>({user:n,session:t,profile:i,loading:l,signUp:f,signIn:h,signInWithApple:m,signOut:x,refreshProfile:d,updateProfile:w}),[n,t,i,l]);return o.jsx(mx.Provider,{value:k,children:e})}function xr(){const e=b.useContext(mx);if(!e)throw new Error("useAuth must be used within AuthProvider");return e}var gx=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(n[i]=s[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Q0;(function(e){e.UNKNOWN_ERROR="0",e.PURCHASE_CANCELLED_ERROR="1",e.STORE_PROBLEM_ERROR="2",e.PURCHASE_NOT_ALLOWED_ERROR="3",e.PURCHASE_INVALID_ERROR="4",e.PRODUCT_NOT_AVAILABLE_FOR_PURCHASE_ERROR="5",e.PRODUCT_ALREADY_PURCHASED_ERROR="6",e.RECEIPT_ALREADY_IN_USE_ERROR="7",e.INVALID_RECEIPT_ERROR="8",e.MISSING_RECEIPT_FILE_ERROR="9",e.NETWORK_ERROR="10",e.INVALID_CREDENTIALS_ERROR="11",e.UNEXPECTED_BACKEND_RESPONSE_ERROR="12",e.RECEIPT_IN_USE_BY_OTHER_SUBSCRIBER_ERROR="13",e.INVALID_APP_USER_ID_ERROR="14",e.OPERATION_ALREADY_IN_PROGRESS_ERROR="15",e.UNKNOWN_BACKEND_ERROR="16",e.INVALID_APPLE_SUBSCRIPTION_KEY_ERROR="17",e.INELIGIBLE_ERROR="18",e.INSUFFICIENT_PERMISSIONS_ERROR="19",e.PAYMENT_PENDING_ERROR="20",e.INVALID_SUBSCRIBER_ATTRIBUTES_ERROR="21",e.LOG_OUT_ANONYMOUS_USER_ERROR="22",e.CONFIGURATION_ERROR="23",e.UNSUPPORTED_ERROR="24",e.EMPTY_SUBSCRIBER_ATTRIBUTES_ERROR="25",e.PRODUCT_DISCOUNT_MISSING_IDENTIFIER_ERROR="26",e.PRODUCT_DISCOUNT_MISSING_SUBSCRIPTION_GROUP_IDENTIFIER_ERROR="28",e.CUSTOMER_INFO_ERROR="29",e.SYSTEM_INFO_ERROR="30",e.BEGIN_REFUND_REQUEST_ERROR="31",e.PRODUCT_REQUEST_TIMED_OUT_ERROR="32",e.API_ENDPOINT_BLOCKED="33",e.INVALID_PROMOTIONAL_OFFER_ERROR="34",e.OFFLINE_CONNECTION_ERROR="35",e.TEST_STORE_SIMULATED_PURCHASE_ERROR="42"})(Q0||(Q0={}));(function(e){gx(t,e);function t(){var r=e.call(this,"There is no singleton instance. Make sure you configure Purchases before trying to get the default instance. More info here: https://errors.rev.cat/configuring-sdk")||this;return Object.setPrototypeOf(r,t.prototype),r}return t})(Error);(function(e){gx(t,e);function t(){var r=e.call(this,"This method is not available in the current platform.")||this;return Object.setPrototypeOf(r,t.prototype),r}return t})(Error);var X0;(function(e){e.UNKNOWN="UNKNOWN",e.CUSTOM="CUSTOM",e.LIFETIME="LIFETIME",e.ANNUAL="ANNUAL",e.SIX_MONTH="SIX_MONTH",e.THREE_MONTH="THREE_MONTH",e.TWO_MONTH="TWO_MONTH",e.MONTHLY="MONTHLY",e.WEEKLY="WEEKLY"})(X0||(X0={}));var Z0;(function(e){e[e.INTRO_ELIGIBILITY_STATUS_UNKNOWN=0]="INTRO_ELIGIBILITY_STATUS_UNKNOWN",e[e.INTRO_ELIGIBILITY_STATUS_INELIGIBLE=1]="INTRO_ELIGIBILITY_STATUS_INELIGIBLE",e[e.INTRO_ELIGIBILITY_STATUS_ELIGIBLE=2]="INTRO_ELIGIBILITY_STATUS_ELIGIBLE",e[e.INTRO_ELIGIBILITY_STATUS_NO_INTRO_OFFER_EXISTS=3]="INTRO_ELIGIBILITY_STATUS_NO_INTRO_OFFER_EXISTS"})(Z0||(Z0={}));var eg;(function(e){e.NON_SUBSCRIPTION="NON_SUBSCRIPTION",e.SUBSCRIPTION="SUBSCRIPTION",e.UNKNOWN="UNKNOWN"})(eg||(eg={}));var tg;(function(e){e.CONSUMABLE="CONSUMABLE",e.NON_CONSUMABLE="NON_CONSUMABLE",e.NON_RENEWABLE_SUBSCRIPTION="NON_RENEWABLE_SUBSCRIPTION",e.AUTO_RENEWABLE_SUBSCRIPTION="AUTO_RENEWABLE_SUBSCRIPTION",e.PREPAID_SUBSCRIPTION="PREPAID_SUBSCRIPTION",e.UNKNOWN="UNKNOWN"})(tg||(tg={}));var rg;(function(e){e[e.UNKNOWN_SUBSCRIPTION_UPGRADE_DOWNGRADE_POLICY=0]="UNKNOWN_SUBSCRIPTION_UPGRADE_DOWNGRADE_POLICY",e[e.IMMEDIATE_WITH_TIME_PRORATION=1]="IMMEDIATE_WITH_TIME_PRORATION",e[e.IMMEDIATE_AND_CHARGE_PRORATED_PRICE=2]="IMMEDIATE_AND_CHARGE_PRORATED_PRICE",e[e.IMMEDIATE_WITHOUT_PRORATION=3]="IMMEDIATE_WITHOUT_PRORATION",e[e.DEFERRED=6]="DEFERRED",e[e.IMMEDIATE_AND_CHARGE_FULL_PRICE=5]="IMMEDIATE_AND_CHARGE_FULL_PRICE"})(rg||(rg={}));var ng;(function(e){e[e.INFINITE_RECURRING=1]="INFINITE_RECURRING",e[e.FINITE_RECURRING=2]="FINITE_RECURRING",e[e.NON_RECURRING=3]="NON_RECURRING"})(ng||(ng={}));var sg;(function(e){e.FREE_TRIAL="FREE_TRIAL",e.SINGLE_PAYMENT="SINGLE_PAYMENT",e.DISCOUNTED_RECURRING_PAYMENT="DISCOUNTED_RECURRING_PAYMENT"})(sg||(sg={}));var ig;(function(e){e.DAY="DAY",e.WEEK="WEEK",e.MONTH="MONTH",e.YEAR="YEAR",e.UNKNOWN="UNKNOWN"})(ig||(ig={}));var og;(function(e){e.INAPP="inapp",e.SUBS="subs"})(og||(og={}));var ag;(function(e){e[e.SUBSCRIPTIONS=0]="SUBSCRIPTIONS",e[e.SUBSCRIPTIONS_UPDATE=1]="SUBSCRIPTIONS_UPDATE",e[e.IN_APP_ITEMS_ON_VR=2]="IN_APP_ITEMS_ON_VR",e[e.SUBSCRIPTIONS_ON_VR=3]="SUBSCRIPTIONS_ON_VR",e[e.PRICE_CHANGE_CONFIRMATION=4]="PRICE_CHANGE_CONFIRMATION"})(ag||(ag={}));var lg;(function(e){e[e.SUCCESS=0]="SUCCESS",e[e.USER_CANCELLED=1]="USER_CANCELLED",e[e.ERROR=2]="ERROR"})(lg||(lg={}));var Uh;(function(e){e.VERBOSE="VERBOSE",e.DEBUG="DEBUG",e.INFO="INFO",e.WARN="WARN",e.ERROR="ERROR"})(Uh||(Uh={}));var cg;(function(e){e[e.BILLING_ISSUE=0]="BILLING_ISSUE",e[e.PRICE_INCREASE_CONSENT=1]="PRICE_INCREASE_CONSENT",e[e.GENERIC=2]="GENERIC",e[e.WIN_BACK_OFFER=3]="WIN_BACK_OFFER"})(cg||(cg={}));var ug;(function(e){e.DISABLED="DISABLED",e.INFORMATIONAL="INFORMATIONAL"})(ug||(ug={}));var dg;(function(e){e.NOT_REQUESTED="NOT_REQUESTED",e.VERIFIED="VERIFIED",e.FAILED="FAILED",e.VERIFIED_ON_DEVICE="VERIFIED_ON_DEVICE"})(dg||(dg={}));var hg;(function(e){e.NOT_PRESENTED="NOT_PRESENTED",e.ERROR="ERROR",e.CANCELLED="CANCELLED",e.PURCHASED="PURCHASED",e.RESTORED="RESTORED"})(hg||(hg={}));var fg;(function(e){e.STOREKIT_1="STOREKIT_1",e.STOREKIT_2="STOREKIT_2",e.DEFAULT="DEFAULT"})(fg||(fg={}));var pg;(function(e){e.MY_APP="MY_APP",e.REVENUECAT="REVENUECAT"})(pg||(pg={}));var mg;(function(e){e.SUCCESS="SUCCESS",e.ERROR="ERROR",e.PURCHASE_BELONGS_TO_OTHER_USER="PURCHASE_BELONGS_TO_OTHER_USER",e.INVALID_TOKEN="INVALID_TOKEN",e.EXPIRED="EXPIRED"})(mg||(mg={}));const kn=es("Purchases",{web:()=>fp(()=>import("./web-z0UvUDZf.js"),[],import.meta.url).then(e=>new e.PurchasesWeb)}),yx=b.createContext(void 0),au=()=>{const e=b.useContext(yx);if(!e)throw new Error("useRevenueCat must be used within RevenueCatProvider");return e},f5=({children:e})=>{const{user:t}=xr(),[r,n]=b.useState(!1),[s,i]=b.useState(!1),[a,l]=b.useState(null),[c,u]=b.useState(null),[d,f]=b.useState(!1),[h,m]=b.useState(null),x=v=>v.entitlements.active["BasketShot Pro"]!==void 0,w=async()=>{try{f(!0),m(null),await kn.setLogLevel({level:Uh.DEBUG});const v={apiKey:"test_CgvsSNJDWUbBzpVxNgxOdnEFiPE",appUserID:(t==null?void 0:t.id)||void 0};await kn.configure(v);const{customerInfo:N}=await kn.getCustomerInfo();l(N),i(x(N));const E=await kn.getOfferings();u(E),n(!0)}catch(v){console.error("RevenueCat initialization error:",v),m(v.message||"Failed to initialize RevenueCat")}finally{f(!1)}},k=async()=>{try{f(!0);const{customerInfo:v}=await kn.getCustomerInfo();l(v),i(x(v))}catch(v){console.error("Failed to refresh customer info:",v),m(v.message||"Failed to refresh customer info")}finally{f(!1)}},g=async v=>{try{f(!0),m(null);const{customerInfo:N}=await kn.purchasePackage({aPackage:v});return l(N),i(x(N)),{success:!0}}catch(N){console.error("Purchase error:",N);const E=N.message||"Purchase failed";return m(E),{success:!1,error:E}}finally{f(!1)}},p=async()=>{try{f(!0),m(null);const{customerInfo:v}=await kn.restorePurchases();return l(v),i(x(v)),{success:!0}}catch(v){console.error("Restore purchases error:",v);const N=v.message||"Failed to restore purchases";return m(N),{success:!1,error:N}}finally{f(!1)}};b.useEffect(()=>{if(!t){f(!1),n(!1),i(!1),l(null),u(null);return}w()},[t==null?void 0:t.id]),b.useEffect(()=>{(async()=>{if(r)try{await kn.addCustomerInfoUpdateListener(N=>{l(N),i(x(N))})}catch(N){console.error("Failed to setup customer info listener:",N)}})()},[r]);const y={isReady:r,isPremium:s,customerInfo:a,offerings:c,loading:d,error:h,refreshCustomerInfo:k,purchasePackage:g,restorePurchases:p};return o.jsx(yx.Provider,{value:y,children:e})};function p5(){const{signIn:e,signUp:t,signInWithApple:r,loading:n}=xr(),[s,i]=b.useState("signup"),[a,l]=b.useState(""),[c,u]=b.useState(""),[d,f]=b.useState(!1),[h,m]=b.useState(!1),[x,w]=b.useState(null),k=yr.isNativePlatform()&&yr.getPlatform()==="ios",g=async p=>{p.preventDefault(),w(null),f(!0);const y=s==="login"?await e(a.trim(),c):await t(a.trim(),c);f(!1),y.ok===!1&&w(y.error)};return o.jsxs("div",{className:"min-h-screen bg-background text-white max-w-md mx-auto px-6 py-10",children:[o.jsx("h1",{className:"text-3xl font-extrabold tracking-tight mb-2",children:"BasketShot AI"}),o.jsxs("p",{className:"text-muted text-sm mb-8",children:[s==="login"?"Inicia sesin":"Crea tu cuenta"," para continuar."]}),o.jsxs("form",{onSubmit:g,className:"space-y-4",children:[o.jsxs("div",{className:"bg-surface rounded-2xl p-4 border border-white/5",children:[o.jsx("label",{className:"text-xs font-bold uppercase tracking-wider text-muted",children:"Email"}),o.jsx("input",{className:"mt-2 w-full bg-transparent outline-none text-white",type:"email",autoComplete:"email",required:!0,value:a,onChange:p=>l(p.target.value),placeholder:"tu@email.com"})]}),o.jsxs("div",{className:"bg-surface rounded-2xl p-4 border border-white/5",children:[o.jsx("label",{className:"text-xs font-bold uppercase tracking-wider text-muted",children:"Password"}),o.jsx("input",{className:"mt-2 w-full bg-transparent outline-none text-white",type:"password",autoComplete:s==="login"?"current-password":"new-password",required:!0,minLength:6,value:c,onChange:p=>u(p.target.value),placeholder:"mnimo 6 caracteres"})]}),x&&o.jsx("div",{className:"text-red-400 text-sm font-medium",children:x}),o.jsx("button",{type:"submit",disabled:d||n,className:"w-full rounded-2xl bg-primary text-black py-3 font-extrabold disabled:opacity-60",children:d?"Procesando...":s==="login"?"Entrar":"Crear cuenta"}),k&&o.jsxs("button",{type:"button",disabled:d||n||h,onClick:async()=>{w(null),m(!0);const p=await r();m(!1),p.ok===!1&&w(p.error)},className:"w-full rounded-2xl bg-black py-3 font-extrabold text-white disabled:opacity-60 flex items-center justify-center gap-2",children:[o.jsx("svg",{className:"h-5 w-5",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",children:o.jsx("path",{d:"M17.05 20.28c-.98.95-2.05.88-3.08.4-1.09-.5-2.08-.48-3.24 0-1.44.62-2.2.44-3.06-.4C2.79 15.25 3.51 7.59 9.05 7.31c1.35.07 2.29.74 3.08.8 1.18-.24 2.31-.93 3.57-.84 1.51.12 2.65.72 3.4 1.8-3.12 1.87-2.38 5.98.48 7.13-.57 1.5-1.31 2.99-2.54 4.09l.01-.01zM12.03 7.25c-.15-2.23 1.66-4.07 3.74-4.25.29 2.58-2.34 4.5-3.74 4.25z"})}),h?"Conectando...":"Continuar con Apple"]}),o.jsx("button",{type:"button",onClick:()=>{i(s==="login"?"signup":"login"),w(null)},className:"w-full text-sm text-muted hover:text-white transition-colors",children:s==="login"?"No tienes cuenta? Regstrate":"Ya tienes cuenta? Inicia sesin"})]})]})}/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m5=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),xx=(...e)=>e.filter((t,r,n)=>!!t&&n.indexOf(t)===r).join(" ");/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var g5={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y5=b.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:s="",children:i,iconNode:a,...l},c)=>b.createElement("svg",{ref:c,...g5,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:xx("lucide",s),...l},[...a.map(([u,d])=>b.createElement(u,d)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=(e,t)=>{const r=b.forwardRef(({className:n,...s},i)=>b.createElement(y5,{ref:i,iconNode:t,className:xx(`lucide-${m5(e)}`,n),...s}));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vx=te("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Na=te("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wx=te("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x5=te("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v5=te("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zh=te("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w5=te("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b5=te("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _5=te("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ea=te("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $o=te("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k5=te("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bh=te("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sn=te("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qo=te("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bx=te("CircleArrowUp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $t=te("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _x=te("CircleDashed",[["path",{d:"M10.1 2.182a10 10 0 0 1 3.8 0",key:"5ilxe3"}],["path",{d:"M13.9 21.818a10 10 0 0 1-3.8 0",key:"11zvb9"}],["path",{d:"M17.609 3.721a10 10 0 0 1 2.69 2.7",key:"1iw5b2"}],["path",{d:"M2.182 13.9a10 10 0 0 1 0-3.8",key:"c0bmvh"}],["path",{d:"M20.279 17.609a10 10 0 0 1-2.7 2.69",key:"1ruxm7"}],["path",{d:"M21.818 10.1a10 10 0 0 1 0 3.8",key:"qkgqxc"}],["path",{d:"M3.721 6.391a10 10 0 0 1 2.7-2.69",key:"1mcia2"}],["path",{d:"M6.391 20.279a10 10 0 0 1-2.69-2.7",key:"1fvljs"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j5=te("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S5=te("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gg=te("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N5=te("Dribbble",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M19.13 5.09C15.22 9.14 10 10.44 2.25 10.94",key:"hpej1"}],["path",{d:"M21.75 12.84c-6.62-1.41-12.14 1-16.38 6.32",key:"1tr44o"}],["path",{d:"M8.56 2.75c4.37 6 6 9.42 8 17.72",key:"kbh691"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kx=te("Dumbbell",[["path",{d:"M14.4 14.4 9.6 9.6",key:"ic80wn"}],["path",{d:"M18.657 21.485a2 2 0 1 1-2.829-2.828l-1.767 1.768a2 2 0 1 1-2.829-2.829l6.364-6.364a2 2 0 1 1 2.829 2.829l-1.768 1.767a2 2 0 1 1 2.828 2.829z",key:"nnl7wr"}],["path",{d:"m21.5 21.5-1.4-1.4",key:"1f1ice"}],["path",{d:"M3.9 3.9 2.5 2.5",key:"1evmna"}],["path",{d:"M6.404 12.768a2 2 0 1 1-2.829-2.829l1.768-1.767a2 2 0 1 1-2.828-2.829l2.828-2.828a2 2 0 1 1 2.829 2.828l1.767-1.768a2 2 0 1 1 2.829 2.829z",key:"yhosts"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jx=te("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wh=te("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sx=te("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nx=te("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E5=te("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ta=te("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T5=te("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A5=te("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C5=te("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yg=te("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ex=te("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ds=te("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vh=te("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I5=te("Ruler",[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _d=te("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P5=te("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O5=te("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R5=te("SkipBack",[["polygon",{points:"19 20 9 12 19 4 19 20",key:"o2sva"}],["line",{x1:"5",x2:"5",y1:"19",y2:"5",key:"1ocqjk"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L5=te("SkipForward",[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tr=te("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $5=te("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lu=te("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tx=te("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D5=te("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M5=te("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F5=te("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hh=te("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U5=te("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z5=te("Weight",[["circle",{cx:"12",cy:"5",r:"3",key:"rqqgnr"}],["path",{d:"M6.5 8a2 2 0 0 0-1.905 1.46L2.1 18.5A2 2 0 0 0 4 21h16a2 2 0 0 0 1.925-2.54L19.4 9.5A2 2 0 0 0 17.48 8Z",key:"56o5sh"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qn=te("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ax=te("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),B5="https://images.unsplash.com/photo-1570295999919-56ceb5ecca61?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=100&q=80",W5=({onOpenCoachChat:e})=>{var i;const{profile:t}=xr(),r=((t==null?void 0:t.full_name)??"").trim(),n=(((i=t==null?void 0:t.onboarding_data)==null?void 0:i.username)??"").toString().trim()||(t!=null&&t.email?String(t.email).split("@")[0]:"")||"Champ",s=r||n;return o.jsxs("header",{className:"flex items-center justify-between px-6 py-6 sticky top-0 bg-background/80 backdrop-blur-md z-40",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"relative w-12 h-12 rounded-full border-2 border-primary p-0.5",children:o.jsx("img",{src:(t==null?void 0:t.avatar_url)||B5,alt:"User Avatar",className:"w-full h-full rounded-full object-cover"})}),o.jsx("div",{children:o.jsxs("h1",{className:"text-xl font-extrabold leading-none tracking-tight",children:["Hello, ",s,"!"]})})]}),o.jsxs("button",{type:"button",onClick:e,className:"h-11 w-11 rounded-2xl bg-white/5 border border-white/10 text-white/80 active:scale-[0.97] transition-transform flex flex-col items-center justify-center gap-0.5","aria-label":"Open AI Coach",children:[o.jsx(C5,{className:"h-5 w-5"}),o.jsx("div",{className:"text-[9px] font-extrabold tracking-wider text-white/70 leading-none",children:"AI Coach"})]})]})},kd=({label:e,value:t,unit:r,subValue:n,highlight:s=!1,fullWidth:i=!1})=>o.jsxs("div",{className:`
        bg-surface rounded-3xl p-8 border border-white/5 flex flex-col items-center text-center justify-center
        ${i?"col-span-2":"col-span-1"}
      `,children:[o.jsx("p",{className:"text-xs text-muted font-extrabold uppercase tracking-[0.2em] mb-3",children:e}),o.jsxs("div",{className:"flex items-baseline gap-1",children:[o.jsx("span",{className:`font-extrabold tracking-tighter ${s?"text-7xl sm:text-8xl":"text-5xl"}`,children:t}),r&&o.jsx("span",{className:`text-primary font-bold ${s?"text-4xl":"text-xl"}`,children:r}),n&&o.jsx("span",{className:"text-primary text-xl font-bold ml-1",children:n})]})]}),V5=({onClick:e})=>o.jsx("section",{className:"mt-8",children:o.jsxs("div",{onClick:e,className:"relative bg-surface rounded-3xl p-6 flex items-center justify-between min-h-[100px] overflow-hidden border border-white/5 group cursor-pointer hover:border-primary/30 transition-colors",children:[o.jsx("div",{className:"absolute inset-0 opacity-10 pointer-events-none",style:{backgroundImage:"url('https://images.unsplash.com/photo-1546519638-68e109498ee3?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80')",backgroundSize:"cover",backgroundPosition:"center",filter:"grayscale(100%)"}}),o.jsxs("div",{className:"z-10 flex items-center gap-4",children:[o.jsx("div",{className:"bg-primary/20 w-12 h-12 flex items-center justify-center rounded-full",children:o.jsx(U5,{className:"text-primary",size:24,fill:"currentColor"})}),o.jsx("h2",{className:"text-lg font-extrabold tracking-tight",children:"Analyze Your Shot"})]}),o.jsx("button",{className:"z-10 bg-primary text-black w-12 h-12 rounded-full flex items-center justify-center transition-transform group-hover:scale-105 active:scale-95 shadow-lg shadow-primary/20",children:o.jsx(wx,{size:24,strokeWidth:3})})]})}),H5=({sessions:e})=>{const[r,n]=b.useState(!1),s=e.length>5,i=b.useMemo(()=>r?e:e.slice(0,5),[e,r]);return o.jsxs("section",{className:"mt-10 mb-28",children:[o.jsx("h3",{className:"text-xl font-extrabold mb-6 tracking-tight",children:"Recent Sessions"}),o.jsx("div",{className:"flex flex-col gap-5",children:i.map(a=>o.jsxs("div",{className:"flex items-center justify-between group cursor-pointer",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"bg-surface p-3 rounded-2xl border border-white/5 group-hover:border-primary/50 transition-colors",children:o.jsx(N5,{className:"text-primary",size:24})}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("h4",{className:"text-sm font-bold tracking-tight",children:a.title}),o.jsx("span",{className:"text-[10px] text-muted font-bold uppercase tracking-wider mt-0.5",children:a.timestamp})]})]}),o.jsx("div",{className:"flex items-center gap-4",children:o.jsx("span",{className:`text-sm font-extrabold ${a.accuracy>=80?"text-primary":"text-white"}`,children:a.score})})]},a.id))}),s&&o.jsx("div",{className:"mt-6",children:o.jsx("button",{type:"button",onClick:()=>n(a=>!a),className:"w-full rounded-2xl border border-white/10 bg-white/5 px-4 py-3 text-sm font-extrabold tracking-tight hover:border-primary/40 hover:bg-white/10 transition-colors",children:r?"Show less":`Show all (${e.length})`})})]})},G5=({currentView:e,onNavigate:t})=>{const r=i=>e===i?"text-primary":"text-muted",n=i=>e===i?"text-primary":"text-muted",s=()=>{t(e==="add"?"home":"add")};return o.jsxs("nav",{className:"fixed bottom-0 left-0 right-0 bg-[#141414]/90 backdrop-blur-xl border-t border-white/5 px-6 pb-8 pt-2 flex justify-between items-end z-50 h-24 max-w-md mx-auto",children:[o.jsxs("div",{onClick:()=>t("home"),className:"flex flex-col items-center gap-1.5 flex-1 cursor-pointer group",children:[o.jsx(E5,{className:`${r("home")} group-hover:text-white transition-colors`,size:24,fill:e==="home"?"currentColor":"none",strokeWidth:e==="home"?0:2}),o.jsx("span",{className:`text-[10px] font-bold ${n("home")} group-hover:text-white uppercase tracking-wider transition-colors`,children:"Home"})]}),o.jsxs("div",{onClick:()=>t("diary"),className:"flex flex-col items-center gap-1.5 flex-1 cursor-pointer group",children:[o.jsx(v5,{className:`${r("diary")} group-hover:text-white transition-colors`,size:24,fill:e==="diary"?"currentColor":"none",strokeWidth:e==="diary"?0:2}),o.jsx("span",{className:`text-[10px] font-bold ${n("diary")} group-hover:text-white uppercase tracking-wider transition-colors`,children:"Diary"})]}),o.jsx("div",{className:"relative -top-8 flex-1 flex justify-center",children:o.jsx("button",{onClick:s,className:`w-16 h-16 rounded-full flex items-center justify-center shadow-[0_0_20px_rgba(249,128,6,0.4)] border-[6px] border-background active:scale-95 transition-all
            ${e==="add"?"bg-white rotate-45":"bg-primary"}
          `,children:o.jsx(Vh,{className:"text-black",size:32,strokeWidth:3})})}),o.jsxs("div",{onClick:()=>t("workout"),className:"flex flex-col items-center gap-1.5 flex-1 cursor-pointer group",children:[o.jsx(jx,{className:`${r("workout")} group-hover:text-white transition-colors`,size:24,fill:e==="workout"?"currentColor":"none",strokeWidth:e==="workout"?0:2}),o.jsx("span",{className:`text-[10px] font-bold ${n("workout")} group-hover:text-white uppercase tracking-wider transition-colors`,children:"Workouts"})]}),o.jsxs("div",{onClick:()=>t("profile"),className:"flex flex-col items-center gap-1.5 flex-1 cursor-pointer group",children:[o.jsx(Hh,{className:`${r("profile")} group-hover:text-white transition-colors`,size:24,fill:e==="profile"?"currentColor":"none",strokeWidth:e==="profile"?0:2}),o.jsx("span",{className:`text-[10px] font-bold ${n("profile")} group-hover:text-white uppercase tracking-wider transition-colors`,children:"Profile"})]})]})};function Cx(e,t){return new Promise((r,n)=>{const s=setTimeout(()=>n(new Error("timeout")),t);e.then(i=>{clearTimeout(s),r(i)}).catch(i=>{clearTimeout(s),n(i)})})}async function Ix(e,t=5e3){try{const r=_e.functions.invoke("explain-shot-analysis",{body:e}),{data:n,error:s}=await Cx(r,t);if(s||!n)return null;const i=n;return!Array.isArray(i.strengths)||!Array.isArray(i.improvements)?null:n}catch{return null}}async function K5(e,t=8e3){try{const r=_e.functions.invoke("generate-workout",{body:e}),{data:n,error:s}=await Cx(r,t);if(s||!n)return null;const i=n;return typeof i.text!="string"?null:i.text}catch{return null}}const pp="saved_workouts";async function Px(e){const{data:t,error:r}=await _e.from(pp).select("workout_id").eq("user_id",e).order("created_at",{ascending:!1});return r?(console.error("[savedWorkouts] getSavedWorkoutIds error:",r),[]):(t??[]).map(n=>n.workout_id)}async function q5(e,t){const{error:r}=await _e.from(pp).insert({user_id:e,workout_id:t});if(r){const n=(r==null?void 0:r.code)??"",s=((r==null?void 0:r.message)??"").toLowerCase();return n==="23505"||s.includes("duplicate")?!0:(console.error("[savedWorkouts] saveWorkout error:",r),!1)}return!0}async function Ox(e,t){const{error:r}=await _e.from(pp).delete().eq("user_id",e).eq("workout_id",t);return r?(console.error("[savedWorkouts] unsaveWorkout error:",r),!1):!0}const Rx="bs_today_minutes_v1",Lx="bs_week_minutes_v1",Y5=60,xg="bs_workout_progress_v1:",$x="bs_completed_workouts_v1";function rn(){const e=new Date;return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`}function jn(e){return(e==null?void 0:e.id)??(e==null?void 0:e.title)??"unknown"}function J5(){try{const e=localStorage.getItem(Rx);if(!e)return 0;const t=JSON.parse(e);return t.date!==rn()?0:typeof t.minutes=="number"?t.minutes:0}catch{return 0}}function Gh(){try{const e=localStorage.getItem(Lx);return e?JSON.parse(e):{}}catch{return{}}}function Q5(e){localStorage.setItem(Lx,JSON.stringify(e))}function X5(e){const t=rn();localStorage.setItem(Rx,JSON.stringify({date:t,minutes:e}));const r=Gh();r[t]=e,Q5(r)}function vg(e){const t=new Date(e),r=t.getDay(),n=r===0?-6:1-r;return t.setDate(t.getDate()+n),t.setHours(0,0,0,0),t}function Z5(e){return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`}function Eo(){try{const e=localStorage.getItem($x);return e?JSON.parse(e):{}}catch{return{}}}function ej(e){localStorage.setItem($x,JSON.stringify(e))}const Aa=[{title:"3-Point Shooting",image:"https://commons.wikimedia.org/wiki/Special:FilePath/3-point%20shoot%20by%20Patrick%20Beverley%202011-03-19.JPG",duration:"20 min",intensity:"High",category:"Shooting"},{title:"Weak Hand",image:"https://commons.wikimedia.org/wiki/Special:FilePath/20160330%20MCDAAG%20Marques%20Bolden%20left-handed%20dunk.jpg",duration:"15 min",intensity:"Med",category:"Dribbling"},{title:"Handles",image:"https://images.pexels.com/photos/8693988/pexels-photo-8693988.jpeg?cs=srgb&dl=pexels-yaroslav-shuraev-8693988.jpg&fm=jpg",duration:"30 min",intensity:"High",category:"Dribbling"},{title:"Dunking",image:"https://commons.wikimedia.org/wiki/Special:FilePath/Blake%20Griffin%20dunk.jpg",duration:"45 min",intensity:"High",category:"Finishing"},{title:"Layups",image:"https://images.pexels.com/photos/8979865/pexels-photo-8979865.jpeg?cs=srgb&dl=pexels-pnw-prod-8979865.jpg&fm=jpg",duration:"10 min",intensity:"Low",category:"Finishing"},{title:"Mid-Range",image:"https://commons.wikimedia.org/wiki/Special:FilePath/NowitzkiFadeaway.jpg",duration:"25 min",intensity:"Med",category:"Shooting"}],wg=["Low","Med","High"],tj=["All","Shooting","Dribbling","Finishing","Defense"],rj=["All","< 15m","15-30m","> 30m"],nj=({onWorkoutComplete:e,initialWorkout:t,onOpenMyWorkouts:r})=>{const[n,s]=b.useState(!1),[i,a]=b.useState(null),[l,c]=b.useState(!1),[u,d]=b.useState(!1),[f,h]=b.useState("All"),[m,x]=b.useState("All"),[w,k]=b.useState("All"),[g,p]=b.useState(null),[y,v]=b.useState(0),[N,E]=b.useState(!1),[A,C]=b.useState(!1),[P,L]=b.useState(!1),[$,Q]=b.useState(new Set),ee=b.useRef(new Set),ue=Gl.useRef(null),he=Gl.useMemo(()=>i?Array.from($).reduce((j,I)=>{var z;return j+(((z=i.steps[I])==null?void 0:z.duration)??0)},0):0,[i,$]),[D,we]=b.useState(""),[R,B]=b.useState(""),[H,U]=b.useState(""),[F,de]=b.useState("5"),[pe,Ne]=b.useState(""),[T,_]=b.useState(30),[S,M]=b.useState("Med"),[K,oe]=b.useState(!1),[me,ge]=b.useState(null),{user:tt}=xr(),rt=(tt==null?void 0:tt.id)??null,[uo,Fs]=b.useState(new Set),[Pu,Ja]=b.useState(!1),[Ou,Ru]=b.useState(!1),[Qa,Lu]=b.useState(()=>Gh()),[ho,$u]=b.useState(()=>{const j=new Date,I=vg(j),z=Math.floor((j.getTime()-I.getTime())/(1e3*60*60*24));return Math.min(6,Math.max(0,z))}),Xa=b.useRef(`DrillsView#${Math.random().toString(36).slice(2,8)}`),Xr=(...j)=>console.log(`[${Xa.current}]`,...j),Za=(...j)=>console.warn(`[${Xa.current}]`,...j),fo=Gl.useMemo(()=>{const I=vg(new Date),z=["M","T","W","T","F","S","S"],ae=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"];return Array.from({length:7}).map((ce,X)=>{const nt=new Date(I);nt.setDate(I.getDate()+X);const Pt=Z5(nt),Zr=Qa[Pt]??0,Bs=Math.min(100,Math.round(Zr/Y5*100));return{day:z[X],fullDay:ae[X],dateKey:Pt,minutes:Zr,score:Bs}})},[Qa]),el=(j,I,z,ae,ce="General")=>{const X=parseInt(I),nt=Math.max(2,Math.round(X*.15)),Pt=Math.max(2,Math.round(X*.15)),Zr=X-nt-Pt,Bs=Zr>=15?3:2,Bw=Math.floor(Zr/Bs),ul=[];ul.push({name:"Dynamic Warm-up",duration:nt,type:"warmup",description:"Light jogging, high knees, and dynamic stretching to activate muscles."});for(let $r=1;$r<=Bs;$r++){let dl=`${j} Phase ${$r}`,hl="Focus on form and consistency.";j.includes("Shooting")?(dl=$r===1?"Form Shooting":$r===2?"Spot Up Shooting":"Game Speed Shots",hl=$r===1?"One hand form shots near rim.":"Catch and shoot from 5 spots."):j.includes("Handles")||j.includes("Dribbling")||j.includes("Weak Hand")?(dl=$r===1?"Stationary Dribbling":$r===2?"Moving Crossovers":"Cone Weave",hl="Keep eyes up and pound the ball hard."):ce==="Finishing"&&(dl=$r===1?"Mikan Drill":$r===2?"Euro Steps":"Contact Finishes",hl="Focus on footwork and protecting the ball."),ul.push({name:dl,duration:Bw,type:"drill",description:hl})}ul.push({name:"Free Throws & Stretch",duration:Pt,type:"cooldown",description:"10 made free throws followed by static stretching."});let dm;return(ce==="Shooting"||ce==="Finishing"||j.toLowerCase().includes("shoot"))&&(dm=Math.round(X*5)),{title:j,image:z,totalDuration:X,intensity:ae,category:ce,steps:ul,targetShots:dm}},Du=j=>{const I=j.toLowerCase();return I.includes("shooting")||I.includes("shot")||I.includes("free throw")?{instructions:["Position yourself at the line with your feet shoulder-width apart.","Keep your elbow tucked in and align it with the basket.","Focus on the rim, not the ball or backboard.","Follow through with a flick of your wrist, hand in the cookie jar."],tips:["Ensure your knees are slightly bent for power generation.","Maintain a consistent rhythm for every shot."],caution:"Do not tense your shoulders; keep them relaxed to avoid strain."}:I.includes("dribble")||I.includes("handles")||I.includes("crossover")?{instructions:["Keep your knees bent and chest up, eyes looking forward.","Pound the ball hard into the floor to maintain control.","Use your fingertips, not your palm, to control the ball.","Protect the ball with your off-hand (arm bar)."],tips:["Change speeds to catch defenders off guard.","Practice with your weak hand just as much as your strong hand."],caution:"Don't look down at the ball; learn to feel the dribble."}:I.includes("warm")||I.includes("stretch")?{instructions:["Start with slow movements and gradually increase intensity.","Focus on dynamic stretching rather than static holding.","Engage your core and maintain proper breathing."],tips:["Listen to your body; if it hurts, stop.","Use this time to mentally prepare for the session."],caution:"Avoid bouncing while stretching cold muscles."}:{instructions:["Maintain an athletic stance with knees bent.","Execute the movement with high intensity.","Focus on quality repetitions over quantity."],tips:["Visualize the game situation for this drill.","Stay balanced throughout the movement."],caution:"Stop if you feel sharp pain."}},Us=j=>{var ce;const I=el(j.title,j.duration,j.image,j.intensity,j.category);if(a(I),d(!1),we(""),ue.current=null,((ce=Eo()[jn(I)])==null?void 0:ce.date)===rn()){const X=new Set(I.steps.map((nt,Pt)=>Pt));Q(X),ee.current=X,L(!0),p(null),v(0),E(!1)}else{const X=rl(I);if(X)Q(X.completed),ee.current=X.completed,L(!1),p(X.activeIdx),v(X.activeIdx!==null?X.timeLeft:0),E(!1);else{const nt=new Set;Q(nt),ee.current=nt,L(!1),p(null),v(0),E(!1)}}I.targetShots?B(I.targetShots.toString()):B("")};b.useEffect(()=>{Xr("effect:initialWorkout changed",{hasInitialWorkout:!!t,initialWorkoutTitle:t==null?void 0:t.title}),t&&(Xr("initialWorkout present -> handlePresetClick(initialWorkout)"),Us(t))},[t]),b.useEffect(()=>{let j=!0;return(async()=>{if(!rt){Fs(new Set);return}const z=await Px(rt);j&&Fs(new Set(z))})(),()=>{j=!1}},[rt]),b.useEffect(()=>{ee.current=$},[$]),b.useEffect(()=>{const j=setTimeout(()=>{Ru(!0)},200);return()=>clearTimeout(j)},[]),b.useEffect(()=>{const j=()=>Lu(Gh());window.addEventListener("storage",j);const I=window.setInterval(j,500);return()=>{window.removeEventListener("storage",j),window.clearInterval(I)}},[]);const tl=(j,I,z,ae)=>{const ce=xg+jn(j);localStorage.setItem(ce,JSON.stringify({date:rn(),completed:Array.from(I),activeIdx:z,timeLeft:ae}))},rl=j=>{try{const I=xg+jn(j),z=localStorage.getItem(I);if(!z)return null;const ae=JSON.parse(z);return ae.date!==rn()?null:{completed:new Set(ae.completed||[]),activeIdx:typeof ae.activeIdx=="number"?ae.activeIdx:null,timeLeft:typeof ae.timeLeft=="number"?ae.timeLeft:0}}catch{return null}},nl=()=>{a({title:"My Custom Plan",image:"https://images.unsplash.com/photo-1518407613690-d9fc996e526e?auto=format&fit=crop&w=800&q=80",totalDuration:0,intensity:"Med",category:"Custom",steps:[],targetShots:void 0}),d(!0),L(!1),we(""),B(""),Q(new Set),ue.current=null,p(null),v(0),E(!1)},sl=()=>Aa.filter(j=>{if(f!=="All"&&j.category!==f||w!=="All"&&j.intensity!==w)return!1;const I=parseInt(j.duration);return!(m==="< 15m"&&I>=15||m==="15-30m"&&(I<15||I>30)||m==="> 30m"&&I<=30)}),Mu=j=>{if(!i)return;const I=i.steps.filter((ae,ce)=>ce!==j),z=I.reduce((ae,ce)=>ae+ce.duration,0);a({...i,steps:I,totalDuration:z})},bn=()=>{if(!i||!H.trim())return;const j=parseInt(F)||5,I={name:H,duration:j,type:"drill",description:"Custom added drill."},z=[...i.steps],ae=z.findIndex(X=>X.type==="cooldown");ae!==-1?z.splice(ae,0,I):z.push(I);const ce=z.reduce((X,nt)=>X+nt.duration,0);a({...i,steps:z,totalDuration:ce}),U(""),de("5")},Fu=async()=>{if(!rt||!(i!=null&&i.title))return;const j=i.title,I=uo.has(j);Ja(!0);const z=I?await Ox(rt,j):await q5(rt,j);Ja(!1),z&&Fs(ae=>{const ce=new Set(ae);return I?ce.delete(j):ce.add(j),ce})},il=j=>{var I,z,ae,ce;if(Xr("startDrill CALLED",{index:j,hasActiveWorkout:!!i,activeWorkoutTitle:i==null?void 0:i.title,stepsLen:(I=i==null?void 0:i.steps)==null?void 0:I.length,stepDurationMin:(ae=(z=i==null?void 0:i.steps)==null?void 0:z[j])==null?void 0:ae.duration,isTimerRunning:N,activeDrillIndex:g}),!i){Za("startDrill ABORT: activeWorkout is null");return}if(!i.steps||!i.steps[j]){Za("startDrill ABORT: step missing",{stepsLen:(ce=i==null?void 0:i.steps)==null?void 0:ce.length});return}ue.current=null,p(j),v(i.steps[j].duration*60),E(!0),C(!1),Xr("startDrill STATE SET",{nextActiveDrillIndex:j,nextTimeLeft:i.steps[j].duration*60})},po=j=>{i&&(p(j),v(i.steps[j].duration*60),E(!1),C(!1))},mo=j=>{var ae;if(!i||ee.current.has(j))return;const I=((ae=i.steps[j])==null?void 0:ae.duration)??0,z=new Set(ee.current);if(z.add(j),ee.current=z,Q(z),I>0&&X5(J5()+I),E(!1),j<i.steps.length-1){const ce=j+1;p(ce);const X=i.steps[ce].duration*60;v(X),E(!1),tl(i,z,ce,X)}else{p(null),v(0),L(!0);const ce=Eo();ce[jn(i)]={date:rn(),minutes:Array.from(z).reduce((X,nt)=>{var Pt;return X+(((Pt=i.steps[nt])==null?void 0:Pt.duration)??0)},0)},ej(ce),tl(i,z,null,0)}},Uu=()=>{i&&g!==null&&(g<i.steps.length-1?po(g+1):(p(null),E(!1),L(!0)))},zu=()=>{i&&g!==null&&g>0&&po(g-1)},zs=()=>{E(!N)},go=j=>{const I=Math.floor(j/60),z=j%60;return`${I}:${z.toString().padStart(2,"0")}`},Bu=()=>{if(!i)return;const j=parseInt(D),I=parseInt(R),z={title:i.title,duration:he>0?he:i.totalDuration,shotsMade:isNaN(j)?void 0:j,shotsAttempted:isNaN(I)?void 0:I};e&&e(z)};b.useEffect(()=>{let j;if(N&&y>0)j=setInterval(()=>{v(I=>I-1)},1e3);else if(y===0&&i&&g!==null){const I=`${jn(i)}:${g}`;ue.current!==I?(ue.current=I,E(!1),mo(g)):E(!1)}else E(!1);return()=>clearInterval(j)},[N,y,i,g]);const ol=async()=>{if(pe.trim()){oe(!0),ge(null);try{const j=await K5({prompt:pe,duration:T,intensity:S},8e3);j?ge(j):console.error("Error generating workout: no response from AI")}catch(j){console.error("Error generating workout",j)}finally{oe(!1)}}},yo=()=>{s(!1),ge(null),Ne("")},al=()=>{if(!A||!i||g===null)return null;const j=i.steps[g],I=Du(j.name);return o.jsxs("div",{className:"fixed inset-0 z-[110] bg-background animate-in slide-in-from-bottom duration-300 overflow-y-auto",children:[o.jsxs("div",{className:"relative w-full aspect-[16/10] bg-[#0a0a0a] flex items-center justify-center overflow-hidden border-b border-white/5",children:[o.jsx("div",{className:"w-full h-full flex items-center justify-center relative",children:o.jsxs("svg",{viewBox:"0 0 400 300",className:"w-64 h-64 opacity-90",style:{overflow:"visible"},children:[o.jsx("ellipse",{cx:"230",cy:"240",rx:"30",ry:"5",fill:"black",opacity:"0.3",className:"animate-shadow"}),o.jsxs("g",{stroke:"#f98006",strokeWidth:"6",strokeLinecap:"round",strokeLinejoin:"round",fill:"none",children:[o.jsx("path",{d:"M180,180 L160,240"}),o.jsx("path",{d:"M220,180 L240,240"}),o.jsx("path",{d:"M200,180 L200,100"}),o.jsx("circle",{cx:"200",cy:"80",r:"20",strokeWidth:"6"}),o.jsx("path",{d:"M200,110 L160,140"}),o.jsx("g",{className:"animate-dribble-arm",style:{transformBox:"fill-box",transformOrigin:"center top"},children:o.jsx("path",{d:"M200,110 L240,140 L240,170"})})]}),o.jsx("circle",{cx:"240",cy:"200",r:"18",fill:"#f98006",className:"animate-bounce"})]})}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-background via-transparent to-transparent pointer-events-none"}),o.jsx("button",{onClick:()=>C(!1),className:"absolute top-4 right-4 w-10 h-10 rounded-full bg-black/40 backdrop-blur-md border border-white/10 flex items-center justify-center text-white hover:bg-black/60 z-20",children:o.jsx(qn,{size:20})})]}),o.jsxs("div",{className:"px-6 pt-4 pb-12",children:[o.jsx("h2",{className:"text-3xl font-extrabold text-primary mb-6 leading-tight",children:j.name}),o.jsxs("div",{className:"mb-8",children:[o.jsx("h3",{className:"text-primary font-bold text-sm uppercase tracking-widest mb-4",children:"Instructions"}),o.jsx("div",{className:"relative border-l-2 border-primary/20 ml-2.5 space-y-6 pb-2",children:I.instructions.map((z,ae)=>o.jsxs("div",{className:"relative pl-8",children:[o.jsx("span",{className:"absolute -left-[9px] top-1.5 w-4 h-4 rounded-full bg-primary shadow-[0_0_10px_rgba(249,128,6,0.5)]"}),o.jsx("p",{className:"text-white text-base font-medium leading-relaxed",children:z})]},ae))})]}),o.jsxs("div",{className:"mb-8",children:[o.jsx("h3",{className:"text-primary font-bold text-sm uppercase tracking-widest mb-4",children:"Tips"}),o.jsx("div",{className:"relative border-l-2 border-primary/20 ml-2.5 space-y-6 pb-2",children:I.tips.map((z,ae)=>o.jsxs("div",{className:"relative pl-8",children:[o.jsx("span",{className:"absolute -left-[9px] top-1.5 w-4 h-4 rounded-full bg-primary"}),o.jsx("p",{className:"text-gray-300 text-sm font-medium leading-relaxed",children:z})]},ae))})]}),o.jsxs("div",{className:"mb-8",children:[o.jsx("h3",{className:"text-primary font-bold text-sm uppercase tracking-widest mb-4",children:"Caution"}),o.jsxs("div",{className:"relative pl-10",children:[o.jsx("span",{className:"absolute left-0 top-0.5 w-5 h-5 rounded-full bg-primary flex items-center justify-center text-black",children:o.jsx(D5,{size:12,fill:"currentColor"})}),o.jsx("p",{className:"text-white text-sm font-medium leading-relaxed",children:I.caution})]})]})]})]})},ll=()=>o.jsxs("section",{className:"mb-8",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4 px-1",children:[o.jsxs("h3",{className:"text-lg font-bold flex items-center gap-2",children:[o.jsx(x5,{size:18,className:"text-primary"}),"Weekly Progress"]}),ho!==null&&(()=>{const j=fo[ho];return o.jsxs("span",{className:"text-[10px] bg-white/10 px-2 py-0.5 rounded-full font-bold uppercase tracking-wider animate-in fade-in",children:[j.fullDay,": ",j.minutes>0?`${j.minutes} min (${j.score}%)`:"Rest"]})})()]}),o.jsx("div",{className:"bg-surface rounded-3xl p-6 border border-white/5 shadow-lg",children:o.jsx("div",{className:"h-40 flex items-end justify-between gap-2",children:fo.map((j,I)=>{const z=Ou?Math.max(0,j.score):0,ae=ho===I;return o.jsxs("div",{className:"flex-1 h-full flex flex-col items-center gap-2 group cursor-pointer",onClick:()=>$u(I),children:[o.jsx("div",{className:"relative w-full h-full flex items-end justify-center",children:o.jsx("div",{className:`w-full rounded-t-lg transition-all duration-700 ease-out relative ${ae?"bg-primary":"bg-white/10 group-hover:bg-white/20"}`,style:{height:`${z}%`,transitionDelay:`${I*50}ms`},children:ae&&o.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-full h-4 bg-white/30 blur-sm rounded-t-lg"})})}),o.jsx("span",{className:`text-[10px] font-bold uppercase transition-colors ${ae?"text-primary":"text-muted"}`,children:j.day})]},j.fullDay)})})})]}),cl=()=>o.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-500 pb-36",children:[o.jsxs("div",{className:"mt-2 px-1 flex items-start justify-between gap-3",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-2xl font-extrabold tracking-tight mb-2",children:"Workouts"}),o.jsx("p",{className:"text-muted text-sm font-medium",children:"What do you want to work on today?"})]}),o.jsx("button",{type:"button",onClick:r,disabled:!r,className:"rounded-xl p-2 hover:bg-white/5 transition-colors disabled:opacity-60","aria-label":"My Workouts",children:o.jsx(zh,{size:18})})]}),o.jsx("section",{children:o.jsxs("div",{onClick:()=>s(!0),className:"bg-gradient-to-r from-surface to-[#1a1a1a] rounded-3xl p-6 border border-primary/20 relative overflow-hidden group cursor-pointer hover:border-primary/50 transition-all shadow-lg hover:shadow-primary/5",children:[o.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10 group-hover:opacity-20 transition-opacity",children:o.jsx(Tr,{size:100})}),o.jsxs("div",{className:"relative z-10 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"w-12 h-12 rounded-full bg-primary/20 flex items-center justify-center text-primary shadow-[0_0_15px_rgba(249,128,6,0.3)]",children:o.jsx(w5,{size:24})}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-extrabold tracking-tight",children:"Generate Workout with AI"}),o.jsx("p",{className:"text-xs text-muted font-medium",children:"Customized plans based on your needs"})]})]}),o.jsx("div",{className:"w-10 h-10 rounded-full bg-white/5 flex items-center justify-center group-hover:bg-primary group-hover:text-black transition-colors",children:o.jsx(ds,{size:18,fill:"currentColor"})})]})]})}),o.jsxs("section",{children:[o.jsxs("div",{className:"flex items-center justify-between mb-4 px-1",children:[o.jsx("h3",{className:"text-lg font-bold",children:"Trending Workouts"}),o.jsx("span",{onClick:()=>c(!0),className:"text-xs text-muted font-semibold cursor-pointer hover:text-white transition-colors",children:"View All"})]}),o.jsx("div",{className:"flex overflow-x-auto gap-4 pb-4 -mx-6 px-6 no-scrollbar snap-x snap-mandatory",children:(()=>{const j=Eo();return Aa.map((I,z)=>{var X;const ae=jn({title:I.title}),ce=((X=j[ae])==null?void 0:X.date)===rn();return o.jsxs("div",{onClick:()=>Us(I),className:"relative min-w-[160px] h-[220px] rounded-3xl overflow-hidden snap-start border border-white/5 group cursor-pointer",children:[o.jsx("img",{src:I.image,alt:I.title,className:"absolute inset-0 w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/90 via-black/20 to-transparent"}),ce&&o.jsxs("div",{className:"absolute top-3 left-3 flex items-center gap-1 bg-green-500 text-white text-[9px] font-black px-2 py-1 rounded-full uppercase tracking-wider shadow-lg",children:[o.jsx($t,{size:10}),"Done"]}),o.jsxs("div",{className:"absolute bottom-0 left-0 p-4 w-full",children:[o.jsx("div",{className:"flex gap-2 mb-2",children:o.jsx("span",{className:"text-[10px] bg-primary/90 text-black font-bold px-2 py-0.5 rounded-full inline-block",children:I.duration})}),o.jsx("h4",{className:"text-sm font-extrabold leading-tight mb-1",children:I.title}),o.jsxs("div",{className:"flex items-center gap-1 text-muted group-hover:text-primary transition-colors mt-1",children:[o.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wide",children:ce?"Completed":"Start"}),o.jsx(sn,{size:12})]})]})]},z)})})()})]}),o.jsx("section",{className:"!mt-2",children:o.jsxs("div",{onClick:nl,className:"bg-surface border border-dashed border-white/20 rounded-3xl p-6 flex items-center gap-4 cursor-pointer hover:bg-white/5 hover:border-primary/50 transition-all group mb-8",children:[o.jsx("div",{className:"w-12 h-12 rounded-full bg-white/5 flex items-center justify-center text-white group-hover:bg-primary group-hover:text-black transition-colors",children:o.jsx(Vh,{size:24})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-bold",children:"Create Custom Plan"}),o.jsx("p",{className:"text-xs text-muted font-medium",children:"Build your routine from scratch"})]})]})}),ll(),o.jsxs("section",{className:"pb-8",children:[o.jsx("h3",{className:"text-lg font-bold mb-4 px-1",children:"Categories"}),o.jsx("div",{className:"grid grid-cols-2 gap-3",children:["Shooting","Defense","Dribbling","Finishing"].map(j=>o.jsxs("div",{onClick:()=>{h(j),c(!0)},className:"bg-surface p-4 rounded-2xl border border-white/5 flex items-center justify-between cursor-pointer hover:border-primary/30 transition-colors active:scale-95",children:[o.jsx("span",{className:"text-sm font-bold",children:j}),o.jsx(sn,{size:16,className:"text-muted"})]},j))})]})]}),re=()=>o.jsxs("div",{className:"animate-in slide-in-from-right duration-300 min-h-full pb-20",children:[o.jsxs("div",{className:"flex items-center gap-4 mb-6 mt-2 px-1",children:[o.jsx("button",{onClick:()=>{c(!1),h("All"),x("All"),k("All")},className:"w-10 h-10 rounded-full bg-surface border border-white/10 flex items-center justify-center hover:bg-white/5 active:scale-95 transition-all",children:o.jsx(Na,{size:20})}),o.jsx("h3",{className:"text-2xl font-extrabold tracking-tight",children:"All Workouts"})]}),o.jsxs("div",{className:"mb-6 overflow-x-auto no-scrollbar pb-2 -mx-6 px-6",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("div",{className:"flex items-center gap-2 pr-4 border-r border-white/10 mr-2",children:[o.jsx(Wh,{size:16,className:"text-primary"}),o.jsx("span",{className:"text-xs font-bold text-muted",children:"Filters"})]}),tj.map(j=>o.jsx("button",{onClick:()=>h(j),className:`px-4 py-2 rounded-full text-xs font-bold whitespace-nowrap transition-colors ${f===j?"bg-primary text-black":"bg-surface text-muted border border-white/5"}`,children:j},j)),o.jsx("div",{className:"w-[1px] h-6 bg-white/10 mx-2"}),rj.map(j=>o.jsx("button",{onClick:()=>x(j),className:`px-4 py-2 rounded-full text-xs font-bold whitespace-nowrap transition-colors ${m===j?"bg-white text-black":"bg-surface text-muted border border-white/5"}`,children:j},j))]}),o.jsxs("div",{className:"flex items-center gap-2 mt-3",children:[o.jsx("span",{className:"text-[10px] font-bold text-muted uppercase tracking-wider mr-2",children:"Intensity:"}),wg.concat("All").reverse().map(j=>o.jsx("button",{onClick:()=>k(j),className:`px-3 py-1.5 rounded-lg text-[10px] font-bold uppercase tracking-wider transition-colors border ${w===j?"border-primary text-primary bg-primary/10":"border-white/5 text-muted hover:bg-white/5"}`,children:j},j))]})]}),o.jsx("div",{className:"grid grid-cols-2 gap-4",children:sl().length>0?(()=>{const j=Eo();return sl().map((I,z)=>{var X;const ae=jn({title:I.title}),ce=((X=j[ae])==null?void 0:X.date)===rn();return o.jsxs("div",{onClick:()=>Us(I),className:"relative aspect-square rounded-3xl overflow-hidden border border-white/5 group cursor-pointer",children:[o.jsx("img",{src:I.image,alt:I.title,className:"absolute inset-0 w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/90 via-black/20 to-transparent"}),ce&&o.jsxs("div",{className:"absolute top-3 left-3 flex items-center gap-1 bg-green-500 text-white text-[9px] font-black px-2 py-1 rounded-full uppercase tracking-wider shadow-lg z-10",children:[o.jsx($t,{size:10}),"Done"]}),o.jsx("div",{className:"absolute top-3 right-3",children:o.jsx("span",{className:"bg-black/60 backdrop-blur-md text-white text-[10px] font-bold px-2 py-1 rounded-full uppercase tracking-wider",children:I.intensity})}),o.jsxs("div",{className:"absolute bottom-0 left-0 p-4 w-full",children:[o.jsx("span",{className:"text-[10px] text-primary font-bold uppercase tracking-wider mb-1 block",children:I.duration}),o.jsx("h4",{className:"text-sm font-extrabold leading-tight",children:I.title})]})]},z)})})():o.jsxs("div",{className:"col-span-2 py-12 text-center",children:[o.jsx("div",{className:"w-16 h-16 bg-surface rounded-full flex items-center justify-center mx-auto mb-4",children:o.jsx(Wh,{size:24,className:"text-muted"})}),o.jsx("p",{className:"text-muted font-medium text-sm",children:"No workouts match your filters."}),o.jsx("button",{onClick:()=>{h("All"),x("All"),k("All")},className:"mt-4 text-primary text-xs font-bold uppercase tracking-wider hover:underline",children:"Clear Filters"})]})})]}),ne=()=>{var ce;if(!i)return null;const j=i.category==="Custom",I=Eo(),z=jn(i),ae=((ce=I[z])==null?void 0:ce.date)===rn();return o.jsxs("div",{className:"animate-in slide-in-from-right duration-300 relative bg-background min-h-full pb-44",children:[o.jsxs("div",{className:`relative w-full -mt-2 -mx-6 w-[calc(100%+3rem)] ${j?"pt-24 pb-2 bg-background":"h-[40vh]"}`,children:[!j&&o.jsxs(o.Fragment,{children:[o.jsx("img",{src:i.image,className:"w-full h-full object-cover",alt:"Hero"}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-background via-background/40 to-transparent"})]}),o.jsx("button",{onClick:()=>{a(null),E(!1),p(null),v(0);const X=new Set;Q(X),ee.current=X,ue.current=null,L(!1)},className:"absolute top-4 left-6 w-10 h-10 rounded-full bg-black/40 backdrop-blur-md border border-white/10 flex items-center justify-center text-white hover:bg-black/60 z-20",children:o.jsx(Na,{size:20})}),o.jsxs("div",{className:"absolute top-4 right-6 z-20 flex items-center gap-2",children:[o.jsx("button",{type:"button",onClick:()=>void Fu(),disabled:!rt||Pu,className:"w-10 h-10 rounded-full backdrop-blur-md border border-white/10 flex items-center justify-center transition-colors bg-black/40 text-white hover:bg-black/60 disabled:opacity-60","aria-label":"Save workout",children:o.jsx(zh,{size:18,fill:i!=null&&i.title&&uo.has(i.title)?"currentColor":"none"})}),o.jsx("button",{type:"button",onClick:()=>d(!u),className:`w-10 h-10 rounded-full backdrop-blur-md border border-white/10 flex items-center justify-center transition-colors ${u?"bg-primary text-black":"bg-black/40 text-white hover:bg-black/60"}`,"aria-label":"Edit workout",children:u?o.jsx(_d,{size:18}):o.jsx(Ex,{size:18})})]}),o.jsxs("div",{className:`${j?"px-6":"absolute bottom-0 left-0 p-6 w-full"}`,children:[o.jsxs("div",{className:"flex gap-2 mb-3 flex-wrap",children:[o.jsxs("span",{className:"bg-primary text-black px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wider",children:[i.intensity," Intensity"]}),o.jsxs("span",{className:"bg-white/20 backdrop-blur-md text-white px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wider flex items-center gap-1",children:[o.jsx(S5,{size:12})," ",i.totalDuration," Min"]}),ae&&o.jsxs("div",{className:"flex items-center gap-1 bg-green-500 text-white text-[10px] font-black px-3 py-1 rounded-full uppercase tracking-wider shadow-lg",children:[o.jsx($t,{size:12}),"Completed"]})]}),u?o.jsx("input",{type:"text",value:i.title,onChange:X=>a({...i,title:X.target.value}),className:"bg-transparent text-3xl font-extrabold tracking-tight leading-none mb-2 w-full border-b border-white/20 focus:border-primary focus:outline-none pb-1",autoFocus:!0}):o.jsx("h1",{className:"text-3xl font-extrabold tracking-tight leading-none mb-2",children:i.title}),o.jsx("p",{className:"text-sm text-gray-300 font-medium line-clamp-2",children:u?"Add or remove drills to customize your session.":`Master your ${i.title.toLowerCase()} skills with this structured session.`})]})]}),o.jsxs("div",{className:"mt-6 space-y-6 px-1",children:[g!==null&&!u&&o.jsxs("div",{className:"rounded-3xl border border-primary/30 bg-primary/10 p-5 animate-in fade-in slide-in-from-top-2 duration-300",children:[o.jsx("div",{className:"text-[10px] font-bold tracking-widest text-primary/70 uppercase mb-1",children:"Now Playing"}),o.jsx("div",{className:"text-lg font-extrabold text-white mb-3 truncate",children:i.steps[g].name}),o.jsxs("div",{className:"flex items-center justify-between gap-4",children:[o.jsx("div",{className:"text-4xl font-extrabold tabular-nums text-white",children:go(y)}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{onClick:zu,disabled:g===0,className:"w-10 h-10 rounded-2xl bg-white/10 border border-white/10 flex items-center justify-center text-white disabled:opacity-30 active:scale-95 transition-all",children:o.jsx(R5,{size:18})}),o.jsx("button",{onClick:zs,className:"w-12 h-12 rounded-2xl bg-primary text-black flex items-center justify-center active:scale-95 transition-all shadow-[0_0_15px_rgba(249,128,6,0.4)]",children:N?o.jsx(yg,{size:20,fill:"currentColor"}):o.jsx(ds,{size:20,fill:"currentColor"})}),o.jsx("button",{onClick:Uu,className:"w-10 h-10 rounded-2xl bg-white/10 border border-white/10 flex items-center justify-center text-white active:scale-95 transition-all",children:o.jsx(L5,{size:18})})]})]})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h3",{className:"text-lg font-bold",children:"Workout Plan"}),o.jsxs("span",{className:"text-xs text-muted font-bold",children:[i.steps.length," Steps"]})]}),o.jsxs("div",{className:"space-y-0 relative",children:[!u&&o.jsx("div",{className:"absolute left-[19px] top-4 bottom-4 w-[2px] bg-white/10"}),i.steps.map((X,nt)=>{const Pt=g===nt,Zr=$.has(nt);return o.jsxs("div",{className:`relative ${u?"":"pl-10"} pb-6 last:pb-0`,children:[!u&&o.jsx("div",{className:`absolute left-0 top-1 w-10 h-10 rounded-full border-4 border-background flex items-center justify-center z-10
                                    ${Zr?"bg-green-500 text-white":Pt?"bg-primary text-black ring-2 ring-primary/50":X.type==="warmup"?"bg-blue-500 text-white":X.type==="cooldown"?"bg-green-600 text-white":"bg-primary/40 text-white"}`,children:Zr?o.jsx($t,{size:16}):Pt?o.jsx(ds,{size:14,fill:"currentColor"}):X.type==="warmup"?o.jsx(vx,{size:16}):X.type==="cooldown"?o.jsx($t,{size:16}):o.jsx(Ax,{size:16,fill:"currentColor"})}),o.jsxs("div",{onClick:()=>!u&&il(nt),className:`p-4 rounded-2xl border transition-all group flex items-center justify-between
                                    ${Zr?"bg-green-500/5 border-green-500/20 opacity-60":Pt?"bg-primary/10 border-primary/40":"bg-surface border-white/5"}
                                    ${u?"":"cursor-pointer hover:border-primary/50 active:scale-[0.99]"}`,children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex justify-between items-start mb-1",children:[o.jsx("h4",{className:`font-bold text-sm ${u?"":"group-hover:text-primary"} transition-colors`,children:X.name}),o.jsxs("span",{className:"text-xs font-bold text-muted bg-white/5 px-2 py-1 rounded ml-2 whitespace-nowrap",children:[X.duration," min"]})]}),o.jsx("p",{className:"text-xs text-muted leading-relaxed line-clamp-1",children:X.description})]}),u&&o.jsx("button",{onClick:Bs=>{Bs.stopPropagation(),Mu(nt)},className:"ml-4 w-8 h-8 rounded-full bg-red-500/10 text-red-500 flex items-center justify-center hover:bg-red-500 hover:text-white transition-colors",children:o.jsx(Tx,{size:16})})]})]},nt)}),u&&o.jsxs("div",{className:"mt-6 pt-6 border-t border-white/5 animate-in fade-in",children:[o.jsxs("h4",{className:"text-sm font-bold mb-3 flex items-center gap-2",children:[o.jsx(Vh,{size:16,className:"text-primary"}),"Add New Drill"]}),o.jsxs("div",{className:"flex gap-2 mb-2",children:[o.jsx("input",{type:"text",value:H,onChange:X=>U(X.target.value),placeholder:"Drill Name",className:"flex-1 bg-surface border border-white/10 rounded-xl px-4 py-3 text-sm focus:border-primary focus:outline-none"}),o.jsx("input",{type:"number",value:F,onChange:X=>de(X.target.value),placeholder:"Min",className:"w-20 bg-surface border border-white/10 rounded-xl px-4 py-3 text-sm focus:border-primary focus:outline-none text-center"})]}),o.jsx("button",{onClick:bn,disabled:!H.trim(),className:"w-full py-3 bg-white/5 border border-dashed border-white/20 rounded-xl text-xs font-bold uppercase tracking-wider text-muted hover:text-primary hover:border-primary/50 transition-colors disabled:opacity-50",children:"Add to Plan"})]})]}),i.targetShots&&!u&&o.jsxs("div",{className:"mt-8 mb-4 bg-[#141414] border border-white/10 rounded-2xl p-4 animate-in slide-in-from-bottom-2 fade-in shadow-2xl",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsxs("span",{className:"text-xs font-bold text-white flex items-center gap-2",children:[o.jsx(lu,{size:14,className:"text-primary"}),"Register your Stats"]}),o.jsx("span",{className:"text-[10px] text-muted font-bold uppercase tracking-wider",children:"OPTIONAL"})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("label",{className:"text-[9px] font-bold text-muted uppercase tracking-wider mb-1 block",children:"Made"}),o.jsx("input",{type:"number",value:D,onChange:X=>we(X.target.value),placeholder:"0",className:"w-full bg-black/40 border border-white/10 rounded-xl py-3 text-center text-lg font-black text-white focus:border-primary focus:outline-none"})]}),o.jsx("span",{className:"text-lg font-black text-muted mt-5",children:"/"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("label",{className:"text-[9px] font-bold text-muted uppercase tracking-wider mb-1 block",children:"Target"}),o.jsx("div",{className:"w-full bg-white/5 border border-white/5 rounded-xl py-3 text-center text-lg font-black text-white/50 cursor-not-allowed",children:R})]})]})]})]}),(()=>{const X=g!==null||$.size>0;return o.jsx("div",{className:`fixed bottom-[160px] left-0 right-0 px-6 pt-6 pb-2 bg-gradient-to-t from-background via-background to-transparent z-30 max-w-md mx-auto pointer-events-none transition-transform duration-300 ease-out ${X?"-translate-y-0":"translate-y-6"}`,children:o.jsx("div",{className:"pointer-events-auto",children:u?o.jsxs("button",{onClick:()=>d(!1),className:"w-full bg-surface text-white border border-white/10 font-extrabold text-lg py-5 rounded-3xl hover:bg-white/5 transition-all flex items-center justify-center gap-2",children:[o.jsx(_d,{size:20}),"Save Changes"]}):D?o.jsxs("button",{onClick:Bu,className:"w-full bg-white text-black font-extrabold text-lg py-5 rounded-3xl hover:bg-gray-200 transition-all active:scale-[0.98] flex items-center justify-center gap-2 shadow-lg",children:[o.jsx(_d,{size:20,className:"text-black"}),"Finish & Save"]}):g!==null?o.jsxs(o.Fragment,{children:[o.jsxs("button",{onClick:zs,className:"w-full bg-primary text-black font-extrabold text-lg py-5 rounded-3xl shadow-[0_0_20px_rgba(249,128,6,0.3)] hover:bg-primary/90 transition-all active:scale-[0.98] flex items-center justify-center gap-2",children:[N?o.jsx(yg,{size:20,fill:"currentColor"}):o.jsx(ds,{size:20,fill:"currentColor"}),N?"Pause":"Resume"]}),o.jsxs("button",{type:"button",onClick:()=>mo(g),className:"mt-3 w-full bg-white/5 border border-white/10 text-white font-extrabold text-sm py-3 rounded-2xl hover:bg-white/10 transition-all active:scale-[0.98] flex items-center justify-center gap-2",children:[o.jsx($t,{size:18,className:"text-green-400"}),"Mark exercise as completed"]})]}):o.jsxs("button",{onClick:()=>il(0),className:"w-full bg-primary text-black font-extrabold text-lg py-5 rounded-3xl shadow-[0_0_20px_rgba(249,128,6,0.3)] hover:bg-primary/90 transition-all active:scale-[0.98] flex items-center justify-center gap-2",children:[o.jsx(ds,{size:20,fill:"currentColor"}),"Start Workout"]})})})})()]})};return o.jsxs(o.Fragment,{children:[al(),n&&o.jsx("div",{className:"fixed inset-0 z-50 bg-black/80 backdrop-blur-sm flex items-center justify-center p-4 animate-in fade-in duration-200",children:o.jsxs("div",{className:"bg-[#141414] w-full max-w-lg rounded-3xl border border-white/10 p-6 relative shadow-2xl",children:[o.jsx("button",{onClick:yo,className:"absolute top-4 right-4 w-8 h-8 flex items-center justify-center hover:bg-white/5 rounded-full text-muted hover:text-white transition-colors",children:o.jsx(qn,{size:20})}),o.jsxs("h3",{className:"text-xl font-extrabold mb-6 flex items-center gap-2",children:[o.jsx(Tr,{className:"text-primary",size:24,fill:"currentColor"}),"AI Workout Generator"]}),me?o.jsxs("div",{className:"space-y-4",children:[o.jsx("div",{className:"bg-surface p-4 rounded-xl max-h-[50vh] overflow-y-auto whitespace-pre-wrap text-sm leading-relaxed border border-white/5 font-medium text-gray-300",children:me}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{onClick:()=>ge(null),className:"flex-1 py-3 bg-surface border border-white/10 rounded-xl font-bold text-sm hover:bg-white/5 transition-colors",children:"Back"}),o.jsx("button",{onClick:yo,className:"flex-1 py-3 bg-primary text-black rounded-xl font-bold text-sm hover:bg-primary/90 transition-colors shadow-lg shadow-primary/20",children:"Use This Plan"})]})]}):o.jsxs("div",{className:"space-y-5",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-[10px] font-bold text-muted uppercase tracking-wider mb-2 block",children:"Focus Area"}),o.jsx("input",{value:pe,onChange:j=>Ne(j.target.value),placeholder:"e.g. Ball handling in traffic...",className:"w-full bg-surface border border-white/10 rounded-xl p-4 text-sm font-medium focus:border-primary focus:outline-none placeholder:text-muted/50"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-[10px] font-bold text-muted uppercase tracking-wider mb-2 block",children:"Duration (min)"}),o.jsx("input",{type:"number",value:T,onChange:j=>_(parseInt(j.target.value)),className:"w-full bg-surface border border-white/10 rounded-xl p-4 text-sm font-medium focus:border-primary focus:outline-none"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-[10px] font-bold text-muted uppercase tracking-wider mb-2 block",children:"Intensity"}),o.jsx("select",{value:S,onChange:j=>M(j.target.value),className:"w-full bg-surface border border-white/10 rounded-xl p-4 text-sm font-medium focus:border-primary focus:outline-none appearance-none",children:wg.map(j=>o.jsx("option",{value:j,children:j},j))})]})]}),o.jsxs("button",{onClick:ol,disabled:K||!pe,className:"w-full bg-primary text-black font-extrabold py-4 rounded-2xl mt-2 flex items-center justify-center gap-2 disabled:opacity-50 hover:bg-primary/90 transition-all active:scale-[0.98] shadow-[0_0_20px_rgba(249,128,6,0.2)]",children:[K?o.jsx(Ta,{className:"animate-spin"}):o.jsx(Tr,{size:18,fill:"currentColor"}),"Generate Plan"]})]})]})}),(()=>{var j;return Xr("render branch",{hasActiveWorkout:!!i,showAllWorkouts:l,activeWorkoutTitle:i==null?void 0:i.title,stepsLen:(j=i==null?void 0:i.steps)==null?void 0:j.length}),i?ne():l?re():cl()})()]})},sj=({onBack:e,onSelectWorkout:t})=>{const{user:r}=xr(),n=(r==null?void 0:r.id)??null,[s,i]=b.useState([]),[a,l]=b.useState(!1);b.useEffect(()=>{let d=!0;return(async()=>{if(!n){i([]),l(!1);return}l(!0);const h=await Px(n);d&&(i(h),l(!1))})(),()=>{d=!1}},[n]);const c=b.useMemo(()=>s.map(d=>Aa.find(h=>h.title===d)??{title:d,image:"",duration:"",intensity:"",category:"Saved"}),[s]),u=async d=>{!n||!await Ox(n,d)||i(h=>h.filter(m=>m!==d))};return o.jsxs("div",{className:"animate-in fade-in duration-300",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6 mt-2",children:[o.jsx("button",{type:"button",onClick:e,className:"rounded-xl p-2 hover:bg-white/5 transition-colors","aria-label":"Back",children:o.jsx(Na,{size:18})}),o.jsx("h3",{className:"text-2xl font-extrabold tracking-tight",children:"My Workouts"}),o.jsx("div",{className:"w-10"})]}),n?a?o.jsx("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4 text-sm text-white/80",children:"Loading..."}):c.length===0?o.jsx("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4 text-sm text-white/80",children:"No saved workouts yet."}):o.jsx("div",{className:"space-y-3",children:c.map(d=>o.jsxs("div",{className:"flex items-center gap-3 rounded-2xl border border-white/10 bg-white/5 p-3",children:[o.jsxs("button",{type:"button",className:"flex-1 text-left",onClick:()=>t(d),children:[o.jsx("div",{className:"text-sm font-bold",children:d.title}),o.jsxs("div",{className:"text-[11px] text-white/70",children:[d.duration?`${d.duration}  `:"",d.intensity?`${d.intensity}  `:"",d.category]})]}),o.jsx("button",{type:"button",onClick:()=>void u(d.title),className:"rounded-xl p-2 hover:bg-white/5 transition-colors","aria-label":"Remove saved workout",title:"Remove",children:o.jsx(zh,{size:18,fill:"currentColor"})})]},d.title))}):o.jsx("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4 text-sm text-white/80",children:"Sign in to save workouts."})]})};class ij extends za{constructor(){super(...arguments),this.ERROR_PICK_FILE_CANCELED="pickFiles canceled."}async checkPermissions(){throw this.unimplemented("Not implemented on web.")}async convertHeicToJpeg(t){throw this.unimplemented("Not implemented on web.")}async copyFile(t){throw this.unimplemented("Not implemented on web.")}async pickFiles(t){const r=await this.openFilePicker(t);if(!r)throw new Error(this.ERROR_PICK_FILE_CANCELED);const n={files:[]};for(const s of r){const i={blob:s,modifiedAt:s.lastModified,mimeType:this.getMimeTypeFromUrl(s),name:this.getNameFromUrl(s),path:void 0,size:this.getSizeFromUrl(s)};t!=null&&t.readData&&(i.data=await this.getDataFromFile(s)),n.files.push(i)}return n}async pickDirectory(){throw this.unimplemented("Not implemented on web.")}async pickImages(t){return this.pickFiles(Object.assign({types:["image/*"]},t))}async pickMedia(t){return this.pickFiles(Object.assign({types:["image/*","video/*"]},t))}async pickVideos(t){return this.pickFiles(Object.assign({types:["video/*"]},t))}async requestPermissions(t){throw this.unimplemented("Not implemented on web.")}async openFilePicker(t){var r;const n=((r=t==null?void 0:t.types)===null||r===void 0?void 0:r.join(","))||"",s=(t==null?void 0:t.limit)===void 0?0:t.limit;return new Promise(i=>{let a=!1;const l=document.createElement("input");l.type="file",l.accept=n,l.multiple=s===0;const c="oncancel"in l,u=()=>{a=!0,h();const m=Array.from(l.files||[]);i(m)},d=()=>{h(),i(void 0)},f=async()=>{await this.wait(500),!a&&(h(),i(void 0))},h=()=>{l.removeEventListener("change",u),c?l.removeEventListener("cancel",d):window.removeEventListener("focus",f)};l.addEventListener("change",u,{once:!0}),c?l.addEventListener("cancel",d,{once:!0}):window.addEventListener("focus",f,{once:!0}),l.click()})}async getDataFromFile(t){return new Promise((r,n)=>{const s=new FileReader;s.readAsDataURL(t),s.onload=()=>{const l=(typeof s.result=="string"?s.result:"").split("base64,")[1]||"";r(l)},s.onerror=i=>{n(i)}})}getNameFromUrl(t){return t.name}getMimeTypeFromUrl(t){return t.type}getSizeFromUrl(t){return t.size}async wait(t){return new Promise(r=>setTimeout(r,t))}}const Dx=es("FilePicker",{web:()=>new ij});var $i=typeof self<"u"?self:{};function Ca(e,t){e:{for(var r=["CLOSURE_FLAGS"],n=$i,s=0;s<r.length;s++)if((n=n[r[s]])==null){r=null;break e}r=n}return(e=r&&r[e])!=null?e:t}function ss(){throw Error("Invalid UTF8")}function bg(e,t){return t=String.fromCharCode.apply(null,t),e==null?t:e+t}let Dl,jd;const oj=typeof TextDecoder<"u";let aj;const lj=typeof TextEncoder<"u";function Mx(e){if(lj)e=(aj||(aj=new TextEncoder)).encode(e);else{let r=0;const n=new Uint8Array(3*e.length);for(let s=0;s<e.length;s++){var t=e.charCodeAt(s);if(t<128)n[r++]=t;else{if(t<2048)n[r++]=t>>6|192;else{if(t>=55296&&t<=57343){if(t<=56319&&s<e.length){const i=e.charCodeAt(++s);if(i>=56320&&i<=57343){t=1024*(t-55296)+i-56320+65536,n[r++]=t>>18|240,n[r++]=t>>12&63|128,n[r++]=t>>6&63|128,n[r++]=63&t|128;continue}s--}t=65533}n[r++]=t>>12|224,n[r++]=t>>6&63|128}n[r++]=63&t|128}}e=r===n.length?n:n.subarray(0,r)}return e}function Fx(e){$i.setTimeout(()=>{throw e},0)}var Kh,cj=Ca(610401301,!1),_g=Ca(748402147,!0),mp=Ca(824648567,!0),gp=Ca(824656860,Ca(1,!0));function kg(){var e=$i.navigator;return e&&(e=e.userAgent)?e:""}const jg=$i.navigator;function cu(e){return cu[" "](e),e}Kh=jg&&jg.userAgentData||null,cu[" "]=function(){};const Ux={};let Do=null;function uj(e){const t=e.length;let r=3*t/4;r%3?r=Math.floor(r):"=.".indexOf(e[t-1])!=-1&&(r="=.".indexOf(e[t-2])!=-1?r-2:r-1);const n=new Uint8Array(r);let s=0;return function(i,a){function l(u){for(;c<i.length;){const d=i.charAt(c++),f=Do[d];if(f!=null)return f;if(!/^[\s\xa0]*$/.test(d))throw Error("Unknown base64 encoding at char: "+d)}return u}zx();let c=0;for(;;){const u=l(-1),d=l(0),f=l(64),h=l(64);if(h===64&&u===-1)break;a(u<<2|d>>4),f!=64&&(a(d<<4&240|f>>2),h!=64&&a(f<<6&192|h))}}(e,function(i){n[s++]=i}),s!==r?n.subarray(0,s):n}function zx(){if(!Do){Do={};var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),t=["+/=","+/","-_=","-_.","-_"];for(let r=0;r<5;r++){const n=e.concat(t[r].split(""));Ux[r]=n;for(let s=0;s<n.length;s++){const i=n[s];Do[i]===void 0&&(Do[i]=s)}}}}var dj=typeof Uint8Array<"u",Bx=!(!(cj&&Kh&&Kh.brands.length>0)&&(kg().indexOf("Trident")!=-1||kg().indexOf("MSIE")!=-1))&&typeof btoa=="function";const Sg=/[-_.]/g,hj={"-":"+",_:"/",".":"="};function fj(e){return hj[e]||""}function Wx(e){if(!Bx)return uj(e);e=Sg.test(e)?e.replace(Sg,fj):e,e=atob(e);const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}function yp(e){return dj&&e!=null&&e instanceof Uint8Array}var Di={};function Is(){return pj||(pj=new Gr(null,Di))}function xp(e){Vx(Di);var t=e.g;return(t=t==null||yp(t)?t:typeof t=="string"?Wx(t):null)==null?t:e.g=t}var Gr=class{h(){return new Uint8Array(xp(this)||0)}constructor(e,t){if(Vx(t),this.g=e,e!=null&&e.length===0)throw Error("ByteString should be constructed with non-empty values")}};let pj,mj;function Vx(e){if(e!==Di)throw Error("illegal external caller")}function Hx(e,t){e.__closure__error__context__984382||(e.__closure__error__context__984382={}),e.__closure__error__context__984382.severity=t}function qh(e){return Hx(e=Error(e),"warning"),e}function Mi(e,t){if(e!=null){var r=mj??(mj={}),n=r[e]||0;n>=t||(r[e]=n+1,Hx(e=Error(),"incident"),Fx(e))}}function Xi(){return typeof BigInt=="function"}var Zi=typeof Symbol=="function"&&typeof Symbol()=="symbol";function Kr(e,t,r=!1){return typeof Symbol=="function"&&typeof Symbol()=="symbol"?r&&Symbol.for&&e?Symbol.for(e):e!=null?Symbol(e):Symbol():t}var gj=Kr("jas",void 0,!0),Ng=Kr(void 0,"0di"),To=Kr(void 0,"1oa"),Jt=Kr(void 0,Symbol()),yj=Kr(void 0,"0ub"),xj=Kr(void 0,"0ubs"),Yh=Kr(void 0,"0ubsb"),vj=Kr(void 0,"0actk"),Fi=Kr("m_m","Pa",!0),Eg=Kr();const Gx={Ga:{value:0,configurable:!0,writable:!0,enumerable:!1}},Kx=Object.defineProperties,q=Zi?gj:"Ga";var $s;const Tg=[];function Ba(e,t){Zi||q in e||Kx(e,Gx),e[q]|=t}function ct(e,t){Zi||q in e||Kx(e,Gx),e[q]=t}function Wa(e){return Ba(e,34),e}function Ia(e){return Ba(e,8192),e}ct(Tg,7),$s=Object.freeze(Tg);var Ui={};function Zt(e,t){return t===void 0?e.h!==Ps&&!!(2&(0|e.v[q])):!!(2&t)&&e.h!==Ps}const Ps={};function vp(e,t){if(e!=null){if(typeof e=="string")e=e?new Gr(e,Di):Is();else if(e.constructor!==Gr)if(yp(e))e=e.length?new Gr(new Uint8Array(e),Di):Is();else{if(!t)throw Error();e=void 0}}return e}class Ag{constructor(t,r,n){this.g=t,this.h=r,this.l=n}next(){const t=this.g.next();return t.done||(t.value=this.h.call(this.l,t.value)),t}[Symbol.iterator](){return this}}var wj=Object.freeze({});function qx(e,t,r){const n=128&t?0:-1,s=e.length;var i;(i=!!s)&&(i=(i=e[s-1])!=null&&typeof i=="object"&&i.constructor===Object);const a=s+(i?-1:0);for(t=128&t?1:0;t<a;t++)r(t-n,e[t]);if(i){e=e[s-1];for(const l in e)!isNaN(l)&&r(+l,e[l])}}var Yx={};function eo(e){return 128&e?Yx:void 0}function uu(e){return e.Na=!0,e}var bj=uu(e=>typeof e=="number"),Cg=uu(e=>typeof e=="string"),_j=uu(e=>typeof e=="boolean"),du=typeof $i.BigInt=="function"&&typeof $i.BigInt(0)=="bigint";function Qt(e){var t=e;if(Cg(t)){if(!/^\s*(?:-?[1-9]\d*|0)?\s*$/.test(t))throw Error(String(t))}else if(bj(t)&&!Number.isSafeInteger(t))throw Error(String(t));return du?BigInt(e):e=_j(e)?e?"1":"0":Cg(e)?e.trim()||"0":String(e)}var Jh=uu(e=>du?e>=jj&&e<=Nj:e[0]==="-"?Ig(e,kj):Ig(e,Sj));const kj=Number.MIN_SAFE_INTEGER.toString(),jj=du?BigInt(Number.MIN_SAFE_INTEGER):void 0,Sj=Number.MAX_SAFE_INTEGER.toString(),Nj=du?BigInt(Number.MAX_SAFE_INTEGER):void 0;function Ig(e,t){if(e.length>t.length)return!1;if(e.length<t.length||e===t)return!0;for(let r=0;r<e.length;r++){const n=e[r],s=t[r];if(n>s)return!1;if(n<s)return!0}}const Ej=typeof Uint8Array.prototype.slice=="function";let Tj,De=0,Qe=0;function Pg(e){const t=e>>>0;De=t,Qe=(e-t)/4294967296>>>0}function zi(e){if(e<0){Pg(-e);const[t,r]=kp(De,Qe);De=t>>>0,Qe=r>>>0}else Pg(e)}function wp(e){const t=Tj||(Tj=new DataView(new ArrayBuffer(8)));t.setFloat32(0,+e,!0),Qe=0,De=t.getUint32(0,!0)}function Qh(e,t){const r=4294967296*t+(e>>>0);return Number.isSafeInteger(r)?r:Pa(e,t)}function Aj(e,t){return Qt(Xi()?BigInt.asUintN(64,(BigInt(t>>>0)<<BigInt(32))+BigInt(e>>>0)):Pa(e,t))}function bp(e,t){const r=2147483648&t;return r&&(t=~t>>>0,(e=1+~e>>>0)==0&&(t=t+1>>>0)),typeof(e=Qh(e,t))=="number"?r?-e:e:r?"-"+e:e}function Jx(e,t){return Xi()?Qt(BigInt.asIntN(64,(BigInt.asUintN(32,BigInt(t))<<BigInt(32))+BigInt.asUintN(32,BigInt(e)))):Qt(_p(e,t))}function Pa(e,t){if(e>>>=0,(t>>>=0)<=2097151)var r=""+(4294967296*t+e);else Xi()?r=""+(BigInt(t)<<BigInt(32)|BigInt(e)):(e=(16777215&e)+6777216*(r=16777215&(e>>>24|t<<8))+6710656*(t=t>>16&65535),r+=8147497*t,t*=2,e>=1e7&&(r+=e/1e7>>>0,e%=1e7),r>=1e7&&(t+=r/1e7>>>0,r%=1e7),r=t+Og(r)+Og(e));return r}function Og(e){return e=String(e),"0000000".slice(e.length)+e}function _p(e,t){if(2147483648&t)if(Xi())e=""+(BigInt(0|t)<<BigInt(32)|BigInt(e>>>0));else{const[r,n]=kp(e,t);e="-"+Pa(r,n)}else e=Pa(e,t);return e}function hu(e){if(e.length<16)zi(Number(e));else if(Xi())e=BigInt(e),De=Number(e&BigInt(4294967295))>>>0,Qe=Number(e>>BigInt(32)&BigInt(4294967295));else{const t=+(e[0]==="-");Qe=De=0;const r=e.length;for(let n=t,s=(r-t)%6+t;s<=r;n=s,s+=6){const i=Number(e.slice(n,s));Qe*=1e6,De=1e6*De+i,De>=4294967296&&(Qe+=Math.trunc(De/4294967296),Qe>>>=0,De>>>=0)}if(t){const[n,s]=kp(De,Qe);De=n,Qe=s}}}function kp(e,t){return t=~t,e?e=1+~e:t+=1,[e,t]}function Ir(e){return Array.prototype.slice.call(e)}const Va=typeof BigInt=="function"?BigInt.asIntN:void 0,Cj=typeof BigInt=="function"?BigInt.asUintN:void 0,Os=Number.isSafeInteger,fu=Number.isFinite,Bi=Math.trunc,Ij=Qt(0);function Mo(e){if(e!=null&&typeof e!="number")throw Error(`Value of float/double field must be a number, found ${typeof e}: ${e}`);return e}function Wr(e){return e==null||typeof e=="number"?e:e==="NaN"||e==="Infinity"||e==="-Infinity"?Number(e):void 0}function Oa(e){if(e!=null&&typeof e!="boolean"){var t=typeof e;throw Error(`Expected boolean but got ${t!="object"?t:e?Array.isArray(e)?"array":t:"null"}: ${e}`)}return e}function Qx(e){return e==null||typeof e=="boolean"?e:typeof e=="number"?!!e:void 0}const Pj=/^-?([1-9][0-9]*|0)(\.[0-9]+)?$/;function Ha(e){switch(typeof e){case"bigint":return!0;case"number":return fu(e);case"string":return Pj.test(e);default:return!1}}function to(e){if(e==null)return e;if(typeof e=="string"&&e)e=+e;else if(typeof e!="number")return;return fu(e)?0|e:void 0}function Xx(e){if(e==null)return e;if(typeof e=="string"&&e)e=+e;else if(typeof e!="number")return;return fu(e)?e>>>0:void 0}function Zx(e){const t=e.length;return(e[0]==="-"?t<20||t===20&&e<="-9223372036854775808":t<19||t===19&&e<="9223372036854775807")?e:(hu(e),_p(De,Qe))}function jp(e){return e=Bi(e),Os(e)||(zi(e),e=bp(De,Qe)),e}function ev(e){var t=Bi(Number(e));return Os(t)?String(t):((t=e.indexOf("."))!==-1&&(e=e.substring(0,t)),Zx(e))}function tv(e){var t=Bi(Number(e));return Os(t)?Qt(t):((t=e.indexOf("."))!==-1&&(e=e.substring(0,t)),Xi()?Qt(Va(64,BigInt(e))):Qt(Zx(e)))}function rv(e){return Os(e)?e=Qt(jp(e)):(e=Bi(e),Os(e)?e=String(e):(zi(e),e=_p(De,Qe)),e=Qt(e)),e}function Oj(e){return e==null?e:typeof e=="bigint"?(Jh(e)?e=Number(e):(e=Va(64,e),e=Jh(e)?Number(e):String(e)),e):Ha(e)?typeof e=="number"?jp(e):ev(e):void 0}function Rc(e){const t=typeof e;return e==null?e:t==="bigint"?Qt(Va(64,e)):Ha(e)?t==="string"?tv(e):rv(e):void 0}function nv(e){if(typeof e!="string")throw Error();return e}function Ga(e){if(e!=null&&typeof e!="string")throw Error();return e}function wt(e){return e==null||typeof e=="string"?e:void 0}function Sp(e,t,r,n){return e!=null&&e[Fi]===Ui?e:Array.isArray(e)?((n=(r=0|e[q])|32&n|2&n)!==r&&ct(e,n),new t(e)):(r?2&n?((e=t[Ng])||(Wa((e=new t).v),e=t[Ng]=e),t=e):t=new t:t=void 0,t)}function Rj(e,t,r){if(t)e:{if(!Ha(t=e))throw qh("int64");switch(typeof t){case"string":t=tv(t);break e;case"bigint":t=Qt(Va(64,t));break e;default:t=rv(t)}}else t=Rc(e);return(e=t)==null?r?Ij:void 0:e}const Lj={};let $j=function(){try{return cu(new class extends Map{constructor(){super()}}),!1}catch{return!0}}();class Sd{constructor(){this.g=new Map}get(t){return this.g.get(t)}set(t,r){return this.g.set(t,r),this.size=this.g.size,this}delete(t){return t=this.g.delete(t),this.size=this.g.size,t}clear(){this.g.clear(),this.size=this.g.size}has(t){return this.g.has(t)}entries(){return this.g.entries()}keys(){return this.g.keys()}values(){return this.g.values()}forEach(t,r){return this.g.forEach(t,r)}[Symbol.iterator](){return this.entries()}}const Dj=$j?(Object.setPrototypeOf(Sd.prototype,Map.prototype),Object.defineProperties(Sd.prototype,{size:{value:0,configurable:!0,enumerable:!0,writable:!0}}),Sd):class extends Map{constructor(){super()}};function Rg(e){return e}function Nd(e){if(2&e.J)throw Error("Cannot mutate an immutable Map")}var pn=class extends Dj{constructor(e,t,r=Rg,n=Rg){super(),this.J=0|e[q],this.K=t,this.S=r,this.fa=this.K?Mj:n;for(let s=0;s<e.length;s++){const i=e[s],a=r(i[0],!1,!0);let l=i[1];t?l===void 0&&(l=null):l=n(i[1],!1,!0,void 0,void 0,this.J),super.set(a,l)}}V(e){return Ia(Array.from(super.entries(),e))}clear(){Nd(this),super.clear()}delete(e){return Nd(this),super.delete(this.S(e,!0,!1))}entries(){if(this.K){var e=super.keys();e=new Ag(e,Fj,this)}else e=super.entries();return e}values(){if(this.K){var e=super.keys();e=new Ag(e,pn.prototype.get,this)}else e=super.values();return e}forEach(e,t){this.K?super.forEach((r,n,s)=>{e.call(t,s.get(n),n,s)}):super.forEach(e,t)}set(e,t){return Nd(this),(e=this.S(e,!0,!1))==null?this:t==null?(super.delete(e),this):super.set(e,this.fa(t,!0,!0,this.K,!1,this.J))}Ma(e){const t=this.S(e[0],!1,!0);e=e[1],e=this.K?e===void 0?null:e:this.fa(e,!1,!0,void 0,!1,this.J),super.set(t,e)}has(e){return super.has(this.S(e,!1,!1))}get(e){e=this.S(e,!1,!1);const t=super.get(e);if(t!==void 0){var r=this.K;return r?((r=this.fa(t,!1,!0,r,this.ra,this.J))!==t&&super.set(e,r),r):t}}[Symbol.iterator](){return this.entries()}};function Mj(e,t,r,n,s,i){return e=Sp(e,n,r,i),s&&(e=Ep(e)),e}function Fj(e){return[e,this.get(e)]}let Uj;function Lg(){return Uj||(Uj=new pn(Wa([]),void 0,void 0,void 0,Lj))}function pu(e){return Jt?e[Jt]:void 0}function Lc(e,t){for(const r in e)!isNaN(r)&&t(e,+r,e[r])}pn.prototype.toJSON=void 0;var Xh=class{};const zj={Ka:!0};function Bj(e,t){t<100||Mi(xj,1)}function mu(e,t,r,n){const s=n!==void 0;n=!!n;var i,a=Jt;!s&&Zi&&a&&(i=e[a])&&Lc(i,Bj),a=[];var l=e.length;let c;i=4294967295;let u=!1;const d=!!(64&t),f=d?128&t?0:-1:void 0;1&t||(c=l&&e[l-1],c!=null&&typeof c=="object"&&c.constructor===Object?i=--l:c=void 0,!d||128&t||s||(u=!0,i=i-f+f)),t=void 0;for(var h=0;h<l;h++){let m=e[h];if(m!=null&&(m=r(m,n))!=null)if(d&&h>=i){const x=h-f;(t??(t={}))[x]=m}else a[h]=m}if(c)for(let m in c){if((l=c[m])==null||(l=r(l,n))==null)continue;let x;h=+m,d&&!Number.isNaN(h)&&(x=h+f)<i?a[x]=l:(t??(t={}))[m]=l}return t&&(u?a.push(t):a[i]=t),s&&Jt&&(e=pu(e))&&e instanceof Xh&&(a[Jt]=function(m){const x=new Xh;return Lc(m,(w,k,g)=>{x[k]=Ir(g)}),x.da=m.da,x}(e)),a}function Wj(e){return e[0]=Ra(e[0]),e[1]=Ra(e[1]),e}function Ra(e){switch(typeof e){case"number":return Number.isFinite(e)?e:""+e;case"bigint":return Jh(e)?Number(e):""+e;case"boolean":return e?1:0;case"object":if(Array.isArray(e)){var t=0|e[q];return e.length===0&&1&t?void 0:mu(e,t,Ra)}if(e!=null&&e[Fi]===Ui)return sv(e);if(e instanceof Gr){if((t=e.g)==null)e="";else if(typeof t=="string")e=t;else{if(Bx){for(var r="",n=0,s=t.length-10240;n<s;)r+=String.fromCharCode.apply(null,t.subarray(n,n+=10240));r+=String.fromCharCode.apply(null,n?t.subarray(n):t),t=btoa(r)}else{r===void 0&&(r=0),zx(),r=Ux[r],n=Array(Math.floor(t.length/3)),s=r[64]||"";let u=0,d=0;for(;u<t.length-2;u+=3){var i=t[u],a=t[u+1],l=t[u+2],c=r[i>>2];i=r[(3&i)<<4|a>>4],a=r[(15&a)<<2|l>>6],l=r[63&l],n[d++]=c+i+a+l}switch(c=0,l=s,t.length-u){case 2:l=r[(15&(c=t[u+1]))<<2]||s;case 1:t=t[u],n[d]=r[t>>2]+r[(3&t)<<4|c>>4]+l+s}t=n.join("")}e=e.g=t}return e}return e instanceof pn?e=e.size!==0?e.V(Wj):void 0:void 0}return e}function sv(e){return mu(e=e.v,0|e[q],Ra)}let Vj,Hj;function bs(e,t){return iv(e,t[0],t[1])}function iv(e,t,r,n=0){if(e==null){var s=32;r?(e=[r],s|=128):e=[],t&&(s=-16760833&s|(1023&t)<<14)}else{if(!Array.isArray(e))throw Error("narr");if(s=0|e[q],_g&&1&s)throw Error("rfarr");if(2048&s&&!(2&s)&&function(){if(_g)throw Error("carr");Mi(vj,5)}(),256&s)throw Error("farr");if(64&s)return(s|n)!==s&&ct(e,s|n),e;if(r&&(s|=128,r!==e[0]))throw Error("mid");e:{s|=64;var i=(r=e).length;if(i){var a=i-1;const c=r[a];if(c!=null&&typeof c=="object"&&c.constructor===Object){if((a-=t=128&s?0:-1)>=1024)throw Error("pvtlmt");for(var l in c)(i=+l)<a&&(r[i+t]=c[l],delete c[l]);s=-16760833&s|(1023&a)<<14;break e}}if(t){if((l=Math.max(t,i-(128&s?0:-1)))>1024)throw Error("spvt");s=-16760833&s|(1023&l)<<14}}}return ct(e,64|s|n),e}function Gj(e,t){if(typeof e!="object")return e;if(Array.isArray(e)){var r=0|e[q];return e.length===0&&1&r?void 0:$g(e,r,t)}if(e!=null&&e[Fi]===Ui)return Dg(e);if(e instanceof pn){if(2&(t=e.J))return e;if(!e.size)return;if(r=Wa(e.V()),e.K)for(e=0;e<r.length;e++){const n=r[e];let s=n[1];s=s==null||typeof s!="object"?void 0:s!=null&&s[Fi]===Ui?Dg(s):Array.isArray(s)?$g(s,0|s[q],!!(32&t)):void 0,n[1]=s}return r}return e instanceof Gr?e:void 0}function $g(e,t,r){return 2&t||(!r||4096&t||16&t?e=ro(e,t,!1,r&&!(16&t)):(Ba(e,34),4&t&&Object.freeze(e))),e}function Np(e,t,r){return e=new e.constructor(t),r&&(e.h=Ps),e.m=Ps,e}function Dg(e){const t=e.v,r=0|t[q];return Zt(e,r)?e:Tp(e,t,r)?Np(e,t):ro(t,r)}function ro(e,t,r,n){return n??(n=!!(34&t)),e=mu(e,t,Gj,n),n=32,r&&(n|=2),ct(e,t=16769217&t|n),e}function Ep(e){const t=e.v,r=0|t[q];return Zt(e,r)?Tp(e,t,r)?Np(e,t,!0):new e.constructor(ro(t,r,!1)):e}function no(e){if(e.h!==Ps)return!1;var t=e.v;return Ba(t=ro(t,0|t[q]),2048),e.v=t,e.h=void 0,e.m=void 0,!0}function so(e){if(!no(e)&&Zt(e,0|e.v[q]))throw Error()}function Ds(e,t){t===void 0&&(t=0|e[q]),32&t&&!(4096&t)&&ct(e,4096|t)}function Tp(e,t,r){return!!(2&r)||!(!(32&r)||4096&r)&&(ct(t,2|r),e.h=Ps,!0)}const Kj=Qt(0),Sn={};function Le(e,t,r,n,s){if((t=mn(e.v,t,r,s))!==null||n&&e.m!==Ps)return t}function mn(e,t,r,n){if(t===-1)return null;const s=t+(r?0:-1),i=e.length-1;let a,l;if(!(i<1+(r?0:-1))){if(s>=i)if(a=e[i],a!=null&&typeof a=="object"&&a.constructor===Object)r=a[t],l=!0;else{if(s!==i)return;r=a}else r=e[s];if(n&&r!=null){if((n=n(r))==null)return n;if(!Object.is(n,r))return l?a[t]=n:e[s]=n,n}return r}}function Ee(e,t,r,n){so(e),at(e=e.v,0|e[q],t,r,n)}function at(e,t,r,n,s){const i=r+(s?0:-1);var a=e.length-1;if(a>=1+(s?0:-1)&&i>=a){const l=e[a];if(l!=null&&typeof l=="object"&&l.constructor===Object)return l[r]=n,t}return i<=a?(e[i]=n,t):(n!==void 0&&(r>=(a=(t??(t=0|e[q]))>>14&1023||536870912)?n!=null&&(e[a+(s?0:-1)]={[r]:n}):e[i]=n),t)}function gs(){return wj===void 0?2:4}function ys(e,t,r,n,s){let i=e.v,a=0|i[q];n=Zt(e,a)?1:n,s=!!s||n===3,n===2&&no(e)&&(i=e.v,a=0|i[q]);let l=(e=Ap(i,t))===$s?7:0|e[q],c=Cp(l,a);var u=!(4&c);if(u){4&c&&(e=Ir(e),l=0,c=ks(c,a),a=at(i,a,t,e));let d=0,f=0;for(;d<e.length;d++){const h=r(e[d]);h!=null&&(e[f++]=h)}f<d&&(e.length=f),r=-513&(4|c),c=r&=-1025,c&=-4097}return c!==l&&(ct(e,c),2&c&&Object.freeze(e)),ov(e,c,i,a,t,n,u,s)}function ov(e,t,r,n,s,i,a,l){let c=t;return i===1||i===4&&(2&t||!(16&t)&&32&n)?_s(t)||((t|=!e.length||a&&!(4096&t)||32&n&&!(4096&t||16&t)?2:256)!==c&&ct(e,t),Object.freeze(e)):(i===2&&_s(t)&&(e=Ir(e),c=0,t=ks(t,n),n=at(r,n,s,e)),_s(t)||(l||(t|=16),t!==c&&ct(e,t))),2&t||!(4096&t||16&t)||Ds(r,n),e}function Ap(e,t,r){return e=mn(e,t,r),Array.isArray(e)?e:$s}function Cp(e,t){return 2&t&&(e|=2),1|e}function _s(e){return!!(2&e)&&!!(4&e)||!!(256&e)}function av(e){return vp(e,!0)}function lv(e){e=Ir(e);for(let t=0;t<e.length;t++){const r=e[t]=Ir(e[t]);Array.isArray(r[1])&&(r[1]=Wa(r[1]))}return Ia(e)}function Cn(e,t,r,n){so(e),at(e=e.v,0|e[q],t,(n==="0"?Number(r)===0:r===n)?void 0:r)}function io(e,t,r){if(2&t)throw Error();const n=eo(t);let s=Ap(e,r,n),i=s===$s?7:0|s[q],a=Cp(i,t);return(2&a||_s(a)||16&a)&&(a===i||_s(a)||ct(s,a),s=Ir(s),i=0,a=ks(a,t),at(e,t,r,s,n)),a&=-13,a!==i&&ct(s,a),s}function Ed(e,t){var r=ew;return Pp(Ip(e=e.v),e,void 0,r)===t?t:-1}function Ip(e){if(Zi)return e[To]??(e[To]=new Map);if(To in e)return e[To];const t=new Map;return Object.defineProperty(e,To,{value:t}),t}function cv(e,t,r,n,s){const i=Ip(e),a=Pp(i,e,t,r,s);return a!==n&&(a&&(t=at(e,t,a,void 0,s)),i.set(r,n)),t}function Pp(e,t,r,n,s){let i=e.get(n);if(i!=null)return i;i=0;for(let a=0;a<n.length;a++){const l=n[a];mn(t,l,s)!=null&&(i!==0&&(r=at(t,r,i,void 0,s)),i=l)}return e.set(n,i),i}function Op(e,t,r){let n=0|e[q];const s=eo(n),i=mn(e,r,s);let a;if(i!=null&&i[Fi]===Ui){if(!Zt(i))return no(i),i.v;a=i.v}else Array.isArray(i)&&(a=i);if(a){const l=0|a[q];2&l&&(a=ro(a,l))}return a=bs(a,t),a!==i&&at(e,n,r,a,s),a}function uv(e,t,r,n,s){let i=!1;if((n=mn(e,n,s,a=>{const l=Sp(a,r,!1,t);return i=l!==a&&l!=null,l}))!=null)return i&&!Zt(n)&&Ds(e,t),n}function be(e,t,r,n){let s=e.v,i=0|s[q];if((t=uv(s,i,t,r,n))==null)return t;if(i=0|s[q],!Zt(e,i)){const a=Ep(t);a!==t&&(no(e)&&(s=e.v,i=0|s[q]),i=at(s,i,r,t=a,n),Ds(s,i))}return t}function dv(e,t,r,n,s,i,a,l){var c=Zt(e,r);i=c?1:i,a=!!a||i===3,c=l&&!c,(i===2||c)&&no(e)&&(r=0|(t=e.v)[q]);var u=(e=Ap(t,s))===$s?7:0|e[q],d=Cp(u,r);if(l=!(4&d)){var f=e,h=r;const m=!!(2&d);m&&(h|=2);let x=!m,w=!0,k=0,g=0;for(;k<f.length;k++){const p=Sp(f[k],n,!1,h);if(p instanceof n){if(!m){const y=Zt(p);x&&(x=!y),w&&(w=y)}f[g++]=p}}g<k&&(f.length=g),d|=4,d=w?-4097&d:4096|d,d=x?8|d:-9&d}if(d!==u&&(ct(e,d),2&d&&Object.freeze(e)),c&&!(8&d||!e.length&&(i===1||i===4&&(2&d||!(16&d)&&32&r)))){for(_s(d)&&(e=Ir(e),d=ks(d,r),r=at(t,r,s,e)),n=e,c=d,u=0;u<n.length;u++)(f=n[u])!==(d=Ep(f))&&(n[u]=d);c|=8,ct(e,d=c=n.length?4096|c:-4097&c)}return ov(e,d,t,r,s,i,l,a)}function gn(e,t,r){const n=e.v;return dv(e,n,0|n[q],t,r,gs(),!1,!0)}function hv(e){return e==null&&(e=void 0),e}function se(e,t,r,n,s){return Ee(e,r,n=hv(n),s),n&&!Zt(n)&&Ds(e.v),e}function Xo(e,t,r,n){e:{var s=n=hv(n);so(e);const i=e.v;let a=0|i[q];if(s==null){const l=Ip(i);if(Pp(l,i,a,r)!==t)break e;l.set(r,0)}else a=cv(i,a,r,t);at(i,a,t,s)}n&&!Zt(n)&&Ds(e.v)}function ks(e,t){return-273&(2&t?2|e:-3&e)}function Rp(e,t,r,n){var s=n;so(e),e=dv(e,n=e.v,0|n[q],r,t,2,!0),s=s??new r,e.push(s),t=r=e===$s?7:0|e[q],(s=Zt(s))?(r&=-9,e.length===1&&(r&=-4097)):r|=4096,r!==t&&ct(e,r),s||Ds(n)}function fr(e,t,r){return to(Le(e,t,void 0,r))}function fv(e){return(gp?Le(e,2,void 0,void 0,Rc):Rc(Le(e,2)))??Kj}function Ke(e,t){return Le(e,t,void 0,void 0,Wr)??0}function yn(e,t,r){if(r!=null){if(typeof r!="number"||!fu(r))throw qh("int32");r|=0}Ee(e,t,r)}function Z(e,t,r){Ee(e,t,Mo(r))}function er(e,t,r){Cn(e,t,Ga(r),"")}function $c(e,t,r){{so(e);const a=e.v;let l=0|a[q];if(r==null)at(a,l,t);else{var n=e=r===$s?7:0|r[q],s=_s(e),i=s||Object.isFrozen(r);for(s||(e=0),i||(r=Ir(r),n=0,e=ks(e,l),i=!1),e|=5,e|=(4&e?512&e?512:1024&e?1024:0:void 0)??(gp?1024:0),s=0;s<r.length;s++){const c=r[s],u=nv(c);Object.is(c,u)||(i&&(r=Ir(r),n=0,e=ks(e,l),i=!1),r[s]=u)}e!==n&&(i&&(r=Ir(r),e=ks(e,l)),ct(r,e)),at(a,l,t,r)}}}function gu(e,t,r){so(e),ys(e,t,wt,2,!0).push(nv(r))}var Js=class{constructor(e,t,r){if(this.buffer=e,r&&!t)throw Error();this.g=t}};function Lp(e,t){if(typeof e=="string")return new Js(Wx(e),t);if(Array.isArray(e))return new Js(new Uint8Array(e),t);if(e.constructor===Uint8Array)return new Js(e,!1);if(e.constructor===ArrayBuffer)return e=new Uint8Array(e),new Js(e,!1);if(e.constructor===Gr)return t=xp(e)||new Uint8Array(0),new Js(t,!0,e);if(e instanceof Uint8Array)return e=e.constructor===Uint8Array?e:new Uint8Array(e.buffer,e.byteOffset,e.byteLength),new Js(e,!1);throw Error()}function Wi(e,t){let r,n=0,s=0,i=0;const a=e.h;let l=e.g;do r=a[l++],n|=(127&r)<<i,i+=7;while(i<32&&128&r);if(i>32)for(s|=(127&r)>>4,i=3;i<32&&128&r;i+=7)r=a[l++],s|=(127&r)<<i;if(js(e,l),!(128&r))return t(n>>>0,s>>>0);throw Error()}function $p(e){let t=0,r=e.g;const n=r+10,s=e.h;for(;r<n;){const i=s[r++];if(t|=i,(128&i)==0)return js(e,r),!!(127&t)}throw Error()}function Yn(e){const t=e.h;let r=e.g,n=t[r++],s=127&n;if(128&n&&(n=t[r++],s|=(127&n)<<7,128&n&&(n=t[r++],s|=(127&n)<<14,128&n&&(n=t[r++],s|=(127&n)<<21,128&n&&(n=t[r++],s|=n<<28,128&n&&128&t[r++]&&128&t[r++]&&128&t[r++]&&128&t[r++]&&128&t[r++])))))throw Error();return js(e,r),s}function xn(e){return Yn(e)>>>0}function Dc(e){var t=e.h;const r=e.g;var n=t[r],s=t[r+1];const i=t[r+2];return t=t[r+3],js(e,e.g+4),e=2*((s=(n<<0|s<<8|i<<16|t<<24)>>>0)>>31)+1,n=s>>>23&255,s&=8388607,n==255?s?NaN:e*(1/0):n==0?1401298464324817e-60*e*s:e*Math.pow(2,n-150)*(s+8388608)}function qj(e){return Yn(e)}function js(e,t){if(e.g=t,t>e.l)throw Error()}function pv(e,t){if(t<0)throw Error();const r=e.g;if((t=r+t)>e.l)throw Error();return e.g=t,r}function mv(e,t){if(t==0)return Is();var r=pv(e,t);return e.Y&&e.j?r=e.h.subarray(r,r+t):(e=e.h,r=r===(t=r+t)?new Uint8Array(0):Ej?e.slice(r,t):new Uint8Array(e.subarray(r,t))),r.length==0?Is():new Gr(r,Di)}var Mg=[];function gv(e,t,r,n){if(Mc.length){const s=Mc.pop();return s.o(n),s.g.init(e,t,r,n),s}return new Yj(e,t,r,n)}function yv(e){e.g.clear(),e.l=-1,e.h=-1,Mc.length<100&&Mc.push(e)}function xv(e){var t=e.g;if(t.g==t.l)return!1;e.m=e.g.g;var r=xn(e.g);if(t=r>>>3,!((r&=7)>=0&&r<=5)||t<1)throw Error();return e.l=t,e.h=r,!0}function nc(e){switch(e.h){case 0:e.h!=0?nc(e):$p(e.g);break;case 1:js(e=e.g,e.g+8);break;case 2:if(e.h!=2)nc(e);else{var t=xn(e.g);js(e=e.g,e.g+t)}break;case 5:js(e=e.g,e.g+4);break;case 3:for(t=e.l;;){if(!xv(e))throw Error();if(e.h==4){if(e.l!=t)throw Error();break}nc(e)}break;default:throw Error()}}function Ka(e,t,r){const n=e.g.l;var s=xn(e.g);let i=(s=e.g.g+s)-n;if(i<=0&&(e.g.l=s,r(t,e,void 0,void 0,void 0),i=s-e.g.g),i)throw Error();return e.g.g=s,e.g.l=n,t}function Dp(e){var t=xn(e.g),r=pv(e=e.g,t);if(e=e.h,oj){var n,s=e;(n=jd)||(n=jd=new TextDecoder("utf-8",{fatal:!0})),t=r+t,s=r===0&&t===s.length?s:s.subarray(r,t);try{var i=n.decode(s)}catch(l){if(Dl===void 0){try{n.decode(new Uint8Array([128]))}catch{}try{n.decode(new Uint8Array([97])),Dl=!0}catch{Dl=!1}}throw!Dl&&(jd=void 0),l}}else{t=(i=r)+t,r=[];let l,c=null;for(;i<t;){var a=e[i++];a<128?r.push(a):a<224?i>=t?ss():(l=e[i++],a<194||(192&l)!=128?(i--,ss()):r.push((31&a)<<6|63&l)):a<240?i>=t-1?ss():(l=e[i++],(192&l)!=128||a===224&&l<160||a===237&&l>=160||(192&(n=e[i++]))!=128?(i--,ss()):r.push((15&a)<<12|(63&l)<<6|63&n)):a<=244?i>=t-2?ss():(l=e[i++],(192&l)!=128||l-144+(a<<28)>>30||(192&(n=e[i++]))!=128||(192&(s=e[i++]))!=128?(i--,ss()):(a=(7&a)<<18|(63&l)<<12|(63&n)<<6|63&s,a-=65536,r.push(55296+(a>>10&1023),56320+(1023&a)))):ss(),r.length>=8192&&(c=bg(c,r),r.length=0)}i=bg(c,r)}return i}function vv(e){const t=xn(e.g);return mv(e.g,t)}function yu(e,t,r){var n=xn(e.g);for(n=e.g.g+n;e.g.g<n;)r.push(t(e.g))}var Yj=class{constructor(e,t,r,n){if(Mg.length){const s=Mg.pop();s.init(e,t,r,n),e=s}else e=new class{constructor(s,i,a,l){this.h=null,this.j=!1,this.g=this.l=this.m=0,this.init(s,i,a,l)}init(s,i,a,{Y:l=!1,ea:c=!1}={}){this.Y=l,this.ea=c,s&&(s=Lp(s,this.ea),this.h=s.buffer,this.j=s.g,this.m=i||0,this.l=a!==void 0?this.m+a:this.h.length,this.g=this.m)}clear(){this.h=null,this.j=!1,this.g=this.l=this.m=0,this.Y=!1}}(e,t,r,n);this.g=e,this.m=this.g.g,this.h=this.l=-1,this.o(n)}o({ha:e=!1}={}){this.ha=e}},Mc=[];function Fg(e){return e?/^\d+$/.test(e)?(hu(e),new Zh(De,Qe)):null:Jj||(Jj=new Zh(0,0))}var Zh=class{constructor(e,t){this.h=e>>>0,this.g=t>>>0}};let Jj;function Ug(e){return e?/^-?\d+$/.test(e)?(hu(e),new ef(De,Qe)):null:Qj||(Qj=new ef(0,0))}var ef=class{constructor(e,t){this.h=e>>>0,this.g=t>>>0}};let Qj;function Si(e,t,r){for(;r>0||t>127;)e.g.push(127&t|128),t=(t>>>7|r<<25)>>>0,r>>>=7;e.g.push(t)}function oo(e,t){for(;t>127;)e.g.push(127&t|128),t>>>=7;e.g.push(t)}function xu(e,t){if(t>=0)oo(e,t);else{for(let r=0;r<9;r++)e.g.push(127&t|128),t>>=7;e.g.push(1)}}function Mp(e){var t=De;e.g.push(t>>>0&255),e.g.push(t>>>8&255),e.g.push(t>>>16&255),e.g.push(t>>>24&255)}function Vi(e,t){t.length!==0&&(e.l.push(t),e.h+=t.length)}function vr(e,t,r){oo(e.g,8*t+r)}function Fp(e,t){return vr(e,t,2),t=e.g.end(),Vi(e,t),t.push(e.h),t}function Up(e,t){var r=t.pop();for(r=e.h+e.g.length()-r;r>127;)t.push(127&r|128),r>>>=7,e.h++;t.push(r),e.h++}function vu(e,t,r){vr(e,t,2),oo(e.g,r.length),Vi(e,e.g.end()),Vi(e,r)}function Fc(e,t,r,n){r!=null&&(t=Fp(e,t),n(r,e),Up(e,t))}function qr(){const e=class{constructor(){throw Error()}};return Object.setPrototypeOf(e,e.prototype),e}var zp=qr(),wv=qr(),Bp=qr(),Wp=qr(),bv=qr(),_v=qr(),Xj=qr(),wu=qr(),kv=qr(),jv=qr();function Yr(e,t,r){var n=e.v;Jt&&Jt in n&&(n=n[Jt])&&delete n[t.g],t.h?t.j(e,t.h,t.g,r,t.l):t.j(e,t.g,r,t.l)}var Y=class{constructor(e,t){this.v=iv(e,t,void 0,2048)}toJSON(){return sv(this)}j(){var s;var e=RS,t=this.v,r=e.g,n=Jt;if(Zi&&n&&((s=t[n])==null?void 0:s[r])!=null&&Mi(yj,3),t=e.g,Eg&&Jt&&Eg===void 0&&(n=(r=this.v)[Jt])&&(n=n.da))try{n(r,t,zj)}catch(i){Fx(i)}return e.h?e.m(this,e.h,e.g,e.l):e.m(this,e.g,e.defaultValue,e.l)}clone(){const e=this.v,t=0|e[q];return Tp(this,e,t)?Np(this,e,!0):new this.constructor(ro(e,t,!1))}};Y.prototype[Fi]=Ui,Y.prototype.toString=function(){return this.v.toString()};var ao=class{constructor(e,t,r){this.g=e,this.h=t,e=zp,this.l=!!e&&r===e||!1}};function bu(e,t){return new ao(e,t,zp)}function Sv(e,t,r,n,s){Fc(e,r,Av(t,n),s)}const Zj=bu(function(e,t,r,n,s){return e.h===2&&(Ka(e,Op(t,n,r),s),!0)},Sv),eS=bu(function(e,t,r,n,s){return e.h===2&&(Ka(e,Op(t,n,r),s),!0)},Sv);var _u=Symbol(),ku=Symbol(),tf=Symbol(),zg=Symbol(),Bg=Symbol();let Nv,Ev;function Ms(e,t,r,n){var s=n[e];if(s)return s;(s={}).qa=n,s.T=function(f){switch(typeof f){case"boolean":return Vj||(Vj=[0,void 0,!0]);case"number":return f>0?void 0:f===0?Hj||(Hj=[0,void 0]):[-f,void 0];case"string":return[0,f];case"object":return f}}(n[0]);var i=n[1];let a=1;i&&i.constructor===Object&&(s.ba=i,typeof(i=n[++a])=="function"&&(s.ma=!0,Nv??(Nv=i),Ev??(Ev=n[a+1]),i=n[a+=2]));const l={};for(;i&&Array.isArray(i)&&i.length&&typeof i[0]=="number"&&i[0]>0;){for(var c=0;c<i.length;c++)l[i[c]]=i;i=n[++a]}for(c=1;i!==void 0;){let f;typeof i=="number"&&(c+=i,i=n[++a]);var u=void 0;if(i instanceof ao?f=i:(f=Zj,a--),f==null?void 0:f.l){i=n[++a],u=n;var d=a;typeof i=="function"&&(i=i(),u[d]=i),u=i}for(d=c+1,typeof(i=n[++a])=="number"&&i<0&&(d-=i,i=n[++a]);c<d;c++){const h=l[c];u?r(s,c,f,u,h):t(s,c,f,h)}}return n[e]=s}function Tv(e){return Array.isArray(e)?e[0]instanceof ao?e:[eS,e]:[e,void 0]}function Av(e,t){return e instanceof Y?e.v:Array.isArray(e)?bs(e,t):void 0}function Vp(e,t,r,n){const s=r.g;e[t]=n?(i,a,l)=>s(i,a,l,n):s}function Hp(e,t,r,n,s){const i=r.g;let a,l;e[t]=(c,u,d)=>i(c,u,d,l||(l=Ms(ku,Vp,Hp,n).T),a||(a=Gp(n)),s)}function Gp(e){let t=e[tf];if(t!=null)return t;const r=Ms(ku,Vp,Hp,e);return t=r.ma?(n,s)=>Nv(n,s,r):(n,s)=>{for(;xv(s)&&s.h!=4;){var i=s.l,a=r[i];if(a==null){var l=r.ba;l&&(l=l[i])&&(l=rS(l))!=null&&(a=r[i]=l)}if(a==null||!a(s,n,i)){if(a=(l=s).m,nc(l),l.ha)var c=void 0;else c=l.g.g-a,l.g.g=a,c=mv(l.g,c);a=void 0,l=n,c&&((a=l[Jt]??(l[Jt]=new Xh))[i]??(a[i]=[])).push(c)}}return(n=pu(n))&&(n.da=r.qa[Bg]),!0},e[tf]=t,e[Bg]=tS.bind(e),t}function tS(e,t,r,n){var s=this[ku];const i=this[tf],a=bs(void 0,s.T),l=pu(e);if(l){var c=!1,u=s.ba;if(u){if(s=(d,f,h)=>{if(h.length!==0)if(u[f])for(const m of h){d=gv(m);try{c=!0,i(a,d)}finally{yv(d)}}else n==null||n(e,f,h)},t==null)Lc(l,s);else if(l!=null){const d=l[t];d&&s(l,t,d)}if(c){let d=0|e[q];if(2&d&&2048&d&&!(r!=null&&r.Ka))throw Error();const f=eo(d),h=(m,x)=>{if(mn(e,m,f)!=null){if((r==null?void 0:r.Qa)===1)return;throw Error()}x!=null&&(d=at(e,d,m,x,f)),delete l[m]};t==null?qx(a,0|a[q],(m,x)=>{h(m,x)}):h(t,mn(a,t,f))}}}}function rS(e){const t=(e=Tv(e))[0].g;if(e=e[1]){const r=Gp(e),n=Ms(ku,Vp,Hp,e).T;return(s,i,a)=>t(s,i,a,n,r)}return t}function ju(e,t,r){e[t]=r.h}function Su(e,t,r,n){let s,i;const a=r.h;e[t]=(l,c,u)=>a(l,c,u,i||(i=Ms(_u,ju,Su,n).T),s||(s=Cv(n)))}function Cv(e){let t=e[zg];if(!t){const r=Ms(_u,ju,Su,e);t=(n,s)=>Iv(n,s,r),e[zg]=t}return t}function Iv(e,t,r){qx(e,0|e[q],(n,s)=>{if(s!=null){var i=function(a,l){var c=a[l];if(c)return c;if((c=a.ba)&&(c=c[l])){var u=(c=Tv(c))[0].h;if(c=c[1]){const d=Cv(c),f=Ms(_u,ju,Su,c).T;c=a.ma?Ev(f,d):(h,m,x)=>u(h,m,x,f,d)}else c=u;return a[l]=c}}(r,n);i?i(t,s,n):n<500||Mi(Yh,3)}}),(e=pu(e))&&Lc(e,(n,s,i)=>{for(Vi(t,t.g.end()),n=0;n<i.length;n++)Vi(t,xp(i[n])||new Uint8Array(0))})}const nS=Qt(0);function lo(e,t){if(Array.isArray(t)){var r=0|t[q];if(4&r)return t;for(var n=0,s=0;n<t.length;n++){const i=e(t[n]);i!=null&&(t[s++]=i)}return s<n&&(t.length=s),(e=-1537&(5|r))!==r&&ct(t,e),2&e&&Object.freeze(t),t}}function It(e,t,r){return new ao(e,t,r)}function co(e,t,r){return new ao(e,t,r)}function mt(e,t,r){at(e,0|e[q],t,r,eo(0|e[q]))}var sS=bu(function(e,t,r,n,s){if(e.h!==2)return!1;if(e=Ir(e=Ka(e,bs([void 0,void 0],n),s)),s=eo(n=0|t[q]),2&n)throw Error();let i=mn(t,r,s);if(i instanceof pn)2&i.J?(i=i.V(),i.push(e),at(t,n,r,i,s)):i.Ma(e);else if(Array.isArray(i)){var a=0|i[q];8192&a||ct(i,a|=8192),2&a&&(i=lv(i),at(t,n,r,i,s)),i.push(e)}else at(t,n,r,Ia([e]),s);return!0},function(e,t,r,n,s){if(t instanceof pn)t.forEach((i,a)=>{Fc(e,r,bs([a,i],n),s)});else if(Array.isArray(t)){for(let i=0;i<t.length;i++){const a=t[i];Array.isArray(a)&&Fc(e,r,bs(a,n),s)}Ia(t)}});function Pv(e,t,r){(t=Wr(t))!=null&&(vr(e,r,5),e=e.g,wp(t),Mp(e))}function Ov(e,t,r){if(t=function(n){if(n==null)return n;const s=typeof n;if(s==="bigint")return String(Va(64,n));if(Ha(n)){if(s==="string")return ev(n);if(s==="number")return jp(n)}}(t),t!=null&&(typeof t=="string"&&Ug(t),t!=null))switch(vr(e,r,0),typeof t){case"number":e=e.g,zi(t),Si(e,De,Qe);break;case"bigint":r=BigInt.asUintN(64,t),r=new ef(Number(r&BigInt(4294967295)),Number(r>>BigInt(32))),Si(e.g,r.h,r.g);break;default:r=Ug(t),Si(e.g,r.h,r.g)}}function Rv(e,t,r){(t=to(t))!=null&&t!=null&&(vr(e,r,0),xu(e.g,t))}function Lv(e,t,r){(t=Qx(t))!=null&&(vr(e,r,0),e.g.g.push(t?1:0))}function $v(e,t,r){(t=wt(t))!=null&&vu(e,r,Mx(t))}function Dv(e,t,r,n,s){Fc(e,r,Av(t,n),s)}function Mv(e,t,r){(t=t==null||typeof t=="string"||t instanceof Gr?t:void 0)!=null&&vu(e,r,Lp(t,!0).buffer)}function Fv(e,t,r){return(e.h===5||e.h===2)&&(t=io(t,0|t[q],r),e.h==2?yu(e,Dc,t):t.push(Dc(e.g)),!0)}var Ze=It(function(e,t,r){return e.h===5&&(mt(t,r,Dc(e.g)),!0)},Pv,wu),iS=co(Fv,function(e,t,r){if((t=lo(Wr,t))!=null)for(let a=0;a<t.length;a++){var n=e,s=r,i=t[a];i!=null&&(vr(n,s,5),n=n.g,wp(i),Mp(n))}},wu),Kp=co(Fv,function(e,t,r){if((t=lo(Wr,t))!=null&&t.length){vr(e,r,2),oo(e.g,4*t.length);for(let n=0;n<t.length;n++)r=e.g,wp(t[n]),Mp(r)}},wu),oS=It(function(e,t,r){return e.h===5&&(mt(t,r,(e=Dc(e.g))===0?void 0:e),!0)},Pv,wu),Jn=It(function(e,t,r){return mp?(e.h!==0?e=!1:(mt(t,r,Wi(e.g,Jx)),e=!0),e):e.h===0&&(mt(t,r,Wi(e.g,bp)),!0)},Ov,_v),Td=It(function(e,t,r){return mp?(e.h!==0?t=!1:(mt(t,r,(e=Wi(e.g,Jx))===nS?void 0:e),t=!0),t):e.h===0&&(mt(t,r,(e=Wi(e.g,bp))===0?void 0:e),!0)},Ov,_v),aS=It(function(e,t,r){return mp?(e.h!==0?e=!1:(mt(t,r,Wi(e.g,Aj)),e=!0),e):e.h===0&&(mt(t,r,Wi(e.g,Qh)),!0)},function(e,t,r){if(t=function(n){if(n==null)return n;var s=typeof n;if(s==="bigint")return String(Cj(64,n));if(Ha(n)){if(s==="string")return s=Bi(Number(n)),Os(s)&&s>=0?n=String(s):((s=n.indexOf("."))!==-1&&(n=n.substring(0,s)),(s=n[0]!=="-"&&((s=n.length)<20||s===20&&n<="18446744073709551615"))||(hu(n),n=Pa(De,Qe))),n;if(s==="number")return(n=Bi(n))>=0&&Os(n)||(zi(n),n=Qh(De,Qe)),n}}(t),t!=null&&(typeof t=="string"&&Fg(t),t!=null))switch(vr(e,r,0),typeof t){case"number":e=e.g,zi(t),Si(e,De,Qe);break;case"bigint":r=BigInt.asUintN(64,t),r=new Zh(Number(r&BigInt(4294967295)),Number(r>>BigInt(32))),Si(e.g,r.h,r.g);break;default:r=Fg(t),Si(e.g,r.h,r.g)}},Xj),ft=It(function(e,t,r){return e.h===0&&(mt(t,r,Yn(e.g)),!0)},Rv,Wp),qa=co(function(e,t,r){return(e.h===0||e.h===2)&&(t=io(t,0|t[q],r),e.h==2?yu(e,Yn,t):t.push(Yn(e.g)),!0)},function(e,t,r){if((t=lo(to,t))!=null&&t.length){r=Fp(e,r);for(let n=0;n<t.length;n++)xu(e.g,t[n]);Up(e,r)}},Wp),mi=It(function(e,t,r){return e.h===0&&(mt(t,r,(e=Yn(e.g))===0?void 0:e),!0)},Rv,Wp),Ye=It(function(e,t,r){return e.h===0&&(mt(t,r,$p(e.g)),!0)},Lv,wv),Ss=It(function(e,t,r){return e.h===0&&(mt(t,r,(e=$p(e.g))===!1?void 0:e),!0)},Lv,wv),jt=co(function(e,t,r){return e.h===2&&(e=Dp(e),io(t,0|t[q],r).push(e),!0)},function(e,t,r){if((t=lo(wt,t))!=null)for(let a=0;a<t.length;a++){var n=e,s=r,i=t[a];i!=null&&vu(n,s,Mx(i))}},Bp),Rn=It(function(e,t,r){return e.h===2&&(mt(t,r,(e=Dp(e))===""?void 0:e),!0)},$v,Bp),Ae=It(function(e,t,r){return e.h===2&&(mt(t,r,Dp(e)),!0)},$v,Bp),ht=function(e,t,r=zp){return new ao(e,t,r)}(function(e,t,r,n,s){return e.h===2&&(n=bs(void 0,n),io(t,0|t[q],r).push(n),Ka(e,n,s),!0)},function(e,t,r,n,s){if(Array.isArray(t)){for(let i=0;i<t.length;i++)Dv(e,t[i],r,n,s);1&(e=0|t[q])||ct(t,1|e)}}),Ge=bu(function(e,t,r,n,s,i){if(e.h!==2)return!1;let a=0|t[q];return cv(t,a,i,r,eo(a)),Ka(e,t=Op(t,n,r),s),!0},Dv),Uv=It(function(e,t,r){return e.h===2&&(mt(t,r,vv(e)),!0)},Mv,kv),lS=co(function(e,t,r){return(e.h===0||e.h===2)&&(t=io(t,0|t[q],r),e.h==2?yu(e,xn,t):t.push(xn(e.g)),!0)},function(e,t,r){if((t=lo(Xx,t))!=null)for(let a=0;a<t.length;a++){var n=e,s=r,i=t[a];i!=null&&(vr(n,s,0),oo(n.g,i))}},bv),cS=It(function(e,t,r){return e.h===0&&(mt(t,r,(e=xn(e.g))===0?void 0:e),!0)},function(e,t,r){(t=Xx(t))!=null&&t!=null&&(vr(e,r,0),oo(e.g,t))},bv),tr=It(function(e,t,r){return e.h===0&&(mt(t,r,Yn(e.g)),!0)},function(e,t,r){(t=to(t))!=null&&(t=parseInt(t,10),vr(e,r,0),xu(e.g,t))},jv);class uS{constructor(t,r){var n=ir;this.g=t,this.h=r,this.m=be,this.j=se,this.defaultValue=void 0,this.l=n.Oa!=null?Yx:void 0}register(){cu(this)}}function Jr(e,t){return new uS(e,t)}function ts(e,t){return(r,n)=>{{const i={ea:!0};n&&Object.assign(i,n),r=gv(r,void 0,void 0,i);try{const a=new e,l=a.v;Gp(t)(l,r);var s=a}finally{yv(r)}}return s}}function Nu(e){return function(){const t=new class{constructor(){this.l=[],this.h=0,this.g=new class{constructor(){this.g=[]}length(){return this.g.length}end(){const a=this.g;return this.g=[],a}}}};Iv(this.v,t,Ms(_u,ju,Su,e)),Vi(t,t.g.end());const r=new Uint8Array(t.h),n=t.l,s=n.length;let i=0;for(let a=0;a<s;a++){const l=n[a];r.set(l,i),i+=l.length}return t.l=[r],r}}var Wg=class extends Y{constructor(e){super(e)}},Vg=[0,Rn,It(function(e,t,r){return e.h===2&&(mt(t,r,(e=vv(e))===Is()?void 0:e),!0)},function(e,t,r){if(t!=null){if(t instanceof Y){const n=t.Ra;return void(n?(t=n(t),t!=null&&vu(e,r,Lp(t,!0).buffer)):Mi(Yh,3))}if(Array.isArray(t))return void Mi(Yh,3)}Mv(e,t,r)},kv)];let Ad,Hg=globalThis.trustedTypes;function Gg(e){var t;return Ad===void 0&&(Ad=function(){let r=null;if(!Hg)return r;try{const n=s=>s;r=Hg.createPolicy("goog#html",{createHTML:n,createScript:n,createScriptURL:n})}catch{}return r}()),e=(t=Ad)?t.createScriptURL(e):e,new class{constructor(r){this.g=r}toString(){return this.g+""}}(e)}function dS(e,...t){if(t.length===0)return Gg(e[0]);let r=e[0];for(let n=0;n<t.length;n++)r+=encodeURIComponent(t[n])+e[n+1];return Gg(r)}var zv=[0,ft,tr,Ye,-1,qa,tr,-1,Ye],hS=class extends Y{constructor(e){super(e)}},Bv=[0,Ye,Ae,Ye,tr,-1,co(function(e,t,r){return(e.h===0||e.h===2)&&(t=io(t,0|t[q],r),e.h==2?yu(e,qj,t):t.push(Yn(e.g)),!0)},function(e,t,r){if((t=lo(to,t))!=null&&t.length){r=Fp(e,r);for(let n=0;n<t.length;n++)xu(e.g,t[n]);Up(e,r)}},jv),Ae,-1,[0,Ye,-1],tr,Ye,-1],Wv=[0,3,Ye,-1,2,[0,ft],[0,tr,Ye],[0,Ae,-1],[0]],Vv=[0,Ae,-2],Kg=class extends Y{constructor(e){super(e)}},Hv=[0],Gv=[0,ft,Ye,1,Ye,-4],ir=class extends Y{constructor(e){super(e,2)}},lt={};lt[336783863]=[0,Ae,Ye,-1,ft,[0,[1,2,3,4,5,6,7,8,9],Ge,Hv,Ge,Bv,Ge,Vv,Ge,Gv,Ge,zv,Ge,[0,Ae,-2],Ge,[0,Ae,tr],Ge,Wv,Ge,[0,tr,-1,Ye]],[0,Ae],Ye,[0,[1,3],[2,4],Ge,[0,qa],-1,Ge,[0,jt],-1,ht,[0,Ae,-1]],Ae];var qg=[0,Td,-1,Ss,-3,Td,qa,Rn,mi,Td,-1,Ss,mi,Ss,-2,Rn];function $e(e,t){gu(e,3,t)}function ye(e,t){gu(e,4,t)}var zt=class extends Y{constructor(e){super(e,500)}o(e){return se(this,0,7,e)}},Zo=[-1,{}],Yg=[0,Ae,1,Zo],Jg=[0,Ae,jt,Zo];function wr(e,t){Rp(e,1,zt,t)}function Ue(e,t){gu(e,10,t)}function ke(e,t){gu(e,15,t)}var or=class extends Y{constructor(e){super(e,500)}o(e){return se(this,0,1001,e)}},Kv=[-500,ht,[-500,Rn,-1,jt,-3,[-2,lt,Ye],ht,Vg,mi,-1,Yg,Jg,ht,[0,Rn,Ss],Rn,qg,mi,jt,987,jt],4,ht,[-500,Ae,-1,[-1,{}],998,Ae],ht,[-500,Ae,jt,-1,[-2,{},Ye],997,jt,-1],mi,ht,[-500,Ae,jt,Zo,998,jt],jt,mi,Yg,Jg,ht,[0,Rn,-1,Zo],jt,-2,qg,Rn,-1,Ss,[0,Ss,cS],978,Zo,ht,Vg];or.prototype.g=Nu(Kv);var fS=ts(or,Kv),pS=class extends Y{constructor(e){super(e)}},qv=class extends Y{constructor(e){super(e)}g(){return gn(this,pS,1)}},Yv=[0,ht,[0,ft,Ze,Ae,-1]],Eu=ts(qv,Yv),mS=class extends Y{constructor(e){super(e)}},gS=class extends Y{constructor(e){super(e)}},Cd=class extends Y{constructor(e){super(e)}l(){return be(this,mS,2)}g(){return gn(this,gS,5)}},Jv=ts(class extends Y{constructor(e){super(e)}},[0,jt,qa,Kp,[0,tr,[0,ft,-3],[0,Ze,-3],[0,ft,-1,[0,ht,[0,ft,-2]]],ht,[0,Ze,-1,Ae,Ze]],Ae,-1,Jn,ht,[0,ft,Ze],jt,Jn]),Qv=class extends Y{constructor(e){super(e)}},Ni=ts(class extends Y{constructor(e){super(e)}},[0,ht,[0,Ze,-4]]),Xv=class extends Y{constructor(e){super(e)}},Ya=ts(class extends Y{constructor(e){super(e)}},[0,ht,[0,Ze,-4]]),yS=class extends Y{constructor(e){super(e)}},xS=[0,ft,-1,Kp,tr],Zv=class extends Y{constructor(e){super(e)}};Zv.prototype.g=Nu([0,Ze,-4,Jn]);var vS=class extends Y{constructor(e){super(e)}},wS=ts(class extends Y{constructor(e){super(e)}},[0,ht,[0,1,ft,Ae,Yv],Jn]),Qg=class extends Y{constructor(e){super(e)}},bS=class extends Y{constructor(e){super(e)}na(){const e=Le(this,1,void 0,void 0,av);return e??Is()}},_S=class extends Y{constructor(e){super(e)}},ew=[1,2],kS=ts(class extends Y{constructor(e){super(e)}},[0,ht,[0,ew,Ge,[0,Kp],Ge,[0,Uv],ft,Ae],Jn]),qp=class extends Y{constructor(e){super(e)}},tw=[0,Ae,ft,Ze,jt,-1],Xg=class extends Y{constructor(e){super(e)}},jS=[0,Ye,-1],Zg=class extends Y{constructor(e){super(e)}},sc=[1,2,3,4,5,6],Uc=class extends Y{constructor(e){super(e)}g(){return Le(this,1,void 0,void 0,av)!=null}l(){return wt(Le(this,2))!=null}},He=class extends Y{constructor(e){super(e)}g(){return Qx(Le(this,2))??!1}},rw=[0,Uv,Ae,[0,ft,Jn,-1],[0,aS,Jn]],et=[0,rw,Ye,[0,sc,Ge,Gv,Ge,Bv,Ge,zv,Ge,Hv,Ge,Vv,Ge,Wv],tr],Tu=class extends Y{constructor(e){super(e)}},Yp=[0,et,Ze,-1,ft],SS=Jr(502141897,Tu);lt[502141897]=Yp;var NS=ts(class extends Y{constructor(e){super(e)}},[0,[0,tr,-1,iS,lS],xS]),nw=class extends Y{constructor(e){super(e)}},sw=class extends Y{constructor(e){super(e)}},rf=[0,et,Ze,[0,et],Ye],ES=Jr(508968150,sw);lt[508968150]=[0,et,Yp,rf,Ze,[0,[0,rw]]],lt[508968149]=rf;var Qs=class extends Y{constructor(e){super(e)}l(){return be(this,qp,2)}g(){Ee(this,2)}},iw=[0,et,tw];lt[478825465]=iw;var TS=class extends Y{constructor(e){super(e)}},ow=class extends Y{constructor(e){super(e)}},Jp=class extends Y{constructor(e){super(e)}},Qp=class extends Y{constructor(e){super(e)}},aw=class extends Y{constructor(e){super(e)}},e1=[0,et,[0,et],iw,-1],lw=[0,et,Ze,ft],Xp=[0,et,Ze],cw=[0,et,lw,Xp,Ze],AS=Jr(479097054,aw);lt[479097054]=[0,et,cw,e1],lt[463370452]=e1,lt[464864288]=lw;var CS=Jr(462713202,Qp);lt[462713202]=cw,lt[474472470]=Xp;var IS=class extends Y{constructor(e){super(e)}},uw=class extends Y{constructor(e){super(e)}},dw=class extends Y{constructor(e){super(e)}},hw=class extends Y{constructor(e){super(e)}},Zp=[0,et,Ze,-1,ft],nf=[0,et,Ze,Ye];hw.prototype.g=Nu([0,et,Xp,[0,et],Yp,rf,Zp,nf]);var fw=class extends Y{constructor(e){super(e)}},PS=Jr(456383383,fw);lt[456383383]=[0,et,tw];var pw=class extends Y{constructor(e){super(e)}},OS=Jr(476348187,pw);lt[476348187]=[0,et,jS];var mw=class extends Y{constructor(e){super(e)}},t1=class extends Y{constructor(e){super(e)}},gw=[0,tr,-1],RS=Jr(458105876,class extends Y{constructor(e){super(e)}g(){let e;var t=this.v;const r=0|t[q];return e=Zt(this,r),t=function(n,s,i,a){var l=t1;!a&&no(n)&&(i=0|(s=n.v)[q]);var c=mn(s,2);if(n=!1,c==null){if(a)return Lg();c=[]}else if(c.constructor===pn){if(!(2&c.J)||a)return c;c=c.V()}else Array.isArray(c)?n=!!(2&(0|c[q])):c=[];if(a){if(!c.length)return Lg();n||(n=!0,Wa(c))}else n&&(n=!1,Ia(c),c=lv(c));return!n&&32&i&&Ba(c,32),i=at(s,i,2,a=new pn(c,l,Rj,void 0)),n||Ds(s,i),a}(this,t,r,e),!e&&t1&&(t.ra=!0),t}});lt[458105876]=[0,gw,sS,[!0,Jn,[0,Ae,-1,jt]],[0,qa,Ye,tr]];var em=class extends Y{constructor(e){super(e)}},yw=Jr(458105758,em);lt[458105758]=[0,et,Ae,gw];var Id=class extends Y{constructor(e){super(e)}},r1=[0,oS,-1,Ss],LS=class extends Y{constructor(e){super(e)}},xw=class extends Y{constructor(e){super(e)}},sf=[1,2];xw.prototype.g=Nu([0,sf,Ge,r1,Ge,[0,ht,r1]]);var vw=class extends Y{constructor(e){super(e)}},$S=Jr(443442058,vw);lt[443442058]=[0,et,Ae,ft,Ze,jt,-1,Ye,Ze],lt[514774813]=Zp;var ww=class extends Y{constructor(e){super(e)}},DS=Jr(516587230,ww);function of(e,t){return t=t?t.clone():new qp,e.displayNamesLocale!==void 0?Ee(t,1,Ga(e.displayNamesLocale)):e.displayNamesLocale===void 0&&Ee(t,1),e.maxResults!==void 0?yn(t,2,e.maxResults):"maxResults"in e&&Ee(t,2),e.scoreThreshold!==void 0?Z(t,3,e.scoreThreshold):"scoreThreshold"in e&&Ee(t,3),e.categoryAllowlist!==void 0?$c(t,4,e.categoryAllowlist):"categoryAllowlist"in e&&Ee(t,4),e.categoryDenylist!==void 0?$c(t,5,e.categoryDenylist):"categoryDenylist"in e&&Ee(t,5),t}function bw(e){const t=Number(e);return Number.isSafeInteger(t)?t:String(e)}function tm(e,t=-1,r=""){return{categories:e.map(n=>({index:fr(n,1)??0??-1,score:Ke(n,2)??0,categoryName:wt(Le(n,3))??""??"",displayName:wt(Le(n,4))??""??""})),headIndex:t,headName:r}}function MS(e){const t={classifications:gn(e,vS,1).map(r=>{var n;return tm(((n=be(r,qv,4))==null?void 0:n.g())??[],fr(r,2)??0,wt(Le(r,3))??"")})};return function(r){return Oj(gp?Le(r,2,void 0,void 0,Rc):Le(r,2))}(e)!=null&&(t.timestampMs=bw(fv(e))),t}function _w(e){var a,l;var t=ys(e,3,Wr,gs()),r=ys(e,2,to,gs()),n=ys(e,1,wt,gs()),s=ys(e,9,wt,gs());const i={categories:[],keypoints:[]};for(let c=0;c<t.length;c++)i.categories.push({score:t[c],index:r[c]??-1,categoryName:n[c]??"",displayName:s[c]??""});if((t=(a=be(e,Cd,4))==null?void 0:a.l())&&(i.boundingBox={originX:fr(t,1,Sn)??0,originY:fr(t,2,Sn)??0,width:fr(t,3,Sn)??0,height:fr(t,4,Sn)??0,angle:0}),(l=be(e,Cd,4))==null?void 0:l.g().length)for(const c of be(e,Cd,4).g())i.keypoints.push({x:Le(c,1,void 0,Sn,Wr)??0,y:Le(c,2,void 0,Sn,Wr)??0,score:Le(c,4,void 0,Sn,Wr)??0,label:wt(Le(c,3,void 0,Sn))??""});return i}function Au(e){const t=[];for(const r of gn(e,Xv,1))t.push({x:Ke(r,1)??0,y:Ke(r,2)??0,z:Ke(r,3)??0,visibility:Ke(r,4)??0});return t}function ea(e){const t=[];for(const r of gn(e,Qv,1))t.push({x:Ke(r,1)??0,y:Ke(r,2)??0,z:Ke(r,3)??0,visibility:Ke(r,4)??0});return t}function n1(e){return Array.from(e,t=>t>127?t-256:t)}function s1(e,t){if(e.length!==t.length)throw Error(`Cannot compute cosine similarity between embeddings of different sizes (${e.length} vs. ${t.length}).`);let r=0,n=0,s=0;for(let i=0;i<e.length;i++)r+=e[i]*t[i],n+=e[i]*e[i],s+=t[i]*t[i];if(n<=0||s<=0)throw Error("Cannot compute cosine similarity on embedding with 0 norm.");return r/Math.sqrt(n*s)}let Ml;lt[516587230]=[0,et,Zp,nf,Ze],lt[518928384]=nf;const FS=new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11]);async function kw(){if(Ml===void 0)try{await WebAssembly.instantiate(FS),Ml=!0}catch{Ml=!1}return Ml}async function Ao(e,t=dS``){const r=await kw()?"wasm_internal":"wasm_nosimd_internal";return{wasmLoaderPath:`${t}/${e}_${r}.js`,wasmBinaryPath:`${t}/${e}_${r}.wasm`}}var ls=class{};function jw(){var e=navigator;return typeof OffscreenCanvas<"u"&&(!function(t=navigator){return(t=t.userAgent).includes("Safari")&&!t.includes("Chrome")}(e)||!!((e=e.userAgent.match(/Version\/([\d]+).*Safari/))&&e.length>=1&&Number(e[1])>=17))}async function i1(e){if(typeof importScripts!="function"){const t=document.createElement("script");return t.src=e.toString(),t.crossOrigin="anonymous",new Promise((r,n)=>{t.addEventListener("load",()=>{r()},!1),t.addEventListener("error",s=>{n(s)},!1),document.body.appendChild(t)})}try{importScripts(e.toString())}catch(t){if(!(t instanceof TypeError))throw t;await self.import(e.toString())}}function Sw(e){return e.videoWidth!==void 0?[e.videoWidth,e.videoHeight]:e.naturalWidth!==void 0?[e.naturalWidth,e.naturalHeight]:e.displayWidth!==void 0?[e.displayWidth,e.displayHeight]:[e.width,e.height]}function J(e,t,r){e.m||console.error("No wasm multistream support detected: ensure dependency inclusion of :gl_graph_runner_internal_multi_input target"),r(t=e.i.stringToNewUTF8(t)),e.i._free(t)}function o1(e,t,r){if(!e.i.canvas)throw Error("No OpenGL canvas configured.");if(r?e.i._bindTextureToStream(r):e.i._bindTextureToCanvas(),!(r=e.i.canvas.getContext("webgl2")||e.i.canvas.getContext("webgl")))throw Error("Failed to obtain WebGL context from the provided canvas. `getContext()` should only be invoked with `webgl` or `webgl2`.");e.i.gpuOriginForWebTexturesIsBottomLeft&&r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!0),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,t),e.i.gpuOriginForWebTexturesIsBottomLeft&&r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!1);const[n,s]=Sw(t);return!e.l||n===e.i.canvas.width&&s===e.i.canvas.height||(e.i.canvas.width=n,e.i.canvas.height=s),[n,s]}function a1(e,t,r){e.m||console.error("No wasm multistream support detected: ensure dependency inclusion of :gl_graph_runner_internal_multi_input target");const n=new Uint32Array(t.length);for(let s=0;s<t.length;s++)n[s]=e.i.stringToNewUTF8(t[s]);t=e.i._malloc(4*n.length),e.i.HEAPU32.set(n,t>>2),r(t);for(const s of n)e.i._free(s);e.i._free(t)}function Mr(e,t,r){e.i.simpleListeners=e.i.simpleListeners||{},e.i.simpleListeners[t]=r}function Nn(e,t,r){let n=[];e.i.simpleListeners=e.i.simpleListeners||{},e.i.simpleListeners[t]=(s,i,a)=>{i?(r(n,a),n=[]):n.push(s)}}ls.forVisionTasks=function(e){return Ao("vision",e)},ls.forTextTasks=function(e){return Ao("text",e)},ls.forGenAiExperimentalTasks=function(e){return Ao("genai_experimental",e)},ls.forGenAiTasks=function(e){return Ao("genai",e)},ls.forAudioTasks=function(e){return Ao("audio",e)},ls.isSimdSupported=function(){return kw()};async function US(e,t,r,n){return e=await(async(s,i,a,l,c)=>{if(i&&await i1(i),!self.ModuleFactory||a&&(await i1(a),!self.ModuleFactory))throw Error("ModuleFactory not set.");return self.Module&&c&&((i=self.Module).locateFile=c.locateFile,c.mainScriptUrlOrBlob&&(i.mainScriptUrlOrBlob=c.mainScriptUrlOrBlob)),c=await self.ModuleFactory(self.Module||c),self.ModuleFactory=self.Module=void 0,new s(c,l)})(e,r.wasmLoaderPath,r.assetLoaderPath,t,{locateFile:s=>s.endsWith(".wasm")?r.wasmBinaryPath.toString():r.assetBinaryPath&&s.endsWith(".data")?r.assetBinaryPath.toString():s}),await e.o(n),e}function Pd(e,t){const r=be(e.baseOptions,Uc,1)||new Uc;typeof t=="string"?(Ee(r,2,Ga(t)),Ee(r,1)):t instanceof Uint8Array&&(Ee(r,1,vp(t,!1)),Ee(r,2)),se(e.baseOptions,0,1,r)}function l1(e){try{const t=e.H.length;if(t===1)throw Error(e.H[0].message);if(t>1)throw Error("Encountered multiple errors: "+e.H.map(r=>r.message).join(", "))}finally{e.H=[]}}function V(e,t){e.C=Math.max(e.C,t)}function Cu(e,t){e.B=new zt,er(e.B,2,"PassThroughCalculator"),$e(e.B,"free_memory"),ye(e.B,"free_memory_unused_out"),Ue(t,"free_memory"),wr(t,e.B)}function Hi(e,t){$e(e.B,t),ye(e.B,t+"_unused_out")}function Iu(e){e.g.addBoolToStream(!0,"free_memory",e.C)}var af=class{constructor(e){this.g=e,this.H=[],this.C=0,this.g.setAutoRenderToScreen(!1)}l(e,t=!0){var r,n,s,i,a,l;if(t){const c=e.baseOptions||{};if((r=e.baseOptions)!=null&&r.modelAssetBuffer&&((n=e.baseOptions)!=null&&n.modelAssetPath))throw Error("Cannot set both baseOptions.modelAssetPath and baseOptions.modelAssetBuffer");if(!((s=be(this.baseOptions,Uc,1))!=null&&s.g()||(i=be(this.baseOptions,Uc,1))!=null&&i.l()||(a=e.baseOptions)!=null&&a.modelAssetBuffer||(l=e.baseOptions)!=null&&l.modelAssetPath))throw Error("Either baseOptions.modelAssetPath or baseOptions.modelAssetBuffer must be set");if(function(u,d){let f=be(u.baseOptions,Zg,3);if(!f){var h=f=new Zg,m=new Kg;Xo(h,4,sc,m)}"delegate"in d&&(d.delegate==="GPU"?(d=f,h=new hS,Xo(d,2,sc,h)):(d=f,h=new Kg,Xo(d,4,sc,h))),se(u.baseOptions,0,3,f)}(this,c),c.modelAssetPath)return fetch(c.modelAssetPath.toString()).then(u=>{if(u.ok)return u.arrayBuffer();throw Error(`Failed to fetch model: ${c.modelAssetPath} (${u.status})`)}).then(u=>{try{this.g.i.FS_unlink("/model.dat")}catch{}this.g.i.FS_createDataFile("/","model.dat",new Uint8Array(u),!0,!1,!1),Pd(this,"/model.dat"),this.m(),this.L()});if(c.modelAssetBuffer instanceof Uint8Array)Pd(this,c.modelAssetBuffer);else if(c.modelAssetBuffer)return async function(u){const d=[];for(var f=0;;){const{done:h,value:m}=await u.read();if(h)break;d.push(m),f+=m.length}if(d.length===0)return new Uint8Array(0);if(d.length===1)return d[0];u=new Uint8Array(f),f=0;for(const h of d)u.set(h,f),f+=h.length;return u}(c.modelAssetBuffer).then(u=>{Pd(this,u),this.m(),this.L()})}return this.m(),this.L(),Promise.resolve()}L(){}ca(){let e;if(this.g.ca(t=>{e=fS(t)}),!e)throw Error("Failed to retrieve CalculatorGraphConfig");return e}setGraph(e,t){this.g.attachErrorListener((r,n)=>{this.H.push(Error(n))}),this.g.Ja(),this.g.setGraph(e,t),this.B=void 0,l1(this)}finishProcessing(){this.g.finishProcessing(),l1(this)}close(){this.B=void 0,this.g.closeGraph()}};function Hn(e,t){if(!e)throw Error(`Unable to obtain required WebGL resource: ${t}`);return e}af.prototype.close=af.prototype.close;class zS{constructor(t,r,n,s){this.g=t,this.h=r,this.m=n,this.l=s}bind(){this.g.bindVertexArray(this.h)}close(){this.g.deleteVertexArray(this.h),this.g.deleteBuffer(this.m),this.g.deleteBuffer(this.l)}}function c1(e,t,r){const n=e.g;if(r=Hn(n.createShader(r),"Failed to create WebGL shader"),n.shaderSource(r,t),n.compileShader(r),!n.getShaderParameter(r,n.COMPILE_STATUS))throw Error(`Could not compile WebGL shader: ${n.getShaderInfoLog(r)}`);return n.attachShader(e.h,r),r}function u1(e,t){const r=e.g,n=Hn(r.createVertexArray(),"Failed to create vertex array");r.bindVertexArray(n);const s=Hn(r.createBuffer(),"Failed to create buffer");r.bindBuffer(r.ARRAY_BUFFER,s),r.enableVertexAttribArray(e.O),r.vertexAttribPointer(e.O,2,r.FLOAT,!1,0,0),r.bufferData(r.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),r.STATIC_DRAW);const i=Hn(r.createBuffer(),"Failed to create buffer");return r.bindBuffer(r.ARRAY_BUFFER,i),r.enableVertexAttribArray(e.L),r.vertexAttribPointer(e.L,2,r.FLOAT,!1,0,0),r.bufferData(r.ARRAY_BUFFER,new Float32Array(t?[0,1,0,0,1,0,1,1]:[0,0,0,1,1,1,1,0]),r.STATIC_DRAW),r.bindBuffer(r.ARRAY_BUFFER,null),r.bindVertexArray(null),new zS(r,n,s,i)}function rm(e,t){if(e.g){if(t!==e.g)throw Error("Cannot change GL context once initialized")}else e.g=t}function BS(e,t,r,n){return rm(e,t),e.h||(e.m(),e.D()),r?(e.u||(e.u=u1(e,!0)),r=e.u):(e.A||(e.A=u1(e,!1)),r=e.A),t.useProgram(e.h),r.bind(),e.l(),e=n(),r.g.bindVertexArray(null),e}function Nw(e,t,r){return rm(e,t),e=Hn(t.createTexture(),"Failed to create texture"),t.bindTexture(t.TEXTURE_2D,e),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,r??t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,r??t.LINEAR),t.bindTexture(t.TEXTURE_2D,null),e}function Ew(e,t,r){rm(e,t),e.B||(e.B=Hn(t.createFramebuffer(),"Failed to create framebuffe.")),t.bindFramebuffer(t.FRAMEBUFFER,e.B),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0)}function WS(e){var t;(t=e.g)==null||t.bindFramebuffer(e.g.FRAMEBUFFER,null)}var Tw=class{H(){return`
  precision mediump float;
  varying vec2 vTex;
  uniform sampler2D inputTexture;
  void main() {
    gl_FragColor = texture2D(inputTexture, vTex);
  }
 `}m(){const e=this.g;if(this.h=Hn(e.createProgram(),"Failed to create WebGL program"),this.X=c1(this,`
  attribute vec2 aVertex;
  attribute vec2 aTex;
  varying vec2 vTex;
  void main(void) {
    gl_Position = vec4(aVertex, 0.0, 1.0);
    vTex = aTex;
  }`,e.VERTEX_SHADER),this.W=c1(this,this.H(),e.FRAGMENT_SHADER),e.linkProgram(this.h),!e.getProgramParameter(this.h,e.LINK_STATUS))throw Error(`Error during program linking: ${e.getProgramInfoLog(this.h)}`);this.O=e.getAttribLocation(this.h,"aVertex"),this.L=e.getAttribLocation(this.h,"aTex")}D(){}l(){}close(){if(this.h){const e=this.g;e.deleteProgram(this.h),e.deleteShader(this.X),e.deleteShader(this.W)}this.B&&this.g.deleteFramebuffer(this.B),this.A&&this.A.close(),this.u&&this.u.close()}};function on(e,t){switch(t){case 0:return e.g.find(r=>r instanceof Uint8Array);case 1:return e.g.find(r=>r instanceof Float32Array);case 2:return e.g.find(r=>typeof WebGLTexture<"u"&&r instanceof WebGLTexture);default:throw Error(`Type is not supported: ${t}`)}}function lf(e){var t=on(e,1);if(!t){if(t=on(e,0))t=new Float32Array(t).map(n=>n/255);else{t=new Float32Array(e.width*e.height);const n=Gi(e);var r=nm(e);if(Ew(r,n,Aw(e)),"iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"document"in self&&"ontouchend"in self.document){r=new Float32Array(e.width*e.height*4),n.readPixels(0,0,e.width,e.height,n.RGBA,n.FLOAT,r);for(let s=0,i=0;s<t.length;++s,i+=4)t[s]=r[i]}else n.readPixels(0,0,e.width,e.height,n.RED,n.FLOAT,t)}e.g.push(t)}return t}function Aw(e){let t=on(e,2);if(!t){const r=Gi(e);t=Iw(e);const n=lf(e),s=Cw(e);r.texImage2D(r.TEXTURE_2D,0,s,e.width,e.height,0,r.RED,r.FLOAT,n),cf(e)}return t}function Gi(e){if(!e.canvas)throw Error("Conversion to different image formats require that a canvas is passed when initializing the image.");return e.h||(e.h=Hn(e.canvas.getContext("webgl2"),"You cannot use a canvas that is already bound to a different type of rendering context.")),e.h}function Cw(e){if(e=Gi(e),!Fl)if(e.getExtension("EXT_color_buffer_float")&&e.getExtension("OES_texture_float_linear")&&e.getExtension("EXT_float_blend"))Fl=e.R32F;else{if(!e.getExtension("EXT_color_buffer_half_float"))throw Error("GPU does not fully support 4-channel float32 or float16 formats");Fl=e.R16F}return Fl}function nm(e){return e.l||(e.l=new Tw),e.l}function Iw(e){const t=Gi(e);t.viewport(0,0,e.width,e.height),t.activeTexture(t.TEXTURE0);let r=on(e,2);return r||(r=Nw(nm(e),t,e.m?t.LINEAR:t.NEAREST),e.g.push(r),e.j=!0),t.bindTexture(t.TEXTURE_2D,r),r}function cf(e){e.h.bindTexture(e.h.TEXTURE_2D,null)}var Fl,ut=class{constructor(e,t,r,n,s,i,a){this.g=e,this.m=t,this.j=r,this.canvas=n,this.l=s,this.width=i,this.height=a,this.j&&--d1===0&&console.error("You seem to be creating MPMask instances without invoking .close(). This leaks resources.")}Fa(){return!!on(this,0)}ka(){return!!on(this,1)}R(){return!!on(this,2)}ja(){return(t=on(e=this,0))||(t=lf(e),t=new Uint8Array(t.map(r=>Math.round(255*r))),e.g.push(t)),t;var e,t}ia(){return lf(this)}N(){return Aw(this)}clone(){const e=[];for(const t of this.g){let r;if(t instanceof Uint8Array)r=new Uint8Array(t);else if(t instanceof Float32Array)r=new Float32Array(t);else{if(!(t instanceof WebGLTexture))throw Error(`Type is not supported: ${t}`);{const n=Gi(this),s=nm(this);n.activeTexture(n.TEXTURE1),r=Nw(s,n,this.m?n.LINEAR:n.NEAREST),n.bindTexture(n.TEXTURE_2D,r);const i=Cw(this);n.texImage2D(n.TEXTURE_2D,0,i,this.width,this.height,0,n.RED,n.FLOAT,null),n.bindTexture(n.TEXTURE_2D,null),Ew(s,n,r),BS(s,n,!1,()=>{Iw(this),n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT),n.drawArrays(n.TRIANGLE_FAN,0,4),cf(this)}),WS(s),cf(this)}}e.push(r)}return new ut(e,this.m,this.R(),this.canvas,this.l,this.width,this.height)}close(){this.j&&Gi(this).deleteTexture(on(this,2)),d1=-1}};ut.prototype.close=ut.prototype.close,ut.prototype.clone=ut.prototype.clone,ut.prototype.getAsWebGLTexture=ut.prototype.N,ut.prototype.getAsFloat32Array=ut.prototype.ia,ut.prototype.getAsUint8Array=ut.prototype.ja,ut.prototype.hasWebGLTexture=ut.prototype.R,ut.prototype.hasFloat32Array=ut.prototype.ka,ut.prototype.hasUint8Array=ut.prototype.Fa;var d1=250;function Or(...e){return e.map(([t,r])=>({start:t,end:r}))}const VS=function(e){return class extends e{Ja(){this.i._registerModelResourcesGraphService()}}}((h1=class{constructor(e,t){this.l=!0,this.i=e,this.g=null,this.h=0,this.m=typeof this.i._addIntToInputStream=="function",t!==void 0?this.i.canvas=t:jw()?this.i.canvas=new OffscreenCanvas(1,1):(console.warn("OffscreenCanvas not supported and GraphRunner constructor glCanvas parameter is undefined. Creating backup canvas."),this.i.canvas=document.createElement("canvas"))}async initializeGraph(e){const t=await(await fetch(e)).arrayBuffer();e=!(e.endsWith(".pbtxt")||e.endsWith(".textproto")),this.setGraph(new Uint8Array(t),e)}setGraphFromString(e){this.setGraph(new TextEncoder().encode(e),!1)}setGraph(e,t){const r=e.length,n=this.i._malloc(r);this.i.HEAPU8.set(e,n),t?this.i._changeBinaryGraph(r,n):this.i._changeTextGraph(r,n),this.i._free(n)}configureAudio(e,t,r,n,s){this.i._configureAudio||console.warn('Attempting to use configureAudio without support for input audio. Is build dep ":gl_graph_runner_audio" missing?'),J(this,n||"input_audio",i=>{J(this,s=s||"audio_header",a=>{this.i._configureAudio(i,a,e,t??0,r)})})}setAutoResizeCanvas(e){this.l=e}setAutoRenderToScreen(e){this.i._setAutoRenderToScreen(e)}setGpuBufferVerticalFlip(e){this.i.gpuOriginForWebTexturesIsBottomLeft=e}ca(e){Mr(this,"__graph_config__",t=>{e(t)}),J(this,"__graph_config__",t=>{this.i._getGraphConfig(t,void 0)}),delete this.i.simpleListeners.__graph_config__}attachErrorListener(e){this.i.errorListener=e}attachEmptyPacketListener(e,t){this.i.emptyPacketListeners=this.i.emptyPacketListeners||{},this.i.emptyPacketListeners[e]=t}addAudioToStream(e,t,r){this.addAudioToStreamWithShape(e,0,0,t,r)}addAudioToStreamWithShape(e,t,r,n,s){const i=4*e.length;this.h!==i&&(this.g&&this.i._free(this.g),this.g=this.i._malloc(i),this.h=i),this.i.HEAPF32.set(e,this.g/4),J(this,n,a=>{this.i._addAudioToInputStream(this.g,t,r,a,s)})}addGpuBufferToStream(e,t,r){J(this,t,n=>{const[s,i]=o1(this,e,n);this.i._addBoundTextureToStream(n,s,i,r)})}addBoolToStream(e,t,r){J(this,t,n=>{this.i._addBoolToInputStream(e,n,r)})}addDoubleToStream(e,t,r){J(this,t,n=>{this.i._addDoubleToInputStream(e,n,r)})}addFloatToStream(e,t,r){J(this,t,n=>{this.i._addFloatToInputStream(e,n,r)})}addIntToStream(e,t,r){J(this,t,n=>{this.i._addIntToInputStream(e,n,r)})}addUintToStream(e,t,r){J(this,t,n=>{this.i._addUintToInputStream(e,n,r)})}addStringToStream(e,t,r){J(this,t,n=>{J(this,e,s=>{this.i._addStringToInputStream(s,n,r)})})}addStringRecordToStream(e,t,r){J(this,t,n=>{a1(this,Object.keys(e),s=>{a1(this,Object.values(e),i=>{this.i._addFlatHashMapToInputStream(s,i,Object.keys(e).length,n,r)})})})}addProtoToStream(e,t,r,n){J(this,r,s=>{J(this,t,i=>{const a=this.i._malloc(e.length);this.i.HEAPU8.set(e,a),this.i._addProtoToInputStream(a,e.length,i,s,n),this.i._free(a)})})}addEmptyPacketToStream(e,t){J(this,e,r=>{this.i._addEmptyPacketToInputStream(r,t)})}addBoolVectorToStream(e,t,r){J(this,t,n=>{const s=this.i._allocateBoolVector(e.length);if(!s)throw Error("Unable to allocate new bool vector on heap.");for(const i of e)this.i._addBoolVectorEntry(s,i);this.i._addBoolVectorToInputStream(s,n,r)})}addDoubleVectorToStream(e,t,r){J(this,t,n=>{const s=this.i._allocateDoubleVector(e.length);if(!s)throw Error("Unable to allocate new double vector on heap.");for(const i of e)this.i._addDoubleVectorEntry(s,i);this.i._addDoubleVectorToInputStream(s,n,r)})}addFloatVectorToStream(e,t,r){J(this,t,n=>{const s=this.i._allocateFloatVector(e.length);if(!s)throw Error("Unable to allocate new float vector on heap.");for(const i of e)this.i._addFloatVectorEntry(s,i);this.i._addFloatVectorToInputStream(s,n,r)})}addIntVectorToStream(e,t,r){J(this,t,n=>{const s=this.i._allocateIntVector(e.length);if(!s)throw Error("Unable to allocate new int vector on heap.");for(const i of e)this.i._addIntVectorEntry(s,i);this.i._addIntVectorToInputStream(s,n,r)})}addUintVectorToStream(e,t,r){J(this,t,n=>{const s=this.i._allocateUintVector(e.length);if(!s)throw Error("Unable to allocate new unsigned int vector on heap.");for(const i of e)this.i._addUintVectorEntry(s,i);this.i._addUintVectorToInputStream(s,n,r)})}addStringVectorToStream(e,t,r){J(this,t,n=>{const s=this.i._allocateStringVector(e.length);if(!s)throw Error("Unable to allocate new string vector on heap.");for(const i of e)J(this,i,a=>{this.i._addStringVectorEntry(s,a)});this.i._addStringVectorToInputStream(s,n,r)})}addBoolToInputSidePacket(e,t){J(this,t,r=>{this.i._addBoolToInputSidePacket(e,r)})}addDoubleToInputSidePacket(e,t){J(this,t,r=>{this.i._addDoubleToInputSidePacket(e,r)})}addFloatToInputSidePacket(e,t){J(this,t,r=>{this.i._addFloatToInputSidePacket(e,r)})}addIntToInputSidePacket(e,t){J(this,t,r=>{this.i._addIntToInputSidePacket(e,r)})}addUintToInputSidePacket(e,t){J(this,t,r=>{this.i._addUintToInputSidePacket(e,r)})}addStringToInputSidePacket(e,t){J(this,t,r=>{J(this,e,n=>{this.i._addStringToInputSidePacket(n,r)})})}addProtoToInputSidePacket(e,t,r){J(this,r,n=>{J(this,t,s=>{const i=this.i._malloc(e.length);this.i.HEAPU8.set(e,i),this.i._addProtoToInputSidePacket(i,e.length,s,n),this.i._free(i)})})}addBoolVectorToInputSidePacket(e,t){J(this,t,r=>{const n=this.i._allocateBoolVector(e.length);if(!n)throw Error("Unable to allocate new bool vector on heap.");for(const s of e)this.i._addBoolVectorEntry(n,s);this.i._addBoolVectorToInputSidePacket(n,r)})}addDoubleVectorToInputSidePacket(e,t){J(this,t,r=>{const n=this.i._allocateDoubleVector(e.length);if(!n)throw Error("Unable to allocate new double vector on heap.");for(const s of e)this.i._addDoubleVectorEntry(n,s);this.i._addDoubleVectorToInputSidePacket(n,r)})}addFloatVectorToInputSidePacket(e,t){J(this,t,r=>{const n=this.i._allocateFloatVector(e.length);if(!n)throw Error("Unable to allocate new float vector on heap.");for(const s of e)this.i._addFloatVectorEntry(n,s);this.i._addFloatVectorToInputSidePacket(n,r)})}addIntVectorToInputSidePacket(e,t){J(this,t,r=>{const n=this.i._allocateIntVector(e.length);if(!n)throw Error("Unable to allocate new int vector on heap.");for(const s of e)this.i._addIntVectorEntry(n,s);this.i._addIntVectorToInputSidePacket(n,r)})}addUintVectorToInputSidePacket(e,t){J(this,t,r=>{const n=this.i._allocateUintVector(e.length);if(!n)throw Error("Unable to allocate new unsigned int vector on heap.");for(const s of e)this.i._addUintVectorEntry(n,s);this.i._addUintVectorToInputSidePacket(n,r)})}addStringVectorToInputSidePacket(e,t){J(this,t,r=>{const n=this.i._allocateStringVector(e.length);if(!n)throw Error("Unable to allocate new string vector on heap.");for(const s of e)J(this,s,i=>{this.i._addStringVectorEntry(n,i)});this.i._addStringVectorToInputSidePacket(n,r)})}attachBoolListener(e,t){Mr(this,e,t),J(this,e,r=>{this.i._attachBoolListener(r)})}attachBoolVectorListener(e,t){Nn(this,e,t),J(this,e,r=>{this.i._attachBoolVectorListener(r)})}attachIntListener(e,t){Mr(this,e,t),J(this,e,r=>{this.i._attachIntListener(r)})}attachIntVectorListener(e,t){Nn(this,e,t),J(this,e,r=>{this.i._attachIntVectorListener(r)})}attachUintListener(e,t){Mr(this,e,t),J(this,e,r=>{this.i._attachUintListener(r)})}attachUintVectorListener(e,t){Nn(this,e,t),J(this,e,r=>{this.i._attachUintVectorListener(r)})}attachDoubleListener(e,t){Mr(this,e,t),J(this,e,r=>{this.i._attachDoubleListener(r)})}attachDoubleVectorListener(e,t){Nn(this,e,t),J(this,e,r=>{this.i._attachDoubleVectorListener(r)})}attachFloatListener(e,t){Mr(this,e,t),J(this,e,r=>{this.i._attachFloatListener(r)})}attachFloatVectorListener(e,t){Nn(this,e,t),J(this,e,r=>{this.i._attachFloatVectorListener(r)})}attachStringListener(e,t){Mr(this,e,t),J(this,e,r=>{this.i._attachStringListener(r)})}attachStringVectorListener(e,t){Nn(this,e,t),J(this,e,r=>{this.i._attachStringVectorListener(r)})}attachProtoListener(e,t,r){Mr(this,e,t),J(this,e,n=>{this.i._attachProtoListener(n,r||!1)})}attachProtoVectorListener(e,t,r){Nn(this,e,t),J(this,e,n=>{this.i._attachProtoVectorListener(n,r||!1)})}attachAudioListener(e,t,r){this.i._attachAudioListener||console.warn('Attempting to use attachAudioListener without support for output audio. Is build dep ":gl_graph_runner_audio_out" missing?'),Mr(this,e,(n,s)=>{n=new Float32Array(n.buffer,n.byteOffset,n.length/4),t(n,s)}),J(this,e,n=>{this.i._attachAudioListener(n,r||!1)})}finishProcessing(){this.i._waitUntilIdle()}closeGraph(){this.i._closeGraph(),this.i.simpleListeners=void 0,this.i.emptyPacketListeners=void 0}},class extends h1{get ga(){return this.i}pa(e,t,r){J(this,t,n=>{const[s,i]=o1(this,e,n);this.ga._addBoundTextureAsImageToStream(n,s,i,r)})}Z(e,t){Mr(this,e,t),J(this,e,r=>{this.ga._attachImageListener(r)})}aa(e,t){Nn(this,e,t),J(this,e,r=>{this.ga._attachImageVectorListener(r)})}}));var h1,Rr=class extends VS{};async function ve(e,t,r){return async function(n,s,i,a){return US(n,s,i,a)}(e,r.canvas??(jw()?void 0:document.createElement("canvas")),t,r)}function Pw(e,t,r,n){if(e.U){const i=new Zv;if(r!=null&&r.regionOfInterest){if(!e.oa)throw Error("This task doesn't support region-of-interest.");var s=r.regionOfInterest;if(s.left>=s.right||s.top>=s.bottom)throw Error("Expected RectF with left < right and top < bottom.");if(s.left<0||s.top<0||s.right>1||s.bottom>1)throw Error("Expected RectF values to be in [0,1].");Z(i,1,(s.left+s.right)/2),Z(i,2,(s.top+s.bottom)/2),Z(i,4,s.right-s.left),Z(i,3,s.bottom-s.top)}else Z(i,1,.5),Z(i,2,.5),Z(i,4,1),Z(i,3,1);if(r!=null&&r.rotationDegrees){if((r==null?void 0:r.rotationDegrees)%90!=0)throw Error("Expected rotation to be a multiple of 90.");if(Z(i,5,-Math.PI*r.rotationDegrees/180),(r==null?void 0:r.rotationDegrees)%180!=0){const[a,l]=Sw(t);r=Ke(i,3)*l/a,s=Ke(i,4)*a/l,Z(i,4,r),Z(i,3,s)}}e.g.addProtoToStream(i.g(),"mediapipe.NormalizedRect",e.U,n)}e.g.pa(t,e.X,n??performance.now()),e.finishProcessing()}function Lr(e,t,r){var n;if((n=e.baseOptions)!=null&&n.g())throw Error("Task is not initialized with image mode. 'runningMode' must be set to 'IMAGE'.");Pw(e,t,r,e.C+1)}function Qr(e,t,r,n){var s;if(!((s=e.baseOptions)!=null&&s.g()))throw Error("Task is not initialized with video mode. 'runningMode' must be set to 'VIDEO'.");Pw(e,t,r,n)}function Ki(e,t,r,n){var s=t.data;const i=t.width,a=i*(t=t.height);if((s instanceof Uint8Array||s instanceof Float32Array)&&s.length!==a)throw Error("Unsupported channel count: "+s.length/a);return e=new ut([s],r,!1,e.g.i.canvas,e.P,i,t),n?e.clone():e}var rr=class extends af{constructor(e,t,r,n){super(e),this.g=e,this.X=t,this.U=r,this.oa=n,this.P=new Tw}l(e,t=!0){if("runningMode"in e&&Ee(this.baseOptions,2,Oa(!!e.runningMode&&e.runningMode!=="IMAGE")),e.canvas!==void 0&&this.g.i.canvas!==e.canvas)throw Error("You must create a new task to reset the canvas.");return super.l(e,t)}close(){this.P.close(),super.close()}};rr.prototype.close=rr.prototype.close;var ar=class extends rr{constructor(e,t){super(new Rr(e,t),"image_in","norm_rect_in",!1),this.j={detections:[]},se(e=this.h=new Tu,0,1,t=new He),Z(this.h,2,.5),Z(this.h,3,.3)}get baseOptions(){return be(this.h,He,1)}set baseOptions(e){se(this.h,0,1,e)}o(e){return"minDetectionConfidence"in e&&Z(this.h,2,e.minDetectionConfidence??.5),"minSuppressionThreshold"in e&&Z(this.h,3,e.minSuppressionThreshold??.3),this.l(e)}F(e,t){return this.j={detections:[]},Lr(this,e,t),this.j}G(e,t,r){return this.j={detections:[]},Qr(this,e,r,t),this.j}m(){var e=new or;Ue(e,"image_in"),Ue(e,"norm_rect_in"),ke(e,"detections");const t=new ir;Yr(t,SS,this.h);const r=new zt;er(r,2,"mediapipe.tasks.vision.face_detector.FaceDetectorGraph"),$e(r,"IMAGE:image_in"),$e(r,"NORM_RECT:norm_rect_in"),ye(r,"DETECTIONS:detections"),r.o(t),wr(e,r),this.g.attachProtoVectorListener("detections",(n,s)=>{for(const i of n)n=Jv(i),this.j.detections.push(_w(n));V(this,s)}),this.g.attachEmptyPacketListener("detections",n=>{V(this,n)}),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};ar.prototype.detectForVideo=ar.prototype.G,ar.prototype.detect=ar.prototype.F,ar.prototype.setOptions=ar.prototype.o,ar.createFromModelPath=async function(e,t){return ve(ar,e,{baseOptions:{modelAssetPath:t}})},ar.createFromModelBuffer=function(e,t){return ve(ar,e,{baseOptions:{modelAssetBuffer:t}})},ar.createFromOptions=function(e,t){return ve(ar,e,t)};var sm=Or([61,146],[146,91],[91,181],[181,84],[84,17],[17,314],[314,405],[405,321],[321,375],[375,291],[61,185],[185,40],[40,39],[39,37],[37,0],[0,267],[267,269],[269,270],[270,409],[409,291],[78,95],[95,88],[88,178],[178,87],[87,14],[14,317],[317,402],[402,318],[318,324],[324,308],[78,191],[191,80],[80,81],[81,82],[82,13],[13,312],[312,311],[311,310],[310,415],[415,308]),im=Or([263,249],[249,390],[390,373],[373,374],[374,380],[380,381],[381,382],[382,362],[263,466],[466,388],[388,387],[387,386],[386,385],[385,384],[384,398],[398,362]),om=Or([276,283],[283,282],[282,295],[295,285],[300,293],[293,334],[334,296],[296,336]),Ow=Or([474,475],[475,476],[476,477],[477,474]),am=Or([33,7],[7,163],[163,144],[144,145],[145,153],[153,154],[154,155],[155,133],[33,246],[246,161],[161,160],[160,159],[159,158],[158,157],[157,173],[173,133]),lm=Or([46,53],[53,52],[52,65],[65,55],[70,63],[63,105],[105,66],[66,107]),Rw=Or([469,470],[470,471],[471,472],[472,469]),cm=Or([10,338],[338,297],[297,332],[332,284],[284,251],[251,389],[389,356],[356,454],[454,323],[323,361],[361,288],[288,397],[397,365],[365,379],[379,378],[378,400],[400,377],[377,152],[152,148],[148,176],[176,149],[149,150],[150,136],[136,172],[172,58],[58,132],[132,93],[93,234],[234,127],[127,162],[162,21],[21,54],[54,103],[103,67],[67,109],[109,10]),Lw=[...sm,...im,...om,...am,...lm,...cm],$w=Or([127,34],[34,139],[139,127],[11,0],[0,37],[37,11],[232,231],[231,120],[120,232],[72,37],[37,39],[39,72],[128,121],[121,47],[47,128],[232,121],[121,128],[128,232],[104,69],[69,67],[67,104],[175,171],[171,148],[148,175],[118,50],[50,101],[101,118],[73,39],[39,40],[40,73],[9,151],[151,108],[108,9],[48,115],[115,131],[131,48],[194,204],[204,211],[211,194],[74,40],[40,185],[185,74],[80,42],[42,183],[183,80],[40,92],[92,186],[186,40],[230,229],[229,118],[118,230],[202,212],[212,214],[214,202],[83,18],[18,17],[17,83],[76,61],[61,146],[146,76],[160,29],[29,30],[30,160],[56,157],[157,173],[173,56],[106,204],[204,194],[194,106],[135,214],[214,192],[192,135],[203,165],[165,98],[98,203],[21,71],[71,68],[68,21],[51,45],[45,4],[4,51],[144,24],[24,23],[23,144],[77,146],[146,91],[91,77],[205,50],[50,187],[187,205],[201,200],[200,18],[18,201],[91,106],[106,182],[182,91],[90,91],[91,181],[181,90],[85,84],[84,17],[17,85],[206,203],[203,36],[36,206],[148,171],[171,140],[140,148],[92,40],[40,39],[39,92],[193,189],[189,244],[244,193],[159,158],[158,28],[28,159],[247,246],[246,161],[161,247],[236,3],[3,196],[196,236],[54,68],[68,104],[104,54],[193,168],[168,8],[8,193],[117,228],[228,31],[31,117],[189,193],[193,55],[55,189],[98,97],[97,99],[99,98],[126,47],[47,100],[100,126],[166,79],[79,218],[218,166],[155,154],[154,26],[26,155],[209,49],[49,131],[131,209],[135,136],[136,150],[150,135],[47,126],[126,217],[217,47],[223,52],[52,53],[53,223],[45,51],[51,134],[134,45],[211,170],[170,140],[140,211],[67,69],[69,108],[108,67],[43,106],[106,91],[91,43],[230,119],[119,120],[120,230],[226,130],[130,247],[247,226],[63,53],[53,52],[52,63],[238,20],[20,242],[242,238],[46,70],[70,156],[156,46],[78,62],[62,96],[96,78],[46,53],[53,63],[63,46],[143,34],[34,227],[227,143],[123,117],[117,111],[111,123],[44,125],[125,19],[19,44],[236,134],[134,51],[51,236],[216,206],[206,205],[205,216],[154,153],[153,22],[22,154],[39,37],[37,167],[167,39],[200,201],[201,208],[208,200],[36,142],[142,100],[100,36],[57,212],[212,202],[202,57],[20,60],[60,99],[99,20],[28,158],[158,157],[157,28],[35,226],[226,113],[113,35],[160,159],[159,27],[27,160],[204,202],[202,210],[210,204],[113,225],[225,46],[46,113],[43,202],[202,204],[204,43],[62,76],[76,77],[77,62],[137,123],[123,116],[116,137],[41,38],[38,72],[72,41],[203,129],[129,142],[142,203],[64,98],[98,240],[240,64],[49,102],[102,64],[64,49],[41,73],[73,74],[74,41],[212,216],[216,207],[207,212],[42,74],[74,184],[184,42],[169,170],[170,211],[211,169],[170,149],[149,176],[176,170],[105,66],[66,69],[69,105],[122,6],[6,168],[168,122],[123,147],[147,187],[187,123],[96,77],[77,90],[90,96],[65,55],[55,107],[107,65],[89,90],[90,180],[180,89],[101,100],[100,120],[120,101],[63,105],[105,104],[104,63],[93,137],[137,227],[227,93],[15,86],[86,85],[85,15],[129,102],[102,49],[49,129],[14,87],[87,86],[86,14],[55,8],[8,9],[9,55],[100,47],[47,121],[121,100],[145,23],[23,22],[22,145],[88,89],[89,179],[179,88],[6,122],[122,196],[196,6],[88,95],[95,96],[96,88],[138,172],[172,136],[136,138],[215,58],[58,172],[172,215],[115,48],[48,219],[219,115],[42,80],[80,81],[81,42],[195,3],[3,51],[51,195],[43,146],[146,61],[61,43],[171,175],[175,199],[199,171],[81,82],[82,38],[38,81],[53,46],[46,225],[225,53],[144,163],[163,110],[110,144],[52,65],[65,66],[66,52],[229,228],[228,117],[117,229],[34,127],[127,234],[234,34],[107,108],[108,69],[69,107],[109,108],[108,151],[151,109],[48,64],[64,235],[235,48],[62,78],[78,191],[191,62],[129,209],[209,126],[126,129],[111,35],[35,143],[143,111],[117,123],[123,50],[50,117],[222,65],[65,52],[52,222],[19,125],[125,141],[141,19],[221,55],[55,65],[65,221],[3,195],[195,197],[197,3],[25,7],[7,33],[33,25],[220,237],[237,44],[44,220],[70,71],[71,139],[139,70],[122,193],[193,245],[245,122],[247,130],[130,33],[33,247],[71,21],[21,162],[162,71],[170,169],[169,150],[150,170],[188,174],[174,196],[196,188],[216,186],[186,92],[92,216],[2,97],[97,167],[167,2],[141,125],[125,241],[241,141],[164,167],[167,37],[37,164],[72,38],[38,12],[12,72],[38,82],[82,13],[13,38],[63,68],[68,71],[71,63],[226,35],[35,111],[111,226],[101,50],[50,205],[205,101],[206,92],[92,165],[165,206],[209,198],[198,217],[217,209],[165,167],[167,97],[97,165],[220,115],[115,218],[218,220],[133,112],[112,243],[243,133],[239,238],[238,241],[241,239],[214,135],[135,169],[169,214],[190,173],[173,133],[133,190],[171,208],[208,32],[32,171],[125,44],[44,237],[237,125],[86,87],[87,178],[178,86],[85,86],[86,179],[179,85],[84,85],[85,180],[180,84],[83,84],[84,181],[181,83],[201,83],[83,182],[182,201],[137,93],[93,132],[132,137],[76,62],[62,183],[183,76],[61,76],[76,184],[184,61],[57,61],[61,185],[185,57],[212,57],[57,186],[186,212],[214,207],[207,187],[187,214],[34,143],[143,156],[156,34],[79,239],[239,237],[237,79],[123,137],[137,177],[177,123],[44,1],[1,4],[4,44],[201,194],[194,32],[32,201],[64,102],[102,129],[129,64],[213,215],[215,138],[138,213],[59,166],[166,219],[219,59],[242,99],[99,97],[97,242],[2,94],[94,141],[141,2],[75,59],[59,235],[235,75],[24,110],[110,228],[228,24],[25,130],[130,226],[226,25],[23,24],[24,229],[229,23],[22,23],[23,230],[230,22],[26,22],[22,231],[231,26],[112,26],[26,232],[232,112],[189,190],[190,243],[243,189],[221,56],[56,190],[190,221],[28,56],[56,221],[221,28],[27,28],[28,222],[222,27],[29,27],[27,223],[223,29],[30,29],[29,224],[224,30],[247,30],[30,225],[225,247],[238,79],[79,20],[20,238],[166,59],[59,75],[75,166],[60,75],[75,240],[240,60],[147,177],[177,215],[215,147],[20,79],[79,166],[166,20],[187,147],[147,213],[213,187],[112,233],[233,244],[244,112],[233,128],[128,245],[245,233],[128,114],[114,188],[188,128],[114,217],[217,174],[174,114],[131,115],[115,220],[220,131],[217,198],[198,236],[236,217],[198,131],[131,134],[134,198],[177,132],[132,58],[58,177],[143,35],[35,124],[124,143],[110,163],[163,7],[7,110],[228,110],[110,25],[25,228],[356,389],[389,368],[368,356],[11,302],[302,267],[267,11],[452,350],[350,349],[349,452],[302,303],[303,269],[269,302],[357,343],[343,277],[277,357],[452,453],[453,357],[357,452],[333,332],[332,297],[297,333],[175,152],[152,377],[377,175],[347,348],[348,330],[330,347],[303,304],[304,270],[270,303],[9,336],[336,337],[337,9],[278,279],[279,360],[360,278],[418,262],[262,431],[431,418],[304,408],[408,409],[409,304],[310,415],[415,407],[407,310],[270,409],[409,410],[410,270],[450,348],[348,347],[347,450],[422,430],[430,434],[434,422],[313,314],[314,17],[17,313],[306,307],[307,375],[375,306],[387,388],[388,260],[260,387],[286,414],[414,398],[398,286],[335,406],[406,418],[418,335],[364,367],[367,416],[416,364],[423,358],[358,327],[327,423],[251,284],[284,298],[298,251],[281,5],[5,4],[4,281],[373,374],[374,253],[253,373],[307,320],[320,321],[321,307],[425,427],[427,411],[411,425],[421,313],[313,18],[18,421],[321,405],[405,406],[406,321],[320,404],[404,405],[405,320],[315,16],[16,17],[17,315],[426,425],[425,266],[266,426],[377,400],[400,369],[369,377],[322,391],[391,269],[269,322],[417,465],[465,464],[464,417],[386,257],[257,258],[258,386],[466,260],[260,388],[388,466],[456,399],[399,419],[419,456],[284,332],[332,333],[333,284],[417,285],[285,8],[8,417],[346,340],[340,261],[261,346],[413,441],[441,285],[285,413],[327,460],[460,328],[328,327],[355,371],[371,329],[329,355],[392,439],[439,438],[438,392],[382,341],[341,256],[256,382],[429,420],[420,360],[360,429],[364,394],[394,379],[379,364],[277,343],[343,437],[437,277],[443,444],[444,283],[283,443],[275,440],[440,363],[363,275],[431,262],[262,369],[369,431],[297,338],[338,337],[337,297],[273,375],[375,321],[321,273],[450,451],[451,349],[349,450],[446,342],[342,467],[467,446],[293,334],[334,282],[282,293],[458,461],[461,462],[462,458],[276,353],[353,383],[383,276],[308,324],[324,325],[325,308],[276,300],[300,293],[293,276],[372,345],[345,447],[447,372],[352,345],[345,340],[340,352],[274,1],[1,19],[19,274],[456,248],[248,281],[281,456],[436,427],[427,425],[425,436],[381,256],[256,252],[252,381],[269,391],[391,393],[393,269],[200,199],[199,428],[428,200],[266,330],[330,329],[329,266],[287,273],[273,422],[422,287],[250,462],[462,328],[328,250],[258,286],[286,384],[384,258],[265,353],[353,342],[342,265],[387,259],[259,257],[257,387],[424,431],[431,430],[430,424],[342,353],[353,276],[276,342],[273,335],[335,424],[424,273],[292,325],[325,307],[307,292],[366,447],[447,345],[345,366],[271,303],[303,302],[302,271],[423,266],[266,371],[371,423],[294,455],[455,460],[460,294],[279,278],[278,294],[294,279],[271,272],[272,304],[304,271],[432,434],[434,427],[427,432],[272,407],[407,408],[408,272],[394,430],[430,431],[431,394],[395,369],[369,400],[400,395],[334,333],[333,299],[299,334],[351,417],[417,168],[168,351],[352,280],[280,411],[411,352],[325,319],[319,320],[320,325],[295,296],[296,336],[336,295],[319,403],[403,404],[404,319],[330,348],[348,349],[349,330],[293,298],[298,333],[333,293],[323,454],[454,447],[447,323],[15,16],[16,315],[315,15],[358,429],[429,279],[279,358],[14,15],[15,316],[316,14],[285,336],[336,9],[9,285],[329,349],[349,350],[350,329],[374,380],[380,252],[252,374],[318,402],[402,403],[403,318],[6,197],[197,419],[419,6],[318,319],[319,325],[325,318],[367,364],[364,365],[365,367],[435,367],[367,397],[397,435],[344,438],[438,439],[439,344],[272,271],[271,311],[311,272],[195,5],[5,281],[281,195],[273,287],[287,291],[291,273],[396,428],[428,199],[199,396],[311,271],[271,268],[268,311],[283,444],[444,445],[445,283],[373,254],[254,339],[339,373],[282,334],[334,296],[296,282],[449,347],[347,346],[346,449],[264,447],[447,454],[454,264],[336,296],[296,299],[299,336],[338,10],[10,151],[151,338],[278,439],[439,455],[455,278],[292,407],[407,415],[415,292],[358,371],[371,355],[355,358],[340,345],[345,372],[372,340],[346,347],[347,280],[280,346],[442,443],[443,282],[282,442],[19,94],[94,370],[370,19],[441,442],[442,295],[295,441],[248,419],[419,197],[197,248],[263,255],[255,359],[359,263],[440,275],[275,274],[274,440],[300,383],[383,368],[368,300],[351,412],[412,465],[465,351],[263,467],[467,466],[466,263],[301,368],[368,389],[389,301],[395,378],[378,379],[379,395],[412,351],[351,419],[419,412],[436,426],[426,322],[322,436],[2,164],[164,393],[393,2],[370,462],[462,461],[461,370],[164,0],[0,267],[267,164],[302,11],[11,12],[12,302],[268,12],[12,13],[13,268],[293,300],[300,301],[301,293],[446,261],[261,340],[340,446],[330,266],[266,425],[425,330],[426,423],[423,391],[391,426],[429,355],[355,437],[437,429],[391,327],[327,326],[326,391],[440,457],[457,438],[438,440],[341,382],[382,362],[362,341],[459,457],[457,461],[461,459],[434,430],[430,394],[394,434],[414,463],[463,362],[362,414],[396,369],[369,262],[262,396],[354,461],[461,457],[457,354],[316,403],[403,402],[402,316],[315,404],[404,403],[403,315],[314,405],[405,404],[404,314],[313,406],[406,405],[405,313],[421,418],[418,406],[406,421],[366,401],[401,361],[361,366],[306,408],[408,407],[407,306],[291,409],[409,408],[408,291],[287,410],[410,409],[409,287],[432,436],[436,410],[410,432],[434,416],[416,411],[411,434],[264,368],[368,383],[383,264],[309,438],[438,457],[457,309],[352,376],[376,401],[401,352],[274,275],[275,4],[4,274],[421,428],[428,262],[262,421],[294,327],[327,358],[358,294],[433,416],[416,367],[367,433],[289,455],[455,439],[439,289],[462,370],[370,326],[326,462],[2,326],[326,370],[370,2],[305,460],[460,455],[455,305],[254,449],[449,448],[448,254],[255,261],[261,446],[446,255],[253,450],[450,449],[449,253],[252,451],[451,450],[450,252],[256,452],[452,451],[451,256],[341,453],[453,452],[452,341],[413,464],[464,463],[463,413],[441,413],[413,414],[414,441],[258,442],[442,441],[441,258],[257,443],[443,442],[442,257],[259,444],[444,443],[443,259],[260,445],[445,444],[444,260],[467,342],[342,445],[445,467],[459,458],[458,250],[250,459],[289,392],[392,290],[290,289],[290,328],[328,460],[460,290],[376,433],[433,435],[435,376],[250,290],[290,392],[392,250],[411,416],[416,433],[433,411],[341,463],[463,464],[464,341],[453,464],[464,465],[465,453],[357,465],[465,412],[412,357],[343,412],[412,399],[399,343],[360,363],[363,440],[440,360],[437,399],[399,456],[456,437],[420,456],[456,363],[363,420],[401,435],[435,288],[288,401],[372,383],[383,353],[353,372],[339,255],[255,249],[249,339],[448,261],[261,255],[255,448],[133,243],[243,190],[190,133],[133,155],[155,112],[112,133],[33,246],[246,247],[247,33],[33,130],[130,25],[25,33],[398,384],[384,286],[286,398],[362,398],[398,414],[414,362],[362,463],[463,341],[341,362],[263,359],[359,467],[467,263],[263,249],[249,255],[255,263],[466,467],[467,260],[260,466],[75,60],[60,166],[166,75],[238,239],[239,79],[79,238],[162,127],[127,139],[139,162],[72,11],[11,37],[37,72],[121,232],[232,120],[120,121],[73,72],[72,39],[39,73],[114,128],[128,47],[47,114],[233,232],[232,128],[128,233],[103,104],[104,67],[67,103],[152,175],[175,148],[148,152],[119,118],[118,101],[101,119],[74,73],[73,40],[40,74],[107,9],[9,108],[108,107],[49,48],[48,131],[131,49],[32,194],[194,211],[211,32],[184,74],[74,185],[185,184],[191,80],[80,183],[183,191],[185,40],[40,186],[186,185],[119,230],[230,118],[118,119],[210,202],[202,214],[214,210],[84,83],[83,17],[17,84],[77,76],[76,146],[146,77],[161,160],[160,30],[30,161],[190,56],[56,173],[173,190],[182,106],[106,194],[194,182],[138,135],[135,192],[192,138],[129,203],[203,98],[98,129],[54,21],[21,68],[68,54],[5,51],[51,4],[4,5],[145,144],[144,23],[23,145],[90,77],[77,91],[91,90],[207,205],[205,187],[187,207],[83,201],[201,18],[18,83],[181,91],[91,182],[182,181],[180,90],[90,181],[181,180],[16,85],[85,17],[17,16],[205,206],[206,36],[36,205],[176,148],[148,140],[140,176],[165,92],[92,39],[39,165],[245,193],[193,244],[244,245],[27,159],[159,28],[28,27],[30,247],[247,161],[161,30],[174,236],[236,196],[196,174],[103,54],[54,104],[104,103],[55,193],[193,8],[8,55],[111,117],[117,31],[31,111],[221,189],[189,55],[55,221],[240,98],[98,99],[99,240],[142,126],[126,100],[100,142],[219,166],[166,218],[218,219],[112,155],[155,26],[26,112],[198,209],[209,131],[131,198],[169,135],[135,150],[150,169],[114,47],[47,217],[217,114],[224,223],[223,53],[53,224],[220,45],[45,134],[134,220],[32,211],[211,140],[140,32],[109,67],[67,108],[108,109],[146,43],[43,91],[91,146],[231,230],[230,120],[120,231],[113,226],[226,247],[247,113],[105,63],[63,52],[52,105],[241,238],[238,242],[242,241],[124,46],[46,156],[156,124],[95,78],[78,96],[96,95],[70,46],[46,63],[63,70],[116,143],[143,227],[227,116],[116,123],[123,111],[111,116],[1,44],[44,19],[19,1],[3,236],[236,51],[51,3],[207,216],[216,205],[205,207],[26,154],[154,22],[22,26],[165,39],[39,167],[167,165],[199,200],[200,208],[208,199],[101,36],[36,100],[100,101],[43,57],[57,202],[202,43],[242,20],[20,99],[99,242],[56,28],[28,157],[157,56],[124,35],[35,113],[113,124],[29,160],[160,27],[27,29],[211,204],[204,210],[210,211],[124,113],[113,46],[46,124],[106,43],[43,204],[204,106],[96,62],[62,77],[77,96],[227,137],[137,116],[116,227],[73,41],[41,72],[72,73],[36,203],[203,142],[142,36],[235,64],[64,240],[240,235],[48,49],[49,64],[64,48],[42,41],[41,74],[74,42],[214,212],[212,207],[207,214],[183,42],[42,184],[184,183],[210,169],[169,211],[211,210],[140,170],[170,176],[176,140],[104,105],[105,69],[69,104],[193,122],[122,168],[168,193],[50,123],[123,187],[187,50],[89,96],[96,90],[90,89],[66,65],[65,107],[107,66],[179,89],[89,180],[180,179],[119,101],[101,120],[120,119],[68,63],[63,104],[104,68],[234,93],[93,227],[227,234],[16,15],[15,85],[85,16],[209,129],[129,49],[49,209],[15,14],[14,86],[86,15],[107,55],[55,9],[9,107],[120,100],[100,121],[121,120],[153,145],[145,22],[22,153],[178,88],[88,179],[179,178],[197,6],[6,196],[196,197],[89,88],[88,96],[96,89],[135,138],[138,136],[136,135],[138,215],[215,172],[172,138],[218,115],[115,219],[219,218],[41,42],[42,81],[81,41],[5,195],[195,51],[51,5],[57,43],[43,61],[61,57],[208,171],[171,199],[199,208],[41,81],[81,38],[38,41],[224,53],[53,225],[225,224],[24,144],[144,110],[110,24],[105,52],[52,66],[66,105],[118,229],[229,117],[117,118],[227,34],[34,234],[234,227],[66,107],[107,69],[69,66],[10,109],[109,151],[151,10],[219,48],[48,235],[235,219],[183,62],[62,191],[191,183],[142,129],[129,126],[126,142],[116,111],[111,143],[143,116],[118,117],[117,50],[50,118],[223,222],[222,52],[52,223],[94,19],[19,141],[141,94],[222,221],[221,65],[65,222],[196,3],[3,197],[197,196],[45,220],[220,44],[44,45],[156,70],[70,139],[139,156],[188,122],[122,245],[245,188],[139,71],[71,162],[162,139],[149,170],[170,150],[150,149],[122,188],[188,196],[196,122],[206,216],[216,92],[92,206],[164,2],[2,167],[167,164],[242,141],[141,241],[241,242],[0,164],[164,37],[37,0],[11,72],[72,12],[12,11],[12,38],[38,13],[13,12],[70,63],[63,71],[71,70],[31,226],[226,111],[111,31],[36,101],[101,205],[205,36],[203,206],[206,165],[165,203],[126,209],[209,217],[217,126],[98,165],[165,97],[97,98],[237,220],[220,218],[218,237],[237,239],[239,241],[241,237],[210,214],[214,169],[169,210],[140,171],[171,32],[32,140],[241,125],[125,237],[237,241],[179,86],[86,178],[178,179],[180,85],[85,179],[179,180],[181,84],[84,180],[180,181],[182,83],[83,181],[181,182],[194,201],[201,182],[182,194],[177,137],[137,132],[132,177],[184,76],[76,183],[183,184],[185,61],[61,184],[184,185],[186,57],[57,185],[185,186],[216,212],[212,186],[186,216],[192,214],[214,187],[187,192],[139,34],[34,156],[156,139],[218,79],[79,237],[237,218],[147,123],[123,177],[177,147],[45,44],[44,4],[4,45],[208,201],[201,32],[32,208],[98,64],[64,129],[129,98],[192,213],[213,138],[138,192],[235,59],[59,219],[219,235],[141,242],[242,97],[97,141],[97,2],[2,141],[141,97],[240,75],[75,235],[235,240],[229,24],[24,228],[228,229],[31,25],[25,226],[226,31],[230,23],[23,229],[229,230],[231,22],[22,230],[230,231],[232,26],[26,231],[231,232],[233,112],[112,232],[232,233],[244,189],[189,243],[243,244],[189,221],[221,190],[190,189],[222,28],[28,221],[221,222],[223,27],[27,222],[222,223],[224,29],[29,223],[223,224],[225,30],[30,224],[224,225],[113,247],[247,225],[225,113],[99,60],[60,240],[240,99],[213,147],[147,215],[215,213],[60,20],[20,166],[166,60],[192,187],[187,213],[213,192],[243,112],[112,244],[244,243],[244,233],[233,245],[245,244],[245,128],[128,188],[188,245],[188,114],[114,174],[174,188],[134,131],[131,220],[220,134],[174,217],[217,236],[236,174],[236,198],[198,134],[134,236],[215,177],[177,58],[58,215],[156,143],[143,124],[124,156],[25,110],[110,7],[7,25],[31,228],[228,25],[25,31],[264,356],[356,368],[368,264],[0,11],[11,267],[267,0],[451,452],[452,349],[349,451],[267,302],[302,269],[269,267],[350,357],[357,277],[277,350],[350,452],[452,357],[357,350],[299,333],[333,297],[297,299],[396,175],[175,377],[377,396],[280,347],[347,330],[330,280],[269,303],[303,270],[270,269],[151,9],[9,337],[337,151],[344,278],[278,360],[360,344],[424,418],[418,431],[431,424],[270,304],[304,409],[409,270],[272,310],[310,407],[407,272],[322,270],[270,410],[410,322],[449,450],[450,347],[347,449],[432,422],[422,434],[434,432],[18,313],[313,17],[17,18],[291,306],[306,375],[375,291],[259,387],[387,260],[260,259],[424,335],[335,418],[418,424],[434,364],[364,416],[416,434],[391,423],[423,327],[327,391],[301,251],[251,298],[298,301],[275,281],[281,4],[4,275],[254,373],[373,253],[253,254],[375,307],[307,321],[321,375],[280,425],[425,411],[411,280],[200,421],[421,18],[18,200],[335,321],[321,406],[406,335],[321,320],[320,405],[405,321],[314,315],[315,17],[17,314],[423,426],[426,266],[266,423],[396,377],[377,369],[369,396],[270,322],[322,269],[269,270],[413,417],[417,464],[464,413],[385,386],[386,258],[258,385],[248,456],[456,419],[419,248],[298,284],[284,333],[333,298],[168,417],[417,8],[8,168],[448,346],[346,261],[261,448],[417,413],[413,285],[285,417],[326,327],[327,328],[328,326],[277,355],[355,329],[329,277],[309,392],[392,438],[438,309],[381,382],[382,256],[256,381],[279,429],[429,360],[360,279],[365,364],[364,379],[379,365],[355,277],[277,437],[437,355],[282,443],[443,283],[283,282],[281,275],[275,363],[363,281],[395,431],[431,369],[369,395],[299,297],[297,337],[337,299],[335,273],[273,321],[321,335],[348,450],[450,349],[349,348],[359,446],[446,467],[467,359],[283,293],[293,282],[282,283],[250,458],[458,462],[462,250],[300,276],[276,383],[383,300],[292,308],[308,325],[325,292],[283,276],[276,293],[293,283],[264,372],[372,447],[447,264],[346,352],[352,340],[340,346],[354,274],[274,19],[19,354],[363,456],[456,281],[281,363],[426,436],[436,425],[425,426],[380,381],[381,252],[252,380],[267,269],[269,393],[393,267],[421,200],[200,428],[428,421],[371,266],[266,329],[329,371],[432,287],[287,422],[422,432],[290,250],[250,328],[328,290],[385,258],[258,384],[384,385],[446,265],[265,342],[342,446],[386,387],[387,257],[257,386],[422,424],[424,430],[430,422],[445,342],[342,276],[276,445],[422,273],[273,424],[424,422],[306,292],[292,307],[307,306],[352,366],[366,345],[345,352],[268,271],[271,302],[302,268],[358,423],[423,371],[371,358],[327,294],[294,460],[460,327],[331,279],[279,294],[294,331],[303,271],[271,304],[304,303],[436,432],[432,427],[427,436],[304,272],[272,408],[408,304],[395,394],[394,431],[431,395],[378,395],[395,400],[400,378],[296,334],[334,299],[299,296],[6,351],[351,168],[168,6],[376,352],[352,411],[411,376],[307,325],[325,320],[320,307],[285,295],[295,336],[336,285],[320,319],[319,404],[404,320],[329,330],[330,349],[349,329],[334,293],[293,333],[333,334],[366,323],[323,447],[447,366],[316,15],[15,315],[315,316],[331,358],[358,279],[279,331],[317,14],[14,316],[316,317],[8,285],[285,9],[9,8],[277,329],[329,350],[350,277],[253,374],[374,252],[252,253],[319,318],[318,403],[403,319],[351,6],[6,419],[419,351],[324,318],[318,325],[325,324],[397,367],[367,365],[365,397],[288,435],[435,397],[397,288],[278,344],[344,439],[439,278],[310,272],[272,311],[311,310],[248,195],[195,281],[281,248],[375,273],[273,291],[291,375],[175,396],[396,199],[199,175],[312,311],[311,268],[268,312],[276,283],[283,445],[445,276],[390,373],[373,339],[339,390],[295,282],[282,296],[296,295],[448,449],[449,346],[346,448],[356,264],[264,454],[454,356],[337,336],[336,299],[299,337],[337,338],[338,151],[151,337],[294,278],[278,455],[455,294],[308,292],[292,415],[415,308],[429,358],[358,355],[355,429],[265,340],[340,372],[372,265],[352,346],[346,280],[280,352],[295,442],[442,282],[282,295],[354,19],[19,370],[370,354],[285,441],[441,295],[295,285],[195,248],[248,197],[197,195],[457,440],[440,274],[274,457],[301,300],[300,368],[368,301],[417,351],[351,465],[465,417],[251,301],[301,389],[389,251],[394,395],[395,379],[379,394],[399,412],[412,419],[419,399],[410,436],[436,322],[322,410],[326,2],[2,393],[393,326],[354,370],[370,461],[461,354],[393,164],[164,267],[267,393],[268,302],[302,12],[12,268],[312,268],[268,13],[13,312],[298,293],[293,301],[301,298],[265,446],[446,340],[340,265],[280,330],[330,425],[425,280],[322,426],[426,391],[391,322],[420,429],[429,437],[437,420],[393,391],[391,326],[326,393],[344,440],[440,438],[438,344],[458,459],[459,461],[461,458],[364,434],[434,394],[394,364],[428,396],[396,262],[262,428],[274,354],[354,457],[457,274],[317,316],[316,402],[402,317],[316,315],[315,403],[403,316],[315,314],[314,404],[404,315],[314,313],[313,405],[405,314],[313,421],[421,406],[406,313],[323,366],[366,361],[361,323],[292,306],[306,407],[407,292],[306,291],[291,408],[408,306],[291,287],[287,409],[409,291],[287,432],[432,410],[410,287],[427,434],[434,411],[411,427],[372,264],[264,383],[383,372],[459,309],[309,457],[457,459],[366,352],[352,401],[401,366],[1,274],[274,4],[4,1],[418,421],[421,262],[262,418],[331,294],[294,358],[358,331],[435,433],[433,367],[367,435],[392,289],[289,439],[439,392],[328,462],[462,326],[326,328],[94,2],[2,370],[370,94],[289,305],[305,455],[455,289],[339,254],[254,448],[448,339],[359,255],[255,446],[446,359],[254,253],[253,449],[449,254],[253,252],[252,450],[450,253],[252,256],[256,451],[451,252],[256,341],[341,452],[452,256],[414,413],[413,463],[463,414],[286,441],[441,414],[414,286],[286,258],[258,441],[441,286],[258,257],[257,442],[442,258],[257,259],[259,443],[443,257],[259,260],[260,444],[444,259],[260,467],[467,445],[445,260],[309,459],[459,250],[250,309],[305,289],[289,290],[290,305],[305,290],[290,460],[460,305],[401,376],[376,435],[435,401],[309,250],[250,392],[392,309],[376,411],[411,433],[433,376],[453,341],[341,464],[464,453],[357,453],[453,465],[465,357],[343,357],[357,412],[412,343],[437,343],[343,399],[399,437],[344,360],[360,440],[440,344],[420,437],[437,456],[456,420],[360,420],[420,363],[363,360],[361,401],[401,288],[288,361],[265,372],[372,353],[353,265],[390,339],[339,249],[249,390],[339,448],[448,255],[255,339]);function f1(e){e.j={faceLandmarks:[],faceBlendshapes:[],facialTransformationMatrixes:[]}}var Be=class extends rr{constructor(e,t){super(new Rr(e,t),"image_in","norm_rect",!1),this.j={faceLandmarks:[],faceBlendshapes:[],facialTransformationMatrixes:[]},this.outputFacialTransformationMatrixes=this.outputFaceBlendshapes=!1,se(e=this.h=new sw,0,1,t=new He),this.A=new nw,se(this.h,0,3,this.A),this.u=new Tu,se(this.h,0,2,this.u),yn(this.u,4,1),Z(this.u,2,.5),Z(this.A,2,.5),Z(this.h,4,.5)}get baseOptions(){return be(this.h,He,1)}set baseOptions(e){se(this.h,0,1,e)}o(e){return"numFaces"in e&&yn(this.u,4,e.numFaces??1),"minFaceDetectionConfidence"in e&&Z(this.u,2,e.minFaceDetectionConfidence??.5),"minTrackingConfidence"in e&&Z(this.h,4,e.minTrackingConfidence??.5),"minFacePresenceConfidence"in e&&Z(this.A,2,e.minFacePresenceConfidence??.5),"outputFaceBlendshapes"in e&&(this.outputFaceBlendshapes=!!e.outputFaceBlendshapes),"outputFacialTransformationMatrixes"in e&&(this.outputFacialTransformationMatrixes=!!e.outputFacialTransformationMatrixes),this.l(e)}F(e,t){return f1(this),Lr(this,e,t),this.j}G(e,t,r){return f1(this),Qr(this,e,r,t),this.j}m(){var e=new or;Ue(e,"image_in"),Ue(e,"norm_rect"),ke(e,"face_landmarks");const t=new ir;Yr(t,ES,this.h);const r=new zt;er(r,2,"mediapipe.tasks.vision.face_landmarker.FaceLandmarkerGraph"),$e(r,"IMAGE:image_in"),$e(r,"NORM_RECT:norm_rect"),ye(r,"NORM_LANDMARKS:face_landmarks"),r.o(t),wr(e,r),this.g.attachProtoVectorListener("face_landmarks",(n,s)=>{for(const i of n)n=Ya(i),this.j.faceLandmarks.push(Au(n));V(this,s)}),this.g.attachEmptyPacketListener("face_landmarks",n=>{V(this,n)}),this.outputFaceBlendshapes&&(ke(e,"blendshapes"),ye(r,"BLENDSHAPES:blendshapes"),this.g.attachProtoVectorListener("blendshapes",(n,s)=>{if(this.outputFaceBlendshapes)for(const i of n)n=Eu(i),this.j.faceBlendshapes.push(tm(n.g()??[]));V(this,s)}),this.g.attachEmptyPacketListener("blendshapes",n=>{V(this,n)})),this.outputFacialTransformationMatrixes&&(ke(e,"face_geometry"),ye(r,"FACE_GEOMETRY:face_geometry"),this.g.attachProtoVectorListener("face_geometry",(n,s)=>{if(this.outputFacialTransformationMatrixes)for(const i of n)(n=be(n=NS(i),yS,2))&&this.j.facialTransformationMatrixes.push({rows:fr(n,1)??0??0,columns:fr(n,2)??0??0,data:ys(n,3,Wr,gs()).slice()??[]});V(this,s)}),this.g.attachEmptyPacketListener("face_geometry",n=>{V(this,n)})),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};Be.prototype.detectForVideo=Be.prototype.G,Be.prototype.detect=Be.prototype.F,Be.prototype.setOptions=Be.prototype.o,Be.createFromModelPath=function(e,t){return ve(Be,e,{baseOptions:{modelAssetPath:t}})},Be.createFromModelBuffer=function(e,t){return ve(Be,e,{baseOptions:{modelAssetBuffer:t}})},Be.createFromOptions=function(e,t){return ve(Be,e,t)},Be.FACE_LANDMARKS_LIPS=sm,Be.FACE_LANDMARKS_LEFT_EYE=im,Be.FACE_LANDMARKS_LEFT_EYEBROW=om,Be.FACE_LANDMARKS_LEFT_IRIS=Ow,Be.FACE_LANDMARKS_RIGHT_EYE=am,Be.FACE_LANDMARKS_RIGHT_EYEBROW=lm,Be.FACE_LANDMARKS_RIGHT_IRIS=Rw,Be.FACE_LANDMARKS_FACE_OVAL=cm,Be.FACE_LANDMARKS_CONTOURS=Lw,Be.FACE_LANDMARKS_TESSELATION=$w;var um=Or([0,1],[1,2],[2,3],[3,4],[0,5],[5,6],[6,7],[7,8],[5,9],[9,10],[10,11],[11,12],[9,13],[13,14],[14,15],[15,16],[13,17],[0,17],[17,18],[18,19],[19,20]);function p1(e){e.gestures=[],e.landmarks=[],e.worldLandmarks=[],e.handedness=[]}function m1(e){return e.gestures.length===0?{gestures:[],landmarks:[],worldLandmarks:[],handedness:[],handednesses:[]}:{gestures:e.gestures,landmarks:e.landmarks,worldLandmarks:e.worldLandmarks,handedness:e.handedness,handednesses:e.handedness}}function g1(e,t=!0){const r=[];for(const s of e){var n=Eu(s);e=[];for(const i of n.g())n=t&&fr(i,1)!=null?fr(i,1)??0:-1,e.push({score:Ke(i,2)??0,index:n,categoryName:wt(Le(i,3))??""??"",displayName:wt(Le(i,4))??""??""});r.push(e)}return r}var Bt=class extends rr{constructor(e,t){super(new Rr(e,t),"image_in","norm_rect",!1),this.gestures=[],this.landmarks=[],this.worldLandmarks=[],this.handedness=[],se(e=this.j=new aw,0,1,t=new He),this.u=new Qp,se(this.j,0,2,this.u),this.D=new Jp,se(this.u,0,3,this.D),this.A=new ow,se(this.u,0,2,this.A),this.h=new TS,se(this.j,0,3,this.h),Z(this.A,2,.5),Z(this.u,4,.5),Z(this.D,2,.5)}get baseOptions(){return be(this.j,He,1)}set baseOptions(e){se(this.j,0,1,e)}o(e){var s,i,a,l;if(yn(this.A,3,e.numHands??1),"minHandDetectionConfidence"in e&&Z(this.A,2,e.minHandDetectionConfidence??.5),"minTrackingConfidence"in e&&Z(this.u,4,e.minTrackingConfidence??.5),"minHandPresenceConfidence"in e&&Z(this.D,2,e.minHandPresenceConfidence??.5),e.cannedGesturesClassifierOptions){var t=new Qs,r=t,n=of(e.cannedGesturesClassifierOptions,(s=be(this.h,Qs,3))==null?void 0:s.l());se(r,0,2,n),se(this.h,0,3,t)}else e.cannedGesturesClassifierOptions===void 0&&((i=be(this.h,Qs,3))==null||i.g());return e.customGesturesClassifierOptions?(se(r=t=new Qs,0,2,n=of(e.customGesturesClassifierOptions,(a=be(this.h,Qs,4))==null?void 0:a.l())),se(this.h,0,4,t)):e.customGesturesClassifierOptions===void 0&&((l=be(this.h,Qs,4))==null||l.g()),this.l(e)}Ha(e,t){return p1(this),Lr(this,e,t),m1(this)}Ia(e,t,r){return p1(this),Qr(this,e,r,t),m1(this)}m(){var e=new or;Ue(e,"image_in"),Ue(e,"norm_rect"),ke(e,"hand_gestures"),ke(e,"hand_landmarks"),ke(e,"world_hand_landmarks"),ke(e,"handedness");const t=new ir;Yr(t,AS,this.j);const r=new zt;er(r,2,"mediapipe.tasks.vision.gesture_recognizer.GestureRecognizerGraph"),$e(r,"IMAGE:image_in"),$e(r,"NORM_RECT:norm_rect"),ye(r,"HAND_GESTURES:hand_gestures"),ye(r,"LANDMARKS:hand_landmarks"),ye(r,"WORLD_LANDMARKS:world_hand_landmarks"),ye(r,"HANDEDNESS:handedness"),r.o(t),wr(e,r),this.g.attachProtoVectorListener("hand_landmarks",(n,s)=>{for(const i of n){n=Ya(i);const a=[];for(const l of gn(n,Xv,1))a.push({x:Ke(l,1)??0,y:Ke(l,2)??0,z:Ke(l,3)??0,visibility:Ke(l,4)??0});this.landmarks.push(a)}V(this,s)}),this.g.attachEmptyPacketListener("hand_landmarks",n=>{V(this,n)}),this.g.attachProtoVectorListener("world_hand_landmarks",(n,s)=>{for(const i of n){n=Ni(i);const a=[];for(const l of gn(n,Qv,1))a.push({x:Ke(l,1)??0,y:Ke(l,2)??0,z:Ke(l,3)??0,visibility:Ke(l,4)??0});this.worldLandmarks.push(a)}V(this,s)}),this.g.attachEmptyPacketListener("world_hand_landmarks",n=>{V(this,n)}),this.g.attachProtoVectorListener("hand_gestures",(n,s)=>{this.gestures.push(...g1(n,!1)),V(this,s)}),this.g.attachEmptyPacketListener("hand_gestures",n=>{V(this,n)}),this.g.attachProtoVectorListener("handedness",(n,s)=>{this.handedness.push(...g1(n)),V(this,s)}),this.g.attachEmptyPacketListener("handedness",n=>{V(this,n)}),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};function y1(e){return{landmarks:e.landmarks,worldLandmarks:e.worldLandmarks,handednesses:e.handedness,handedness:e.handedness}}Bt.prototype.recognizeForVideo=Bt.prototype.Ia,Bt.prototype.recognize=Bt.prototype.Ha,Bt.prototype.setOptions=Bt.prototype.o,Bt.createFromModelPath=function(e,t){return ve(Bt,e,{baseOptions:{modelAssetPath:t}})},Bt.createFromModelBuffer=function(e,t){return ve(Bt,e,{baseOptions:{modelAssetBuffer:t}})},Bt.createFromOptions=function(e,t){return ve(Bt,e,t)},Bt.HAND_CONNECTIONS=um;var Wt=class extends rr{constructor(e,t){super(new Rr(e,t),"image_in","norm_rect",!1),this.landmarks=[],this.worldLandmarks=[],this.handedness=[],se(e=this.h=new Qp,0,1,t=new He),this.u=new Jp,se(this.h,0,3,this.u),this.j=new ow,se(this.h,0,2,this.j),yn(this.j,3,1),Z(this.j,2,.5),Z(this.u,2,.5),Z(this.h,4,.5)}get baseOptions(){return be(this.h,He,1)}set baseOptions(e){se(this.h,0,1,e)}o(e){return"numHands"in e&&yn(this.j,3,e.numHands??1),"minHandDetectionConfidence"in e&&Z(this.j,2,e.minHandDetectionConfidence??.5),"minTrackingConfidence"in e&&Z(this.h,4,e.minTrackingConfidence??.5),"minHandPresenceConfidence"in e&&Z(this.u,2,e.minHandPresenceConfidence??.5),this.l(e)}F(e,t){return this.landmarks=[],this.worldLandmarks=[],this.handedness=[],Lr(this,e,t),y1(this)}G(e,t,r){return this.landmarks=[],this.worldLandmarks=[],this.handedness=[],Qr(this,e,r,t),y1(this)}m(){var e=new or;Ue(e,"image_in"),Ue(e,"norm_rect"),ke(e,"hand_landmarks"),ke(e,"world_hand_landmarks"),ke(e,"handedness");const t=new ir;Yr(t,CS,this.h);const r=new zt;er(r,2,"mediapipe.tasks.vision.hand_landmarker.HandLandmarkerGraph"),$e(r,"IMAGE:image_in"),$e(r,"NORM_RECT:norm_rect"),ye(r,"LANDMARKS:hand_landmarks"),ye(r,"WORLD_LANDMARKS:world_hand_landmarks"),ye(r,"HANDEDNESS:handedness"),r.o(t),wr(e,r),this.g.attachProtoVectorListener("hand_landmarks",(n,s)=>{for(const i of n)n=Ya(i),this.landmarks.push(Au(n));V(this,s)}),this.g.attachEmptyPacketListener("hand_landmarks",n=>{V(this,n)}),this.g.attachProtoVectorListener("world_hand_landmarks",(n,s)=>{for(const i of n)n=Ni(i),this.worldLandmarks.push(ea(n));V(this,s)}),this.g.attachEmptyPacketListener("world_hand_landmarks",n=>{V(this,n)}),this.g.attachProtoVectorListener("handedness",(n,s)=>{var i=this.handedness,a=i.push;const l=[];for(const c of n){n=Eu(c);const u=[];for(const d of n.g())u.push({score:Ke(d,2)??0,index:fr(d,1)??0??-1,categoryName:wt(Le(d,3))??""??"",displayName:wt(Le(d,4))??""??""});l.push(u)}a.call(i,...l),V(this,s)}),this.g.attachEmptyPacketListener("handedness",n=>{V(this,n)}),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};Wt.prototype.detectForVideo=Wt.prototype.G,Wt.prototype.detect=Wt.prototype.F,Wt.prototype.setOptions=Wt.prototype.o,Wt.createFromModelPath=function(e,t){return ve(Wt,e,{baseOptions:{modelAssetPath:t}})},Wt.createFromModelBuffer=function(e,t){return ve(Wt,e,{baseOptions:{modelAssetBuffer:t}})},Wt.createFromOptions=function(e,t){return ve(Wt,e,t)},Wt.HAND_CONNECTIONS=um;var Dw=Or([0,1],[1,2],[2,3],[3,7],[0,4],[4,5],[5,6],[6,8],[9,10],[11,12],[11,13],[13,15],[15,17],[15,19],[15,21],[17,19],[12,14],[14,16],[16,18],[16,20],[16,22],[18,20],[11,23],[12,24],[23,24],[23,25],[24,26],[25,27],[26,28],[27,29],[28,30],[29,31],[30,32],[27,31],[28,32]);function x1(e){e.h={faceLandmarks:[],faceBlendshapes:[],poseLandmarks:[],poseWorldLandmarks:[],poseSegmentationMasks:[],leftHandLandmarks:[],leftHandWorldLandmarks:[],rightHandLandmarks:[],rightHandWorldLandmarks:[]}}function v1(e){try{if(!e.D)return e.h;e.D(e.h)}finally{Iu(e)}}function Ul(e,t){e=Ya(e),t.push(Au(e))}var Oe=class extends rr{constructor(e,t){super(new Rr(e,t),"input_frames_image",null,!1),this.h={faceLandmarks:[],faceBlendshapes:[],poseLandmarks:[],poseWorldLandmarks:[],poseSegmentationMasks:[],leftHandLandmarks:[],leftHandWorldLandmarks:[],rightHandLandmarks:[],rightHandWorldLandmarks:[]},this.outputPoseSegmentationMasks=this.outputFaceBlendshapes=!1,se(e=this.j=new hw,0,1,t=new He),this.I=new Jp,se(this.j,0,2,this.I),this.W=new IS,se(this.j,0,3,this.W),this.u=new Tu,se(this.j,0,4,this.u),this.O=new nw,se(this.j,0,5,this.O),this.A=new uw,se(this.j,0,6,this.A),this.M=new dw,se(this.j,0,7,this.M),Z(this.u,2,.5),Z(this.u,3,.3),Z(this.O,2,.5),Z(this.A,2,.5),Z(this.A,3,.3),Z(this.M,2,.5),Z(this.I,2,.5)}get baseOptions(){return be(this.j,He,1)}set baseOptions(e){se(this.j,0,1,e)}o(e){return"minFaceDetectionConfidence"in e&&Z(this.u,2,e.minFaceDetectionConfidence??.5),"minFaceSuppressionThreshold"in e&&Z(this.u,3,e.minFaceSuppressionThreshold??.3),"minFacePresenceConfidence"in e&&Z(this.O,2,e.minFacePresenceConfidence??.5),"outputFaceBlendshapes"in e&&(this.outputFaceBlendshapes=!!e.outputFaceBlendshapes),"minPoseDetectionConfidence"in e&&Z(this.A,2,e.minPoseDetectionConfidence??.5),"minPoseSuppressionThreshold"in e&&Z(this.A,3,e.minPoseSuppressionThreshold??.3),"minPosePresenceConfidence"in e&&Z(this.M,2,e.minPosePresenceConfidence??.5),"outputPoseSegmentationMasks"in e&&(this.outputPoseSegmentationMasks=!!e.outputPoseSegmentationMasks),"minHandLandmarksConfidence"in e&&Z(this.I,2,e.minHandLandmarksConfidence??.5),this.l(e)}F(e,t,r){const n=typeof t!="function"?t:{};return this.D=typeof t=="function"?t:r,x1(this),Lr(this,e,n),v1(this)}G(e,t,r,n){const s=typeof r!="function"?r:{};return this.D=typeof r=="function"?r:n,x1(this),Qr(this,e,s,t),v1(this)}m(){var e=new or;Ue(e,"input_frames_image"),ke(e,"pose_landmarks"),ke(e,"pose_world_landmarks"),ke(e,"face_landmarks"),ke(e,"left_hand_landmarks"),ke(e,"left_hand_world_landmarks"),ke(e,"right_hand_landmarks"),ke(e,"right_hand_world_landmarks");const t=new ir,r=new Wg;er(r,1,"type.googleapis.com/mediapipe.tasks.vision.holistic_landmarker.proto.HolisticLandmarkerGraphOptions"),function(s,i){if(i!=null)if(Array.isArray(i))Ee(s,2,mu(i,0,Ra));else{if(!(typeof i=="string"||i instanceof Gr||yp(i)))throw Error("invalid value in Any.value field: "+i+" expected a ByteString, a base64 encoded string, a Uint8Array or a jspb array");Cn(s,2,vp(i,!1),Is())}}(r,this.j.g());const n=new zt;er(n,2,"mediapipe.tasks.vision.holistic_landmarker.HolisticLandmarkerGraph"),Rp(n,8,Wg,r),$e(n,"IMAGE:input_frames_image"),ye(n,"POSE_LANDMARKS:pose_landmarks"),ye(n,"POSE_WORLD_LANDMARKS:pose_world_landmarks"),ye(n,"FACE_LANDMARKS:face_landmarks"),ye(n,"LEFT_HAND_LANDMARKS:left_hand_landmarks"),ye(n,"LEFT_HAND_WORLD_LANDMARKS:left_hand_world_landmarks"),ye(n,"RIGHT_HAND_LANDMARKS:right_hand_landmarks"),ye(n,"RIGHT_HAND_WORLD_LANDMARKS:right_hand_world_landmarks"),n.o(t),wr(e,n),Cu(this,e),this.g.attachProtoListener("pose_landmarks",(s,i)=>{Ul(s,this.h.poseLandmarks),V(this,i)}),this.g.attachEmptyPacketListener("pose_landmarks",s=>{V(this,s)}),this.g.attachProtoListener("pose_world_landmarks",(s,i)=>{var a=this.h.poseWorldLandmarks;s=Ni(s),a.push(ea(s)),V(this,i)}),this.g.attachEmptyPacketListener("pose_world_landmarks",s=>{V(this,s)}),this.outputPoseSegmentationMasks&&(ye(n,"POSE_SEGMENTATION_MASK:pose_segmentation_mask"),Hi(this,"pose_segmentation_mask"),this.g.Z("pose_segmentation_mask",(s,i)=>{this.h.poseSegmentationMasks=[Ki(this,s,!0,!this.D)],V(this,i)}),this.g.attachEmptyPacketListener("pose_segmentation_mask",s=>{this.h.poseSegmentationMasks=[],V(this,s)})),this.g.attachProtoListener("face_landmarks",(s,i)=>{Ul(s,this.h.faceLandmarks),V(this,i)}),this.g.attachEmptyPacketListener("face_landmarks",s=>{V(this,s)}),this.outputFaceBlendshapes&&(ke(e,"extra_blendshapes"),ye(n,"FACE_BLENDSHAPES:extra_blendshapes"),this.g.attachProtoListener("extra_blendshapes",(s,i)=>{var a=this.h.faceBlendshapes;this.outputFaceBlendshapes&&(s=Eu(s),a.push(tm(s.g()??[]))),V(this,i)}),this.g.attachEmptyPacketListener("extra_blendshapes",s=>{V(this,s)})),this.g.attachProtoListener("left_hand_landmarks",(s,i)=>{Ul(s,this.h.leftHandLandmarks),V(this,i)}),this.g.attachEmptyPacketListener("left_hand_landmarks",s=>{V(this,s)}),this.g.attachProtoListener("left_hand_world_landmarks",(s,i)=>{var a=this.h.leftHandWorldLandmarks;s=Ni(s),a.push(ea(s)),V(this,i)}),this.g.attachEmptyPacketListener("left_hand_world_landmarks",s=>{V(this,s)}),this.g.attachProtoListener("right_hand_landmarks",(s,i)=>{Ul(s,this.h.rightHandLandmarks),V(this,i)}),this.g.attachEmptyPacketListener("right_hand_landmarks",s=>{V(this,s)}),this.g.attachProtoListener("right_hand_world_landmarks",(s,i)=>{var a=this.h.rightHandWorldLandmarks;s=Ni(s),a.push(ea(s)),V(this,i)}),this.g.attachEmptyPacketListener("right_hand_world_landmarks",s=>{V(this,s)}),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};Oe.prototype.detectForVideo=Oe.prototype.G,Oe.prototype.detect=Oe.prototype.F,Oe.prototype.setOptions=Oe.prototype.o,Oe.createFromModelPath=function(e,t){return ve(Oe,e,{baseOptions:{modelAssetPath:t}})},Oe.createFromModelBuffer=function(e,t){return ve(Oe,e,{baseOptions:{modelAssetBuffer:t}})},Oe.createFromOptions=function(e,t){return ve(Oe,e,t)},Oe.HAND_CONNECTIONS=um,Oe.POSE_CONNECTIONS=Dw,Oe.FACE_LANDMARKS_LIPS=sm,Oe.FACE_LANDMARKS_LEFT_EYE=im,Oe.FACE_LANDMARKS_LEFT_EYEBROW=om,Oe.FACE_LANDMARKS_LEFT_IRIS=Ow,Oe.FACE_LANDMARKS_RIGHT_EYE=am,Oe.FACE_LANDMARKS_RIGHT_EYEBROW=lm,Oe.FACE_LANDMARKS_RIGHT_IRIS=Rw,Oe.FACE_LANDMARKS_FACE_OVAL=cm,Oe.FACE_LANDMARKS_CONTOURS=Lw,Oe.FACE_LANDMARKS_TESSELATION=$w;var lr=class extends rr{constructor(e,t){super(new Rr(e,t),"input_image","norm_rect",!0),this.j={classifications:[]},se(e=this.h=new fw,0,1,t=new He)}get baseOptions(){return be(this.h,He,1)}set baseOptions(e){se(this.h,0,1,e)}o(e){return se(this.h,0,2,of(e,be(this.h,qp,2))),this.l(e)}sa(e,t){return this.j={classifications:[]},Lr(this,e,t),this.j}ta(e,t,r){return this.j={classifications:[]},Qr(this,e,r,t),this.j}m(){var e=new or;Ue(e,"input_image"),Ue(e,"norm_rect"),ke(e,"classifications");const t=new ir;Yr(t,PS,this.h);const r=new zt;er(r,2,"mediapipe.tasks.vision.image_classifier.ImageClassifierGraph"),$e(r,"IMAGE:input_image"),$e(r,"NORM_RECT:norm_rect"),ye(r,"CLASSIFICATIONS:classifications"),r.o(t),wr(e,r),this.g.attachProtoListener("classifications",(n,s)=>{this.j=MS(wS(n)),V(this,s)}),this.g.attachEmptyPacketListener("classifications",n=>{V(this,n)}),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};lr.prototype.classifyForVideo=lr.prototype.ta,lr.prototype.classify=lr.prototype.sa,lr.prototype.setOptions=lr.prototype.o,lr.createFromModelPath=function(e,t){return ve(lr,e,{baseOptions:{modelAssetPath:t}})},lr.createFromModelBuffer=function(e,t){return ve(lr,e,{baseOptions:{modelAssetBuffer:t}})},lr.createFromOptions=function(e,t){return ve(lr,e,t)};var Vt=class extends rr{constructor(e,t){super(new Rr(e,t),"image_in","norm_rect",!0),this.h=new pw,this.embeddings={embeddings:[]},se(e=this.h,0,1,t=new He)}get baseOptions(){return be(this.h,He,1)}set baseOptions(e){se(this.h,0,1,e)}o(e){var t=this.h,r=be(this.h,Xg,2);return r=r?r.clone():new Xg,e.l2Normalize!==void 0?Ee(r,1,Oa(e.l2Normalize)):"l2Normalize"in e&&Ee(r,1),e.quantize!==void 0?Ee(r,2,Oa(e.quantize)):"quantize"in e&&Ee(r,2),se(t,0,2,r),this.l(e)}za(e,t){return Lr(this,e,t),this.embeddings}Aa(e,t,r){return Qr(this,e,r,t),this.embeddings}m(){var e=new or;Ue(e,"image_in"),Ue(e,"norm_rect"),ke(e,"embeddings_out");const t=new ir;Yr(t,OS,this.h);const r=new zt;er(r,2,"mediapipe.tasks.vision.image_embedder.ImageEmbedderGraph"),$e(r,"IMAGE:image_in"),$e(r,"NORM_RECT:norm_rect"),ye(r,"EMBEDDINGS:embeddings_out"),r.o(t),wr(e,r),this.g.attachProtoListener("embeddings_out",(n,s)=>{n=kS(n),this.embeddings=function(i){return{embeddings:gn(i,_S,1).map(a=>{var u,d;const l={headIndex:fr(a,3)??0??-1,headName:wt(Le(a,4))??""??""};var c=a.v;return uv(c,0|c[q],Qg,Ed(a,1))!==void 0?(a=ys(a=be(a,Qg,Ed(a,1),void 0),1,Wr,gs()),l.floatEmbedding=a.slice()):(c=new Uint8Array(0),l.quantizedEmbedding=((d=(u=be(a,bS,Ed(a,2),void 0))==null?void 0:u.na())==null?void 0:d.h())??c),l}),timestampMs:bw(fv(i))}}(n),V(this,s)}),this.g.attachEmptyPacketListener("embeddings_out",n=>{V(this,n)}),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};Vt.cosineSimilarity=function(e,t){if(e.floatEmbedding&&t.floatEmbedding)e=s1(e.floatEmbedding,t.floatEmbedding);else{if(!e.quantizedEmbedding||!t.quantizedEmbedding)throw Error("Cannot compute cosine similarity between quantized and float embeddings.");e=s1(n1(e.quantizedEmbedding),n1(t.quantizedEmbedding))}return e},Vt.prototype.embedForVideo=Vt.prototype.Aa,Vt.prototype.embed=Vt.prototype.za,Vt.prototype.setOptions=Vt.prototype.o,Vt.createFromModelPath=function(e,t){return ve(Vt,e,{baseOptions:{modelAssetPath:t}})},Vt.createFromModelBuffer=function(e,t){return ve(Vt,e,{baseOptions:{modelAssetBuffer:t}})},Vt.createFromOptions=function(e,t){return ve(Vt,e,t)};var uf=class{constructor(e,t,r){this.confidenceMasks=e,this.categoryMask=t,this.qualityScores=r}close(){var e,t;(e=this.confidenceMasks)==null||e.forEach(r=>{r.close()}),(t=this.categoryMask)==null||t.close()}};function HS(e){var r,n;const t=function(s){return gn(s,zt,1)}(e.ca()).filter(s=>(wt(Le(s,1))??"").includes("mediapipe.tasks.TensorsToSegmentationCalculator"));if(e.u=[],t.length>1)throw Error("The graph has more than one mediapipe.tasks.TensorsToSegmentationCalculator.");t.length===1&&(((n=(r=be(t[0],ir,7))==null?void 0:r.j())==null?void 0:n.g())??new Map).forEach((s,i)=>{e.u[Number(i)]=wt(Le(s,1))??""})}function w1(e){e.categoryMask=void 0,e.confidenceMasks=void 0,e.qualityScores=void 0}function b1(e){try{const t=new uf(e.confidenceMasks,e.categoryMask,e.qualityScores);if(!e.j)return t;e.j(t)}finally{Iu(e)}}uf.prototype.close=uf.prototype.close;var Ot=class extends rr{constructor(e,t){super(new Rr(e,t),"image_in","norm_rect",!1),this.u=[],this.outputCategoryMask=!1,this.outputConfidenceMasks=!0,this.h=new em,this.A=new mw,se(this.h,0,3,this.A),se(e=this.h,0,1,t=new He)}get baseOptions(){return be(this.h,He,1)}set baseOptions(e){se(this.h,0,1,e)}o(e){return e.displayNamesLocale!==void 0?Ee(this.h,2,Ga(e.displayNamesLocale)):"displayNamesLocale"in e&&Ee(this.h,2),"outputCategoryMask"in e&&(this.outputCategoryMask=e.outputCategoryMask??!1),"outputConfidenceMasks"in e&&(this.outputConfidenceMasks=e.outputConfidenceMasks??!0),super.l(e)}L(){HS(this)}segment(e,t,r){const n=typeof t!="function"?t:{};return this.j=typeof t=="function"?t:r,w1(this),Lr(this,e,n),b1(this)}La(e,t,r,n){const s=typeof r!="function"?r:{};return this.j=typeof r=="function"?r:n,w1(this),Qr(this,e,s,t),b1(this)}Da(){return this.u}m(){var e=new or;Ue(e,"image_in"),Ue(e,"norm_rect");const t=new ir;Yr(t,yw,this.h);const r=new zt;er(r,2,"mediapipe.tasks.vision.image_segmenter.ImageSegmenterGraph"),$e(r,"IMAGE:image_in"),$e(r,"NORM_RECT:norm_rect"),r.o(t),wr(e,r),Cu(this,e),this.outputConfidenceMasks&&(ke(e,"confidence_masks"),ye(r,"CONFIDENCE_MASKS:confidence_masks"),Hi(this,"confidence_masks"),this.g.aa("confidence_masks",(n,s)=>{this.confidenceMasks=n.map(i=>Ki(this,i,!0,!this.j)),V(this,s)}),this.g.attachEmptyPacketListener("confidence_masks",n=>{this.confidenceMasks=[],V(this,n)})),this.outputCategoryMask&&(ke(e,"category_mask"),ye(r,"CATEGORY_MASK:category_mask"),Hi(this,"category_mask"),this.g.Z("category_mask",(n,s)=>{this.categoryMask=Ki(this,n,!1,!this.j),V(this,s)}),this.g.attachEmptyPacketListener("category_mask",n=>{this.categoryMask=void 0,V(this,n)})),ke(e,"quality_scores"),ye(r,"QUALITY_SCORES:quality_scores"),this.g.attachFloatVectorListener("quality_scores",(n,s)=>{this.qualityScores=n,V(this,s)}),this.g.attachEmptyPacketListener("quality_scores",n=>{this.categoryMask=void 0,V(this,n)}),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};Ot.prototype.getLabels=Ot.prototype.Da,Ot.prototype.segmentForVideo=Ot.prototype.La,Ot.prototype.segment=Ot.prototype.segment,Ot.prototype.setOptions=Ot.prototype.o,Ot.createFromModelPath=function(e,t){return ve(Ot,e,{baseOptions:{modelAssetPath:t}})},Ot.createFromModelBuffer=function(e,t){return ve(Ot,e,{baseOptions:{modelAssetBuffer:t}})},Ot.createFromOptions=function(e,t){return ve(Ot,e,t)};var df=class{constructor(e,t,r){this.confidenceMasks=e,this.categoryMask=t,this.qualityScores=r}close(){var e,t;(e=this.confidenceMasks)==null||e.forEach(r=>{r.close()}),(t=this.categoryMask)==null||t.close()}};df.prototype.close=df.prototype.close;var Fr=class extends rr{constructor(e,t){super(new Rr(e,t),"image_in","norm_rect_in",!1),this.outputCategoryMask=!1,this.outputConfidenceMasks=!0,this.h=new em,this.u=new mw,se(this.h,0,3,this.u),se(e=this.h,0,1,t=new He)}get baseOptions(){return be(this.h,He,1)}set baseOptions(e){se(this.h,0,1,e)}o(e){return"outputCategoryMask"in e&&(this.outputCategoryMask=e.outputCategoryMask??!1),"outputConfidenceMasks"in e&&(this.outputConfidenceMasks=e.outputConfidenceMasks??!0),super.l(e)}segment(e,t,r,n){const s=typeof r!="function"?r:{};if(this.j=typeof r=="function"?r:n,this.qualityScores=this.categoryMask=this.confidenceMasks=void 0,r=this.C+1,n=new xw,t.keypoint&&t.scribble)throw Error("Cannot provide both keypoint and scribble.");if(t.keypoint){var i=new Id;Cn(i,3,Oa(!0),!1),Cn(i,1,Mo(t.keypoint.x),0),Cn(i,2,Mo(t.keypoint.y),0),Xo(n,1,sf,i)}else{if(!t.scribble)throw Error("Must provide either a keypoint or a scribble.");{const l=new LS;for(i of t.scribble)Cn(t=new Id,3,Oa(!0),!1),Cn(t,1,Mo(i.x),0),Cn(t,2,Mo(i.y),0),Rp(l,1,Id,t);Xo(n,2,sf,l)}}this.g.addProtoToStream(n.g(),"mediapipe.tasks.vision.interactive_segmenter.proto.RegionOfInterest","roi_in",r),Lr(this,e,s);e:{try{const l=new df(this.confidenceMasks,this.categoryMask,this.qualityScores);if(!this.j){var a=l;break e}this.j(l)}finally{Iu(this)}a=void 0}return a}m(){var e=new or;Ue(e,"image_in"),Ue(e,"roi_in"),Ue(e,"norm_rect_in");const t=new ir;Yr(t,yw,this.h);const r=new zt;er(r,2,"mediapipe.tasks.vision.interactive_segmenter.InteractiveSegmenterGraphV2"),$e(r,"IMAGE:image_in"),$e(r,"ROI:roi_in"),$e(r,"NORM_RECT:norm_rect_in"),r.o(t),wr(e,r),Cu(this,e),this.outputConfidenceMasks&&(ke(e,"confidence_masks"),ye(r,"CONFIDENCE_MASKS:confidence_masks"),Hi(this,"confidence_masks"),this.g.aa("confidence_masks",(n,s)=>{this.confidenceMasks=n.map(i=>Ki(this,i,!0,!this.j)),V(this,s)}),this.g.attachEmptyPacketListener("confidence_masks",n=>{this.confidenceMasks=[],V(this,n)})),this.outputCategoryMask&&(ke(e,"category_mask"),ye(r,"CATEGORY_MASK:category_mask"),Hi(this,"category_mask"),this.g.Z("category_mask",(n,s)=>{this.categoryMask=Ki(this,n,!1,!this.j),V(this,s)}),this.g.attachEmptyPacketListener("category_mask",n=>{this.categoryMask=void 0,V(this,n)})),ke(e,"quality_scores"),ye(r,"QUALITY_SCORES:quality_scores"),this.g.attachFloatVectorListener("quality_scores",(n,s)=>{this.qualityScores=n,V(this,s)}),this.g.attachEmptyPacketListener("quality_scores",n=>{this.categoryMask=void 0,V(this,n)}),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};Fr.prototype.segment=Fr.prototype.segment,Fr.prototype.setOptions=Fr.prototype.o,Fr.createFromModelPath=function(e,t){return ve(Fr,e,{baseOptions:{modelAssetPath:t}})},Fr.createFromModelBuffer=function(e,t){return ve(Fr,e,{baseOptions:{modelAssetBuffer:t}})},Fr.createFromOptions=function(e,t){return ve(Fr,e,t)};var cr=class extends rr{constructor(e,t){super(new Rr(e,t),"input_frame_gpu","norm_rect",!1),this.j={detections:[]},se(e=this.h=new vw,0,1,t=new He)}get baseOptions(){return be(this.h,He,1)}set baseOptions(e){se(this.h,0,1,e)}o(e){return e.displayNamesLocale!==void 0?Ee(this.h,2,Ga(e.displayNamesLocale)):"displayNamesLocale"in e&&Ee(this.h,2),e.maxResults!==void 0?yn(this.h,3,e.maxResults):"maxResults"in e&&Ee(this.h,3),e.scoreThreshold!==void 0?Z(this.h,4,e.scoreThreshold):"scoreThreshold"in e&&Ee(this.h,4),e.categoryAllowlist!==void 0?$c(this.h,5,e.categoryAllowlist):"categoryAllowlist"in e&&Ee(this.h,5),e.categoryDenylist!==void 0?$c(this.h,6,e.categoryDenylist):"categoryDenylist"in e&&Ee(this.h,6),this.l(e)}F(e,t){return this.j={detections:[]},Lr(this,e,t),this.j}G(e,t,r){return this.j={detections:[]},Qr(this,e,r,t),this.j}m(){var e=new or;Ue(e,"input_frame_gpu"),Ue(e,"norm_rect"),ke(e,"detections");const t=new ir;Yr(t,$S,this.h);const r=new zt;er(r,2,"mediapipe.tasks.vision.ObjectDetectorGraph"),$e(r,"IMAGE:input_frame_gpu"),$e(r,"NORM_RECT:norm_rect"),ye(r,"DETECTIONS:detections"),r.o(t),wr(e,r),this.g.attachProtoVectorListener("detections",(n,s)=>{for(const i of n)n=Jv(i),this.j.detections.push(_w(n));V(this,s)}),this.g.attachEmptyPacketListener("detections",n=>{V(this,n)}),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};cr.prototype.detectForVideo=cr.prototype.G,cr.prototype.detect=cr.prototype.F,cr.prototype.setOptions=cr.prototype.o,cr.createFromModelPath=async function(e,t){return ve(cr,e,{baseOptions:{modelAssetPath:t}})},cr.createFromModelBuffer=function(e,t){return ve(cr,e,{baseOptions:{modelAssetBuffer:t}})},cr.createFromOptions=function(e,t){return ve(cr,e,t)};var hf=class{constructor(e,t,r){this.landmarks=e,this.worldLandmarks=t,this.segmentationMasks=r}close(){var e;(e=this.segmentationMasks)==null||e.forEach(t=>{t.close()})}};function _1(e){e.landmarks=[],e.worldLandmarks=[],e.segmentationMasks=void 0}function k1(e){try{const t=new hf(e.landmarks,e.worldLandmarks,e.segmentationMasks);if(!e.u)return t;e.u(t)}finally{Iu(e)}}hf.prototype.close=hf.prototype.close;var Rt=class extends rr{constructor(e,t){super(new Rr(e,t),"image_in","norm_rect",!1),this.landmarks=[],this.worldLandmarks=[],this.outputSegmentationMasks=!1,se(e=this.h=new ww,0,1,t=new He),this.A=new dw,se(this.h,0,3,this.A),this.j=new uw,se(this.h,0,2,this.j),yn(this.j,4,1),Z(this.j,2,.5),Z(this.A,2,.5),Z(this.h,4,.5)}get baseOptions(){return be(this.h,He,1)}set baseOptions(e){se(this.h,0,1,e)}o(e){return"numPoses"in e&&yn(this.j,4,e.numPoses??1),"minPoseDetectionConfidence"in e&&Z(this.j,2,e.minPoseDetectionConfidence??.5),"minTrackingConfidence"in e&&Z(this.h,4,e.minTrackingConfidence??.5),"minPosePresenceConfidence"in e&&Z(this.A,2,e.minPosePresenceConfidence??.5),"outputSegmentationMasks"in e&&(this.outputSegmentationMasks=e.outputSegmentationMasks??!1),this.l(e)}F(e,t,r){const n=typeof t!="function"?t:{};return this.u=typeof t=="function"?t:r,_1(this),Lr(this,e,n),k1(this)}G(e,t,r,n){const s=typeof r!="function"?r:{};return this.u=typeof r=="function"?r:n,_1(this),Qr(this,e,s,t),k1(this)}m(){var e=new or;Ue(e,"image_in"),Ue(e,"norm_rect"),ke(e,"normalized_landmarks"),ke(e,"world_landmarks"),ke(e,"segmentation_masks");const t=new ir;Yr(t,DS,this.h);const r=new zt;er(r,2,"mediapipe.tasks.vision.pose_landmarker.PoseLandmarkerGraph"),$e(r,"IMAGE:image_in"),$e(r,"NORM_RECT:norm_rect"),ye(r,"NORM_LANDMARKS:normalized_landmarks"),ye(r,"WORLD_LANDMARKS:world_landmarks"),r.o(t),wr(e,r),Cu(this,e),this.g.attachProtoVectorListener("normalized_landmarks",(n,s)=>{this.landmarks=[];for(const i of n)n=Ya(i),this.landmarks.push(Au(n));V(this,s)}),this.g.attachEmptyPacketListener("normalized_landmarks",n=>{this.landmarks=[],V(this,n)}),this.g.attachProtoVectorListener("world_landmarks",(n,s)=>{this.worldLandmarks=[];for(const i of n)n=Ni(i),this.worldLandmarks.push(ea(n));V(this,s)}),this.g.attachEmptyPacketListener("world_landmarks",n=>{this.worldLandmarks=[],V(this,n)}),this.outputSegmentationMasks&&(ye(r,"SEGMENTATION_MASK:segmentation_masks"),Hi(this,"segmentation_masks"),this.g.aa("segmentation_masks",(n,s)=>{this.segmentationMasks=n.map(i=>Ki(this,i,!0,!this.u)),V(this,s)}),this.g.attachEmptyPacketListener("segmentation_masks",n=>{this.segmentationMasks=[],V(this,n)})),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};Rt.prototype.detectForVideo=Rt.prototype.G,Rt.prototype.detect=Rt.prototype.F,Rt.prototype.setOptions=Rt.prototype.o,Rt.createFromModelPath=function(e,t){return ve(Rt,e,{baseOptions:{modelAssetPath:t}})},Rt.createFromModelBuffer=function(e,t){return ve(Rt,e,{baseOptions:{modelAssetBuffer:t}})},Rt.createFromOptions=function(e,t){return ve(Rt,e,t)},Rt.POSE_CONNECTIONS=Dw;const GS="0.10.32",KS=`https://cdn.jsdelivr.net/npm/@mediapipe/tasks-vision@${GS}/wasm`,qS="https://storage.googleapis.com/mediapipe-models/pose_landmarker/pose_landmarker_lite/float16/1/pose_landmarker_lite.task";let Ei=null,ic=-1;async function j1(e){const t=await ls.forVisionTasks(KS);return Rt.createFromOptions(t,{baseOptions:{modelAssetPath:qS,delegate:e},runningMode:"VIDEO",numPoses:1})}async function YS(){return Ei||(Ei=(async()=>{try{return await j1("GPU")}catch{return await j1("CPU")}})()),Ei}async function S1(){if(ic=-1,Ei)try{(await Ei).close()}catch{}Ei=null}async function N1(e,t){const r=await YS(),n=t<=ic?ic+1:t;return ic=n,r.detectForVideo(e,n)}const je={LEFT_SHOULDER:11,RIGHT_SHOULDER:12,LEFT_ELBOW:13,RIGHT_ELBOW:14,LEFT_WRIST:15,RIGHT_WRIST:16,LEFT_HIP:23,RIGHT_HIP:24,LEFT_KNEE:25,RIGHT_KNEE:26,LEFT_ANKLE:27,RIGHT_ANKLE:28};function Ur(e){return Math.max(0,Math.min(1,e))}function JS(e,t){var s;let r=0,n=0;for(const i of t){const a=(s=e[i])==null?void 0:s.visibility;typeof a=="number"&&(r+=a,n++)}return n>0?r/n:0}function QS(e){if(e.length===0)return NaN;const t=[...e].sort((n,s)=>n-s),r=Math.floor(t.length/2);return t.length%2===0?(t[r-1]+t[r])/2:t[r]}function Fo(e){return e*180/Math.PI}function zl(e,t,r){const n={x:e.x-t.x,y:e.y-t.y},s={x:r.x-t.x,y:r.y-t.y},i=n.x*s.x+n.y*s.y,a=Math.sqrt(n.x*n.x+n.y*n.y),l=Math.sqrt(s.x*s.x+s.y*s.y);if(a<1e-6||l<1e-6)return 0;const c=i/(a*l);return Math.acos(Math.max(-1,Math.min(1,c)))}function Od(e,t){const r=e.x-t.x,n=e.y-t.y;return Math.sqrt(r*r+n*n)}function XS(e){const t=Fo(e),r=Math.abs(180-t);return Math.max(0,1-r/90)}function ZS(e){return e<10?.3:e<20?.5:e<30?.7:e<40?.85:1}function eN(e){return{stanceWidth:"stance width",lateralSway:"lateral stability",kneeDip:"knee loading",verticalDrive:"vertical drive",elbowAlignment:"elbow alignment",elbowUnderBall:"elbow positioning",releaseHeight:"release height",wristFlick:"wrist snap",followThroughHold:"follow-through",landingBalance:"landing balance"}[e]||e}function tN(e){const t=[];if(e.stanceWidth<.65){const r=e.stanceWidth<.4?3:e.stanceWidth<.55?2:1;t.push({key:"stanceWidth",severity:r,metricValue:e.stanceWidth,title:"Narrow or wide stance",diagnosis:"Your foot positioning affects balance and power generation.",evidence:`Stance width scored ${Math.round(e.stanceWidth*100)}%.`,correction:"Position your feet shoulder-width apart for optimal base and balance.",drill:"Practice your shooting stance: feet shoulder-width, knees slightly bent, weight on balls of feet. Hold for 10 seconds, repeat 5 times.",successCriteria:"Stance width >75%",coachText:`Your foot positioning affects balance and power generation. Stance width scored ${Math.round(e.stanceWidth*100)}%. Position your feet shoulder-width apart for optimal base and balance. Practice your shooting stance: feet shoulder-width, knees slightly bent, weight on balls of feet. Hold for 10 seconds, repeat 5 times. Target: Stance width >75%.`})}if(e.lateralSway<.65){const r=e.lateralSway<.4?3:e.lateralSway<.55?2:1;t.push({key:"lateralSway",severity:r,metricValue:e.lateralSway,title:"Lateral body drift during shot",diagnosis:"Your torso moves sideways during the shooting motion, reducing accuracy.",evidence:`Lateral stability scored ${Math.round(e.lateralSway*100)}%.`,correction:"Keep your torso centered and stable. Imagine shooting inside a narrow phone booth.",drill:"Wall drill: Stand 6 inches from a wall, shoot with one hand. If you touch the wall, you're drifting. 310 reps.",successCriteria:"Lateral stability >75%",coachText:`Your torso moves sideways during the shooting motion, reducing accuracy. Lateral stability scored ${Math.round(e.lateralSway*100)}%. Keep your torso centered and stable. Imagine shooting inside a narrow phone booth. Wall drill: Stand 6 inches from a wall, shoot with one hand. If you touch the wall, you're drifting. 310 reps. Target: Lateral stability >75%.`})}if(e.kneeDip<.65){const r=e.kneeDip<.4?3:e.kneeDip<.55?2:1;t.push({key:"kneeDip",severity:r,metricValue:e.kneeDip,title:"Insufficient knee bend",diagnosis:"You're not loading your legs enough, limiting power and range.",evidence:`Knee loading scored ${Math.round(e.kneeDip*100)}%.`,correction:"Dip your knees before every shot. Your power comes from your legs, not your arms.",drill:"Catch-and-shoot drill: Have a partner pass you the ball. Focus on dipping knees on the catch. 312 reps.",successCriteria:"Knee loading >75%",coachText:`You're not loading your legs enough, limiting power and range. Knee loading scored ${Math.round(e.kneeDip*100)}%. Dip your knees before every shot. Your power comes from your legs, not your arms. Catch-and-shoot drill: Have a partner pass you the ball. Focus on dipping knees on the catch. 312 reps. Target: Knee loading >75%.`})}if(e.verticalDrive<.65){const r=e.verticalDrive<.4?3:e.verticalDrive<.55?2:1;t.push({key:"verticalDrive",severity:r,metricValue:e.verticalDrive,title:"Forward or backward drift on release",diagnosis:"You're moving horizontally during your shot instead of going straight up.",evidence:`Vertical drive scored ${Math.round(e.verticalDrive*100)}%.`,correction:"Jump straight up and land in the same spot. This is called 'sticking the landing'.",drill:"Line drill: Place a line of tape on the floor. Shoot and land on the line. 310 reps.",successCriteria:"Vertical drive >75%",coachText:`You're moving horizontally during your shot instead of going straight up. Vertical drive scored ${Math.round(e.verticalDrive*100)}%. Jump straight up and land in the same spot. This is called 'sticking the landing'. Line drill: Place a line of tape on the floor. Shoot and land on the line. 310 reps. Target: Vertical drive >75%.`})}if(e.elbowAlignment<.65){const r=e.elbowAlignment<.4?3:e.elbowAlignment<.55?2:1;t.push({key:"elbowAlignment",severity:r,metricValue:e.elbowAlignment,title:"Elbow flares out at release",diagnosis:"Your elbow isn't aligned with the basket, causing inconsistent shots.",evidence:`Elbow alignment scored ${Math.round(e.elbowAlignment*100)}%.`,correction:"Keep your elbow under the ball and pointing at the rim throughout the shot.",drill:"Form shooting close to basket: Focus only on elbow alignment. 315 reps from 5 feet.",successCriteria:"Elbow alignment >75%",coachText:`Your elbow isn't aligned with the basket, causing inconsistent shots. Elbow alignment scored ${Math.round(e.elbowAlignment*100)}%. Keep your elbow under the ball and pointing at the rim throughout the shot. Form shooting close to basket: Focus only on elbow alignment. 315 reps from 5 feet. Target: Elbow alignment >75%.`})}if(e.elbowUnderBall<.65){const r=e.elbowUnderBall<.4?3:e.elbowUnderBall<.55?2:1;t.push({key:"elbowUnderBall",severity:r,metricValue:e.elbowUnderBall,title:"Elbow not under wrist at release",diagnosis:"Your elbow position at release reduces control and accuracy.",evidence:`Elbow positioning scored ${Math.round(e.elbowUnderBall*100)}%.`,correction:"At the set point, your elbow should be directly under your wrist, forming an 'L' shape.",drill:"Mirror drill: Practice your set point in front of a mirror. Check elbow position. 310 holds (3 seconds each).",successCriteria:"Elbow positioning >75%",coachText:`Your elbow position at release reduces control and accuracy. Elbow positioning scored ${Math.round(e.elbowUnderBall*100)}%. At the set point, your elbow should be directly under your wrist, forming an 'L' shape. Mirror drill: Practice your set point in front of a mirror. Check elbow position. 310 holds (3 seconds each). Target: Elbow positioning >75%.`})}if(e.releaseHeight<.65){const r=e.releaseHeight<.4?3:e.releaseHeight<.55?2:1;t.push({key:"releaseHeight",severity:r,metricValue:e.releaseHeight,title:"Low release point",diagnosis:"You're releasing the ball too low, making it easier to block and harder to arc.",evidence:`Release height scored ${Math.round(e.releaseHeight*100)}%.`,correction:"Release the ball at the peak of your jump with your arm fully extended.",drill:"One-motion shooting: Focus on shooting 'on the way up'. 312 reps from free throw line.",successCriteria:"Release height >75%",coachText:`You're releasing the ball too low, making it easier to block and harder to arc. Release height scored ${Math.round(e.releaseHeight*100)}%. Release the ball at the peak of your jump with your arm fully extended. One-motion shooting: Focus on shooting 'on the way up'. 312 reps from free throw line. Target: Release height >75%.`})}if(e.wristFlick<.65){const r=e.wristFlick<.4?3:e.wristFlick<.55?2:1;t.push({key:"wristFlick",severity:r,metricValue:e.wristFlick,title:"Weak or inconsistent wrist snap",diagnosis:"Your wrist isn't snapping through the ball, reducing backspin and arc.",evidence:`Wrist snap scored ${Math.round(e.wristFlick*100)}%.`,correction:"Snap your wrist forward and down like you're reaching into a cookie jar on a high shelf.",drill:"Lying down shooting: Lie on your back, shoot ball straight up focusing on wrist snap. 320 reps.",successCriteria:"Wrist snap >75%",coachText:`Your wrist isn't snapping through the ball, reducing backspin and arc. Wrist snap scored ${Math.round(e.wristFlick*100)}%. Snap your wrist forward and down like you're reaching into a cookie jar on a high shelf. Lying down shooting: Lie on your back, shoot ball straight up focusing on wrist snap. 320 reps. Target: Wrist snap >75%.`})}if(e.followThroughHold<.65){const r=e.followThroughHold<.4?3:e.followThroughHold<.55?2:1;t.push({key:"followThroughHold",severity:r,metricValue:e.followThroughHold,title:"Dropping hand too early after release",diagnosis:"You're not holding your follow-through, which affects consistency and arc.",evidence:`Follow-through scored ${Math.round(e.followThroughHold*100)}%.`,correction:"Hold your follow-through until the ball hits the rim. 'Hand in the cookie jar' position.",drill:"Freeze drill: After every shot, hold follow-through for 2 full seconds. 310 reps.",successCriteria:"Follow-through >75%",coachText:`You're not holding your follow-through, which affects consistency and arc. Follow-through scored ${Math.round(e.followThroughHold*100)}%. Hold your follow-through until the ball hits the rim. 'Hand in the cookie jar' position. Freeze drill: After every shot, hold follow-through for 2 full seconds. 310 reps. Target: Follow-through >75%.`})}if(e.landingBalance<.65){const r=e.landingBalance<.4?3:e.landingBalance<.55?2:1;t.push({key:"landingBalance",severity:r,metricValue:e.landingBalance,title:"Unstable landing after shot",diagnosis:"You're landing off-balance, which indicates poor body control during the shot.",evidence:`Landing balance scored ${Math.round(e.landingBalance*100)}%.`,correction:"Land softly in the same spot with feet shoulder-width apart, ready to shoot again.",drill:"Balance drill: After each shot, freeze your landing position for 3 seconds. 38 reps.",successCriteria:"Landing balance >75%",coachText:`You're landing off-balance, which indicates poor body control during the shot. Landing balance scored ${Math.round(e.landingBalance*100)}%. Land softly in the same spot with feet shoulder-width apart, ready to shoot again. Balance drill: After each shot, freeze your landing position for 3 seconds. 38 reps. Target: Landing balance >75%.`})}return t.sort((r,n)=>n.severity-r.severity||r.metricValue-n.metricValue)}function rN(e){const t=[],n=Object.entries(e).filter(([s,i])=>i>=.75).sort((s,i)=>i[1]-s[1]).slice(0,3);for(const[s,i]of n){const a=Math.round(i*100),l=eN(s);t.push(`Your ${l} is excellent (${a}%), showing strong fundamentals in this area.`)}for(;t.length<3;)t.length===0?t.push("Good overall shooting mechanics with room to refine specific areas."):t.length===1?t.push("Consistent form throughout the motion provides a solid foundation."):t.push("Your shooting motion shows potential with focused practice.");return t.slice(0,3)}function nN(e,t){return t.slice(0,5).map(r=>r.coachText)}function sN(e,t){return e.length===0?null:e[0]}function iN(e){return Math.min(100,Math.ceil((e+5)/5)*5)}function Co(){return{stanceWidth:0,lateralSway:0,kneeDip:0,verticalDrive:0,elbowAlignment:0,elbowUnderBall:0,releaseHeight:0,wristFlick:0,followThroughHold:0,landingBalance:0}}async function Mw(e,t,r){var ol,yo,al,ll,cl;await S1(),console.log("[analyzeVideo] start",{videoUrl:e});const n=document.createElement("video");n.src=e,n.muted=!0,n.playsInline=!0,await new Promise((re,ne)=>{n.onloadedmetadata=()=>re(),n.onerror=()=>ne(new Error("Failed to load video"))});const s=n.duration;if(s<1)return{score:0,metrics:Co(),strengths:[],improvements:[],isInvalid:!0,messageIfInvalid:"Video too short. Please record at least 1 second.",processedFrames:0,totalFrames:0};const i=Math.min(s,30),a=.1,l=[];let c=0;const u=Math.floor(i/a),d=[11,12,13,14,15,16,23,24],f=.55;for(let re=0;re<i;re+=a){n.currentTime=re,await new Promise(j=>{n.onseeked=()=>j()});let ne=null;try{ne=await N1(n,Math.round(re*1e3)),c++}catch(j){console.error("[analyzeVideo] frame detection failed",j);try{await S1(),ne=await N1(n,Math.round(re*1e3)),c++}catch(I){return console.error("[analyzeVideo] frame retry failed",I),{score:0,metrics:Co(),strengths:[],improvements:[],isInvalid:!0,messageIfInvalid:"Error interno del modelo al procesar el vdeo. Prueba con otro vdeo o vuelve a grabarlo.",processedFrames:c,totalFrames:u}}}if(ne&&ne.landmarks&&ne.landmarks.length>0){const j=ne.landmarks[0];j.length>24&&JS(j,d)>=f&&l.push({lm:j,t:re})}r&&r(Math.round(c/u*100))}if(console.log("[analyzeVideo] frames",{processedFrames:c,totalFrames:u,valid:l.length,poseRatio:c>0?l.length/c:0}),l.length/c<.3||l.length<10)return{score:0,metrics:Co(),strengths:[],improvements:[],isInvalid:!0,messageIfInvalid:"Unable to detect your body in the video. Please ensure you are fully visible in the frame.",processedFrames:c,totalFrames:u};const m=l.some(re=>{const ne=re.lm[je.RIGHT_WRIST],j=re.lm[je.LEFT_WRIST];return ne&&j&&ne.y<j.y}),x={shoulder:m?je.RIGHT_SHOULDER:je.LEFT_SHOULDER,elbow:m?je.RIGHT_ELBOW:je.LEFT_ELBOW,wrist:m?je.RIGHT_WRIST:je.LEFT_WRIST,hip:m?je.RIGHT_HIP:je.LEFT_HIP},w=[];for(const re of l){const ne=re.lm[je.LEFT_SHOULDER],j=re.lm[je.RIGHT_SHOULDER],I=re.lm[je.LEFT_HIP],z=re.lm[je.RIGHT_HIP];ne&&j&&I&&z&&w.push({x:(ne.x+j.x+I.x+z.x)/4,y:(ne.y+j.y+I.y+z.y)/4})}let k=1;if(w.length>1){let re=0;for(let j=1;j<w.length;j++){const I=w[j].x-w[j-1].x,z=w[j].y-w[j-1].y;re+=Math.sqrt(I*I+z*z)}const ne=re/(w.length-1);ne<.05?k=1:ne<.1?k=.8:ne<.15?k=.5:k=.3}let g=-1,p=Number.POSITIVE_INFINITY;for(let re=0;re<l.length;re++){const ne=l[re].lm[x.wrist];ne&&Number.isFinite(ne.y)&&ne.y<p&&(p=ne.y,g=re)}if(g<0)return{score:0,metrics:Co(),strengths:[],improvements:[],isInvalid:!0,messageIfInvalid:"Could not identify a clear release point. Try recording with a better angle showing your shooting arm.",processedFrames:c,totalFrames:u};const y=140,v=l[g].lm,N=Fo(zl(v[x.shoulder],v[x.elbow],v[x.wrist])),E=Number.isFinite(N)&&N>=y,A=Math.min(20,g),C=[];for(let re=Math.max(0,g-A);re<g;re++){const ne=(ol=l[re].lm[x.wrist])==null?void 0:ol.y;Number.isFinite(ne)&&C.push(ne)}const P=QS(C),L=(yo=v[x.wrist])==null?void 0:yo.y,$=Number.isFinite(P)&&Number.isFinite(L)?P-L:0,Q=t==="ft",ue=$>=(Q?.1:.18),he=7;let D=0;const we=.22;for(let re=1;re<=he;re++){const ne=g+re;if(ne>=l.length)break;const j=(al=l[ne].lm[x.wrist])==null?void 0:al.y;Number.isFinite(j)&&Number.isFinite(L)&&j<=L+we&&D++}const R=D>=(Q?2:3);if([E,ue,R].filter(Boolean).length<2)return console.log("[ShotGate] FAILED",{gateElbow:E,gateLift:ue,gateFollow:R,elbowAtRelease:N,wristLift:$,highCount:D}),{score:0,metrics:Co(),strengths:[],improvements:[],isInvalid:!0,messageIfInvalid:"This doesn't look like a basketball shot. Please record a full shooting motion with arm extension and follow-through.",processedFrames:c,totalFrames:u};console.log("[ShotGate] PASSED",{gateElbow:E,gateLift:ue,gateFollow:R,elbowAtRelease:N,wristLift:$,highCount:D});const H=v[x.shoulder],U=v[x.elbow],F=v[x.wrist],de=v[je.LEFT_ANKLE],pe=v[je.RIGHT_ANKLE],Ne=v[je.LEFT_SHOULDER],T=v[je.RIGHT_SHOULDER],_=de&&pe?Od(de,pe):0,S=Ne&&T?Od(Ne,T):1,M=_/(S||1),K=Ur(1-Math.abs(M-1)/.5),oe=Ur(k),me=m?v[je.RIGHT_KNEE]:v[je.LEFT_KNEE],ge=v[x.hip],tt=m?v[je.RIGHT_ANKLE]:v[je.LEFT_ANKLE],rt=me&&ge&&tt?Fo(zl(ge,me,tt)):180,uo=Math.min(10,g);let Fs=180;if(uo>0){let re=0,ne=0;for(let j=Math.max(0,g-uo);j<g;j++){const I=l[j].lm,z=m?I[je.RIGHT_KNEE]:I[je.LEFT_KNEE],ae=m?I[je.RIGHT_HIP]:I[je.LEFT_HIP],ce=m?I[je.RIGHT_ANKLE]:I[je.LEFT_ANKLE];z&&ae&&ce&&(re+=Fo(zl(ae,z,ce)),ne++)}ne>0&&(Fs=re/ne)}const Pu=Fs-rt,Ja=Ur(Pu/40),Ou=w.length>g&&g>0?(()=>{const re=w[Math.max(0,g-Math.min(10,g))],ne=w[g],j=Math.abs(ne.x-re.x),I=Math.abs(ne.y-re.y);return I>.001?Ur(I/(I+j+.01)):.5})():.5,Ru=XS(zl(H,U,F)),Qa=Math.abs(U.x-F.x),Lu=Ur(1-Qa/.15),ho=Ur($/.3),$u=3,Xa=Math.atan2(F.y-U.y,F.x-U.x);let Xr=0;for(let re=1;re<=$u;re++){const ne=g+re;if(ne>=l.length)break;const j=l[ne].lm,I=j[x.elbow],z=j[x.wrist];if(I&&z){const ae=Math.atan2(z.y-I.y,z.x-I.x);let ce=Math.abs(ae-Xa);ce>Math.PI&&(ce=2*Math.PI-ce),Xr=Math.max(Xr,Fo(ce))}}const Za=ZS(Xr),fo=7;let el=0;const Du=.22,Us=(ll=v[x.wrist])==null?void 0:ll.y;for(let re=1;re<=fo;re++){const ne=g+re;if(ne>=l.length)break;const j=(cl=l[ne].lm[x.wrist])==null?void 0:cl.y;Number.isFinite(j)&&Number.isFinite(Us)&&j<=Us+Du&&el++}const tl=Ur(el/fo),rl=Math.min(10,l.length-g-1);let nl=_;if(rl>0){let re=0,ne=0;for(let j=g+1;j<Math.min(l.length,g+rl+1);j++){const I=l[j].lm,z=I[je.LEFT_ANKLE],ae=I[je.RIGHT_ANKLE];z&&ae&&(re+=Od(z,ae),ne++)}ne>0&&(nl=re/ne)}const sl=Math.abs(nl-_),Mu=Ur(1-sl/(S*.5)),bn={stanceWidth:K,lateralSway:oe,kneeDip:Ja,verticalDrive:Ou,elbowAlignment:Ur(Ru),elbowUnderBall:Lu,releaseHeight:ho,wristFlick:Ur(Za),followThroughHold:tl,landingBalance:Mu},Fu={stanceWidth:.08,lateralSway:.12,kneeDip:.1,verticalDrive:.1,elbowAlignment:.18,elbowUnderBall:.1,releaseHeight:.12,wristFlick:.08,followThroughHold:.07,landingBalance:.05},il=Object.keys(bn).reduce((re,ne)=>re+(bn[ne]??0)*(Fu[ne]??0),0),po=Math.max(0,Math.min(100,Math.round(100*il))),mo=tN(bn),Uu=rN(bn),zu=nN(bn,mo),zs=sN(mo),go=iN(po),Bu=zs?{title:"AI Coach Tip",targetScore:go,mainIssueTitle:zs.title,body:zs.coachText}:{title:"AI Coach Tip",targetScore:go,mainIssueTitle:"Keep refining your technique",body:`Your shooting form is well-balanced across all metrics. Focus on consistency and repetition. With continued practice maintaining this form, you can reach ${go}.`};return{score:po,metrics:bn,strengths:Uu,improvements:zu,isInvalid:!1,processedFrames:c,totalFrames:u,aiCoachTip:Bu}}async function Fw(e){const{data:t,error:r}=await _e.from("shot_analyses").insert(e).select("*").maybeSingle();if(r)throw r;if(!t)throw new Error("Failed to save analysis");return t}async function oN(e,t=20){const{data:r,error:n}=await _e.from("shot_analyses").select("*").eq("user_id",e).order("created_at",{ascending:!1}).limit(t);if(n)throw n;return r??[]}async function ff(e,t,r=20){const{data:n,error:s}=await _e.from("shot_analyses").select("*").eq("user_id",e).eq("shot_type",t).order("created_at",{ascending:!1}).limit(r);if(s)throw s;return n??[]}const Rd=[{id:"3pt",title:"Jumpshot",icon:_x,desc:"Analyze your jump shot form",image:"/jumpshot.png"},{id:"ft",title:"Free Throw",icon:bx,desc:"Routine & consistency",image:"/free_throw.png"}],E1=["Detecting your posture","Tracking your movement","Measuring your balance","Measuring your alignment","Measuring your release point","Measuring your rhythm","Calculating your metrics","Building your feedback","Creating your improvement plan"],aN=()=>{const{user:e}=xr(),t=(e==null?void 0:e.id)??null,[r,n]=b.useState("selection"),[s,i]=b.useState(null),[a,l]=b.useState(!1),[c,u]=b.useState(null),[d,f]=b.useState(0),[h,m]=b.useState(null),[x,w]=b.useState(null),[k,g]=b.useState(0),[p,y]=b.useState([]),[v,N]=b.useState(!1),[E,A]=b.useState("all"),[C,P]=b.useState(!1),[L,$]=b.useState(!1),Q=b.useRef(null),ee=b.useRef(null),ue=_=>{i(_),n("upload")},he=async _=>{var S,M,K,oe;if(!yr.isNativePlatform()){_==="camera"?(S=Q.current)==null||S.click():(M=ee.current)==null||M.click();return}try{if(_==="gallery"){const ge=(K=(await Dx.pickVideos({limit:1})).files)==null?void 0:K[0],tt=ge==null?void 0:ge.path;if(tt){const rt=yr.convertFileSrc(tt);u(rt),n("preview")}return}(oe=Q.current)==null||oe.click()}catch(me){console.error("Video picker error:",me)}},D=_=>{if(_.target.files&&_.target.files.length>0){const S=_.target.files[0],M=URL.createObjectURL(S);u(M),n("preview")}},we=async()=>{if(console.log("[FORM] startAnalysis",{ts:Date.now(),videoUrl:c,shotType:s==null?void 0:s.id}),console.log("[FORM] setViewState -> analyzing"),n("analyzing"),f(0),g(0),!!c)try{console.log("[FORM] analyzeVideo begin");const _=await Mw(c,s==null?void 0:s.id,S=>{});if(console.log("[FORM] analyzeVideo success",{score:_==null?void 0:_.score,isInvalid:_==null?void 0:_.isInvalid}),m(_),$(!1),(async()=>{var S,M,K,oe;try{P(!0);const me=await Ix({shotType:(s==null?void 0:s.id)??"unknown",score:_.score,metrics:{elbowAlignment:(S=_.metrics)==null?void 0:S.elbowAlignment,releaseHeight:(M=_.metrics)==null?void 0:M.releaseHeight,wristFlick:(K=_.metrics)==null?void 0:K.wristFlick,lateralSway:(oe=_.metrics)==null?void 0:oe.lateralSway},context:{framesProcessed:_.processedFrames}},5e3);if(!me)return;m(ge=>{var tt,rt;return ge&&{...ge,strengths:(tt=me.strengths)!=null&&tt.length?me.strengths:ge.strengths,improvements:(rt=me.improvements)!=null&&rt.length?me.improvements:ge.improvements,aiCoachTip:me.aiCoachTip??ge.aiCoachTip}}),$(!0)}finally{P(!1)}})(),t&&!_.isInvalid)try{const S=await Fw({user_id:t,shot_type:(s==null?void 0:s.id)??null,score:_.score,metrics:_.metrics,strengths:_.strengths,improvements:_.improvements,ai_coach_tip:_.aiCoachTip??null,engine_version:null,source:"client",video_meta:{processedFrames:_.processedFrames,totalFrames:_.totalFrames}}),M=px(t,S);y(M)}catch(S){console.warn("[ANALYSIS] save error:",S)}setTimeout(()=>{console.log("[FORM] setViewState -> results"),n("results")},800)}catch(_){console.error("[FORM] Analysis error:",_),m({score:0,metrics:{stanceWidth:0,lateralSway:0,kneeDip:0,verticalDrive:0,elbowAlignment:0,elbowUnderBall:0,releaseHeight:0,wristFlick:0,followThroughHold:0,landingBalance:0},strengths:[],improvements:[],isInvalid:!0,messageIfInvalid:"An error occurred during analysis. Please try again.",processedFrames:0,totalFrames:0}),console.log("[FORM] setViewState -> results (after error)"),n("results")}},R=_=>{var K,oe;const S=((K=_.video_meta)==null?void 0:K.processedFrames)??0,M=((oe=_.video_meta)==null?void 0:oe.totalFrames)??0;return{score:_.score??0,metrics:_.metrics,strengths:_.strengths,improvements:_.improvements,aiCoachTip:_.ai_coach_tip??void 0,isInvalid:!1,messageIfInvalid:void 0,processedFrames:S,totalFrames:M}},B=_=>{w(_),m(R(_)),g(0),n("results")},H=()=>{r==="upload"?(n("selection"),i(null)):r==="preview"?(n("upload"),u(null)):r==="results"&&(w(null),n("selection"),i(null),u(null),g(0),m(null))};b.useEffect(()=>{if(!t)return;const _=hx(t);_.length>0&&y(_);let S=!1;return(async()=>{N(!0);try{const M=await oN(t,20);if(S)return;y(M),fx(t,M)}catch(M){console.warn("[HISTORY] fetch error:",M)}finally{S||N(!1)}})(),()=>{S=!0}},[t]),b.useEffect(()=>{if(r==="analyzing"){const _=setInterval(()=>{f(S=>S<E1.length-1?S+1:S)},800);return()=>clearInterval(_)}},[r]),b.useEffect(()=>{if(r==="results"&&h){const _=h.score,S=2500,M=60,K=S/M;let oe=0;const me=setInterval(()=>{oe++;const ge=oe/M,tt=1-Math.pow(1-ge,3),rt=Math.min(Math.round(tt*_),_);g(rt),oe>=M&&clearInterval(me)},K);return()=>clearInterval(me)}},[r,h]);const U=E==="all"?p:p.filter(_=>_.shot_type===E),F=()=>o.jsx("div",{className:"pb-24 animate-in fade-in duration-500 min-h-[80vh]",children:o.jsxs("div",{className:"mt-2 px-1",children:[o.jsx("h3",{className:"text-2xl font-extrabold tracking-tight mb-2",children:"Analyze Form"}),o.jsx("p",{className:"text-muted text-sm font-medium mb-6",children:"Select a shot type to begin analysis"}),o.jsx("div",{className:"flex overflow-x-auto gap-4 pb-8 -mx-6 px-6 no-scrollbar snap-x snap-mandatory",children:Rd.map(_=>o.jsxs("div",{onClick:()=>ue(_),className:`
                    relative overflow-hidden min-w-[200px] h-[280px] rounded-3xl p-6 flex flex-col justify-between snap-center cursor-pointer transition-all duration-300 border
                    bg-surface border-white/10 hover:border-primary/50 hover:bg-white/5 active:scale-95
                  `,children:[o.jsx("img",{src:_.image,alt:_.title,className:"absolute inset-0 w-full h-full object-cover pointer-events-none",loading:"lazy",draggable:!1}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black via-black/60 to-black/20 pointer-events-none"}),o.jsxs("div",{className:"relative z-10 flex flex-col h-full justify-between",children:[o.jsx("div",{className:"w-14 h-14 rounded-full flex items-center justify-center bg-white/5 text-white",children:o.jsx(_.icon,{size:28})}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-3xl font-extrabold leading-none mb-3 text-white",children:_.title}),o.jsx("p",{className:"text-xs font-bold uppercase tracking-wider text-muted",children:_.desc})]})]})]},_.id))}),o.jsx("div",{className:"mt-4 px-1 mb-10",children:o.jsxs("button",{onClick:()=>l(!0),className:"w-full bg-[#1a1a1a] border border-white/5 rounded-2xl p-4 flex items-center justify-between group hover:bg-white/5 hover:border-primary/30 transition-all",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-500/10 text-blue-500 flex items-center justify-center",children:o.jsx(Nx,{size:20})}),o.jsxs("div",{className:"text-left",children:[o.jsx("h4",{className:"font-bold text-sm text-white",children:"Recording Tips"}),o.jsx("p",{className:"text-[10px] text-muted font-bold uppercase tracking-wide",children:"How to get accurate results"})]})]}),o.jsx(Bh,{size:16,className:"rotate-180 text-muted group-hover:text-white transition-colors"})]})}),o.jsxs("div",{className:"px-1",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h3",{className:"text-lg font-bold",children:"Analysis History"}),o.jsx(Wh,{size:16,className:"text-muted"})]}),o.jsxs("div",{className:"flex gap-2 mb-6 overflow-x-auto no-scrollbar pb-2",children:[o.jsx("button",{onClick:()=>A("all"),className:`px-4 py-2 rounded-full text-xs font-bold whitespace-nowrap transition-colors ${E==="all"?"bg-white text-black":"bg-surface text-muted border border-white/5"}`,children:"All Shots"}),Rd.map(_=>o.jsx("button",{onClick:()=>A(_.id),className:`px-4 py-2 rounded-full text-xs font-bold whitespace-nowrap transition-colors ${E===_.id?"bg-white text-black":"bg-surface text-muted border border-white/5"}`,children:_.title},_.id))]}),o.jsx("div",{className:"space-y-3",children:v&&p.length===0?o.jsxs("div",{className:"text-center py-10 text-muted",children:[o.jsx(Ta,{className:"animate-spin mx-auto mb-2",size:24}),o.jsx("p",{className:"text-sm font-medium",children:"Loading history..."})]}):U.length>0?U.map(_=>{const S=Rd.find(oe=>oe.id===_.shot_type),K=new Date(_.created_at).toLocaleDateString("en-US",{month:"short",day:"numeric"});return o.jsxs("div",{className:"bg-surface p-4 rounded-2xl border border-white/5 flex items-center gap-4 hover:border-primary/20 transition-colors cursor-pointer group",onClick:()=>B(_),children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("h4",{className:"font-bold text-sm text-white mb-1",children:[(S==null?void 0:S.title)||"Shot"," Analysis"]}),o.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-muted font-bold uppercase tracking-wide",children:[o.jsx(_5,{size:10}),K]})]}),o.jsx("div",{className:"pr-2",children:o.jsx("div",{className:`text-2xl font-black ${(_.score??0)>=80?"text-primary":"text-white"}`,children:_.score??"-"})})]},_.id)}):o.jsx("div",{className:"text-center py-10 text-muted",children:o.jsx("p",{className:"text-sm font-medium",children:"No analyses found."})})})]})]})}),de=()=>o.jsxs("div",{className:"pb-24 animate-in slide-in-from-right duration-300",children:[o.jsx("input",{type:"file",ref:Q,accept:"video/*",capture:"environment",className:"hidden",onChange:D}),o.jsx("input",{type:"file",ref:ee,accept:"video/*",className:"hidden",onChange:D}),o.jsxs("div",{className:"flex items-center gap-4 mb-8 mt-2",children:[o.jsx("button",{onClick:H,className:"w-10 h-10 rounded-full bg-surface border border-white/10 flex items-center justify-center hover:bg-white/5 active:scale-95 transition-all",children:o.jsx(Bh,{size:24})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-xl font-extrabold tracking-tight",children:"Upload Gameplay"}),o.jsx("p",{className:"text-xs text-muted font-bold uppercase tracking-wider",children:s==null?void 0:s.title})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("button",{onClick:()=>he("camera"),className:"w-full bg-surface border border-white/10 rounded-3xl p-8 flex items-center justify-between group active:scale-[0.98] transition-all hover:border-primary/50",children:o.jsxs("div",{className:"flex items-center gap-5",children:[o.jsx("div",{className:"w-16 h-16 rounded-2xl bg-primary/10 flex items-center justify-center text-primary group-hover:bg-primary group-hover:text-black transition-colors",children:o.jsx(Ea,{size:32})}),o.jsxs("div",{className:"text-left",children:[o.jsx("h4",{className:"text-xl font-bold mb-1",children:"Record Video"}),o.jsx("p",{className:"text-xs text-muted font-medium",children:"Use camera to record shot"})]})]})}),o.jsx("button",{onClick:()=>he("gallery"),className:"w-full bg-surface border border-white/10 rounded-3xl p-8 flex items-center justify-between group active:scale-[0.98] transition-all hover:border-primary/50",children:o.jsxs("div",{className:"flex items-center gap-5",children:[o.jsx("div",{className:"w-16 h-16 rounded-2xl bg-white/5 flex items-center justify-center text-white group-hover:bg-white group-hover:text-black transition-colors",children:o.jsx(Sx,{size:32})}),o.jsxs("div",{className:"text-left",children:[o.jsx("h4",{className:"text-xl font-bold mb-1",children:"Choose from Gallery"}),o.jsx("p",{className:"text-xs text-muted font-medium",children:"Upload existing footage"})]})]})})]}),o.jsxs("div",{className:"mt-8 p-6 rounded-2xl bg-blue-500/5 border border-blue-500/10",children:[o.jsx("h5",{className:"text-sm font-bold text-blue-400 mb-2",children:"Pro Tip"}),o.jsx("p",{className:"text-xs text-muted leading-relaxed",children:"For the best analysis, ensure your full body is visible in the frame and record from a side or front angle."})]})]}),pe=()=>o.jsxs("div",{className:"flex flex-col animate-in zoom-in-95 duration-300 relative",children:[o.jsx("div",{className:"absolute top-4 left-4 z-20",children:o.jsx("button",{onClick:H,className:"w-10 h-10 rounded-full bg-black/50 backdrop-blur-md border border-white/10 flex items-center justify-center hover:bg-black/70 text-white",children:o.jsx(qn,{size:20})})}),o.jsxs("div",{className:"h-[55vh] bg-black rounded-3xl overflow-hidden relative border border-white/10 shadow-2xl shrink-0",children:[c&&o.jsx("video",{src:c,className:"w-full h-full object-cover",controls:!1,autoPlay:!0,loop:!0,muted:!0,playsInline:!0,onError:_=>console.error("[VIDEO] onError",{e:_,ts:Date.now(),src:c}),onStalled:()=>console.warn("[VIDEO] stalled",{ts:Date.now()}),onWaiting:()=>console.warn("[VIDEO] waiting",{ts:Date.now()}),onAbort:()=>console.warn("[VIDEO] abort",{ts:Date.now()}),onLoadedMetadata:_=>{const S=_.currentTarget;console.log("[VIDEO] metadata",{duration:S.duration,w:S.videoWidth,h:S.videoHeight,readyState:S.readyState})}}),o.jsx("div",{className:"absolute bottom-0 inset-x-0 h-32 bg-gradient-to-t from-black via-black/50 to-transparent pointer-events-none"})]}),o.jsxs("div",{className:"mt-6 space-y-3",children:[o.jsxs("button",{onClick:we,className:"w-full bg-primary text-black font-extrabold text-lg py-4 rounded-2xl shadow-[0_0_20px_rgba(249,128,6,0.3)] hover:bg-primary/90 transition-all active:scale-[0.98] flex items-center justify-center gap-2",children:[o.jsx(Tr,{size:20,fill:"currentColor",className:"text-black"}),"Analyze Shot"]}),o.jsx("button",{onClick:H,className:"w-full bg-surface text-muted font-bold text-sm py-4 rounded-2xl border border-white/5 hover:bg-white/5 transition-colors",children:"Retake Video"})]})]}),Ne=()=>o.jsxs("div",{className:"h-full flex flex-col justify-center animate-in fade-in duration-700 relative pb-20",children:[o.jsxs("div",{className:"relative w-full aspect-[9/16] max-h-[70vh] rounded-3xl overflow-hidden border border-primary/30 shadow-[0_0_30px_rgba(249,128,6,0.1)]",children:[c&&o.jsx("video",{src:c,className:"w-full h-full object-cover opacity-60",autoPlay:!0,loop:!0,muted:!0,playsInline:!0,onError:_=>console.error("[VIDEO] onError",{e:_,ts:Date.now(),src:c}),onStalled:()=>console.warn("[VIDEO] stalled",{ts:Date.now()}),onWaiting:()=>console.warn("[VIDEO] waiting",{ts:Date.now()}),onAbort:()=>console.warn("[VIDEO] abort",{ts:Date.now()})}),o.jsx("div",{className:"absolute inset-0 bg-primary/5 z-10"}),o.jsx("div",{className:"absolute inset-0 z-20 flex flex-col items-center justify-center",children:o.jsx("div",{className:"w-full absolute top-0 h-1 bg-primary/50 shadow-[0_0_15px_#f98006] animate-[scan_2s_ease-in-out_infinite]"})}),o.jsxs("div",{className:"absolute bottom-0 inset-x-0 p-8 bg-gradient-to-t from-black via-black/80 to-transparent z-30 flex flex-col items-center text-center",children:[o.jsx(Ta,{className:"animate-spin text-primary mb-4",size:32}),o.jsx("p",{className:"text-lg font-bold text-white tracking-tight animate-pulse min-h-[3rem]",children:E1[d]})]})]}),o.jsx("style",{children:`
            @keyframes scan {
                0% { top: 0%; opacity: 0; }
                10% { opacity: 1; }
                90% { opacity: 1; }
                100% { top: 100%; opacity: 0; }
            }
        `})]}),T=()=>h!=null&&h.isInvalid?o.jsx("div",{className:"pb-24 animate-in slide-in-from-bottom-8 duration-700",children:o.jsxs("div",{className:"flex flex-col items-center justify-center py-12 mt-6",children:[o.jsx("div",{className:"w-20 h-20 rounded-full bg-red-500/10 flex items-center justify-center mb-6",children:o.jsx(Qo,{size:48,className:"text-red-500"})}),o.jsx("h2",{className:"text-2xl font-extrabold tracking-tight mb-3 text-center",children:"Unable to Analyze"}),o.jsx("p",{className:"text-muted text-sm font-medium text-center max-w-[280px] leading-relaxed mb-8",children:h.messageIfInvalid}),o.jsx("button",{onClick:H,className:"bg-primary text-black font-extrabold text-sm py-4 px-8 rounded-2xl hover:bg-primary/90 transition-all",children:"Try Again"})]})}):o.jsxs("div",{className:"pb-24 animate-in slide-in-from-bottom-8 duration-700",children:[o.jsxs("div",{className:"flex flex-col items-center justify-center mb-8 mt-6",children:[o.jsxs("div",{className:"relative w-40 h-40 mb-6",children:[o.jsxs("svg",{className:"w-full h-full transform -rotate-90",viewBox:"0 0 128 128",children:[o.jsx("circle",{cx:"64",cy:"64",r:"56",stroke:"currentColor",strokeWidth:"8",fill:"transparent",className:"text-white/10"}),o.jsx("circle",{cx:"64",cy:"64",r:"56",stroke:"#f98006",strokeWidth:"8",fill:"transparent",strokeDasharray:352,strokeDashoffset:352-352*k/100,className:"transition-all duration-[2500ms] ease-out",strokeLinecap:"round"})]}),o.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center pt-2",children:[o.jsx("span",{className:"text-5xl font-black tracking-tighter text-white leading-none",children:k}),o.jsx("span",{className:"text-[10px] font-bold text-primary uppercase tracking-[0.2em] mt-1",children:"Score"})]})]}),o.jsxs("div",{className:`transition-opacity duration-1000 ${k>50?"opacity-100":"opacity-0"}`,children:[o.jsx("h2",{className:"text-3xl font-extrabold tracking-tight mb-2 text-center",children:k>=80?"Excellent!":k>=60?"Good Shot!":"Keep Practicing!"}),o.jsx("p",{className:"text-muted text-sm font-medium text-center max-w-[200px] leading-relaxed mx-auto",children:k>=80?"Your form is excellent!":k>=60?"Your form is looking solid.":"There is room for improvement."})]})]}),(h==null?void 0:h.metrics)&&o.jsx("div",{className:`mb-6 transition-all duration-1000 delay-300 ${k>10?"opacity-100 translate-y-0":"opacity-0 translate-y-4"}`,children:o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{className:"bg-surface rounded-2xl p-4 border border-white/5 text-center",children:[o.jsxs("div",{className:"text-2xl font-black text-primary mb-1",children:[Math.round(h.metrics.elbowAlignment*100),"%"]}),o.jsx("div",{className:"text-[10px] font-bold text-muted uppercase tracking-wider",children:"Alignment"})]}),o.jsxs("div",{className:"bg-surface rounded-2xl p-4 border border-white/5 text-center",children:[o.jsxs("div",{className:"text-2xl font-black text-primary mb-1",children:[Math.round(h.metrics.releaseHeight*100),"%"]}),o.jsx("div",{className:"text-[10px] font-bold text-muted uppercase tracking-wider",children:"Release"})]}),o.jsxs("div",{className:"bg-surface rounded-2xl p-4 border border-white/5 text-center",children:[o.jsxs("div",{className:"text-2xl font-black text-primary mb-1",children:[Math.round(h.metrics.wristFlick*100),"%"]}),o.jsx("div",{className:"text-[10px] font-bold text-muted uppercase tracking-wider",children:"Flick"})]}),o.jsxs("div",{className:"bg-surface rounded-2xl p-4 border border-white/5 text-center",children:[o.jsxs("div",{className:"text-2xl font-black text-primary mb-1",children:[Math.round(h.metrics.lateralSway*100),"%"]}),o.jsx("div",{className:"text-[10px] font-bold text-muted uppercase tracking-wider",children:"Stability"})]})]})}),o.jsxs("div",{className:`space-y-6 transition-all duration-1000 delay-500 ${k>20?"opacity-100 translate-y-0":"opacity-0 translate-y-4"}`,children:[C&&o.jsx("div",{className:"text-xs text-white/40 text-center",children:"Enhancing analysis with AI..."}),L&&!C&&o.jsxs("div",{className:"text-xs text-white/40 text-center flex items-center justify-center gap-1",children:[o.jsx(Tr,{size:11})," AI-enhanced analysis"]}),(h==null?void 0:h.strengths)&&h.strengths.length>0&&o.jsxs("div",{className:"bg-surface rounded-3xl p-6 border border-white/5",children:[o.jsxs("h4",{className:"font-bold text-sm text-green-500 uppercase tracking-widest mb-4 flex items-center gap-2",children:[o.jsx($t,{size:16})," Strengths"]}),o.jsx("ul",{className:"space-y-3",children:h.strengths.map((_,S)=>o.jsxs("li",{className:"flex gap-3 text-sm font-medium text-white/90",children:[o.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-green-500 mt-2"}),_]},S))})]}),(h==null?void 0:h.improvements)&&h.improvements.length>0&&o.jsxs("div",{className:"bg-surface rounded-3xl p-6 border border-white/5",children:[o.jsxs("h4",{className:"font-bold text-sm text-primary uppercase tracking-widest mb-4 flex items-center gap-2",children:[o.jsx(Qo,{size:16})," Areas to Improve"]}),o.jsx("div",{className:"space-y-4",children:h.improvements.map((_,S)=>o.jsx("div",{className:"bg-black/20 rounded-2xl p-4 border border-white/5",children:o.jsx("p",{className:"text-sm font-medium text-white/90 leading-relaxed whitespace-pre-line",children:_})},S))})]}),(h==null?void 0:h.aiCoachTip)&&o.jsxs("div",{className:"bg-gradient-to-br from-primary/10 to-primary/5 rounded-3xl p-6 border-2 border-primary/30 relative overflow-hidden",children:[o.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-primary/10 rounded-full blur-3xl"}),o.jsxs("div",{className:"relative",children:[o.jsxs("h4",{className:"font-bold text-base text-primary uppercase tracking-widest mb-3 flex items-center gap-2",children:[o.jsx(Tr,{size:18})," ",h.aiCoachTip.title]}),o.jsx("p",{className:"text-sm font-semibold text-white mb-3 leading-relaxed",children:h.aiCoachTip.mainIssueTitle}),o.jsx("div",{className:"bg-black/30 rounded-xl p-4 mb-3",children:o.jsx("p",{className:"text-sm font-medium text-white/90 leading-relaxed whitespace-pre-line",children:h.aiCoachTip.body})}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(lu,{size:16,className:"text-primary"}),o.jsxs("p",{className:"text-xs font-bold text-white",children:["With focused practice, you can reach ",o.jsx("span",{className:"text-primary text-base",children:h.aiCoachTip.targetScore})]})]})]})]}),o.jsxs("div",{className:"bg-surface rounded-3xl p-6 border border-white/5",children:[o.jsxs("h4",{className:"font-bold text-sm text-white uppercase tracking-widest mb-4 flex items-center gap-2",children:[o.jsx(kx,{size:16,className:"text-primary"})," Suggested Drills (10 min)"]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("p",{className:"font-bold text-sm text-white mb-1",children:"Form shooting (1 hand)  310 reps"}),o.jsx("p",{className:"text-xs text-muted",children:"Focus on shoulder-elbow-wrist alignment with a soft release."})]}),o.jsxs("div",{children:[o.jsx("p",{className:"font-bold text-sm text-white mb-1",children:"Follow-through hold  38 shots"}),o.jsx("p",{className:"text-xs text-muted",children:'Hold your wrist "down" for 1 second after release.'})]}),o.jsxs("div",{children:[o.jsx("p",{className:"font-bold text-sm text-white mb-1",children:"Stick landing  36 shots"}),o.jsx("p",{className:"text-xs text-muted",children:"Finish balanced and still when you land."})]})]})]}),o.jsxs("button",{onClick:()=>{w(null),n("selection"),i(null),u(null),m(null),g(0)},className:"w-full bg-primary text-black font-extrabold text-sm py-4 rounded-2xl hover:bg-primary/90 transition-all flex items-center justify-center gap-2",children:[o.jsx(Tr,{size:18}),x?"Back to History":"Analyze Another Shot"]})]})]});return o.jsxs(o.Fragment,{children:[r==="selection"&&F(),r==="upload"&&de(),r==="preview"&&pe(),r==="analyzing"&&Ne(),r==="results"&&T(),a&&o.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[o.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:()=>l(!1)}),o.jsxs("div",{className:"relative bg-[#141414] w-full max-w-lg rounded-3xl border border-white/10 p-6 shadow-2xl animate-in zoom-in-95 fade-in duration-300 max-h-[90vh] overflow-y-auto no-scrollbar",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsxs("h3",{className:"font-extrabold text-lg tracking-tight flex items-center gap-2",children:[o.jsx(Ea,{size:20,className:"text-primary"}),"Recording Tips"]}),o.jsx("button",{onClick:()=>l(!1),className:"p-2 bg-white/5 rounded-full hover:bg-white/10",children:o.jsx(qn,{size:20})})]}),o.jsxs("div",{className:"relative w-full aspect-video bg-black rounded-2xl overflow-hidden mb-6 border border-white/10 group cursor-pointer",children:[o.jsx("img",{src:"https://images.unsplash.com/photo-1505666287802-931dc83948e9?auto=format&fit=crop&w=600&q=80",alt:"Basketball Form Example",className:"w-full h-full object-cover opacity-60 group-hover:opacity-40 transition-opacity"}),o.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:o.jsx("div",{className:"w-16 h-16 rounded-full bg-primary/90 text-black flex items-center justify-center shadow-[0_0_30px_rgba(249,128,6,0.4)] transition-transform group-hover:scale-110",children:o.jsx(ds,{size:24,fill:"currentColor"})})}),o.jsx("div",{className:"absolute bottom-3 right-3 bg-black/80 px-2 py-1 rounded text-[10px] font-bold",children:"0:15 Example"})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex gap-4",children:[o.jsx("div",{className:"mt-1",children:o.jsx($t,{size:20,className:"text-green-500"})}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-bold text-sm text-white",children:"Full Body Visibility"}),o.jsx("p",{className:"text-xs text-muted mt-1 leading-relaxed",children:"Ensure the camera captures you from head to toe, including the jump and landing."})]})]}),o.jsxs("div",{className:"flex gap-4",children:[o.jsx("div",{className:"mt-1",children:o.jsx($t,{size:20,className:"text-green-500"})}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-bold text-sm text-white",children:"Side Profile Angle"}),o.jsx("p",{className:"text-xs text-muted mt-1 leading-relaxed",children:"Record from a 90-degree side angle for the best analysis of your release point and elbow alignment."})]})]})]}),o.jsx("button",{onClick:()=>l(!1),className:"w-full mt-8 bg-surface border border-white/10 hover:bg-white/5 text-white font-bold py-3.5 rounded-xl transition-colors text-sm",children:"Got it"})]})]})]})},lN=es("RevenueCatUI",{web:()=>fp(()=>import("./web-BOem9-pB.js"),[],import.meta.url).then(e=>new e.RevenueCatUIWeb)});var xs;(function(e){e.Prompt="PROMPT",e.Camera="CAMERA",e.Photos="PHOTOS"})(xs||(xs={}));var ta;(function(e){e.Rear="REAR",e.Front="FRONT"})(ta||(ta={}));var pf;(function(e){e.Uri="uri",e.Base64="base64",e.DataUrl="dataUrl"})(pf||(pf={}));class cN extends za{async getPhoto(t){return new Promise(async(r,n)=>{if(t.webUseInput||t.source===xs.Photos)this.fileInputExperience(t,r,n);else if(t.source===xs.Prompt){let s=document.querySelector("pwa-action-sheet");s||(s=document.createElement("pwa-action-sheet"),document.body.appendChild(s)),s.header=t.promptLabelHeader||"Photo",s.cancelable=!1,s.options=[{title:t.promptLabelPhoto||"From Photos"},{title:t.promptLabelPicture||"Take Picture"}],s.addEventListener("onSelection",async i=>{i.detail===0?this.fileInputExperience(t,r,n):this.cameraExperience(t,r,n)})}else this.cameraExperience(t,r,n)})}async pickImages(t){return new Promise(async(r,n)=>{this.multipleFileInputExperience(r,n)})}async cameraExperience(t,r,n){if(customElements.get("pwa-camera-modal")){const s=document.createElement("pwa-camera-modal");s.facingMode=t.direction===ta.Front?"user":"environment",document.body.appendChild(s);try{await s.componentOnReady(),s.addEventListener("onPhoto",async i=>{const a=i.detail;a===null?n(new ji("User cancelled photos app")):a instanceof Error?n(a):r(await this._getCameraPhoto(a,t)),s.dismiss(),document.body.removeChild(s)}),s.present()}catch{this.fileInputExperience(t,r,n)}}else console.error("Unable to load PWA Element 'pwa-camera-modal'. See the docs: https://capacitorjs.com/docs/web/pwa-elements."),this.fileInputExperience(t,r,n)}fileInputExperience(t,r,n){let s=document.querySelector("#_capacitor-camera-input");const i=()=>{var a;(a=s.parentNode)===null||a===void 0||a.removeChild(s)};s||(s=document.createElement("input"),s.id="_capacitor-camera-input",s.type="file",s.hidden=!0,document.body.appendChild(s),s.addEventListener("change",a=>{const l=s.files[0];let c="jpeg";if(l.type==="image/png"?c="png":l.type==="image/gif"&&(c="gif"),t.resultType==="dataUrl"||t.resultType==="base64"){const u=new FileReader;u.addEventListener("load",()=>{if(t.resultType==="dataUrl")r({dataUrl:u.result,format:c});else if(t.resultType==="base64"){const d=u.result.split(",")[1];r({base64String:d,format:c})}i()}),u.readAsDataURL(l)}else r({webPath:URL.createObjectURL(l),format:c}),i()}),s.addEventListener("cancel",a=>{n(new ji("User cancelled photos app")),i()})),s.accept="image/*",s.capture=!0,t.source===xs.Photos||t.source===xs.Prompt?s.removeAttribute("capture"):t.direction===ta.Front?s.capture="user":t.direction===ta.Rear&&(s.capture="environment"),s.click()}multipleFileInputExperience(t,r){let n=document.querySelector("#_capacitor-camera-input-multiple");const s=()=>{var i;(i=n.parentNode)===null||i===void 0||i.removeChild(n)};n||(n=document.createElement("input"),n.id="_capacitor-camera-input-multiple",n.type="file",n.hidden=!0,n.multiple=!0,document.body.appendChild(n),n.addEventListener("change",i=>{const a=[];for(let l=0;l<n.files.length;l++){const c=n.files[l];let u="jpeg";c.type==="image/png"?u="png":c.type==="image/gif"&&(u="gif"),a.push({webPath:URL.createObjectURL(c),format:u})}t({photos:a}),s()}),n.addEventListener("cancel",i=>{r(new ji("User cancelled photos app")),s()})),n.accept="image/*",n.click()}_getCameraPhoto(t,r){return new Promise((n,s)=>{const i=new FileReader,a=t.type.split("/")[1];r.resultType==="uri"?n({webPath:URL.createObjectURL(t),format:a,saved:!1}):(i.readAsDataURL(t),i.onloadend=()=>{const l=i.result;r.resultType==="dataUrl"?n({dataUrl:l,format:a,saved:!1}):n({base64String:l.split(",")[1],format:a,saved:!1})},i.onerror=l=>{s(l)})})}async checkPermissions(){if(typeof navigator>"u"||!navigator.permissions)throw this.unavailable("Permissions API not available in this browser");try{return{camera:(await window.navigator.permissions.query({name:"camera"})).state,photos:"granted"}}catch{throw this.unavailable("Camera permissions are not available in this browser")}}async requestPermissions(){throw this.unimplemented("Not implemented on web.")}async pickLimitedLibraryPhotos(){throw this.unavailable("Not implemented on web.")}async getLimitedLibraryPhotos(){throw this.unavailable("Not implemented on web.")}}const uN=es("Camera",{web:()=>new cN});async function dN(e){const{data:{session:t}}=await _e.auth.getSession();t&&await _e.auth.refreshSession();const{data:r,error:n}=await _e.functions.invoke("delete-account",{body:{userId:e}});if(n)throw console.error("[deleteAccount] invoke error:",n),new Error("Could not delete account. Please try again.");if(!(r!=null&&r.success))throw console.error("[deleteAccount] unexpected response:",r),new Error("Could not delete account. Please try again.")}function hN(e){try{window.open(e,"_blank","noopener,noreferrer")||(window.location.href=e)}catch{window.location.href=e}}async function fN(e){return(await fetch(e)).blob()}async function pN(e,t){var l;const r=await fN(t),n=(l=r.type)!=null&&l.includes("png")?"png":"jpg",s=`${e}/avatar.${n}`,{error:i}=await _e.storage.from("avatars").upload(s,r,{upsert:!0,contentType:r.type||"image/jpeg",cacheControl:"3600"});if(i)throw i;const{data:a}=_e.storage.from("avatars").getPublicUrl(s);if(!(a!=null&&a.publicUrl))throw new Error("Could not get avatar public URL");return a.publicUrl}const mN="https://basketshotai.com",Ld=e=>hN(`${mN}/#${e}`),gN=[{id:1,title:"3-Point Shooting",duration:"20 min",intensity:"High"},{id:3,title:"Handles",duration:"30 min",intensity:"Med"}],yN="https://images.unsplash.com/photo-1570295999919-56ceb5ecca61?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&q=80",xN=({onNavigate:e})=>{const{user:t,profile:r,signOut:n,updateProfile:s}=xr(),{isPremium:i,customerInfo:a}=au(),l=b.useMemo(()=>((r==null?void 0:r.full_name)??"").trim(),[r==null?void 0:r.full_name]),[c,u]=b.useState(!1),[d,f]=b.useState(""),[h,m]=b.useState(!1),x=(t==null?void 0:t.id)??null,[w,k]=b.useState(!1),[g,p]=b.useState(""),[y,v]=b.useState(!1),[N,E]=b.useState(!1),[A,C]=b.useState(null),P=b.useRef(null),L=A||(r==null?void 0:r.avatar_url)||yN;async function $(F){if(t!=null&&t.id){E(!0);try{const de=await pN(t.id,F);C(`${de}?t=${Date.now()}`),await s({avatar_url:de})}finally{E(!1)}}}async function Q(){var F;if(!(!(t!=null&&t.id)||N)){if(yr.isNativePlatform()){try{const de=await uN.getPhoto({source:xs.Prompt,resultType:pf.DataUrl,quality:80});de!=null&&de.dataUrl&&await $(de.dataUrl)}catch{}return}(F=P.current)==null||F.click()}}async function ee(F){var Ne;const de=(Ne=F.target.files)==null?void 0:Ne[0];if(!de)return;const pe=new FileReader;pe.onload=async()=>{const T=String(pe.result??"");T.startsWith("data:")&&await $(T)},pe.readAsDataURL(de),F.target.value=""}const ue=g==="DELETE",he=d.trim(),D=he.length>=2&&he.length<=50,we=l!==he,R=()=>{if(c){u(!1),f("");return}f(l),u(!0)},B=async()=>{const F=he;if(D){m(!0);try{await s({full_name:F||null}),u(!1),f("")}finally{m(!1)}}},H=async()=>{try{await lN.presentCustomerCenter()}catch(F){console.error("Failed to open Customer Center:",F)}},U=async()=>{if(x&&ue)try{v(!0),await dN(x);try{const F=[];for(let de=0;de<localStorage.length;de++){const pe=localStorage.key(de);pe&&F.push(pe)}F.forEach(de=>{de.includes(x)&&localStorage.removeItem(de)})}catch{}await n(),window.location.reload()}catch(F){console.error("[profile] delete account failed:",F),alert("Could not delete account. Please try again.")}finally{v(!1),k(!1),p("")}};return o.jsxs("div",{className:"pb-24 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[o.jsxs("div",{className:"mt-2 px-1 flex justify-between items-end mb-6",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-2xl font-extrabold tracking-tight mb-2",children:"My Profile"}),o.jsx("p",{className:"text-muted text-sm font-medium",children:"Manage your account & stats"})]}),o.jsx("button",{className:"w-10 h-10 rounded-full bg-surface border border-white/10 flex items-center justify-center hover:bg-white/5 transition-colors",children:o.jsx(P5,{size:20,className:"text-white"})})]}),o.jsx("section",{className:"mb-6",children:o.jsxs("div",{className:"bg-surface rounded-3xl p-6 border border-white/5 relative overflow-hidden",children:[o.jsx("button",{type:"button",onClick:R,className:"absolute top-4 right-4 w-10 h-10 rounded-full bg-white/5 flex items-center justify-center text-white hover:bg-primary hover:text-black transition-colors z-20","aria-label":"Edit name",children:o.jsx(Ex,{size:16})}),o.jsxs("div",{className:"flex flex-col items-center text-center relative z-10",children:[o.jsxs("div",{className:"relative mb-4",children:[o.jsx("input",{ref:P,type:"file",accept:"image/*",className:"hidden",onChange:ee}),o.jsxs("button",{type:"button",onClick:()=>void Q(),disabled:!(t!=null&&t.id)||N,className:"relative w-24 h-24 rounded-full p-1 border-2 border-primary/50 focus:outline-none disabled:opacity-60","aria-label":"Change profile photo",children:[o.jsx("img",{src:L,alt:"Profile",className:"w-full h-full rounded-full object-cover"}),o.jsx("span",{className:"absolute -bottom-1 -right-1 w-8 h-8 rounded-full bg-primary text-black flex items-center justify-center shadow-lg shadow-primary/20 border border-black/10",children:N?o.jsx(Ta,{className:"h-4 w-4 animate-spin"}):o.jsx(Ea,{className:"h-4 w-4"})})]})]}),c?o.jsxs("div",{className:"w-full max-w-xs",children:[o.jsx("input",{type:"text",value:d,onChange:F=>f(F.target.value),maxLength:50,autoFocus:!0,className:"w-full rounded-2xl bg-background border border-white/10 px-4 py-2.5 text-center text-lg font-extrabold outline-none focus:border-primary",placeholder:"Your name"}),!D&&he.length>0&&o.jsx("p",{className:"mt-2 text-xs text-red-400 font-semibold",children:"Name must be 250 characters."})]}):o.jsx("h2",{className:"text-2xl font-extrabold tracking-tight mb-1",children:l||"User"}),o.jsxs("div",{className:"flex items-center gap-2 text-muted text-sm font-medium mb-4",children:[o.jsx(A5,{size:14}),o.jsx("span",{children:(t==null?void 0:t.email)??""})]}),o.jsx("div",{className:"flex gap-2",children:o.jsx("span",{className:"bg-primary/10 text-primary px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wider",children:i?"BasketShot Pro":"Free"})}),c&&o.jsx("div",{className:"w-full mt-4",children:o.jsx("button",{type:"button",onClick:B,disabled:!we||!D||h,className:"w-full rounded-2xl bg-primary px-4 py-3 text-sm font-extrabold text-black disabled:opacity-60",children:h?"Saving":"Save changes"})})]})]})}),o.jsx("section",{className:"mb-8",children:o.jsx("div",{onClick:()=>e&&e("onboarding"),className:"bg-gradient-to-r from-surface to-[#1a1a1a] p-1 rounded-3xl cursor-pointer group hover:scale-[1.01] transition-transform",children:o.jsxs("div",{className:"bg-[#141414] rounded-[1.3rem] p-5 border border-white/5 flex items-center justify-between relative overflow-hidden",children:[o.jsx("div",{className:"absolute top-0 right-0 p-8 opacity-5",children:o.jsx(F5,{size:80})}),o.jsxs("div",{className:"flex items-center gap-4 relative z-10",children:[o.jsx("div",{className:"w-12 h-12 rounded-full bg-primary flex items-center justify-center text-black shadow-lg shadow-primary/20",children:o.jsx(Tr,{size:24,strokeWidth:2.5})}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-extrabold text-white text-lg leading-none mb-1",children:"Setup Player Profile"}),o.jsx("p",{className:"text-xs text-muted font-bold uppercase tracking-wide",children:"Calibrate AI for your body type"})]})]}),o.jsx("div",{className:"w-8 h-8 rounded-full bg-white/5 flex items-center justify-center group-hover:bg-white group-hover:text-black transition-colors relative z-10",children:o.jsx(sn,{size:16,strokeWidth:3})})]})})}),o.jsxs("section",{className:"mb-8",children:[o.jsxs("h4",{className:"text-lg font-bold mb-4 px-1 flex items-center gap-2",children:[o.jsx($5,{size:18,className:"text-primary",fill:"currentColor"}),"Favorite Workouts"]}),o.jsx("div",{className:"space-y-3",children:gN.map(F=>o.jsxs("div",{className:"bg-surface p-4 rounded-2xl border border-white/5 flex items-center justify-between group cursor-pointer hover:border-primary/30 transition-colors",children:[o.jsxs("div",{children:[o.jsx("h5",{className:"font-bold text-sm mb-1",children:F.title}),o.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-muted font-bold uppercase tracking-wider",children:[o.jsx("span",{children:F.duration}),o.jsx("span",{className:"w-1 h-1 rounded-full bg-white/20"}),o.jsxs("span",{children:[F.intensity," Intensity"]})]})]}),o.jsx("div",{className:"w-8 h-8 rounded-full bg-white/5 flex items-center justify-center group-hover:bg-primary group-hover:text-black transition-colors",children:o.jsx(sn,{size:16})})]},F.id))})]}),i&&o.jsxs("section",{className:"mb-8",children:[o.jsxs("h4",{className:"text-lg font-bold mb-4 px-1 flex items-center gap-2",children:[o.jsx(gg,{size:18,className:"text-primary"}),"Subscription"]}),o.jsx("div",{className:"bg-surface rounded-3xl overflow-hidden border border-white/5",children:o.jsxs("button",{onClick:H,className:"w-full p-4 flex items-center justify-between hover:bg-white/5 transition-colors text-left",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"w-10 h-10 rounded-full bg-primary/10 text-primary flex items-center justify-center",children:o.jsx(gg,{size:20})}),o.jsxs("div",{children:[o.jsx("span",{className:"font-bold text-sm block",children:"Manage Subscription"}),o.jsx("span",{className:"text-xs text-muted font-medium",children:"View plans, billing & more"})]})]}),o.jsx(sn,{size:16,className:"text-muted"})]})})]}),o.jsxs("section",{className:"mb-8",children:[o.jsx("h4",{className:"text-lg font-bold mb-4 px-1",children:"Privacy & Support"}),o.jsxs("div",{className:"bg-surface rounded-3xl overflow-hidden border border-white/5",children:[o.jsxs("button",{onClick:()=>Ld("privacy"),className:"w-full p-4 flex items-center justify-between hover:bg-white/5 transition-colors border-b border-white/5 text-left",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"w-10 h-10 rounded-full bg-primary/10 text-primary flex items-center justify-center",children:o.jsx(O5,{size:20})}),o.jsx("span",{className:"font-bold text-sm",children:"Privacy Policy"})]}),o.jsx(sn,{size:16,className:"text-muted"})]}),o.jsxs("button",{onClick:()=>Ld("terms"),className:"w-full p-4 flex items-center justify-between hover:bg-white/5 transition-colors border-b border-white/5 text-left",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"w-10 h-10 rounded-full bg-primary/10 text-primary flex items-center justify-center",children:o.jsx(jx,{size:20})}),o.jsx("span",{className:"font-bold text-sm",children:"Terms of Service"})]}),o.jsx(sn,{size:16,className:"text-muted"})]}),o.jsxs("button",{onClick:()=>Ld("support"),className:"w-full p-4 flex items-center justify-between hover:bg-white/5 transition-colors text-left",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"w-10 h-10 rounded-full bg-primary/10 text-primary flex items-center justify-center",children:o.jsx(j5,{size:20})}),o.jsx("span",{className:"font-bold text-sm",children:"Help & Support"})]}),o.jsx(sn,{size:16,className:"text-muted"})]})]})]}),o.jsx("section",{children:o.jsxs("div",{className:"space-y-3",children:[o.jsx("button",{type:"button",onClick:()=>void n(),className:"w-full p-4 rounded-2xl border border-white/5 flex items-center justify-between hover:bg-white/5 transition-colors group text-left",children:o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"w-10 h-10 rounded-full bg-white/5 text-white flex items-center justify-center group-hover:text-red-400 transition-colors",children:o.jsx(T5,{size:20})}),o.jsx("span",{className:"font-bold text-sm group-hover:text-red-400 transition-colors",children:"Log Out"})]})}),o.jsx("button",{type:"button",onClick:()=>k(!0),disabled:!x,className:"w-full p-4 rounded-2xl border border-red-500/10 flex items-center justify-between hover:bg-red-500/10 transition-colors group text-left disabled:opacity-60 disabled:cursor-not-allowed",children:o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"w-10 h-10 rounded-full bg-red-500/10 text-red-500 flex items-center justify-center",children:o.jsx(Tx,{size:20})}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("span",{className:"font-bold text-sm text-red-500",children:"Delete Account"}),o.jsx("span",{className:"text-[10px] text-muted font-medium",children:"This action cannot be undone"})]})]})})]})}),w&&o.jsx("div",{className:"fixed inset-0 z-[999] flex items-center justify-center bg-black/70 p-4",children:o.jsxs("div",{className:"w-full max-w-sm rounded-3xl border border-white/10 bg-black/90 p-5",children:[o.jsx("div",{className:"text-lg font-bold",children:"Delete account?"}),o.jsx("div",{className:"mt-2 text-sm text-white/70",children:"This cannot be undone. All your data will be permanently deleted."}),o.jsx("div",{className:"mt-4 text-xs font-semibold text-white/80",children:"Type DELETE to confirm"}),o.jsx("input",{value:g,onChange:F=>p(F.target.value),placeholder:"DELETE",className:"mt-2 w-full rounded-2xl border border-white/10 bg-white/5 px-4 py-3 text-sm outline-none",autoFocus:!0,disabled:y}),o.jsxs("div",{className:"mt-5 flex gap-2",children:[o.jsx("button",{type:"button",onClick:()=>{y||(k(!1),p(""))},className:"flex-1 rounded-2xl border border-white/10 bg-white/5 px-4 py-3 text-sm font-semibold disabled:opacity-60",disabled:y,children:"Cancel"}),o.jsx("button",{type:"button",onClick:()=>void U(),disabled:!ue||y,className:"flex-1 rounded-2xl px-4 py-3 text-sm font-semibold disabled:opacity-60",style:{background:"#ef4444"},children:y?"Deleting...":"Confirm"})]})]})})]})},vN=({onNavigate:e})=>o.jsxs("div",{className:"flex flex-col h-full pt-6 pb-28 animate-in zoom-in-95 fade-in duration-300 px-4",children:[o.jsxs("div",{className:"text-center mb-6",children:[o.jsx("h2",{className:"text-3xl font-extrabold tracking-tight mb-2",children:"Start Session"}),o.jsx("p",{className:"text-muted text-sm font-medium",children:"Choose your training mode"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4 w-full",children:[o.jsxs("button",{onClick:()=>e("form"),className:"relative w-full h-[420px] rounded-[2rem] overflow-hidden group active:scale-[0.98] transition-all text-left border border-white/10 hover:border-primary/50 shadow-2xl",children:[o.jsx("img",{src:"https://images.unsplash.com/photo-1505666287802-931dc83948e9?auto=format&fit=crop&w=800&q=80",alt:"Analyze Form",className:"absolute inset-0 w-full h-full object-cover object-top opacity-80 group-hover:scale-105 transition-transform duration-700"}),o.jsx("div",{className:"absolute inset-x-0 bottom-0 h-2/3 bg-gradient-to-t from-black via-black/60 to-transparent"}),o.jsxs("div",{className:"absolute bottom-0 left-0 p-5 w-full z-10 flex flex-col items-center text-center pb-8",children:[o.jsxs("h3",{className:"text-2xl font-extrabold leading-none mb-2 text-white drop-shadow-lg",children:["Analyze",o.jsx("br",{}),"Form"]}),o.jsx("p",{className:"text-xs text-primary font-black uppercase tracking-widest drop-shadow-md",children:"AI Analysis"})]})]}),o.jsxs("button",{onClick:()=>e("workout"),className:"relative w-full h-[420px] rounded-[2rem] overflow-hidden group active:scale-[0.98] transition-all text-left border border-white/10 hover:border-primary/50 shadow-2xl",children:[o.jsx("img",{src:"https://images.unsplash.com/photo-1574623452334-1e0ac2b3ccb4?auto=format&fit=crop&w=800&q=80",alt:"Practice Workouts",className:"absolute inset-0 w-full h-full object-cover object-center opacity-80 group-hover:scale-105 transition-transform duration-700"}),o.jsx("div",{className:"absolute inset-x-0 bottom-0 h-2/3 bg-gradient-to-t from-black via-black/60 to-transparent"}),o.jsxs("div",{className:"absolute bottom-0 left-0 p-5 w-full z-10 flex flex-col items-center text-center pb-8",children:[o.jsxs("h3",{className:"text-2xl font-extrabold leading-none mb-2 text-white drop-shadow-lg",children:["Practice",o.jsx("br",{}),"Workouts"]}),o.jsx("p",{className:"text-xs text-primary font-black uppercase tracking-widest drop-shadow-md",children:"Training Plans"})]})]})]}),o.jsx("div",{className:"grid grid-cols-2 gap-4 w-full mt-4"})]});async function Uw(e,t=50){const{data:r,error:n}=await _e.from("diary_entries").select("*").eq("user_id",e).order("entry_date",{ascending:!1}).order("created_at",{ascending:!1}).limit(t);if(n)throw n;return r??[]}async function wN(e){const{data:t,error:r}=await _e.from("diary_entries").insert(e).select("*").single();if(r)throw r;return t}async function bN(e,t){const{data:r,error:n}=await _e.from("diary_entries").update(t).eq("id",e).select("*").single();if(n)throw n;return r}async function _N(e){const{error:t}=await _e.from("diary_entries").delete().eq("id",e);if(t)throw t}function kN(){const e=new Date,t=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),n=String(e.getDate()).padStart(2,"0");return`${t}-${r}-${n}`}async function jN(e,t){if(!t||t.length===0)return"Log a game to see advice";const r=`coach_tip_${e}_${kN()}`,n=localStorage.getItem(r);n!==null&&!n.trim()&&localStorage.removeItem(r);const s=localStorage.getItem(r);if(s&&s.trim())return s.trim();try{const{data:i,error:a}=await _e.functions.invoke("diary-coach-tip",{body:{userId:e,entries:t.slice(0,20)}});if(a)return"Coach unavailable, try again later.";const l=(i==null?void 0:i.tip)??null;return l&&l.trim()?(localStorage.setItem(r,l.trim()),l.trim()):"Coach unavailable, try again later."}catch{return"Coach unavailable, try again later."}}const T1=["3PT","Mid-range","Layups","Defense","Passing","Rebounds","Mindset","Conditioning","Teamwork","Free throws"],A1={win:3,draw:2,not_finished:2,loss:1};function SN(e){return e.toLocaleDateString("en-US",{month:"long",year:"numeric"})}function mf(e){const t=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),n=String(e.getDate()).padStart(2,"0");return`${t}-${r}-${n}`}function C1(e){return new Date(e.getFullYear(),e.getMonth(),1)}function NN(e){return new Date(e.getFullYear(),e.getMonth()+1,0).getDate()}function EN(e){return(e.getDay()+6)%7}function Xs(e){const t=e.trim();if(!t)return null;const r=Number(t);return Number.isFinite(r)?Math.max(0,Math.floor(r)):null}function gi(e){return e==="win"?{label:"WIN",cls:"bg-emerald-500/15 text-emerald-400 border-emerald-500/20"}:e==="loss"?{label:"LOSS",cls:"bg-red-500/15 text-red-400 border-red-500/20"}:e==="draw"?{label:"DRAW",cls:"bg-orange-500/15 text-orange-400 border-orange-500/20"}:e==="not_finished"?{label:"DNF",cls:"bg-white/10 text-white/70 border-white/10"}:{label:"",cls:"bg-white/10 text-white/60 border-white/10"}}function TN(e){return e==="win"?"bg-emerald-500/20 border-emerald-500/40 text-white":e==="loss"?"bg-red-500/20 border-red-500/40 text-white":e==="draw"||e==="not_finished"?"bg-orange-500/20 border-orange-500/40 text-white":"bg-white/0 border-white/10 text-white/80"}function AN(e){if(e.length===0)return null;let t=e[0];for(const r of e.slice(1)){const n=r.result?A1[r.result]:0,s=t.result?A1[t.result]:0;n>s&&(t=r)}return t}function $d(e){const t=e.filter(r=>typeof r=="number"&&Number.isFinite(r));return t.length?t.reduce((r,n)=>r+n,0)/t.length:0}const CN=()=>{var Ne;const{user:e}=xr(),t=(e==null?void 0:e.id)??null,[r,n]=b.useState(!1),[s,i]=b.useState([]),[a,l]=b.useState("all"),[c,u]=b.useState(()=>C1(new Date)),[d,f]=b.useState(null),[h,m]=b.useState(!1),[x,w]=b.useState("create"),[k,g]=b.useState(null),[p,y]=b.useState(!1),[v,N]=b.useState(null),[E,A]=b.useState(!1),[C,P]=b.useState(null),[L,$]=b.useState(""),[Q,ee]=b.useState(!1),ue=b.useMemo(()=>{let T=[...s];if(a!=="all"){const _=a==="7d"?7:30,S=new Date,M=new Date(S.getFullYear(),S.getMonth(),S.getDate()-(_-1)),K=mf(M);T=T.filter(oe=>(oe.entry_date||"")>=K)}return d&&(T=T.filter(_=>_.entry_date===d)),T.sort((_,S)=>(S.entry_date||"").localeCompare(_.entry_date||"")),T},[s,a,d]),he=b.useMemo(()=>({avgPoints:Math.round($d(s.map(T=>T.points))),avgReb:Math.round($d(s.map(T=>T.rebounds))),avgAst:Math.round($d(s.map(T=>T.assists)))}),[s]),D=b.useMemo(()=>{const T=new Map;for(const _ of s){const S=_.entry_date;if(!S)continue;const M=T.get(S)??[];M.push(_),T.set(S,M)}return T},[s]),we=b.useMemo(()=>{const T=C1(c),_=NN(c),S=EN(T),M=[];for(let K=0;K<S;K++)M.push({day:null,iso:null});for(let K=1;K<=_;K++){const oe=new Date(c.getFullYear(),c.getMonth(),K);M.push({day:K,iso:mf(oe)})}for(;M.length%7!==0;)M.push({day:null,iso:null});return M},[c]),R=b.useMemo(()=>C?(D.get(C)??[]).slice().sort((T,_)=>(_.entry_date||"").localeCompare(T.entry_date||"")):[],[C,D]);async function B(){if(t){n(!0);try{const T=await Uw(t);i(T??[])}finally{n(!1)}}}b.useEffect(()=>{B()},[t]),b.useEffect(()=>{let T=!1;async function _(){if(t){ee(!0);try{const S=await jN(t,s.slice(0,20));T||$(S)}finally{T||ee(!1)}}}return _(),()=>{T=!0}},[t,s]);function H(){w("create"),g(null),m(!0)}function U(T){w("edit"),g(T),y(!1),N(null),m(!0)}function F(T){N(T),y(!0)}function de(T){f(T),P(T),A(!0)}async function pe(T){await _N(T.id),y(!1),N(null),await B()}return o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:"relative flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-xs font-extrabold uppercase tracking-[0.2em] text-muted",children:"BECOME A BEAST."}),o.jsx("h1",{className:"mt-1 text-2xl font-extrabold text-white",children:"Your Basketball Diary"})]})}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{className:"col-span-2 rounded-3xl bg-surface p-8 border border-white/5 flex flex-col items-center justify-center text-center",children:[o.jsx("div",{className:"text-xs font-extrabold uppercase tracking-[0.2em] text-muted",children:"AVG POINTS"}),o.jsx("div",{className:"mt-3 text-7xl font-extrabold text-white leading-none",children:he.avgPoints})]}),o.jsxs("div",{className:"rounded-3xl bg-surface p-6 border border-white/5 flex flex-col items-center justify-center text-center",children:[o.jsx("div",{className:"text-xs font-extrabold uppercase tracking-[0.2em] text-muted",children:"REBOUNDS"}),o.jsx("div",{className:"mt-3 text-4xl font-extrabold text-white leading-none",children:he.avgReb})]}),o.jsxs("div",{className:"rounded-3xl bg-surface p-6 border border-white/5 flex flex-col items-center justify-center text-center",children:[o.jsx("div",{className:"text-xs font-extrabold uppercase tracking-[0.2em] text-muted",children:"ASSISTS"}),o.jsx("div",{className:"mt-3 text-4xl font-extrabold text-white leading-none",children:he.avgAst})]})]}),o.jsx("button",{type:"button",onClick:H,className:"relative w-full rounded-3xl bg-primary px-6 py-5 text-base font-extrabold text-black shadow-[0_10px_30px_rgba(0,0,0,0.25)] active:scale-[0.99]  transition-transform overflow-visible",children:"Log a game"}),o.jsxs("div",{className:"rounded-3xl bg-surface border border-purple-400 p-5",children:[o.jsx("div",{className:"text-xs font-extrabold tracking-[0.2em] text-white ",children:"Coach's Advice"}),Q?o.jsx("div",{className:"mt-3 h-14 rounded-2xl bg-white/5 animate-pulse"}):o.jsx("div",{className:"mt-3 rounded-2xl bg-white/5 border border-white/10 p-4 text-white/80 font-semibold text-sm leading-relaxed",children:L||"Log a game to see advice"})]}),o.jsxs("div",{className:"rounded-3xl bg-surface border border-white/5 p-5",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("div",{className:"text-sm font-extrabold text-white",children:SN(c)}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{type:"button",onClick:()=>u(T=>new Date(T.getFullYear(),T.getMonth()-1,1)),className:"h-9 w-9 rounded-2xl bg-white/5 border border-white/10 text-white/80 flex items-center justify-center text-lg font-bold",children:""}),o.jsx("button",{type:"button",onClick:()=>u(T=>new Date(T.getFullYear(),T.getMonth()+1,1)),className:"h-9 w-9 rounded-2xl bg-white/5 border border-white/10 text-white/80 flex items-center justify-center text-lg font-bold",children:""})]})]}),o.jsxs("div",{className:"grid grid-cols-7 gap-1",children:[["Mo","Tu","We","Th","Fr","Sa","Su"].map(T=>o.jsx("div",{className:"text-center text-[10px] font-extrabold uppercase tracking-[0.15em] text-white/30 pb-2",children:T},T)),we.map((T,_)=>{if(!T.day||!T.iso)return o.jsx("div",{className:"h-10 rounded-xl"},_);const S=D.get(T.iso)??[],M=AN(S),K=d===T.iso,oe=TN(M==null?void 0:M.result);return o.jsx("button",{type:"button",onClick:()=>de(T.iso),className:["h-10 rounded-2xl border text-sm font-extrabold flex items-center justify-center transition-colors",oe,K?"ring-2 ring-primary":""].join(" "),children:T.day},_)})]})]}),o.jsx("div",{className:"text-base font-extrabold text-white/80 tracking-wide",children:"Match history"}),o.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[["all","7d","30d"].map(T=>o.jsx("button",{type:"button",onClick:()=>l(T),className:["rounded-2xl px-4 py-2 text-sm font-extrabold border transition-colors",a===T?"bg-primary/10 border-primary/30 text-white":"bg-white/0 border-white/10 text-white/70"].join(" "),children:T==="all"?"All":T==="7d"?"Last 7d":"Last 30d"},T)),d&&o.jsxs("button",{type:"button",onClick:()=>f(null),className:"ml-auto text-xs font-extrabold uppercase tracking-[0.2em] text-white/40",children:[d," "]})]}),o.jsxs("div",{className:"space-y-3 pb-4",children:[r&&o.jsx("div",{className:"rounded-3xl bg-surface border border-white/5 p-6 text-white/50 text-sm font-extrabold",children:"Loading"}),!r&&ue.length===0&&o.jsxs("div",{className:"rounded-3xl bg-surface border border-white/5 p-8 text-center",children:[o.jsx("div",{className:"text-white/40 text-sm font-extrabold uppercase tracking-[0.15em]",children:"No games yet"}),o.jsx("div",{className:"mt-2 text-white/25 text-xs",children:'Tap "Log a game" to add your first entry'})]}),ue.map(T=>{const _=gi(T.result??null);return o.jsxs("button",{type:"button",onClick:()=>F(T),className:"w-full text-left rounded-3xl bg-surface border border-white/5 p-5 active:scale-[0.99] transition-transform",children:[o.jsxs("div",{className:"flex items-center justify-between gap-3",children:[o.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[o.jsx("span",{className:`px-3 py-1 rounded-2xl text-xs font-extrabold border ${_.cls}`,children:_.label}),o.jsx("span",{className:"text-sm font-extrabold text-white",children:T.entry_date}),T.score_manual?o.jsx("span",{className:"text-sm text-white/50",children:T.score_manual}):null]}),o.jsx("span",{className:"text-white/30 text-lg",children:""})]}),o.jsxs("div",{className:"mt-3 flex items-center gap-5 text-sm text-white/60",children:[o.jsxs("span",{children:[o.jsx("span",{className:"font-extrabold text-white",children:T.points??0})," PTS"]}),o.jsxs("span",{children:[o.jsx("span",{className:"font-extrabold text-white",children:T.rebounds??0})," REB"]}),o.jsxs("span",{children:[o.jsx("span",{className:"font-extrabold text-white",children:T.assists??0})," AST"]})]})]},T.id)})]}),E&&C&&o.jsx("div",{className:"fixed inset-0 z-50 bg-black/60 flex items-end",onClick:()=>A(!1),children:o.jsxs("div",{className:"w-full max-w-md mx-auto rounded-t-[28px] bg-background border-t border-white/10 p-6 pb-8",onClick:T=>T.stopPropagation(),children:[o.jsxs("div",{className:"flex items-start justify-between mb-5",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-xs font-extrabold uppercase tracking-[0.2em] text-muted",children:"Day preview"}),o.jsx("div",{className:"mt-1 text-lg font-extrabold text-white",children:C})]}),o.jsx("button",{type:"button",onClick:()=>A(!1),className:"h-10 w-10 rounded-2xl bg-white/5 border border-white/10 text-white/80 flex items-center justify-center",children:""})]}),o.jsxs("div",{className:"space-y-3",children:[R.length===0&&o.jsx("div",{className:"rounded-3xl bg-surface border border-white/5 p-5 text-white/70 text-sm font-extrabold text-center",children:"No games for this day."}),R.map(T=>{const _=gi(T.result??null);return o.jsxs("button",{type:"button",onClick:()=>{A(!1),F(T)},className:"w-full text-left rounded-3xl bg-surface border border-white/5 p-5 active:scale-[0.99] transition-transform",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:`px-3 py-1 rounded-2xl text-xs font-extrabold border ${_.cls}`,children:_.label}),T.score_manual?o.jsx("span",{className:"text-sm text-white/50",children:T.score_manual}):null]}),o.jsx("span",{className:"text-white/30",children:""})]}),o.jsxs("div",{className:"mt-3 flex items-center gap-4 text-sm text-white/60",children:[o.jsxs("span",{children:[o.jsx("span",{className:"font-extrabold text-white",children:T.points??0})," PTS"]}),o.jsxs("span",{children:[o.jsx("span",{className:"font-extrabold text-white",children:T.rebounds??0})," REB"]}),o.jsxs("span",{children:[o.jsx("span",{className:"font-extrabold text-white",children:T.assists??0})," AST"]})]})]},T.id)})]})]})}),p&&v&&o.jsx("div",{className:"fixed inset-0 z-50 bg-black/60 flex items-end",onClick:()=>y(!1),children:o.jsxs("div",{className:"w-full max-w-md mx-auto rounded-t-[28px] bg-background border-t border-white/10 p-6 pb-10 max-h-[85vh] overflow-y-auto",onClick:T=>T.stopPropagation(),children:[o.jsxs("div",{className:"flex items-start justify-between mb-5",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-xs font-extrabold uppercase tracking-[0.2em] text-muted",children:"Game"}),o.jsx("div",{className:"mt-1 text-lg font-extrabold text-white",children:v.entry_date})]}),o.jsx("button",{type:"button",onClick:()=>y(!1),className:"h-10 w-10 rounded-2xl bg-white/5 border border-white/10 text-white/80 flex items-center justify-center",children:""})]}),o.jsxs("div",{className:"rounded-3xl bg-surface border border-white/5 p-5 space-y-5",children:[o.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[o.jsx("span",{className:`px-3 py-1 rounded-2xl text-xs font-extrabold border ${gi(v.result??null).cls}`,children:gi(v.result??null).label}),v.score_manual?o.jsx("span",{className:"text-white/60 text-sm",children:v.score_manual}):null]}),o.jsx("div",{className:"grid grid-cols-3 gap-3",children:[{label:"PTS",val:v.points},{label:"REB",val:v.rebounds},{label:"AST",val:v.assists}].map(T=>o.jsxs("div",{className:"rounded-2xl bg-white/5 border border-white/10 p-4 text-center",children:[o.jsx("div",{className:"text-xs font-extrabold uppercase tracking-[0.2em] text-white/40",children:T.label}),o.jsx("div",{className:"mt-1 text-2xl font-extrabold text-white",children:T.val??0})]},T.label))}),o.jsxs("div",{children:[o.jsx("div",{className:"text-xs font-extrabold uppercase tracking-[0.2em] text-white/40 mb-2",children:"Best"}),o.jsx("div",{className:"flex flex-wrap gap-2",children:(v.best_aspects??[]).length?(v.best_aspects??[]).map(T=>o.jsx("span",{className:"px-3 py-1 rounded-2xl bg-primary/10 border border-primary/20 text-sm text-white",children:T},T)):o.jsx("span",{className:"text-white/40 text-sm",children:""})})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-xs font-extrabold uppercase tracking-[0.2em] text-white/40 mb-2",children:"Worst"}),o.jsx("div",{className:"flex flex-wrap gap-2",children:(v.worst_aspects??[]).length?(v.worst_aspects??[]).map(T=>o.jsx("span",{className:"px-3 py-1 rounded-2xl bg-white/5 border border-white/10 text-sm text-white/80",children:T},T)):o.jsx("span",{className:"text-white/40 text-sm",children:""})})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-xs font-extrabold uppercase tracking-[0.2em] text-white/40 mb-2",children:"How did you feel?"}),o.jsx("div",{className:"rounded-2xl bg-white/5 border border-white/10 p-4 text-white/80 text-sm",children:(Ne=v.notes)!=null&&Ne.trim()?v.notes:""})]})]}),o.jsxs("div",{className:"mt-5 flex gap-3",children:[o.jsx("button",{type:"button",onClick:()=>U(v),className:"flex-1 rounded-2xl bg-white/5 border border-white/10 px-4 py-3 text-sm font-extrabold text-white active:scale-95 transition-transform",children:"Edit"}),o.jsx("button",{type:"button",onClick:()=>pe(v),className:"flex-1 rounded-2xl bg-red-500/15 border border-red-500/20 px-4 py-3 text-sm font-extrabold text-red-300 active:scale-95 transition-transform",children:"Delete"})]})]})}),h&&o.jsx(IN,{userId:t,mode:x,initial:k,onClose:()=>m(!1),onSaved:async()=>{m(!1),await B()}})]})};function IN({userId:e,mode:t,initial:r,onClose:n,onSaved:s}){const i=t==="edit",a=6,[l,c]=b.useState(1),[u,d]=b.useState(!1),[f,h]=b.useState(()=>(r==null?void 0:r.entry_date)??mf(new Date)),[m,x]=b.useState(()=>(r==null?void 0:r.result)??null),[w,k]=b.useState(()=>(r==null?void 0:r.score_manual)??""),[g,p]=b.useState(()=>typeof(r==null?void 0:r.points)=="number"?String(r.points):""),[y,v]=b.useState(()=>typeof(r==null?void 0:r.rebounds)=="number"?String(r.rebounds):""),[N,E]=b.useState(()=>typeof(r==null?void 0:r.assists)=="number"?String(r.assists):""),[A,C]=b.useState(()=>(r==null?void 0:r.best_aspects)??[]),[P,L]=b.useState(()=>(r==null?void 0:r.worst_aspects)??[]),[$,Q]=b.useState(()=>(r==null?void 0:r.notes)??""),ee=b.useMemo(()=>l===1?!!f:l===2?!!m:!0,[l,f,m]);function ue(D,we){return D.includes(we)?D.filter(R=>R!==we):[...D,we]}async function he(){if(!(!e||!m)){d(!0);try{const D={entry_date:f,title:"Game",notes:$.trim()||"",result:m,score_manual:w.trim()||null,points:Xs(g),rebounds:Xs(y),assists:Xs(N),best_aspects:A,worst_aspects:P};i&&(r!=null&&r.id)?await bN(r.id,D):await wN({user_id:e,...D}),s()}finally{d(!1)}}}return o.jsxs("div",{className:"fixed inset-0 z-[110] bg-background flex flex-col",children:[o.jsxs("div",{className:"flex-shrink-0 px-6 pt-6 pb-4 border-b border-white/5",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("button",{type:"button",onClick:n,className:"h-10 w-10 rounded-2xl bg-white/5 border border-white/10 text-white/80 flex items-center justify-center",children:""}),o.jsxs("div",{className:"text-sm font-extrabold text-white",children:[l," / ",a]}),o.jsx("div",{className:"w-10"})]}),o.jsx("div",{className:"mt-4 h-1.5 w-full rounded-full bg-white/5 overflow-hidden",children:o.jsx("div",{className:"h-full bg-primary rounded-full transition-all duration-300",style:{width:`${l/a*100}%`}})})]}),o.jsx("div",{className:"flex-1 overflow-y-auto px-6 pt-6 pb-32",children:o.jsxs("div",{className:"animate-in fade-in slide-in-from-right-4 duration-200",children:[l===1&&o.jsxs("div",{className:"space-y-5",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-xs font-extrabold uppercase tracking-[0.2em] text-muted",children:"Step 1"}),o.jsx("div",{className:"text-2xl font-extrabold text-white mt-1",children:"When was the game?"})]}),o.jsx("div",{className:"rounded-3xl bg-surface border border-white/5 p-6",children:o.jsx("input",{type:"date",value:f,onChange:D=>h(D.target.value),className:"w-full rounded-2xl bg-white/5 border border-white/10 px-4 py-4 text-lg font-extrabold text-white focus:outline-none focus:border-primary/40"})})]}),l===2&&o.jsxs("div",{className:"space-y-5",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-xs font-extrabold uppercase tracking-[0.2em] text-muted",children:"Step 2"}),o.jsx("div",{className:"text-2xl font-extrabold text-white mt-1",children:"What was the result?"})]}),o.jsxs("div",{className:"flex flex-col gap-3",children:[o.jsx("button",{type:"button",onClick:()=>x("win"),className:["rounded-3xl border p-6 text-left transition-colors",m==="win"?"bg-emerald-500/20 border-emerald-500/40 text-white":"bg-surface border-white/10 text-white/80"].join(" "),children:o.jsx("div",{className:"text-lg font-extrabold",children:"Win"})}),o.jsx("button",{type:"button",onClick:()=>x("draw"),className:["rounded-3xl border p-6 text-left transition-colors",m==="draw"||m==="not_finished"?"bg-orange-500/20 border-orange-500/40 text-white":"bg-surface border-white/10 text-white/80"].join(" "),children:o.jsx("div",{className:"text-lg font-extrabold",children:"Draw / Not finished"})}),o.jsx("button",{type:"button",onClick:()=>x("loss"),className:["rounded-3xl border p-6 text-left transition-colors",m==="loss"?"bg-red-500/20 border-red-500/40 text-white":"bg-surface border-white/10 text-white/80"].join(" "),children:o.jsx("div",{className:"text-lg font-extrabold",children:"Loss"})})]}),o.jsxs("div",{className:"rounded-3xl bg-surface border border-white/5 p-6",children:[o.jsx("div",{className:"text-xs font-extrabold uppercase tracking-[0.2em] text-white/40",children:"Score (optional)"}),o.jsx("input",{value:w,onChange:D=>k(D.target.value),placeholder:'e.g. "9288"',className:"mt-3 w-full rounded-2xl bg-white/5 border border-white/10 px-4 py-4 text-base font-extrabold text-white placeholder:text-white/25 focus:outline-none focus:border-primary/40"})]})]}),l===3&&o.jsxs("div",{className:"space-y-5",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-xs font-extrabold uppercase tracking-[0.2em] text-muted",children:"Step 3"}),o.jsx("div",{className:"text-2xl font-extrabold text-white mt-1",children:"Your stats"})]}),o.jsx("div",{className:"grid grid-cols-3 gap-3",children:[{label:"Points",v:g,set:p},{label:"Rebounds",v:y,set:v},{label:"Assists",v:N,set:E}].map(D=>o.jsxs("div",{className:"rounded-3xl bg-surface border border-white/5 p-4",children:[o.jsx("div",{className:"text-[10px] font-extrabold uppercase tracking-[0.15em] text-white/40",children:D.label}),o.jsx("input",{inputMode:"numeric",value:D.v,onChange:we=>D.set(we.target.value.replace(/[^\d]/g,"")),className:"mt-3 w-full rounded-2xl bg-white/5 border border-white/10 px-2 py-4 text-center text-2xl font-extrabold text-white focus:outline-none focus:border-primary/40"})]},D.label))})]}),l===4&&o.jsxs("div",{className:"space-y-5",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-xs font-extrabold uppercase tracking-[0.2em] text-muted",children:"Step 4"}),o.jsx("div",{className:"text-2xl font-extrabold text-white mt-1",children:"What went best?"})]}),o.jsx("div",{className:"grid grid-cols-2 gap-3",children:T1.map(D=>{const we=A.includes(D);return o.jsx("button",{type:"button",onClick:()=>C(R=>ue(R,D)),className:["rounded-2xl border px-4 py-4 text-sm font-extrabold transition-colors",we?"bg-emerald-500/15 border-emerald-500/30 text-emerald-200":"bg-white/0 border-white/10 text-white/70"].join(" "),children:D},D)})})]}),l===5&&o.jsxs("div",{className:"space-y-5",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-xs font-extrabold uppercase tracking-[0.2em] text-muted",children:"Step 5"}),o.jsx("div",{className:"text-2xl font-extrabold text-white mt-1",children:"What went worst?"})]}),o.jsx("div",{className:"grid grid-cols-2 gap-3",children:T1.map(D=>{const we=P.includes(D);return o.jsx("button",{type:"button",onClick:()=>L(R=>ue(R,D)),className:["rounded-2xl border px-4 py-4 text-sm font-extrabold transition-colors",we?"bg-red-500/15 border-red-500/30 text-red-200":"bg-white/0 border-white/10 text-white/70"].join(" "),children:D},D)})})]}),l===6&&o.jsxs("div",{className:"space-y-5",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-xs font-extrabold uppercase tracking-[0.2em] text-muted",children:"Step 6"}),o.jsx("div",{className:"text-2xl font-extrabold text-white mt-1",children:"Review"})]}),o.jsxs("div",{className:"rounded-3xl bg-surface border border-white/5 p-5 space-y-5",children:[o.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[o.jsx("span",{className:`px-3 py-1 rounded-2xl text-xs font-extrabold border ${gi(m).cls}`,children:gi(m).label}),o.jsx("span",{className:"text-white font-extrabold text-sm",children:f}),w.trim()?o.jsx("span",{className:"text-white/60 text-sm",children:w.trim()}):null]}),o.jsx("div",{className:"grid grid-cols-3 gap-3",children:[{label:"PTS",val:Xs(g)??0},{label:"REB",val:Xs(y)??0},{label:"AST",val:Xs(N)??0}].map(D=>o.jsxs("div",{className:"rounded-2xl bg-white/5 border border-white/10 p-4 text-center",children:[o.jsx("div",{className:"text-[10px] font-extrabold uppercase tracking-[0.15em] text-white/40",children:D.label}),o.jsx("div",{className:"mt-1 text-2xl font-extrabold text-white",children:D.val})]},D.label))}),o.jsxs("div",{children:[o.jsx("div",{className:"text-[10px] font-extrabold uppercase tracking-[0.15em] text-white/40 mb-2",children:"Best"}),o.jsx("div",{className:"flex flex-wrap gap-2",children:A.length?A.map(D=>o.jsx("span",{className:"px-3 py-1 rounded-2xl bg-primary/10 border border-primary/20 text-sm text-white",children:D},D)):o.jsx("span",{className:"text-white/40 text-sm",children:""})})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-[10px] font-extrabold uppercase tracking-[0.15em] text-white/40 mb-2",children:"Worst"}),o.jsx("div",{className:"flex flex-wrap gap-2",children:P.length?P.map(D=>o.jsx("span",{className:"px-3 py-1 rounded-2xl bg-white/5 border border-white/10 text-sm text-white/80",children:D},D)):o.jsx("span",{className:"text-white/40 text-sm",children:""})})]})]}),o.jsxs("div",{className:"rounded-3xl bg-surface border border-white/5 p-5",children:[o.jsx("div",{className:"text-xs font-extrabold uppercase tracking-[0.2em] text-white/40",children:"How did you feel?"}),o.jsx("textarea",{value:$,onChange:D=>Q(D.target.value),rows:5,placeholder:"Write your thoughts about the game",className:"mt-3 w-full rounded-2xl bg-white/5 border border-white/10 px-4 py-4 text-sm font-semibold text-white placeholder:text-white/25 resize-none focus:outline-none focus:border-primary/40"})]})]})]},l)}),o.jsx("div",{className:"flex-shrink-0 absolute bottom-0 left-0 right-0 max-w-md mx-auto px-6 pb-8 pt-4 border-t border-white/5 bg-background",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("button",{type:"button",onClick:()=>c(D=>Math.max(1,D-1)),disabled:l===1,className:["flex-1 rounded-2xl px-4 py-4 text-sm font-extrabold border transition-colors",l===1?"bg-white/0 border-white/5 text-white/25 cursor-not-allowed":"bg-white/5 border-white/10 text-white active:scale-95"].join(" "),children:"Back"}),l<a?o.jsx("button",{type:"button",onClick:()=>ee&&c(D=>Math.min(a,D+1)),disabled:!ee,className:["flex-1 rounded-2xl px-4 py-4 text-sm font-extrabold transition-colors",ee?"bg-primary text-black active:scale-95":"bg-white/10 text-white/25 cursor-not-allowed"].join(" "),children:"Next"}):o.jsx("button",{type:"button",onClick:he,disabled:!e||!m||u,className:["flex-1 rounded-2xl px-4 py-4 text-sm font-extrabold transition-colors",e&&m&&!u?"bg-primary text-black active:scale-95":"bg-white/10 text-white/25 cursor-not-allowed"].join(" "),children:u?"Saving":i?"Save changes":"Save"})]})})]})}const Bl=[{id:"name",title:"Name"},{id:"height",title:"Height"},{id:"weight",title:"Weight"},{id:"wingspan",title:"Wingspan"},{id:"position",title:"Position"},{id:"level",title:"Level"},{id:"attributes",title:"Attributes"},{id:"improvements",title:"Focus Areas"},{id:"usage",title:"Goals"}],PN=["Shooter","Slasher","Playmaker","Lockdown Defender","Rim Protector","Rebounder","High IQ","Athletic","Mid-range Specialist"],I1=({onNavigate:e})=>{const{updateProfile:t}=xr(),[r,n]=b.useState(0),[s,i]=b.useState("cm"),[a,l]=b.useState("kg"),[c,u]=b.useState("cm"),[d,f]=b.useState(""),[h,m]=b.useState(180),[x,w]=b.useState(75),[k,g]=b.useState(185),[p,y]=b.useState(""),[v,N]=b.useState(""),[E,A]=b.useState([]),[C,P]=b.useState([]),[L,$]=b.useState(""),Q=S=>Math.round(S*2.20462),ee=S=>Math.round(S/2.20462),ue=(S,M,K)=>{if(M==="cm")return o.jsxs("span",{className:"text-6xl font-black text-white tracking-tighter",children:[S,o.jsx("span",{className:`text-2xl ${K} ml-1`,children:"cm"})]});{const oe=Math.round(S/2.54),me=Math.floor(oe/12),ge=oe%12;return o.jsxs("span",{className:"text-6xl font-black text-white tracking-tighter",children:[me,"'",ge,'"',o.jsx("span",{className:`text-2xl ${K} ml-1`,children:"ft"})]})}},he=async()=>{if(r===0){const S=d.trim();if(S.length>0&&(S.length<2||S.length>50))return}if(r<Bl.length-1)n(S=>S+1);else{const S=oe=>{const me=Number(String(oe).replace(",",".").trim());return Number.isFinite(me)?me:null},M={name:d.trim()||null,height_cm:h,weight_kg:x,wingspan_cm:k,position:p,level:v,attributes:E,improvements:C,usage:L,units:{heightUnit:s,weightUnit:a,wingspanUnit:c},completed_at:new Date().toISOString()},K=await t({onboarding_data:M,full_name:d.trim()||null,height_cm:S(h),weight_kg:S(x),wingspan_cm:S(k)});K.ok===!0?e("onboarding-shot-analysis"):console.error("[ONBOARDING] updateProfile error:",K.error)}},D=()=>{r>0?n(S=>S-1):e("profile")},we=(S,M,K)=>{M.includes(S)?K(M.filter(oe=>oe!==S)):K([...M,S])},R=()=>{const S=d,M=S.trim(),K=M.length>=2&&M.length<=50;return o.jsxs("div",{className:"space-y-10 animate-in slide-in-from-right duration-500",children:[o.jsxs("div",{className:"text-center mb-4",children:[o.jsx("div",{className:"w-16 h-16 bg-primary/20 text-primary rounded-full flex items-center justify-center mx-auto mb-6",children:o.jsx(Hh,{size:32})}),o.jsx("h2",{className:"text-3xl font-extrabold mb-2",children:"What's your alias?"}),o.jsx("p",{className:"text-muted text-sm",children:"This will personalize your experience (Optional)"})]}),o.jsxs("div",{className:"space-y-4 px-4",children:[o.jsx("input",{type:"text",value:S,onChange:oe=>f(oe.target.value),maxLength:50,placeholder:"Your name",className:"w-full rounded-2xl bg-surface border border-white/10 px-4 py-3 text-base font-semibold outline-none focus:border-primary transition-colors"}),!K&&M.length>0&&o.jsx("p",{className:"text-xs text-red-400 font-semibold",children:"Name must be 250 characters."})]})]})},B=(S,M,K,oe)=>o.jsxs("div",{className:"flex bg-surface rounded-full p-1 border border-white/10 w-fit mx-auto mb-6",children:[o.jsx("button",{onClick:()=>M(K),className:`px-4 py-1.5 rounded-full text-xs font-bold uppercase transition-all ${S===K?"bg-white text-black":"text-muted hover:text-white"}`,children:K}),o.jsx("button",{onClick:()=>M(oe),className:`px-4 py-1.5 rounded-full text-xs font-bold uppercase transition-all ${S===oe?"bg-white text-black":"text-muted hover:text-white"}`,children:oe})]}),H=()=>o.jsxs("div",{className:"space-y-10 animate-in slide-in-from-right duration-500",children:[o.jsxs("div",{className:"text-center mb-4",children:[o.jsx("div",{className:"w-16 h-16 bg-primary/20 text-primary rounded-full flex items-center justify-center mx-auto mb-6",children:o.jsx(I5,{size:32})}),o.jsx("h2",{className:"text-3xl font-extrabold mb-2",children:"How tall are you?"}),o.jsx("p",{className:"text-muted text-sm",children:"This helps analyze release height."})]}),B(s,i,"cm","ft"),o.jsxs("div",{className:"space-y-8 px-4",children:[o.jsx("div",{className:"text-center",children:ue(h,s,"text-primary")}),o.jsx("input",{type:"range",min:120,max:230,value:h,onChange:K=>m(parseInt(K.target.value)),className:"w-full h-4 bg-surface rounded-full appearance-none cursor-pointer accent-primary hover:accent-primary/80"})]})]}),U=()=>{const S=a==="kg",M=S?x:Q(x),K=S?40:88,oe=S?200:440;return o.jsxs("div",{className:"space-y-10 animate-in slide-in-from-right duration-500",children:[o.jsxs("div",{className:"text-center mb-4",children:[o.jsx("div",{className:"w-16 h-16 bg-blue-500/20 text-blue-500 rounded-full flex items-center justify-center mx-auto mb-6",children:o.jsx(z5,{size:32})}),o.jsx("h2",{className:"text-3xl font-extrabold mb-2",children:"What's your weight?"}),o.jsx("p",{className:"text-muted text-sm",children:"Calibrating for physical intensity."})]}),B(a,l,"kg","lb"),o.jsxs("div",{className:"space-y-8 px-4",children:[o.jsx("div",{className:"text-center",children:o.jsxs("span",{className:"text-6xl font-black text-white tracking-tighter",children:[M,o.jsx("span",{className:"text-2xl text-blue-500 ml-1",children:a})]})}),o.jsx("input",{type:"range",min:K,max:oe,value:M,onChange:me=>{const ge=parseInt(me.target.value);w(S?ge:ee(ge))},className:"w-full h-4 bg-surface rounded-full appearance-none cursor-pointer accent-blue-500 hover:accent-blue-400"})]})]})},F=()=>o.jsxs("div",{className:"space-y-10 animate-in slide-in-from-right duration-500",children:[o.jsxs("div",{className:"text-center mb-4",children:[o.jsx("div",{className:"w-16 h-16 bg-purple-500/20 text-purple-500 rounded-full flex items-center justify-center mx-auto mb-6",children:o.jsx(vx,{size:32})}),o.jsx("h2",{className:"text-3xl font-extrabold mb-2",children:"Your Wingspan?"}),o.jsx("p",{className:"text-muted text-sm",children:"Crucial for defensive reach and shooting."})]}),B(c,u,"cm","ft"),o.jsxs("div",{className:"space-y-8 px-4",children:[o.jsx("div",{className:"text-center",children:ue(k,c,"text-purple-500")}),o.jsx("input",{type:"range",min:120,max:250,value:k,onChange:K=>g(parseInt(K.target.value)),className:"w-full h-4 bg-surface rounded-full appearance-none cursor-pointer accent-purple-500 hover:accent-purple-400"})]})]}),de=()=>o.jsxs("div",{className:"space-y-4 animate-in slide-in-from-right duration-500 pt-2",children:[o.jsxs("div",{className:"text-center mb-4",children:[o.jsx("div",{className:"w-14 h-14 bg-white/10 text-white rounded-full flex items-center justify-center mx-auto mb-4",children:o.jsx(Hh,{size:24})}),o.jsx("h2",{className:"text-2xl font-extrabold mb-1",children:"Your Position?"}),o.jsx("p",{className:"text-muted text-xs",children:"Where do you operate on the floor?"})]}),o.jsx("div",{className:"grid grid-cols-1 gap-2.5",children:["Point Guard","Shooting Guard","Small Forward","Power Forward","Center"].map(S=>o.jsxs("button",{onClick:()=>y(S),className:`p-4 rounded-xl font-bold text-sm border transition-all flex items-center justify-between group ${p===S?"bg-white text-black border-white shadow-xl scale-[1.01]":"bg-surface text-muted border-white/5 hover:bg-white/5"}`,children:[S,p===S&&o.jsx($o,{size:18,className:"text-black",strokeWidth:3})]},S))})]}),pe=()=>o.jsxs("div",{className:"space-y-8 animate-in slide-in-from-right duration-500",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("div",{className:"w-16 h-16 bg-yellow-500/20 text-yellow-500 rounded-full flex items-center justify-center mx-auto mb-6",children:o.jsx(M5,{size:32})}),o.jsx("h2",{className:"text-3xl font-extrabold mb-2",children:"Competition Level"}),o.jsx("p",{className:"text-muted text-sm",children:"Helps us set the difficulty."})]}),o.jsx("div",{className:"grid grid-cols-1 gap-3",children:["Rookie","High School","College / Uni","Professional"].map(S=>o.jsxs("button",{onClick:()=>N(S),className:`p-5 rounded-2xl font-bold text-lg border transition-all flex items-center justify-between group ${v===S?"bg-yellow-500 text-black border-yellow-500 shadow-xl scale-[1.02]":"bg-surface text-muted border-white/5 hover:bg-white/5"}`,children:[S,v===S&&o.jsx($o,{size:20,className:"text-black",strokeWidth:3})]},S))})]}),Ne=()=>o.jsxs("div",{className:"space-y-8 animate-in slide-in-from-right duration-500",children:[o.jsxs("div",{className:"text-center mb-6",children:[o.jsx("div",{className:"w-16 h-16 bg-red-500/20 text-red-500 rounded-full flex items-center justify-center mx-auto mb-6",children:o.jsx(Ax,{size:32})}),o.jsx("h2",{className:"text-3xl font-extrabold mb-2",children:"Top Attributes"}),o.jsx("p",{className:"text-muted text-sm",children:"Select your strengths (Multiple)."})]}),o.jsx("div",{className:"grid grid-cols-2 gap-3",children:PN.map(S=>o.jsx("button",{onClick:()=>we(S,E,A),className:`px-2 py-3.5 rounded-xl font-bold text-xs border-2 transition-all flex items-center justify-center text-center leading-tight ${E.includes(S)?"bg-red-500 text-white border-red-500 shadow-md":"bg-surface text-muted border-white/5 hover:border-white/20"}`,children:S},S))})]}),T=()=>o.jsxs("div",{className:"space-y-8 animate-in slide-in-from-right duration-500",children:[o.jsxs("div",{className:"text-center mb-6",children:[o.jsx("div",{className:"w-16 h-16 bg-green-500/20 text-green-500 rounded-full flex items-center justify-center mx-auto mb-6",children:o.jsx(lu,{size:32})}),o.jsx("h2",{className:"text-3xl font-extrabold mb-2",children:"Focus Areas"}),o.jsx("p",{className:"text-muted text-sm",children:"What do you want to improve?"})]}),o.jsx("div",{className:"grid grid-cols-2 gap-3",children:["Shooting Consistency","Ball Handling","Defense","Speed & Agility","Vertical Jump","Court Vision"].map(S=>o.jsxs("button",{onClick:()=>we(S,C,P),className:`p-4 rounded-2xl font-bold text-xs border transition-all flex flex-col items-center text-center justify-center gap-2 h-24 ${C.includes(S)?"bg-green-500 text-black border-green-500":"bg-surface text-muted border-white/5 hover:bg-white/5"}`,children:[S,C.includes(S)&&o.jsx($o,{size:16})]},S))})]}),_=()=>o.jsxs("div",{className:"space-y-4 animate-in slide-in-from-right duration-500 pt-2",children:[o.jsxs("div",{className:"text-center mb-6",children:[o.jsx("div",{className:"w-14 h-14 bg-primary/20 text-primary rounded-full flex items-center justify-center mx-auto mb-4",children:o.jsx(b5,{size:24})}),o.jsx("h2",{className:"text-2xl font-extrabold mb-1",children:"Primary Goal"}),o.jsx("p",{className:"text-muted text-xs",children:"How can BasketShot help you?"})]}),o.jsx("div",{className:"space-y-3",children:[{id:"training",label:"Structured Training",desc:"Daily workout plans."},{id:"analysis",label:"Shot Analysis",desc:"Fix my shooting form."},{id:"coaching",label:"Coaching Tool",desc:"I train others."},{id:"casual",label:"Just for Fun",desc:"Casual play with friends."}].map(S=>o.jsxs("button",{onClick:()=>$(S.id),className:`w-full p-4 rounded-2xl text-left border transition-all group ${L===S.id?"bg-surface border-primary ring-1 ring-primary":"bg-surface border-white/5 hover:border-white/20"}`,children:[o.jsxs("div",{className:"flex items-center justify-between mb-0.5",children:[o.jsx("h4",{className:`font-bold text-base ${L===S.id?"text-primary":"text-white"}`,children:S.label}),L===S.id&&o.jsx("div",{className:"bg-primary text-black rounded-full p-0.5",children:o.jsx($o,{size:12,strokeWidth:4})})]}),o.jsx("p",{className:"text-xs text-muted font-medium",children:S.desc})]},S.id))})]});return o.jsxs("div",{className:"min-h-screen bg-background text-white flex flex-col p-6 max-w-md mx-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-8",children:[o.jsx("button",{onClick:D,className:"w-10 h-10 rounded-full bg-surface border border-white/10 flex items-center justify-center hover:bg-white/10",children:o.jsx(Bh,{size:20})}),o.jsxs("div",{className:"text-xs font-bold text-muted uppercase tracking-widest bg-surface px-3 py-1 rounded-full border border-white/5",children:["Step ",r+1," / ",Bl.length]}),o.jsx("div",{className:"w-10"})]}),o.jsx("div",{className:"w-full h-1 bg-surface rounded-full mb-8 overflow-hidden",children:o.jsx("div",{className:"h-full bg-primary transition-all duration-500 ease-out",style:{width:`${(r+1)/Bl.length*100}%`}})}),o.jsxs("div",{className:"flex-1 pb-24",children:[r===0&&R(),r===1&&H(),r===2&&U(),r===3&&F(),r===4&&de(),r===5&&pe(),r===6&&Ne(),r===7&&T(),r===8&&_()]}),o.jsx("div",{className:"fixed bottom-8 left-0 right-0 px-6 max-w-md mx-auto z-10",children:o.jsxs("button",{onClick:he,className:"w-full bg-primary text-black font-extrabold text-lg py-5 rounded-3xl shadow-[0_0_20px_rgba(249,128,6,0.3)] hover:bg-primary/90 transition-all active:scale-[0.98] flex items-center justify-center gap-2",children:[r===Bl.length-1?"Finish Profile":"Next Step",o.jsx(wx,{size:20,strokeWidth:3})]})})]})};function ON({isOpen:e,onRequestClose:t,onContinue:r,termsUrl:n,privacyUrl:s}){var L,$;const{offerings:i,isPremium:a,purchasePackage:l,restorePurchases:c,loading:u}=au(),[d,f]=b.useState("annual"),[h,m]=b.useState(null),[x,w]=b.useState(!1),[k,g]=b.useState(!1);b.useEffect(()=>{e&&a&&t()},[e,a,t]);const p=(i==null?void 0:i.current)??null,{annualPkg:y,monthlyPkg:v}=b.useMemo(()=>{const Q=(p==null?void 0:p.availablePackages)??[],ee=Q.find(he=>he.packageType==="ANNUAL")??Q.find(he=>(he.identifier??"").toLowerCase().includes("annual"))??null,ue=Q.find(he=>he.packageType==="MONTHLY")??Q.find(he=>(he.identifier??"").toLowerCase().includes("month"))??null;return{annualPkg:ee,monthlyPkg:ue}},[p]),N=Q=>{try{window.open(Q,"_blank","noopener,noreferrer")}catch{}},E=async()=>{g(!0),m(null);const Q=await c();g(!1),Q.success||m(Q.error||"No active subscriptions found")};if(!e)return null;const A=["Unlimited AI Shot Analysis","Custom Pro Training Plans","Advanced Performance Insights"],C=((L=y==null?void 0:y.product)==null?void 0:L.priceString)??"$59.99",P=(($=v==null?void 0:v.product)==null?void 0:$.priceString)??"$8.99";return o.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center",children:[o.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-sm",onClick:()=>{a&&t()}}),o.jsxs("div",{className:"relative z-[101] w-full max-w-md mx-4 max-h-[95vh] overflow-y-auto no-scrollbar rounded-3xl bg-gradient-to-b from-black via-black to-[#0a0a0a] border border-white/10 shadow-2xl animate-in zoom-in-95 fade-in duration-300",children:[o.jsx("button",{type:"button",onClick:()=>{a&&t()},className:"absolute top-4 right-4 z-10 w-10 h-10 rounded-full bg-white/10 hover:bg-white/20 flex items-center justify-center transition-colors","aria-label":"Close",children:o.jsx(qn,{size:20,className:"text-white/80"})}),o.jsxs("div",{className:"relative h-[240px] overflow-hidden rounded-t-3xl",children:[o.jsx("img",{src:"https://images.pexels.com/photos/1752757/pexels-photo-1752757.jpeg?auto=compress&cs=tinysrgb&w=800",alt:"Basketball court",className:"w-full h-full object-cover opacity-30"}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent via-black/50 to-black"}),o.jsx("div",{className:"absolute inset-0 flex items-center justify-center px-6",children:o.jsxs("div",{className:"text-center",children:[o.jsx("h2",{className:"text-2xl font-black text-white leading-tight mb-1",children:"Unleash Your Potential with"}),o.jsx("h2",{className:"text-4xl font-black leading-tight",children:o.jsx("span",{className:"text-[#f98006]",children:"BasketShot Elite"})})]})})]}),o.jsxs("div",{className:"px-6 pb-6",children:[o.jsx("div",{className:"space-y-4 mb-6",children:A.map((Q,ee)=>o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-10 h-10 rounded-full bg-[#f98006]/20 flex items-center justify-center flex-shrink-0",children:o.jsx($o,{size:20,className:"text-[#f98006]"})}),o.jsx("p",{className:"text-base font-semibold text-white",children:Q})]},ee))}),h&&o.jsx("div",{className:"mb-4 bg-red-500/10 border border-red-500/20 rounded-2xl p-3 text-sm text-red-400 font-medium",children:h}),o.jsxs("div",{className:"space-y-3 mb-6",children:[o.jsxs("button",{type:"button",onClick:()=>f("annual"),className:`relative w-full rounded-2xl border-2 p-4 transition-all ${d==="annual"?"border-[#f98006] bg-[#f98006]/10":"border-white/10 bg-white/5"}`,children:[o.jsx("div",{className:"absolute -top-3 left-1/2 -translate-x-1/2",children:o.jsx("span",{className:"bg-[#f98006] text-black text-xs font-extrabold px-4 py-1 rounded-full uppercase tracking-wider",children:"Most Popular"})}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"text-left",children:[o.jsx("p",{className:"text-sm font-bold text-white/60 uppercase tracking-widest",children:"Annual"}),o.jsxs("p",{className:"text-3xl font-black text-white mt-1",children:[C,o.jsxs("span",{className:"text-base font-semibold text-white/60",children:[" ","/ year"]})]}),o.jsx("p",{className:"text-sm font-semibold text-white/50 mt-1",children:"Save 45% compared to monthly"})]}),o.jsx("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center flex-shrink-0 ${d==="annual"?"border-[#f98006] bg-[#f98006]":"border-white/30"}`,children:d==="annual"&&o.jsx("div",{className:"w-2 h-2 rounded-full bg-black"})})]})]}),o.jsx("button",{type:"button",onClick:()=>f("monthly"),className:`relative w-full rounded-2xl border-2 p-4 transition-all ${d==="monthly"?"border-[#f98006] bg-[#f98006]/10":"border-white/10 bg-white/5"}`,children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"text-left",children:[o.jsx("p",{className:"text-sm font-bold text-white/60 uppercase tracking-widest",children:"Monthly"}),o.jsxs("p",{className:"text-3xl font-black text-white mt-1",children:[P,o.jsxs("span",{className:"text-base font-semibold text-white/60",children:[" ","/ month"]})]}),o.jsx("p",{className:"text-sm font-semibold text-white/50 mt-1",children:"Cancel anytime"})]}),o.jsx("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center flex-shrink-0 ${d==="monthly"?"border-[#f98006] bg-[#f98006]":"border-white/30"}`,children:d==="monthly"&&o.jsx("div",{className:"w-2 h-2 rounded-full bg-black"})})]})})]}),o.jsx("button",{type:"button",onClick:()=>{{r?r():t();return}},disabled:!1,className:"w-full rounded-full bg-[#f98006] hover:bg-[#f98006]/90 text-black py-4 text-lg font-extrabold transition-all disabled:opacity-60 disabled:cursor-not-allowed shadow-[0_0_30px_rgba(249,128,6,0.3)] mb-4",children:"Continue (Test Mode)"}),o.jsx("p",{className:"mb-4 text-center text-[11px] font-semibold text-white/40",children:"Test mode: payments disabled."}),o.jsxs("div",{className:"flex items-center justify-center gap-6 text-sm",children:[o.jsx("button",{type:"button",onClick:E,disabled:k,className:"font-semibold text-white/60 hover:text-white transition-colors disabled:opacity-60",children:k?"Restoring...":"Restore Purchase"}),o.jsx("button",{type:"button",onClick:()=>N(n),className:"font-semibold text-white/60 hover:text-white transition-colors",children:"Terms"}),o.jsx("button",{type:"button",onClick:()=>N(s),className:"font-semibold text-white/60 hover:text-white transition-colors",children:"Privacy"})]})]})]})]})}const RN=[{id:"3pt",title:"Jumpshot",icon:_x,desc:"Analyze your jump shot form"},{id:"ft",title:"Free Throw",icon:bx,desc:"Routine & consistency"}],P1=["Detecting your posture","Tracking your movement","Measuring your balance","Measuring your alignment","Measuring your release point","Measuring your rhythm","Calculating your metrics","Building your feedback","Creating your improvement plan"];yr.isNativePlatform();function LN({onBack:e,onDone:t}){const{user:r,updateProfile:n}=xr(),{isPremium:s}=au(),i=(r==null?void 0:r.id)??null,[a,l]=b.useState("selection"),[c,u]=b.useState(null),[d,f]=b.useState(null),[h,m]=b.useState(null),[x,w]=b.useState(0),[k,g]=b.useState(0),[p,y]=b.useState(!1),[v,N]=b.useState(!1),[E,A]=b.useState(!1),[C,P]=b.useState(!1),[L,$]=b.useState(!1),[Q,ee]=b.useState(!1),ue=b.useRef(null);b.useEffect(()=>()=>{d&&URL.revokeObjectURL(d)},[d]),b.useEffect(()=>{if(a==="analyzing"){const _=setInterval(()=>{w(S=>(S+1)%P1.length)},1200);return()=>clearInterval(_)}},[a]),b.useEffect(()=>{if(a==="results"&&h&&!h.isInvalid){let _=0;const S=h.score,K=S/(2500/16),oe=setInterval(()=>{_+=K,_>=S?(g(S),clearInterval(oe)):g(Math.floor(_))},16);return()=>clearInterval(oe)}},[a,h]),b.useEffect(()=>{if(a!=="results"){A(!1),P(!1);return}if(s){A(!1),P(!1);return}const _=window.setTimeout(()=>A(!0),1e3);return()=>window.clearTimeout(_)},[a,s]),b.useEffect(()=>{s&&(A(!1),P(!1))},[s]);const he=_=>{u(_),l("source")},D=async _=>{var S,M,K;if(!yr.isNativePlatform()){(S=ue.current)==null||S.click();return}try{if(_==="gallery"){const me=(M=(await Dx.pickVideos({limit:1})).files)==null?void 0:M[0],ge=me==null?void 0:me.path;if(ge){const tt=yr.convertFileSrc(ge);f(tt),l("preview")}return}(K=ue.current)==null||K.click()}catch(oe){console.error("Video picker error:",oe)}},we=_=>{if(_.target.files&&_.target.files.length>0){const S=_.target.files[0],M=URL.createObjectURL(S);f(M),l("preview")}},R=async()=>{if(console.log("[ONBOARDING] startAnalysis",{ts:Date.now(),videoUrl:d,shotType:c==null?void 0:c.id}),console.log("[ONBOARDING] setStep -> analyzing"),l("analyzing"),w(0),g(0),!!d)try{console.log("[ONBOARDING] analyzeVideo begin"),performance!=null&&performance.memory&&console.log("[MEM]",performance.memory);const _=await Mw(d,c==null?void 0:c.id,()=>{});if(console.log("[ONBOARDING] analyzeVideo success",{score:_==null?void 0:_.score,isInvalid:_==null?void 0:_.isInvalid}),m(_),ee(!1),(async()=>{var S,M,K,oe;try{$(!0);const me=await Ix({shotType:(c==null?void 0:c.id)??"unknown",score:_.score,metrics:{elbowAlignment:(S=_.metrics)==null?void 0:S.elbowAlignment,releaseHeight:(M=_.metrics)==null?void 0:M.releaseHeight,wristFlick:(K=_.metrics)==null?void 0:K.wristFlick,lateralSway:(oe=_.metrics)==null?void 0:oe.lateralSway},context:{framesProcessed:_.processedFrames}},5e3);if(!me)return;m(ge=>{var tt,rt;return ge&&{...ge,strengths:(tt=me.strengths)!=null&&tt.length?me.strengths:ge.strengths,improvements:(rt=me.improvements)!=null&&rt.length?me.improvements:ge.improvements,aiCoachTip:me.aiCoachTip??ge.aiCoachTip}}),ee(!0)}finally{$(!1)}})(),i&&!_.isInvalid)try{const S=await Fw({user_id:i,shot_type:(c==null?void 0:c.id)??null,score:_.score,metrics:_.metrics,strengths:_.strengths,improvements:_.improvements,ai_coach_tip:_.aiCoachTip??null,engine_version:null,source:"client",video_meta:{processedFrames:_.processedFrames,totalFrames:_.totalFrames}});px(i,S)}catch(S){console.warn("[ONBOARDING ANALYSIS] save error:",S)}setTimeout(()=>{console.log("[ONBOARDING] setStep -> results"),l("results")},800)}catch(_){console.error("[ONBOARDING] Analysis error:",_),m({score:0,metrics:{stanceWidth:0,lateralSway:0,kneeDip:0,verticalDrive:0,elbowAlignment:0,elbowUnderBall:0,releaseHeight:0,wristFlick:0,followThroughHold:0,landingBalance:0},strengths:[],improvements:[],isInvalid:!0,messageIfInvalid:"An error occurred during analysis. Please try again.",processedFrames:0,totalFrames:0}),console.log("[ONBOARDING] setStep -> results (after error)"),l("results")}},B=async()=>{await n({onboarding_completed:!0}),t()},H=()=>{a==="source"?(l("selection"),u(null)):a==="preview"?(l("source"),f(null)):e()},U=()=>{m(null),g(0),A(!1),P(!1),l("preview")},F=()=>o.jsxs("div",{className:"h-full flex flex-col pt-[calc(env(safe-area-inset-top)+56px)] pb-[calc(env(safe-area-inset-bottom)+16px)] px-4 animate-in zoom-in-95 fade-in duration-300 overflow-hidden",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("h2",{className:"text-3xl font-extrabold tracking-tight mb-2",children:"Record Your First Shot"}),o.jsx("p",{className:"text-muted text-sm font-medium",children:"Choose your shot type to begin"})]}),o.jsx("div",{className:"grid grid-cols-2 gap-4",children:RN.map(_=>{const S=_.icon;return o.jsxs("button",{onClick:()=>he(_),className:"relative h-[180px] rounded-3xl bg-surface p-6 border border-white/5 hover:border-primary/30 active:scale-[0.98] transition-all flex flex-col items-center justify-center text-center group",children:[o.jsx("div",{className:"w-16 h-16 rounded-2xl bg-primary/10 flex items-center justify-center mb-4 group-hover:bg-primary/20 transition-all",children:o.jsx(S,{size:32,className:"text-primary"})}),o.jsx("h3",{className:"text-lg font-bold text-white mb-1",children:_.title}),o.jsx("p",{className:"text-xs text-muted",children:_.desc})]},_.id)})})]}),de=()=>o.jsxs("div",{className:"h-full flex flex-col justify-center pt-[calc(env(safe-area-inset-top)+56px)] pb-[calc(env(safe-area-inset-bottom)+16px)] px-4 animate-in slide-in-from-right duration-300 overflow-hidden",children:[o.jsxs("div",{className:"text-center mb-12",children:[o.jsx("h2",{className:"text-3xl font-extrabold tracking-tight mb-3",children:c==null?void 0:c.title}),o.jsx("p",{className:"text-muted text-sm font-medium",children:"Choose your video source"})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("button",{onClick:()=>D("camera"),className:"w-full bg-primary text-black rounded-3xl p-6 flex items-center gap-4 hover:bg-primary/90 active:scale-[0.98] transition-all",children:[o.jsx("div",{className:"w-14 h-14 rounded-2xl bg-black/20 flex items-center justify-center",children:o.jsx(Ea,{size:28})}),o.jsxs("div",{className:"flex-1 text-left",children:[o.jsx("h3",{className:"font-extrabold text-base",children:"Record Video"}),o.jsx("p",{className:"text-xs opacity-80 font-medium",children:"Use your camera"})]})]}),o.jsxs("button",{onClick:()=>D("gallery"),className:"w-full bg-surface text-white rounded-3xl p-6 flex items-center gap-4 border border-white/10 hover:bg-white/5 active:scale-[0.98] transition-all",children:[o.jsx("div",{className:"w-14 h-14 rounded-2xl bg-white/5 flex items-center justify-center",children:o.jsx(Sx,{size:28})}),o.jsxs("div",{className:"flex-1 text-left",children:[o.jsx("h3",{className:"font-bold text-base",children:"Choose from Gallery"}),o.jsx("p",{className:"text-xs text-muted font-medium",children:"Upload existing video"})]})]}),o.jsxs("button",{onClick:()=>y(!0),className:"w-full bg-white/5 text-white rounded-2xl p-4 flex items-center justify-center gap-2 border border-white/5 hover:bg-white/10 transition-all",children:[o.jsx(Nx,{size:18,className:"text-primary"}),o.jsx("span",{className:"text-sm font-bold",children:"Recording Tips"})]})]}),o.jsx("input",{ref:ue,type:"file",accept:"video/*",capture:"environment",onChange:we,className:"hidden"})]}),pe=()=>o.jsxs("div",{className:"h-full flex flex-col justify-center pt-[calc(env(safe-area-inset-top)+56px)] pb-[calc(env(safe-area-inset-bottom)+16px)] px-4 animate-in slide-in-from-right duration-300 overflow-hidden",children:[o.jsxs("div",{className:"text-center mb-6",children:[o.jsx("h2",{className:"text-2xl font-extrabold tracking-tight mb-2",children:"Preview Your Shot"}),o.jsx("p",{className:"text-muted text-sm font-medium",children:"Ready to analyze?"})]}),o.jsx("div",{className:"relative w-full aspect-[9/16] max-h-[60vh] rounded-3xl overflow-hidden border border-white/10 mb-8",children:d&&o.jsx("video",{src:d,className:"w-full h-full object-cover",controls:!0,playsInline:!0,onError:_=>console.error("[VIDEO] onError",{e:_,ts:Date.now(),src:d}),onStalled:()=>console.warn("[VIDEO] stalled",{ts:Date.now()}),onWaiting:()=>console.warn("[VIDEO] waiting",{ts:Date.now()}),onAbort:()=>console.warn("[VIDEO] abort",{ts:Date.now()}),onLoadedMetadata:_=>{const S=_.currentTarget;console.log("[VIDEO] metadata",{duration:S.duration,w:S.videoWidth,h:S.videoHeight,readyState:S.readyState})}})}),o.jsxs("button",{onClick:R,className:"w-full bg-primary text-black font-extrabold text-sm py-4 rounded-2xl hover:bg-primary/90 transition-all flex items-center justify-center gap-2",children:[o.jsx(Tr,{size:18}),"Start Analysis"]})]}),Ne=()=>o.jsxs("div",{className:"h-full flex flex-col justify-center pt-[calc(env(safe-area-inset-top)+16px)] pb-[calc(env(safe-area-inset-bottom)+16px)] px-4 animate-in fade-in duration-700 relative overflow-hidden",children:[o.jsxs("div",{className:"relative w-full aspect-[9/16] max-h-[70vh] rounded-3xl overflow-hidden border border-primary/30 shadow-[0_0_30px_rgba(249,128,6,0.1)]",children:[d&&o.jsx("video",{src:d,className:"w-full h-full object-cover opacity-60",autoPlay:!0,loop:!0,muted:!0,playsInline:!0,onError:_=>console.error("[VIDEO] onError",{e:_,ts:Date.now(),src:d}),onStalled:()=>console.warn("[VIDEO] stalled",{ts:Date.now()}),onWaiting:()=>console.warn("[VIDEO] waiting",{ts:Date.now()}),onAbort:()=>console.warn("[VIDEO] abort",{ts:Date.now()})}),o.jsx("div",{className:"absolute inset-0 bg-primary/5 z-10"}),o.jsx("div",{className:"absolute inset-0 z-20 flex flex-col items-center justify-center",children:o.jsx("div",{className:"w-full absolute top-0 h-1 bg-primary/50 shadow-[0_0_15px_#f98006] animate-[scan_2s_ease-in-out_infinite]"})}),o.jsxs("div",{className:"absolute bottom-0 inset-x-0 p-8 bg-gradient-to-t from-black via-black/80 to-transparent z-30 flex flex-col items-center text-center",children:[o.jsx(Ta,{className:"animate-spin text-primary mb-4",size:32}),o.jsx("p",{className:"text-lg font-bold text-white tracking-tight animate-pulse min-h-[3rem]",children:P1[x]})]})]}),o.jsx("style",{children:`
        @keyframes scan {
          0% { top: 0%; opacity: 0; }
          10% { opacity: 1; }
          90% { opacity: 1; }
          100% { top: 100%; opacity: 0; }
        }
      `})]}),T=()=>h!=null&&h.isInvalid?o.jsx("div",{className:"h-full pt-[calc(env(safe-area-inset-top)+56px)] pb-[calc(env(safe-area-inset-bottom)+16px)] px-4 animate-in slide-in-from-bottom-8 duration-700 overflow-hidden flex flex-col justify-center",children:o.jsxs("div",{className:"flex flex-col items-center justify-center py-12 mt-6",children:[o.jsx("div",{className:"w-20 h-20 rounded-full bg-red-500/10 flex items-center justify-center mb-6",children:o.jsx(Qo,{size:48,className:"text-red-500"})}),o.jsx("h2",{className:"text-2xl font-extrabold tracking-tight mb-3 text-center",children:"Unable to Analyze"}),o.jsx("p",{className:"text-muted text-sm font-medium text-center max-w-[280px] leading-relaxed mb-8",children:h.messageIfInvalid}),o.jsx("button",{onClick:()=>{l("selection"),u(null),f(null),m(null)},className:"bg-primary text-black font-extrabold text-sm py-4 px-8 rounded-2xl hover:bg-primary/90 transition-all",children:"Try Again"})]})}):o.jsxs("div",{className:"relative h-full pt-[calc(env(safe-area-inset-top)+56px)] pb-[calc(env(safe-area-inset-bottom)+16px)] px-4 animate-in slide-in-from-bottom-8 duration-700 overflow-hidden flex flex-col",children:[o.jsxs("div",{className:`overflow-y-auto flex flex-col ${E&&!s?"filter blur-[10px] opacity-90 pointer-events-none select-none":""}`,children:[o.jsxs("div",{className:"flex flex-col items-center justify-center mb-6 mt-2",children:[o.jsxs("div",{className:"relative w-40 h-40 mb-6",children:[o.jsxs("svg",{className:"w-full h-full transform -rotate-90",viewBox:"0 0 128 128",children:[o.jsx("circle",{cx:"64",cy:"64",r:"56",stroke:"currentColor",strokeWidth:"8",fill:"transparent",className:"text-white/10"}),o.jsx("circle",{cx:"64",cy:"64",r:"56",stroke:"#f98006",strokeWidth:"8",fill:"transparent",strokeDasharray:352,strokeDashoffset:352-352*k/100,className:"transition-all duration-[2500ms] ease-out",strokeLinecap:"round"})]}),o.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center pt-2",children:[o.jsx("span",{className:"text-5xl font-black tracking-tighter text-white leading-none",children:k}),o.jsx("span",{className:"text-[10px] font-bold text-primary uppercase tracking-[0.2em] mt-1",children:"Score"})]})]}),o.jsxs("div",{className:`transition-opacity duration-1000 ${k>50?"opacity-100":"opacity-0"}`,children:[o.jsx("h2",{className:"text-3xl font-extrabold tracking-tight mb-2 text-center",children:k>=80?"Excellent!":k>=60?"Good Shot!":"Keep Practicing!"}),o.jsx("p",{className:"text-muted text-sm font-medium text-center max-w-[200px] leading-relaxed mx-auto",children:k>=80?"Your form is excellent!":k>=60?"Your form is looking solid.":"There is room for improvement."})]})]}),(h==null?void 0:h.metrics)&&o.jsx("div",{className:`mb-6 transition-all duration-1000 delay-300 ${k>10?"opacity-100 translate-y-0":"opacity-0 translate-y-4"}`,children:o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{className:"bg-surface rounded-2xl p-4 border border-white/5 text-center",children:[o.jsxs("div",{className:"text-2xl font-black text-primary mb-1",children:[Math.round(h.metrics.elbowAlignment*100),"%"]}),o.jsx("div",{className:"text-[10px] font-bold text-muted uppercase tracking-wider",children:"Alignment"})]}),o.jsxs("div",{className:"bg-surface rounded-2xl p-4 border border-white/5 text-center",children:[o.jsxs("div",{className:"text-2xl font-black text-primary mb-1",children:[Math.round(h.metrics.releaseHeight*100),"%"]}),o.jsx("div",{className:"text-[10px] font-bold text-muted uppercase tracking-wider",children:"Release"})]}),o.jsxs("div",{className:"bg-surface rounded-2xl p-4 border border-white/5 text-center",children:[o.jsxs("div",{className:"text-2xl font-black text-primary mb-1",children:[Math.round(h.metrics.wristFlick*100),"%"]}),o.jsx("div",{className:"text-[10px] font-bold text-muted uppercase tracking-wider",children:"Flick"})]}),o.jsxs("div",{className:"bg-surface rounded-2xl p-4 border border-white/5 text-center",children:[o.jsxs("div",{className:"text-2xl font-black text-primary mb-1",children:[Math.round(h.metrics.lateralSway*100),"%"]}),o.jsx("div",{className:"text-[10px] font-bold text-muted uppercase tracking-wider",children:"Stability"})]})]})}),o.jsxs("div",{className:`space-y-4 transition-all duration-1000 delay-500 ${k>20?"opacity-100 translate-y-0":"opacity-0 translate-y-4"}`,children:[(h==null?void 0:h.strengths)&&h.strengths.length>0&&o.jsxs("div",{className:"bg-surface rounded-3xl p-5 border border-white/5",children:[o.jsxs("h4",{className:"font-bold text-sm text-green-500 uppercase tracking-widest mb-3 flex items-center gap-2",children:[o.jsx($t,{size:16})," Strengths"]}),o.jsx("ul",{className:"space-y-2",children:h.strengths.slice(0,2).map((_,S)=>o.jsxs("li",{className:"flex gap-3 text-sm font-medium text-white/90",children:[o.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-green-500 mt-2"}),_]},S))})]}),(h==null?void 0:h.improvements)&&h.improvements.length>0&&o.jsxs("div",{className:"bg-surface rounded-3xl p-5 border border-white/5",children:[o.jsxs("h4",{className:"font-bold text-sm text-primary uppercase tracking-widest mb-3 flex items-center gap-2",children:[o.jsx(Qo,{size:16})," Areas to Improve"]}),o.jsx("div",{className:"space-y-3",children:h.improvements.slice(0,2).map((_,S)=>o.jsx("div",{className:"bg-black/20 rounded-2xl p-3 border border-white/5",children:o.jsx("p",{className:"text-sm font-medium text-white/90 leading-relaxed whitespace-pre-line",children:_})},S))})]}),((h==null?void 0:h.strengths)&&h.strengths.length>2||(h==null?void 0:h.improvements)&&h.improvements.length>2)&&o.jsx("button",{type:"button",onClick:()=>N(!0),className:"w-full text-sm font-bold text-primary/90 hover:text-primary underline underline-offset-4 transition-colors",children:"View full breakdown"}),(h==null?void 0:h.aiCoachTip)&&o.jsxs("div",{className:"bg-gradient-to-br from-primary/10 to-primary/5 rounded-3xl p-6 border-2 border-primary/30 relative overflow-hidden",children:[o.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-primary/10 rounded-full blur-3xl"}),o.jsxs("div",{className:"relative",children:[o.jsxs("h4",{className:"font-bold text-base text-primary uppercase tracking-widest mb-3 flex items-center gap-2",children:[o.jsx(Tr,{size:18})," ",h.aiCoachTip.title]}),o.jsx("p",{className:"text-sm font-semibold text-white mb-3 leading-relaxed",children:h.aiCoachTip.mainIssueTitle}),o.jsx("div",{className:"bg-black/30 rounded-xl p-4 mb-3",children:o.jsx("p",{className:"text-sm font-medium text-white/90 leading-relaxed whitespace-pre-line",children:h.aiCoachTip.body})}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(lu,{size:16,className:"text-primary"}),o.jsxs("p",{className:"text-xs font-bold text-white",children:["With focused practice, you can reach ",o.jsx("span",{className:"text-primary text-base",children:h.aiCoachTip.targetScore})]})]})]})]}),o.jsxs("div",{className:"bg-surface rounded-3xl p-6 border border-white/5",children:[o.jsxs("h4",{className:"font-bold text-sm text-white uppercase tracking-widest mb-4 flex items-center gap-2",children:[o.jsx(kx,{size:16,className:"text-primary"})," Suggested Drills (10 min)"]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("p",{className:"font-bold text-sm text-white mb-1",children:"Form shooting (1 hand)  310 reps"}),o.jsx("p",{className:"text-xs text-muted",children:"Focus on shoulder-elbow-wrist alignment with a soft release."})]}),o.jsxs("div",{children:[o.jsx("p",{className:"font-bold text-sm text-white mb-1",children:"Follow-through hold  38 shots"}),o.jsx("p",{className:"text-xs text-muted",children:'Hold your wrist "down" for 1 second after release.'})]}),o.jsxs("div",{children:[o.jsx("p",{className:"font-bold text-sm text-white mb-1",children:"Stick landing  36 shots"}),o.jsx("p",{className:"text-xs text-muted",children:"Finish balanced and still when you land."})]})]})]}),o.jsxs("button",{onClick:B,className:"w-full bg-primary text-black font-extrabold text-sm py-4 rounded-2xl hover:bg-primary/90 transition-all flex items-center justify-center gap-2",children:[o.jsx($t,{size:18}),"Done"]})]})]}),E&&!s&&o.jsxs("div",{className:"absolute inset-0 z-50 flex items-center justify-center",children:[o.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm"}),o.jsx("button",{type:"button",onClick:U,className:"absolute z-[60] top-[calc(env(safe-area-inset-top)+12px)] left-3 p-2 bg-white/10 rounded-full hover:bg-white/15 active:scale-95 transition","aria-label":"Back",children:o.jsx(Na,{size:20})}),o.jsxs("div",{className:"relative z-[60] w-[min(92%,360px)] rounded-3xl border border-white/10 bg-[#0b0b0d] p-6 shadow-2xl animate-in zoom-in-95 fade-in duration-300",children:[o.jsxs("p",{className:"text-center text-xl font-extrabold text-white mb-2",children:["Unlock results for ",o.jsx("span",{className:"text-[#f98006]",children:"FREE"})]}),o.jsx("p",{className:"text-center text-sm font-semibold text-white/60 mb-6",children:"See your score, strengths and improvements."}),o.jsx("button",{type:"button",onClick:()=>P(!0),className:"w-full rounded-2xl bg-[#f98006] hover:bg-[#f98006]/90 py-4 text-center text-base font-extrabold text-black transition-all shadow-[0_0_20px_rgba(249,128,6,0.4)]",children:"Try for 0.00$"}),o.jsx("p",{className:"mt-4 text-center text-[11px] font-semibold text-white/40",children:"You can cancel anytime."})]})]}),o.jsx(ON,{isOpen:C&&!s,onRequestClose:()=>{P(!1)},onContinue:()=>{P(!1),A(!1),B()},termsUrl:"https://basketshotai.com/#terms",privacyUrl:"https://basketshotai.com/#privacy"})]});return o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"relative h-[100dvh] bg-background text-white max-w-md mx-auto overflow-hidden",children:[a!=="analyzing"&&o.jsx("button",{onClick:a==="selection"?e:H,className:"absolute z-50 top-[calc(env(safe-area-inset-top)+12px)] left-3 p-2 bg-white/5 rounded-full hover:bg-white/10 active:scale-95 transition","aria-label":"Back",type:"button",children:o.jsx(Na,{size:20})}),a==="selection"&&F(),a==="source"&&de(),a==="preview"&&pe(),a==="analyzing"&&Ne(),a==="results"&&T()]}),p&&o.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[o.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:()=>y(!1)}),o.jsxs("div",{className:"relative bg-[#141414] w-full max-w-lg rounded-3xl border border-white/10 p-6 shadow-2xl animate-in zoom-in-95 fade-in duration-300 max-h-[90vh] overflow-y-auto no-scrollbar",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsxs("h3",{className:"font-extrabold text-lg tracking-tight flex items-center gap-2",children:[o.jsx(Ea,{size:20,className:"text-primary"}),"Recording Tips"]}),o.jsx("button",{onClick:()=>y(!1),className:"p-2 bg-white/5 rounded-full hover:bg-white/10",children:o.jsx(qn,{size:20})})]}),o.jsxs("div",{className:"relative w-full aspect-video bg-black rounded-2xl overflow-hidden mb-6 border border-white/10 group cursor-pointer",children:[o.jsx("img",{src:"https://images.unsplash.com/photo-1505666287802-931dc83948e9?auto=format&fit=crop&w=600&q=80",alt:"Basketball Form Example",className:"w-full h-full object-cover opacity-60 group-hover:opacity-40 transition-opacity"}),o.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:o.jsx("div",{className:"w-16 h-16 rounded-full bg-primary/90 text-black flex items-center justify-center shadow-[0_0_30px_rgba(249,128,6,0.4)] transition-transform group-hover:scale-110",children:o.jsx(ds,{size:24,fill:"currentColor"})})}),o.jsx("div",{className:"absolute bottom-3 right-3 bg-black/80 px-2 py-1 rounded text-[10px] font-bold",children:"0:15 Example"})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex gap-4",children:[o.jsx("div",{className:"mt-1",children:o.jsx($t,{size:20,className:"text-green-500"})}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-bold text-sm text-white",children:"Full Body Visibility"}),o.jsx("p",{className:"text-xs text-muted mt-1 leading-relaxed",children:"Ensure the camera captures you from head to toe, including the jump and landing."})]})]}),o.jsxs("div",{className:"flex gap-4",children:[o.jsx("div",{className:"mt-1",children:o.jsx($t,{size:20,className:"text-green-500"})}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-bold text-sm text-white",children:"Side Profile Angle"}),o.jsx("p",{className:"text-xs text-muted mt-1 leading-relaxed",children:"Record from a 90-degree side angle for the best analysis of your release point and elbow alignment."})]})]})]}),o.jsx("button",{onClick:()=>y(!1),className:"w-full mt-8 bg-surface border border-white/10 hover:bg-white/5 text-white font-bold py-3.5 rounded-xl transition-colors text-sm",children:"Got it"})]})]}),v&&h&&o.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[o.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:()=>N(!1)}),o.jsxs("div",{className:"relative bg-[#141414] w-full max-w-lg rounded-3xl border border-white/10 p-6 shadow-2xl max-h-[90vh] overflow-y-auto no-scrollbar animate-in zoom-in-95 fade-in duration-300",children:[o.jsx("button",{type:"button",onClick:()=>N(!1),className:"absolute top-4 right-4 p-2 rounded-full bg-white/5 hover:bg-white/10 transition-colors","aria-label":"Close",children:o.jsx(qn,{size:18})}),o.jsx("h3",{className:"text-lg font-extrabold mb-6 pr-8",children:"Full Breakdown"}),L&&o.jsx("div",{className:"text-xs text-white/40 text-center mb-4",children:"Enhancing analysis with AI..."}),Q&&!L&&o.jsxs("div",{className:"text-xs text-white/40 text-center mb-4 flex items-center justify-center gap-1",children:[o.jsx(Tr,{size:11})," AI-enhanced analysis"]}),o.jsxs("div",{className:"space-y-6",children:[h.strengths&&h.strengths.length>0&&o.jsxs("div",{children:[o.jsxs("h4",{className:"text-sm font-bold text-green-500 uppercase tracking-widest mb-3 flex items-center gap-2",children:[o.jsx($t,{size:16})," Strengths"]}),o.jsx("ul",{className:"space-y-2",children:h.strengths.map((_,S)=>o.jsxs("li",{className:"flex gap-3 text-sm font-medium text-white/90 leading-relaxed",children:[o.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-green-500 mt-2 flex-shrink-0"}),o.jsx("span",{children:_})]},`s-${S}`))})]}),h.improvements&&h.improvements.length>0&&o.jsxs("div",{children:[o.jsxs("h4",{className:"text-sm font-bold text-primary uppercase tracking-widest mb-3 flex items-center gap-2",children:[o.jsx(Qo,{size:16})," Areas to Improve"]}),o.jsx("div",{className:"space-y-3",children:h.improvements.map((_,S)=>o.jsx("div",{className:"bg-black/20 rounded-2xl p-4 border border-white/5",children:o.jsx("p",{className:"text-sm font-medium text-white/90 leading-relaxed whitespace-pre-line",children:_})},`i-${S}`))})]})]}),o.jsx("button",{onClick:()=>N(!1),className:"w-full mt-6 bg-surface border border-white/10 hover:bg-white/5 text-white font-bold py-3.5 rounded-xl transition-colors text-sm",children:"Close"})]})]})]})}const $N=({onSelect:e})=>{const[t,r]=b.useState(0),n=b.useRef(null),s=Aa.length,i=c=>{n.current=c.touches[0].clientX},a=c=>{if(n.current===null)return;const u=c.changedTouches[0].clientX,d=n.current-u,f=20,h=80;if(Math.abs(d)>f){const m=d>0?1:-1,x=Math.abs(d),w=1+Math.floor((x-f)/h),k=Math.min(w,3);r(g=>((g+k*m)%s+s)%s)}n.current=null},l=c=>{let u=c-t;return u>s/2&&(u-=s),u<-s/2&&(u+=s),u};return o.jsxs("div",{className:"mt-8 mb-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4 px-1",children:[o.jsx("h3",{className:"text-lg font-bold",children:"Trending Drills"}),o.jsx("span",{className:"text-xs text-muted font-semibold cursor-pointer hover:text-white transition-colors"})]}),o.jsx("div",{className:"relative h-[240px] w-full flex items-center justify-center overflow-hidden touch-pan-y",onTouchStart:i,onTouchEnd:a,children:Aa.map((c,u)=>{const d=l(u),f=d===0,h=d===-1,m=d===1;let x="opacity-0 scale-75 z-0 translate-x-0 pointer-events-none";return f?x="opacity-100 scale-100 z-30 translate-x-0 shadow-2xl border-primary/30":h?x="opacity-40 scale-90 z-20 -translate-x-[90%] blur-[1px]":m?x="opacity-40 scale-90 z-20 translate-x-[90%] blur-[1px]":d===-2||t===0&&u===s-2||t===1&&u===s-1?x="opacity-0 scale-75 z-0 -translate-x-[180%]":(d===2||t===s-1&&u===1||t===s-2&&u===0)&&(x="opacity-0 scale-75 z-0 translate-x-[180%]"),o.jsxs("div",{onClick:()=>f&&e(c),className:`absolute w-[80%] h-full rounded-3xl overflow-hidden border border-white/10 bg-[#1a1a1a] transition-all duration-500 ease-out cursor-pointer ${x}`,children:[o.jsx("img",{src:c.image,alt:c.title,className:"absolute inset-0 w-full h-full object-cover z-0"}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black via-black/40 to-transparent z-10"}),o.jsx("div",{className:"absolute top-4 right-4 z-20",children:o.jsx("span",{className:"bg-primary text-black text-[10px] font-bold px-3 py-1.5 rounded-full uppercase tracking-wider shadow-lg",children:"Trending"})}),o.jsxs("div",{className:"absolute bottom-0 left-0 p-6 w-full z-20",children:[o.jsxs("div",{className:"flex gap-2 mb-2",children:[o.jsx("span",{className:"text-[10px] bg-white/20 backdrop-blur-md text-white font-bold px-2 py-0.5 rounded-full inline-block",children:c.duration}),o.jsx("span",{className:"text-[10px] bg-white/20 backdrop-blur-md text-white font-bold px-2 py-0.5 rounded-full inline-block",children:c.intensity})]}),o.jsx("h4",{className:"text-2xl font-extrabold leading-tight mb-2 drop-shadow-md",children:c.title}),f&&o.jsxs("div",{className:"flex items-center gap-2 text-primary text-xs font-bold uppercase tracking-wide mt-1 animate-pulse",children:[o.jsx("span",{children:"Start Now"}),o.jsx(sn,{size:16,strokeWidth:3})]})]})]},u)})})]})};function DN(){const e=new Date,t=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),n=String(e.getDate()).padStart(2,"0");return`${t}-${r}-${n}`}function MN(){try{const e=localStorage.getItem("bs_today_minutes_v1");if(!e)return 0;const t=JSON.parse(e);return t.date!==DN()?0:typeof t.minutes=="number"?t.minutes:0}catch{return 0}}function FN(){try{const e=localStorage.getItem("bs_week_minutes_v1");if(!e)return 0;const t=JSON.parse(e);return typeof t!="object"?0:Object.values(t).reduce((r,n)=>r+(typeof n=="number"?n:0),0)}catch{return 0}}async function UN(e){const[t,r]=await Promise.all([_e.from("profiles").select("full_name, onboarding_data").eq("id",e).maybeSingle(),Uw(e).catch(()=>[])]),n=t.data,s=(n==null?void 0:n.onboarding_data)??{},i=((n==null?void 0:n.full_name)??s.name??"Unknown").slice(0,40),a=(s.level??"n/a").slice(0,20),l=(s.position??"n/a").slice(0,20),c=Array.isArray(s.attributes)?s.attributes.slice(0,3).join(", "):"n/a",u=Array.isArray(s.improvements)?s.improvements.slice(0,3).join(", "):"n/a";let d=null;try{const p=localStorage.getItem(`basketshot_analyses_${e}`);if(p){const y=JSON.parse(p);Array.isArray(y)&&y.length&&(d=y[0])}}catch{}const f=MN(),h=FN(),m=(r??[]).slice(0,10),x=m.filter(p=>p.result==="win").length,w=m.filter(p=>p.result==="loss").length,k=m.length?`${m.length} games: ${x}W-${w}L. `+m.slice(0,5).map(p=>`${p.entry_date}: ${p.result??"n/a"} P${p.points??0}/R${p.rebounds??0}/A${p.assists??0}`).join(" | "):"none",g=d?`Last shot analysis: ${d.shot_type??"n/a"}, score ${d.score??"n/a"}. Strengths: ${(d.strengths??[]).slice(0,2).join(", ")||"n/a"}. Improvements: ${(d.improvements??[]).slice(0,2).join(", ")||"n/a"}.`:"Last shot analysis: none.";return[`Player: ${i}. Level: ${a}. Position: ${l}.`,`Strong at: ${c}. Wants to improve: ${u}.`,`Workouts: today ${f} min, week ${h} min.`,g,`Recent games: ${k}.`].join(`
`).slice(0,1200)}async function zN(e,t){const{data:r,error:n}=await _e.auth.getSession();if(n||!(r!=null&&r.session))return"Please sign in to use AI Coach.";const{data:s,error:i}=await _e.functions.invoke("coach-chat",{body:{messages:e.slice(-12),context:t}});if(i)throw i;return((s==null?void 0:s.reply)??"").trim()||"I had trouble responding. Please try again."}const BN=["How can I improve my free throw consistency?","Give me a 20-minute workout for my weakest area.","What should I focus on after my last game?","How do I fix my shooting form step by step?"],WN="https://images.unsplash.com/photo-1521412644187-c49fa049e84d?auto=format&fit=crop&w=200&q=80";function O1(e){return`coach_chat_${e}`}function VN({onClose:e}){const{user:t}=xr(),r=t==null?void 0:t.id,[n,s]=b.useState([]),[i,a]=b.useState(""),[l,c]=b.useState(!1),u=b.useRef(null),d=b.useRef(null);b.useEffect(()=>{if(r)try{const x=localStorage.getItem(O1(r));if(x){const w=JSON.parse(x);Array.isArray(w)&&s(w.slice(-50))}}catch{}},[r]),b.useEffect(()=>{r&&localStorage.setItem(O1(r),JSON.stringify(n.slice(-50)))},[n,r]),b.useEffect(()=>{var x;(x=u.current)==null||x.scrollTo({top:u.current.scrollHeight,behavior:"smooth"})},[n,l]);const f=!!r&&i.trim().length>0&&!l;async function h(x){var g;if(!r)return;const w=x.trim();if(!w||l)return;const k=[...n,{role:"user",text:w}].slice(-50);s(k),a(""),c(!0);try{const p=await UN(r),y=await zN(k.slice(-12),p);s(v=>[...v,{role:"model",text:y}].slice(-50))}catch{s(p=>[...p,{role:"model",text:"I had trouble responding. Please try again."}].slice(-50))}finally{c(!1),(g=d.current)==null||g.focus()}}function m(x){x.key==="Enter"&&f&&h(i)}return o.jsxs("div",{className:"fixed inset-0 z-[110] bg-background flex flex-col",children:[o.jsx("div",{className:"flex-shrink-0 px-6 pt-6 pb-4 border-b border-white/5",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[o.jsx("div",{className:"relative w-12 h-12 rounded-full border-2 border-primary p-0.5 flex-shrink-0",children:o.jsx("img",{src:WN,alt:"AI Coach",className:"w-full h-full rounded-full object-cover",loading:"lazy"})}),o.jsx("div",{className:"min-w-0",children:o.jsx("div",{className:"text-lg font-extrabold text-white leading-tight truncate",children:"Bryce, your AI Coach"})})]}),o.jsx("button",{type:"button",onClick:e,className:"h-10 w-10 rounded-2xl bg-white/5 border border-white/10 text-white/80 flex items-center justify-center active:scale-95 transition-transform","aria-label":"Close",children:o.jsx(qn,{className:"h-4 w-4"})})]})}),o.jsxs("div",{ref:u,className:"flex-1 overflow-y-auto no-scrollbar px-6 py-5 space-y-3",children:[n.length===0&&o.jsx("div",{className:"rounded-3xl bg-surface border border-white/5 p-5 text-white/60 text-sm font-semibold leading-relaxed",children:"Ask me anything about your training, games, or shooting form. Use the suggestions below to get started."}),n.map((x,w)=>o.jsx("div",{className:x.role==="user"?"flex justify-end":"flex justify-start",children:o.jsx("div",{className:["max-w-[85%] rounded-3xl px-4 py-3 text-sm leading-relaxed border",x.role==="user"?"bg-primary text-black border-primary/30 font-semibold":"bg-surface text-white/85 border-white/10 font-semibold"].join(" "),children:x.text})},w)),l&&o.jsx("div",{className:"flex justify-start",children:o.jsx("div",{className:"max-w-[85%] rounded-3xl px-4 py-4 text-sm border bg-surface border-white/10",children:o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx("span",{className:"h-2 w-2 rounded-full bg-white/30 animate-bounce [animation-delay:0ms]"}),o.jsx("span",{className:"h-2 w-2 rounded-full bg-white/30 animate-bounce [animation-delay:150ms]"}),o.jsx("span",{className:"h-2 w-2 rounded-full bg-white/30 animate-bounce [animation-delay:300ms]"})]})})})]}),n.length===0&&o.jsx("div",{className:"flex-shrink-0 px-6 pt-4",children:o.jsx("div",{className:"flex flex-col gap-2",children:BN.map(x=>o.jsx("button",{type:"button",onClick:()=>h(x),disabled:l,className:["w-full text-left px-4 py-3 rounded-2xl bg-white/5 border border-white/10","text-xs font-extrabold text-white/80 active:scale-[0.99] transition-transform"].join(" "),children:x},x))})}),o.jsx("div",{className:"flex-shrink-0 px-6 pb-8 pt-4 border-t border-white/5 bg-background",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("input",{ref:d,value:i,onChange:x=>a(x.target.value),onKeyDown:m,placeholder:"Ask your coach...",className:"flex-1 rounded-2xl bg-white/5 border border-white/10 px-4 py-4 text-sm font-semibold text-white placeholder:text-white/30 focus:outline-none focus:border-white/20"}),o.jsx("button",{type:"button",onClick:()=>h(i),disabled:!f,className:["rounded-2xl px-5 py-4 text-sm font-extrabold transition-all",f?"bg-primary text-black active:scale-95":"bg-white/10 text-white/30 cursor-not-allowed"].join(" "),children:"Send"})]})})]})}function oc(e,t,r){return Math.max(t,Math.min(r,e))}function HN(e){return e<=29?"text-red-400":e<=49?"text-yellow-300":e<=59?"text-orange-400":e<=69?"text-green-400":e<=79?"text-green-700":"text-purple-400"}function GN(e){return e>0?"text-green-400":e<0?"text-red-400":"text-white/60"}function KN(e,t,r,n){const s=e.filter(h=>Number.isFinite(h));if(s.length===0)return{line:"",area:""};const i=1,a=100,l=t-n*2,c=r-n*2,u=s.map((h,m)=>{const x=n+l*(s.length===1?0:m/(s.length-1)),w=(oc(h,i,a)-i)/(a-i),k=n+(1-w)*c;return{x,y:k}}),d=u.map((h,m)=>`${m===0?"M":"L"} ${h.x.toFixed(2)} ${h.y.toFixed(2)}`).join(" "),f=`${d} L ${u[u.length-1].x.toFixed(2)} ${(r-n).toFixed(2)} L ${u[0].x.toFixed(2)} ${(r-n).toFixed(2)} Z`;return{line:d,area:f}}function Wl({variant:e,label:t,lastScore:r,sparklineScores:n,onClick:s}){const i=(n??[]).filter(p=>typeof p=="number"&&Number.isFinite(p)).slice(0,5),a=i.slice().reverse(),l=i[0],c=i[1],u=typeof l=="number"?oc(l,1,100):null,d=a.length===1&&u!==null?[1,u]:a.map(p=>oc(p,1,100)),f=220,h=56,m=6,{line:x,area:w}=KN(d,f,h,m),k=typeof l=="number"&&typeof c=="number"?l-c:0,g=GN(k);if(e==="score"){const p=typeof r=="number"?oc(r,0,100):0,y=typeof r=="number"?HN(r):"text-white/20";return o.jsxs("button",{type:"button",onClick:s,className:"w-full rounded-3xl border border-white/10 bg-white/5 p-5 text-center shadow-[0_10px_30px_rgba(0,0,0,0.18)] active:scale-[0.99]",children:[o.jsx("div",{className:"text-4xl font-black text-white leading-none",children:typeof r=="number"?r:"-"}),o.jsx("div",{className:"mt-3",children:o.jsx("div",{className:"h-2 w-full rounded-full bg-white/10 overflow-hidden",children:o.jsx("div",{className:`h-full rounded-full ${y}`,style:{width:`${p}%`,backgroundColor:"currentColor"}})})}),o.jsx("div",{className:"mt-3 text-[11px] font-black tracking-[0.22em] text-white/70",children:t}),typeof r!="number"?o.jsx("div",{className:"mt-2 text-[11px] text-white/60",children:"Not analyzed yet"}):null]})}return o.jsxs("button",{type:"button",onClick:s,className:"w-full rounded-3xl border border-white/10 bg-white/5 p-4 text-left shadow-[0_10px_30px_rgba(0,0,0,0.18)] active:scale-[0.99]",children:[o.jsx("div",{className:"text-[11px] font-black tracking-[0.22em] text-white/70",children:"TREND"}),o.jsx("div",{className:"mt-3",children:i.length>0?o.jsxs("svg",{width:"100%",viewBox:`0 0 ${f} ${h}`,className:`block w-full ${g}`,"aria-label":"Score trend",role:"img",children:[o.jsx("path",{d:w,fill:"currentColor",opacity:"0.18"}),o.jsx("path",{d:x,fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinejoin:"round",strokeLinecap:"round"})]}):o.jsx("div",{className:"h-[56px] rounded-2xl bg-white/5"})})]})}function qN(e){return e==="3pt"?"Jumpshot (3PT)":"Free Throw"}function R1(e){try{return new Date(e).toLocaleString(void 0,{year:"numeric",month:"short",day:"2-digit",hour:"2-digit",minute:"2-digit"})}catch{return e}}function YN({userId:e,shotType:t,onBack:r,onOpenAnalysis:n}){const[s,i]=b.useState([]),[a,l]=b.useState(!1),[c,u]=b.useState(null);b.useEffect(()=>{let h=!1;async function m(){if(!e){i([]);return}l(!0),u(null);try{const x=await ff(e,t,20);h||i(x??[])}catch(x){h||u((x==null?void 0:x.message)??"Failed to load analyses")}finally{h||l(!1)}}return m(),()=>{h=!0}},[e,t]);const d=s[0]??null,f=b.useMemo(()=>s.slice(1),[s]);return o.jsxs("div",{className:"px-6 pb-28",children:[o.jsx("div",{className:"sticky top-0 z-10 -mx-6 px-6 pt-6 pb-4 bg-black/30 backdrop-blur-md",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("button",{type:"button",onClick:r,className:"rounded-2xl border border-white/10 bg-white/5 px-3 py-2 text-sm font-semibold text-white active:scale-[0.99]",children:"Back"}),o.jsxs("div",{className:"text-sm font-semibold text-white",children:[qN(t)," History"]}),o.jsx("div",{className:"w-[64px]"})]})}),a?o.jsx("div",{className:"mt-6 text-sm text-white/70",children:"Loading"}):c?o.jsx("div",{className:"mt-6 rounded-2xl border border-white/10 bg-white/5 p-4 text-sm text-white/80",children:c}):s.length===0?o.jsxs("div",{className:"mt-6 rounded-3xl border border-white/10 bg-white/5 p-6",children:[o.jsx("div",{className:"text-3xl font-black text-white",children:"-"}),o.jsx("div",{className:"mt-1 text-sm font-semibold text-white",children:"Not analyzed yet"}),o.jsx("div",{className:"mt-2 text-[12px] text-white/60",children:"Analyze this shot to see your progress here."})]}):o.jsxs(o.Fragment,{children:[d?o.jsxs("button",{type:"button",onClick:()=>n(d),className:"mt-4 w-full rounded-3xl border border-white/10 bg-white/5 p-5 text-left shadow-[0_14px_40px_rgba(0,0,0,0.20)] active:scale-[0.99]",children:[o.jsxs("div",{className:"flex items-start justify-between gap-3",children:[o.jsxs("div",{className:"min-w-0",children:[o.jsx("div",{className:"text-[12px] text-white/60",children:"Latest"}),o.jsx("div",{className:"mt-1 text-sm font-semibold text-white",children:R1(d.created_at)})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-3xl font-black text-white leading-none",children:d.score??"-"}),o.jsx("div",{className:"mt-1 text-[11px] text-white/60",children:"Score"})]})]}),o.jsx("div",{className:"mt-4 text-[12px] text-white/60",children:"Tap to open results"})]}):null,o.jsx("div",{className:"mt-4 space-y-3",children:f.map(h=>o.jsx("button",{type:"button",onClick:()=>n(h),className:"w-full rounded-3xl border border-white/10 bg-white/5 p-4 text-left active:scale-[0.99]",children:o.jsxs("div",{className:"flex items-start justify-between gap-3",children:[o.jsxs("div",{className:"min-w-0",children:[o.jsx("div",{className:"text-sm font-semibold text-white",children:R1(h.created_at)}),o.jsx("div",{className:"mt-1 text-[12px] text-white/60",children:"Tap to open results"})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-2xl font-black text-white leading-none",children:h.score??"-"}),o.jsx("div",{className:"mt-1 text-[11px] text-white/60",children:"Score"})]})]})},h.id))})]})]})}function JN(){const e=new Date,t=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),n=String(e.getDate()).padStart(2,"0");return`${t}-${r}-${n}`}function L1(){try{const e=localStorage.getItem("bs_today_minutes_v1");if(!e)return 0;const t=JSON.parse(e);return t.date!==JN()?0:typeof t.minutes=="number"?t.minutes:0}catch{return 0}}const QN=[{id:"1",title:"3-Point Shooting",timestamp:"JUST NOW",score:"82%",accuracy:82},{id:"2",title:"Free Throw Routine",timestamp:"2H AGO",score:"94%",accuracy:94},{id:"3",title:"Mid-Range Pullups",timestamp:"5H AGO",score:"78%",accuracy:78},{id:"4",title:"Defensive Slides",timestamp:"YESTERDAY",score:"100%",accuracy:100},{id:"5",title:"Ball Handling",timestamp:"YESTERDAY",score:"65%",accuracy:65},{id:"6",title:"Post Moves",timestamp:"2 DAYS AGO",score:"88%",accuracy:88},{id:"7",title:"Layup Package",timestamp:"3 DAYS AGO",score:"92%",accuracy:92},{id:"8",title:"Cardio & Agility",timestamp:"4 DAYS AGO",score:"Done",accuracy:100}],XN=()=>{var H;const{session:e,profile:t,loading:r}=xr(),{isPremium:n,loading:s}=au(),[i,a]=b.useState("home"),[l,c]=b.useState(!1),[u,d]=b.useState(QN),[f,h]=b.useState("today"),[m,x]=b.useState(null),[w,k]=b.useState(()=>L1()),[g,p]=b.useState(null),[y,v]=b.useState([]),[N,E]=b.useState([]),[A,C]=b.useState(null),[P,L]=b.useState(null);b.useEffect(()=>{const U=()=>k(L1());window.addEventListener("storage",U);const F=setInterval(U,500);return()=>{window.removeEventListener("storage",U),clearInterval(F)}},[]);const $=((H=e==null?void 0:e.user)==null?void 0:H.id)??null;b.useEffect(()=>{let U=!1;async function F(){if(!$){v([]),E([]),C(null),L(null);return}try{const[de,pe]=await Promise.all([ff($,"3pt",5),ff($,"ft",5)]);if(U)return;const Ne=(de??[]).map(_=>_.score).filter(_=>typeof _=="number"),T=(pe??[]).map(_=>_.score).filter(_=>typeof _=="number");v(Ne),E(T),C(Ne[0]??null),L(T[0]??null)}catch{U||(v([]),E([]),C(null),L(null))}}return F(),()=>{U=!0}},[$]);const Q=U=>{i==="workout"&&U!=="workout"&&x(null),i==="shot-analyses-list"&&U!=="shot-analyses-list"&&p(null),a(U)},ee=()=>Q("home"),ue=b.useMemo(()=>{const U=u.length,F=u.filter(S=>typeof S.accuracy=="number"),de=F.reduce((S,M)=>S+M.accuracy,0),pe=F.length>0?Math.round(de/F.length):0,Ne=u.reduce((S,M)=>S+(typeof M.duration=="number"?M.duration:0),0);let T=1,_=0;return f==="week"?(T=1,_=-2):f==="month"&&(T=4,_=3),{accuracy:Math.min(100,Math.max(0,pe+_)),sessionsCompleted:f==="today"?3:U*T,totalTime:f==="today"?w:Math.round(Ne*T)}},[u,f,w]);if(console.log("[APP] state",{loading:r,hasSession:!!e,hasProfile:!!t,onboarding_completed:t==null?void 0:t.onboarding_completed,isPremium:n,revenueCatLoading:s,currentView:i,ts:Date.now()}),r||s)return o.jsx("div",{className:"min-h-screen bg-background text-white max-w-md mx-auto flex items-center justify-center",children:o.jsx("div",{className:"text-sm text-muted font-bold",children:"Loading..."})});if(!e)return o.jsx(p5,{});if(!t)return o.jsx("div",{className:"min-h-screen bg-background text-white max-w-md mx-auto flex items-center justify-center",children:o.jsx("div",{className:"text-sm text-muted font-bold",children:"Loading profile..."})});if(!t.onboarding_completed&&i!=="onboarding-shot-analysis")return o.jsx(I1,{onNavigate:a});const he=U=>{let F=100,de="Done";U.shotsAttempted&&U.shotsAttempted>0&&(F=Math.round(U.shotsMade/U.shotsAttempted*100),de=`${F}%`);const pe={id:Date.now().toString(),title:U.title,timestamp:"JUST NOW",score:de,accuracy:F,duration:U.duration};d(Ne=>[pe,...Ne]),ee()},D=U=>{x(U),a("workout")},we=()=>{switch(f){case"week":return"Week";case"month":return"Month";default:return"Today"}},R=()=>{switch(i){case"onboarding":return o.jsx(I1,{onNavigate:a});case"onboarding-shot-analysis":return o.jsx(LN,{onBack:()=>a("onboarding"),onDone:ee});case"add":return o.jsx(vN,{onNavigate:a});case"profile":return o.jsx(xN,{onNavigate:a});case"workout":return o.jsx(nj,{onWorkoutComplete:he,initialWorkout:m,onOpenMyWorkouts:()=>a("my-workouts")});case"my-workouts":return o.jsx(sj,{onBack:()=>a("workout"),onSelectWorkout:U=>{x(U),a("workout")}});case"form":return o.jsx(aN,{});case"diary":return o.jsx(CN,{});case"shot-analyses-list":return o.jsx(YN,{userId:$,shotType:g??"3pt",onBack:()=>a("home"),onOpenAnalysis:U=>{console.log("[ShotAnalysesList] open analysis",U.id)}});case"home":default:return o.jsxs("div",{className:"animate-in fade-in duration-500",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6 mt-2",children:[o.jsxs("h3",{className:"text-2xl font-extrabold tracking-tight",children:[we()," Performance"]}),o.jsxs("div",{className:"relative",children:[o.jsxs("select",{value:f,onChange:U=>h(U.target.value),className:"appearance-none bg-primary/10 text-primary text-[10px] font-black uppercase tracking-widest pl-3 pr-7 py-1.5 rounded-full border border-transparent hover:border-primary/30 focus:outline-none cursor-pointer transition-all",children:[o.jsx("option",{value:"today",children:"Today"}),o.jsx("option",{value:"week",children:"Week"}),o.jsx("option",{value:"month",children:"Month"})]}),o.jsx(k5,{size:12,className:"absolute right-2 top-1/2 -translate-y-1/2 text-primary pointer-events-none",strokeWidth:3})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[o.jsx(kd,{label:"Avg Accuracy",value:ue.accuracy,unit:"%",highlight:!0,fullWidth:!0}),o.jsx(kd,{label:"Workouts",value:ue.sessionsCompleted,subValue:f==="today"?"/ 5":f==="week"?"/ 20":"/ 80"}),o.jsx(kd,{label:"Time",value:ue.totalTime,unit:"M"})]}),o.jsx($N,{onSelect:D}),o.jsxs("div",{className:"mt-4 space-y-3",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsx(Wl,{variant:"score",label:"JUMPSHOT",lastScore:A,sparklineScores:y,onClick:()=>{p("3pt"),a("shot-analyses-list")}}),o.jsx(Wl,{variant:"score",label:"FREE THROW",lastScore:P,sparklineScores:N,onClick:()=>{p("ft"),a("shot-analyses-list")}})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsx(Wl,{variant:"trend",label:"JUMPSHOT",lastScore:A,sparklineScores:y,onClick:()=>{p("3pt"),a("shot-analyses-list")}}),o.jsx(Wl,{variant:"trend",label:"FREE THROW",lastScore:P,sparklineScores:N,onClick:()=>{p("ft"),a("shot-analyses-list")}})]})]}),o.jsx(V5,{onClick:()=>a("form")}),o.jsx(H5,{sessions:u})]})}},B=i==="onboarding"||i==="onboarding-shot-analysis";return o.jsxs("div",{className:"flex flex-col min-h-screen bg-background text-white max-w-md mx-auto shadow-2xl overflow-hidden relative",children:[!B&&i==="home"&&o.jsx(W5,{onOpenCoachChat:()=>c(!0)}),o.jsx("main",{className:`flex-1 px-6 overflow-y-auto no-scrollbar ${B?"":"pb-24"} ${i!=="home"&&!B?"pt-8":""}`,children:R()}),!B&&o.jsx(G5,{currentView:i,onNavigate:Q}),l&&o.jsx(VN,{onClose:()=>c(!1)})]})};window.addEventListener("error",e=>{var t;console.error("[GLOBAL_ERROR]",{message:e.message,filename:e.filename,lineno:e.lineno,colno:e.colno,error:((t=e.error)==null?void 0:t.stack)??e.error??null,ts:new Date().toISOString()})});window.addEventListener("unhandledrejection",e=>{var t;console.error("[GLOBAL_REJECTION]",{reason:((t=e.reason)==null?void 0:t.stack)??e.reason??null,ts:new Date().toISOString()})});window.addEventListener("beforeunload",()=>{console.warn("[GLOBAL] beforeunload (page is reloading/unloading)",{ts:Date.now()})});var $1;try{const e=($1=performance.getEntriesByType("navigation"))==null?void 0:$1[0];console.log("[GLOBAL] navigation",e)}catch{console.log("[GLOBAL] navigation unavailable")}const zw=document.getElementById("root");if(!zw)throw new Error("Could not find root element to mount to");const ZN=Dd.createRoot(zw);ZN.render(o.jsx(Gl.StrictMode,{children:o.jsx(h5,{children:o.jsx(f5,{children:o.jsx(XN,{})})})}));export{hg as P,lg as R,dg as V,za as W,mg as a};
